//# sourceMappingURL=firebase-performance.js.map
if(!function(n,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):(n=n||self).firebase=a()}(this,function(){"use strict";function g(n,a){if(!(a instanceof Object))return a;switch(a.constructor){case Date:return new Date(a.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return a;}for(var t in a)a.hasOwnProperty(t)&&(n[t]=g(n[t],a[t]));return n}function d(n,e){var t=new a(n,e);return t.subscribe.bind(t)}function T(){}var n=function(a,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])})(a,e)},c=function(){return(c=Object.assign||function(a){for(var e=1,i=arguments.length,n;e<i;e++)for(var s in n=arguments[e])Object.prototype.hasOwnProperty.call(n,s)&&(a[s]=n[s]);return a}).apply(this,arguments)},_=function(a){function i(n,e){var t=a.call(this,e)||this;return t.code=n,t.name="FirebaseError",Object.setPrototypeOf(t,i.prototype),Error.captureStackTrace&&Error.captureStackTrace(t,h.prototype.create),t}return function(a,e){function t(){this.constructor=a}n(a,e),a.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(i,a),i}(Error),h=function(){function t(n,e,t){this.service=n,this.serviceName=e,this.errors=t}return t.prototype.create=function(d){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var h=e[0]||{},o=this.service+"/"+d,i=this.errors[d],a=i?(p=h,i.replace(k,function(n,e){var t=p[e];return null==t?"<"+e+"?>":t.toString()})):"Error",s=this.serviceName+": "+a+" ("+o+").",c=new _(o,s),u=0,m=Object.keys(h),p,g;u<m.length;u++)g=m[u],"_"!==g.slice(-1)&&(g in c&&console.warn("Overwriting FirebaseError base field \""+g+"\" can cause unexpected behavior."),c[g]=h[g]);return c},t}(),k=/\{\$([^}]+)}/g,v=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},a=function(){function t(n,e){var t=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){n(t)}).catch(function(n){t.error(n)})}return t.prototype.next=function(n){this.forEachObserver(function(t){t.next(n)})},t.prototype.error=function(n){this.forEachObserver(function(t){t.error(n)}),this.close(n)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(a,e,t){var r=this,o;if(void 0===a&&void 0===e&&void 0===t)throw new Error("Missing Observer.");void 0===(o=function(a,e){if("object"!=typeof a||null===a)return!1;for(var t=0,i=e,n;t<i.length;t++)if(n=i[t],n in a&&"function"==typeof a[n])return!0;return!1}(a,["next","error","complete"])?a:{next:a,error:e,complete:t}).next&&(o.next=T),void 0===o.error&&(o.error=T),void 0===o.complete&&(o.complete=T);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{r.finalError?o.error(r.finalError):o.complete()}catch(t){}}),this.observers.push(o),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(n){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,n)},t.prototype.sendOne=function(n,e){var t=this;this.task.then(function(){if(void 0!==t.observers&&void 0!==t.observers[n])try{e(t.observers[n])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(n){var e=this;this.finalized||(this.finalized=!0,void 0!==n&&(this.finalError=n),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),b,o;(o=b||(b={}))[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";var C=b.INFO,u=function(a,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];if(!(e<a.logLevel)){var i=new Date().toISOString();switch(e){case b.DEBUG:case b.VERBOSE:console.log.apply(console,["["+i+"]  "+a.name+":"].concat(t));break;case b.INFO:console.info.apply(console,["["+i+"]  "+a.name+":"].concat(t));break;case b.WARN:console.warn.apply(console,["["+i+"]  "+a.name+":"].concat(t));break;case b.ERROR:console.error.apply(console,["["+i+"]  "+a.name+":"].concat(t));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");}}},l=function(){function t(t){this.name=t,this._logLevel=C,this._logHandler=u}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in b))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this._logHandler.apply(this,[this,b.DEBUG].concat(n))},t.prototype.log=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this._logHandler.apply(this,[this,b.VERBOSE].concat(n))},t.prototype.info=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this._logHandler.apply(this,[this,b.INFO].concat(n))},t.prototype.warn=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this._logHandler.apply(this,[this,b.WARN].concat(n))},t.prototype.error=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this._logHandler.apply(this,[this,b.ERROR].concat(n))},t}(),p=((E={})["no-app"]="No Firebase App '{$name}' has been created - call Firebase App.initializeApp()",E["bad-app-name"]="Illegal App name: '{$name}",E["duplicate-app"]="Firebase App named '{$name}' already exists",E["app-deleted"]="Firebase App named '{$name}' already deleted",E["duplicate-service"]="Firebase service named '{$name}' already registered",E["invalid-app-argument"]="firebase.{$name}() takes either no argument or a Firebase App instance.",E),S=new h("app","Firebase",p),y=[],f=function(){function t(n,e,t){this.firebase_=t,this.isDeleted_=!1,this.services_={},this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=g(void 0,n),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){y.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(n){y=y.filter(function(t){return t!==n})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var d=this;return new Promise(function(t){d.checkDestroyed_(),t()}).then(function(){d.firebase_.INTERNAL.removeApp(d.name_);for(var s=[],e=0,l=Object.keys(d.services_);e<l.length;e++)for(var r=l[e],n=0,p=Object.keys(d.services_[r]),i;n<p.length;n++)i=p[n],s.push(d.services_[r][i]);return Promise.all(s.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))}).then(function(){d.isDeleted_=!0,d.services_={}})},t.prototype._getService=function(a,e){if(void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.services_[a]||(this.services_[a]={}),!this.services_[a][e]){var o=e==="[DEFAULT]"?void 0:e,r=this.firebase_.INTERNAL.factories[a](this,this.extendApp.bind(this),o);this.services_[a][e]=r}return this.services_[a][e]},t.prototype.extendApp=function(n){var a=this;g(this,n),n.INTERNAL&&n.INTERNAL.addAuthTokenListener&&(y.forEach(function(t){a.INTERNAL.addAuthTokenListener(t)}),y=[])},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw S.create("app-deleted",{name:this.name_})},t}(),E;f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");var I=new l("@firebase/app");if("object"==typeof self&&self.self===self&&"firebase"in self){I.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var D=self.firebase.SDK_VERSION;D&&0<=D.indexOf("LITE")&&I.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var x=function n(){var a=function(d){function t(t){if(!v(m,t=t||"[DEFAULT]"))throw S.create("no-app",{name:t});return m[t]}function a(){return Object.keys(m).map(function(t){return m[t]})}function p(a,e){for(var t=0,i=Object.keys(s),n;t<i.length;t++){if(n=h(0,i[t]),null===n)return;c[n]&&c[n](e,a)}}function h(n,e){return"serverAuth"===e?null:e}var m={},s={},c={},u={__esModule:!0,initializeApp:function(a,e){if(void 0===e&&(e={}),"object"!=typeof e||null===e){var s=e;e={name:s}}var r=e;void 0===r.name&&(r.name="[DEFAULT]");var n=r.name;if("string"!=typeof n||!n)throw S.create("bad-app-name",{name:n+""});if(v(m,n))throw S.create("duplicate-app",{name:n});var o=new d(a,r,u);return p(m[n]=o,"create"),o},app:t,apps:null,SDK_VERSION:"6.2.0",INTERNAL:{registerService:function(l,r,e,p,n){function h(n){if(void 0===n&&(n=t()),"function"!=typeof n[l])throw S.create("invalid-app-argument",{name:l});return n[l]()}if(void 0===n&&(n=!1),s[l])throw S.create("duplicate-service",{name:l});return s[l]=r,p&&(c[l]=p,a().forEach(function(t){p("create",t)})),void 0!==e&&g(h,e),u[l]=h,d.prototype[l]=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];return this._getService.bind(this,l).apply(this,n?a:[])},h},removeApp:function(t){p(m[t],"delete"),delete m[t]},factories:s,useAsService:h}};return u.default=u,Object.defineProperty(u,"apps",{get:a}),t.App=d,u}(f);return a.INTERNAL=c({},a.INTERNAL,{createFirebaseNamespace:n,extendNamespace:function(t){g(a,t)},createSubscribe:d,ErrorFactory:h,deepExtend:g}),a}(),w=x.initializeApp;return x.initializeApp=function(){return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&I.warn("\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the \"main\" field in package.json.\n      \n      If you are using Webpack, you can specify \"main\" as the first item in\n      \"resolve.mainFields\":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and set \"module\"\n      to false and \"main\" to true:\n      https://github.com/rollup/rollup-plugin-node-resolve\n      "),w.apply(void 0,arguments)},x}),!function(n,a){"object"==typeof exports&&"undefined"!=typeof module?a(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],a):a((n=n||self).firebase)}(this,function(d){"use strict";var Vt=Math.floor,Ut=Math.max;try{(function(){d=d&&d.hasOwnProperty("default")?d.default:d,function(){function ai(a){var t="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator],o,r;return t?t.call(a):{next:(o=a,r=0,function(){return r<o.length?{done:!1,value:o[r++]}:{done:!0}})}}function c(e){return"string"==typeof e}function r(e){return"boolean"==typeof e}function h(){}function ed(a){var t=typeof a;if("object"==t){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return t;var e=Object.prototype.toString.call(a);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===a.call)return"object";return t}function n(e){return null===e}function p(e){return"array"==ed(e)}function s(n){var t=ed(n);return"array"==t||"object"==t&&"number"==typeof n.length}function m(e){return"function"==ed(e)}function g(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}function i(e){return e.call.apply(e.bind,arguments)}function y(a,e){if(!a)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,n),a.apply(e,o)}}return function(){return a.apply(e,arguments)}}function b(){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:y).apply(null,arguments)}function v(a){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),a.apply(this,n)}}function T(n,a){function t(){}t.prototype=a.prototype,n.qb=a.prototype,n.prototype=new t,(n.prototype.constructor=n).cd=function(n,t){for(var e=Array(arguments.length-2),o=2;o<arguments.length;o++)e[o-2]=arguments[o];return a.prototype[t].apply(n,e)}}function E(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function S(n){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var t=Error().stack;t&&(this.stack=t)}n&&(this.message=n+"")}function w(a,o){for(var e="",s=(a=a.split("%s")).length-1,i=0;i<s;i++)e+=a[i]+(i<o.length?o[i]:"%s");S.call(this,e+a[s])}function A(e){throw new w("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function N(n,t){this.c=n,this.f=t,this.b=0,this.a=null}function _(n,t){n.f(t),100>n.b&&(n.b++,t.next=n.a,n.a=t)}function O(){this.b=this.a=null}function C(){this.next=this.b=this.a=null}function D(n,t){return 0<=R(n,t)}function P(a,t){var o;return(o=0<=(t=R(a,t)))&&Array.prototype.splice.call(a,t,1),o}function V(a,n){!function(a,t){for(var e=c(a)?a.split(""):a,n=a.length-1;0<=n;--n)n in e&&t.call(void 0,e[n],n,a)}(a,function(o,t){n.call(void 0,o,t,a)&&1==Array.prototype.splice.call(a,t,1).length})}function U(){return Array.prototype.concat.apply([],arguments)}function F(a){var t=a.length;if(0<t){for(var e=Array(t),n=0;n<t;n++)e[n]=a[n];return e}return[]}function q(n,t){return-1!=n.indexOf(t)}function K(n,t){return n<t?-1:t<n?1:0}function Q(e){return q(bp,e)}function Z(a,t){for(var e in a)t.call(void 0,a[e],e,a)}function nt(n){for(var t in n)return!1;return!0}function rt(a){var t={},n;for(n in a)t[n]=a[n];return t}function ot(e){for(var t=1,a,s;t<arguments.length;t++){for(a in s=arguments[t])e[a]=s[a];for(var d=0;d<et.length;d++)a=et[d],Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}}function it(e){for(var t=e.split("%s"),n="",a=Array.prototype.slice.call(arguments,1);a.length&&1<t.length;)n+=t.shift()+a.shift();return n+t.join("%s")}function ct(e){return Y.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(B,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(G,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(W,"&gt;")),-1!=e.indexOf("\"")&&(e=e.replace(X,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(J,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(z,"&#0;"))),e}function lt(e){yp.setTimeout(function(){throw e},0)}function ht(n,t){_p||function(){if(yp.Promise&&yp.Promise.resolve){var e=yp.Promise.resolve(void 0);_p=function(){e.then(dt)}}else _p=function(){var e=dt;!m(yp.setImmediate)||yp.Window&&yp.Window.prototype&&!Q("Edge")&&yp.Window.prototype.setImmediate==yp.setImmediate?(wt||(wt=function(){var a=yp.MessageChannel;if(void 0===a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Q("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none",a.src="",document.documentElement.appendChild(a);var o=a.contentWindow;(a=o.document).open(),a.write(""),a.close();var e="callImmediate"+Math.random(),n="file:"==o.location.protocol?"*":o.location.protocol+"//"+o.location.host;a=b(function(a){"*"!=n&&a.origin!=n||a.data!=e||this.port1.onmessage()},this),o.addEventListener("message",a,!1),this.port1={},this.port2={postMessage:function(){o.postMessage(e,n)}}}),void 0===a||Q("Trident")||Q("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(n){var a=document.createElement("SCRIPT");a.onreadystatechange=function(){a.onreadystatechange=null,a.parentNode.removeChild(a),a=null,n(),n=null},document.documentElement.appendChild(a)}:function(e){yp.setTimeout(e,0)};var o=new a,e={},r=e;return o.port1.onmessage=function(){if(void 0!==e.next){var n=(e=e.next).yb;e.yb=null,n()}},function(e){r.next={yb:e},r=r.next,o.port2.postMessage(0)}}()),wt(e)):yp.setImmediate(e)}}(),ut||(_p(),ut=!0),Tp.add(n,t)}function dt(){for(var a;r=o=void 0,r=null,(o=Tp).a&&(r=o.a,o.a=o.a.next,o.a||(o.b=null),r.next=null),a=r;){try{a.a.call(a.b)}catch(e){lt(e)}_(k,a)}var o,r;ut=!1}function mt(a,t){if(this.a=vt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,a!=h)try{var e=this;a.call(t,function(n){_t(e,bt,n)},function(n){if(!(n instanceof xt))try{if(n instanceof Error)throw n;throw Error("Promise rejected.")}catch(e){}_t(e,yt,n)})}catch(e){_t(this,yt,e)}}function gt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function ft(a,t,e){var n=Ep.get();return n.g=a,n.b=t,n.f=e,n}function kt(n){if(n instanceof mt)return n;var t=new mt(h);return _t(t,2,n),t}function Et(a){return new mt(function(n,t){t(a)})}function St(a,t,e){Ot(a,t,e,null)||ht(v(t,a))}function It(a){return new mt(function(s){var i=a.length,d=[];if(i)for(var n=function(a,t,e){i--,d[a]=t?{Eb:!0,value:e}:{Eb:!1,reason:e},0==i&&s(d)},t=0;t<a.length;t++)St(a[t],v(n,t,!0),v(n,t,!1));else s(d)})}function At(n,t){n.b||n.a!=2&&n.a!=3||Ct(n),n.f?n.f.next=t:n.b=t,n.f=t}function Nt(n,s,r,o){var t=ft(null,null,null);return t.a=new mt(function(a,n){t.g=s?function(r){try{var t=s.call(o,r);a(t)}catch(e){n(e)}}:a,t.b=r?function(i){try{var t=r.call(o,i);void 0===t&&i instanceof xt?n(i):a(t)}catch(e){n(e)}}:n}),At(t.a.c=n,t),t.a}function _t(a,t,o){var s,d;a.a==0&&(a===o&&(t=3,o=new TypeError("Promise cannot resolve to itself")),a.a=1,Ot(o,a.Lc,a.Mc,a)||(a.i=o,a.a=t,a.c=null,Ct(a),t!=3||o instanceof xt||(d=o,(s=a).g=!0,ht(function(){s.g&&Tt.call(null,d)}))))}function Ot(a,t,e,n){if(a instanceof mt)return At(a,ft(t||h,e||null,n)),!0;if(E(a))return a.then(t,e,n),!0;if(g(a))try{var o=a.then;if(m(o))return function(s,t,e,n,i){function r(e){o||(o=!0,n.call(i,e))}var o=!1;try{t.call(s,function(n){o||(o=!0,e.call(i,n))},r)}catch(e){r(e)}}(a,o,t,e,n),!0}catch(a){return e.call(n,a),!0}return!1}function Ct(e){e.h||(e.h=!0,ht(e.Xb,e))}function Rt(n){var t=null;return n.b&&(t=n.b,n.b=t.next,t.next=null),n.b||(n.f=null),t}function Dt(a,o,e,n){if(e==3&&o.b&&!o.c)for(;a&&a.g;a=a.c)a.g=!1;if(o.a)o.a.c=null,Lt(o,e,n);else try{o.c?o.g.call(o.f):Lt(o,e,n)}catch(e){Tt.call(null,e)}_(Ep,o)}function Lt(a,t,e){t==2?a.g.call(a.f,e):a.b&&a.b.call(a.f,e)}function xt(e){S.call(this,e)}function Pt(){this.qa=this.qa,this.ja=this.ja}function jt(e){e.qa||(e.qa=!0,e.va(),!1)}function Kt(e){return Kt[" "](e),e}function Ft(){var e=yp.document;return e?e.documentMode:void 0}function Yt(d){return a=d,o=function(){for(var s=0,l=j(zt+"").split("."),e=j(d+"").split("."),n=Ut(l.length,e.length),i=0;0==s&&i<n;i++){var p=l[i]||"",c=e[i]||"";do{if(p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==p[0].length&&0==c[0].length)break;s=K(0==p[1].length?0:parseInt(p[1],10),0==c[1].length?0:parseInt(c[1],10))||K(0==p[2].length,0==c[2].length)||K(p[2],c[2]),p=p[3],c=c[3]}while(0==s)}return 0<=s},r=Qt,Object.prototype.hasOwnProperty.call(r,a)?r[a]:r[a]=o(a);var a,o,r}function ne(n,t){this.type=n,this.b=this.target=t,this.Kb=!0}function ue(a,t){if(ne.call(this,a?a.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,a){var o=this.type=a.type,n=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(!(this.target=a.target||a.srcElement,this.b=t,t=a.relatedTarget))"mouseover"==o?t=a.fromElement:"mouseout"==o&&(t=a.toElement);else if(Xt){t:{try{Kt(t.nodeName);var i=!0;break t}catch(e){}i=!1}i||(t=null)}this.relatedTarget=t,this.screenY=n?(this.clientX=void 0===n.clientX?n.pageX:n.clientX,this.clientY=void 0===n.clientY?n.pageY:n.clientY,this.screenX=n.screenX||0,n.screenY||0):(this.clientX=void 0===a.clientX?a.pageX:a.clientX,this.clientY=void 0===a.clientY?a.pageY:a.clientY,this.screenX=a.screenX||0,a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=c(a.pointerType)?a.pointerType:se[a.pointerType]||"",(this.a=a).defaultPrevented&&this.preventDefault()}}function ce(a,t,e,n,o){this.listener=a,this.proxy=null,this.src=t,this.type=e,this.capture=!!n,this.Na=o,this.key=++le,this.oa=this.Ia=!1}function de(e){e.oa=!0,e.listener=null,e.proxy=null,e.src=null,e.Na=null}function pe(e){this.src=e,this.a={},this.b=0}function ve(a,t){var e=t.type;e in a.a&&P(a.a[e],t)&&(de(t),0==a.a[e].length&&(delete a.a[e],a.b--))}function me(a,t,e,n){for(var i=0,s;i<a.length;++i)if(s=a[i],!s.oa&&s.listener==t&&s.capture==!!e&&s.Na==n)return i;return-1}function ge(a,t,e,s,i){if(s&&s.once)Ie(a,t,e,s,i);else if(p(t))for(var r=0;r<t.length;r++)ge(a,t[r],e,s,i);else e=_e(e),a&&a[he]?Re(a,t,e,g(s)?!!s.capture:!!s,i):we(a,t,e,!1,s,i)}function we(d,t,e,l,p,h){if(!t)throw Error("Invalid event type");var o=g(p)?!!p.capture:!!p,u=Oe(d),m,y;if(u||(d[wp]=u=new pe(d)),!(e=u.add(t,e,l,o,h)).proxy)if(m=Ne,l=y=re?function(e){return m.call(y.src,y.listener,e)}:function(e){if(!(e=m.call(y.src,y.listener,e)))return e},(e.proxy=l).src=d,l.listener=e,d.addEventListener)ae||(p=o),void 0===p&&(p=!1),d.addEventListener(t.toString(),l,p);else if(d.attachEvent)d.attachEvent(Ee(t.toString()),l);else{if(!d.addListener||!d.removeListener)throw Error("addEventListener and attachEvent are unavailable.");d.addListener(l)}}function Ie(a,t,e,s,i){if(p(t))for(var r=0;r<t.length;r++)Ie(a,t[r],e,s,i);else e=_e(e),a&&a[he]?De(a,t,e,g(s)?!!s.capture:!!s,i):we(a,t,e,!0,s,i)}function Te(a,s,d,l,c){if(p(s))for(var r=0;r<s.length;r++)Te(a,s[r],d,l,c);else l=g(l)?!!l.capture:!!l,d=_e(d),a&&a[he]?(a=a.m,(s=(s+"").toString())in a.a&&-1<(d=me(r=a.a[s],d,l,c))&&(de(r[d]),Array.prototype.splice.call(r,d,1),0==r.length&&(delete a.a[s],a.b--))):a&&(a=Oe(a))&&(s=a.a[s.toString()],a=-1,s&&(a=me(s,d,l,c)),(d=-1<a?s[a]:null)&&ke(d))}function ke(a){if("number"!=typeof a&&a&&!a.oa){var t=a.src;if(t&&t[he])ve(t.m,a);else{var e=a.type,o=a.proxy;t.removeEventListener?t.removeEventListener(e,o,a.capture):t.detachEvent?t.detachEvent(Ee(e),o):t.addListener&&t.removeListener&&t.removeListener(o),(e=Oe(t))?(ve(e,a),0==e.b&&(e.src=null,t[wp]=null)):de(a)}}}function Ee(e){return e in be?be[e]:be[e]="on"+e}function Se(a,s,d,n){var i=!0;if((a=Oe(a))&&(s=a.a[s.toString()]))for(s=s.concat(),a=0;a<s.length;a++){var l=s[a];l&&l.capture==d&&!l.oa&&(l=Ae(l,n),i=i&&!1!==l)}return i}function Ae(a,t){var e=a.listener,n=a.Na||a.src;return a.Ia&&ke(a),e.call(n,t)}function Ne(a,s){if(a.oa)return!0;if(re)return Ae(a,new ue(s,this));if(!s)t:{s=["window","event"];for(var d=yp,l=0;l<s.length;l++)if(null==(d=d[s[l]])){s=null;break t}s=d}if(s=new ue(l=s,this),d=!0,!(0>l.keyCode||null!=l.returnValue)){t:{var p=!1;if(0==l.keyCode)try{l.keyCode=-1;break t}catch(e){p=!0}(p||null==l.returnValue)&&(l.returnValue=!0)}for(l=[],p=s.b;p;p=p.parentNode)l.push(p);for(a=a.type,p=l.length-1;0<=p;p--){s.b=l[p];var c=Se(l[p],a,!0,s);d=d&&c}for(p=0;p<l.length;p++)s.b=l[p],c=Se(l[p],a,!1,s),d=d&&c}return d}function Oe(e){return(e=e[wp])instanceof pe?e:null}function _e(n){return m(n)?n:(n[ye]||(n[ye]=function(e){return n.handleEvent(e)}),n[ye])}function Ce(){Pt.call(this),this.m=new pe(this),(this.Qb=this).Va=null}function Re(a,t,e,n,o){a.m.add(t+"",e,!1,n,o)}function De(a,t,e,n,o){a.m.add(t+"",e,!0,n,o)}function Le(d,t,l,n){if(!(t=d.m.a[t+""]))return!0;t=t.concat();for(var i=!0,p=0,c;p<t.length;++p)if(c=t[p],c&&!c.oa&&c.capture==l){var h=c.listener,s=c.Na||c.src;c.Ia&&ve(d.m,c),i=!1!==h.call(s,n)&&i}return i&&0!=n.Kb}function xe(a,o,e){if(m(a))e&&(a=b(a,e));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=b(a.handleEvent,a)}return 2147483647<+o?-1:yp.setTimeout(a,o||0)}function Me(a){var n=null;return new mt(function(o,t){-1==(n=xe(function(){o(void 0)},a))&&t(Error("Failed to schedule timer."))}).s(function(e){throw yp.clearTimeout(n),e})}function je(a){if(a.S&&"function"==typeof a.S)return a.S();if(c(a))return a.split("");if(s(a)){for(var t=[],o=a.length,r=0;r<o;r++)t.push(a[r]);return t}for(r in t=[],o=0,a)t[o++]=a[r];return t}function Ue(a){if(a.U&&"function"==typeof a.U)return a.U();if(!a.S||"function"!=typeof a.S){if(s(a)||c(a)){var o=[];a=a.length;for(var r=0;r<a;r++)o.push(r);return o}for(var d in o=[],r=0,a)o[r++]=d;return o}}function Ve(e){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var a=0;a<t;a+=2)this.set(arguments[a],arguments[a+1])}else if(e)if(e instanceof Ve)for(t=e.U(),a=0;a<t.length;a++)this.set(t[a],e.get(t[a]));else for(a in e)this.set(a,e[a])}function Ke(a){if(a.c!=a.a.length){for(var t=0,o=0,s;t<a.a.length;)s=a.a[t],Fe(a.b,s)&&(a.a[o++]=s),t++;a.a.length=o}if(a.c!=a.a.length){var d={};for(o=t=0;t<a.a.length;)Fe(d,s=a.a[t])||(d[a.a[o++]=s]=1),t++;a.a.length=o}}function Fe(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function qe(a,t){var e;this.b=this.i=this.f="",this.m=null,this.g=this.c="",this.h=!1,a instanceof qe?(this.h=void 0===t?a.h:t,Be(this,a.f),this.i=a.i,this.b=a.b,Ge(this,a.m),this.c=a.c,We(this,fn(a.a)),this.g=a.g):a&&(e=(a+"").match(Pe))?(this.h=!!t,Be(this,e[1]||"",!0),this.i=$e(e[2]||""),this.b=$e(e[3]||"",!0),Ge(this,e[4]),this.c=$e(e[5]||"",!0),We(this,e[6]||"",!0),this.g=$e(e[7]||"")):(this.h=!!t,this.a=new tn(null,this.h))}function Be(a,t,e){a.f=e?$e(t,!0):t,a.f&&(a.f=a.f.replace(/:$/,""))}function Ge(n,t){if(t){if(t=+t,isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function We(a,t,o){var n,s;t instanceof tn?(a.a=t,n=a.a,(s=a.h)&&!n.f&&(sn(n),n.c=null,n.a.forEach(function(a,t){var e=t.toLowerCase();t!=e&&(cn(this,t),ln(this,e,a))},n)),n.f=s):(o||(t=Ze(t,rn)),a.a=new tn(t,a.h))}function Xe(a,t,e){a.a.set(t,e)}function Je(n,t){return n.a.get(t)}function ze(e){return e instanceof qe?new qe(e):new qe(e,void 0)}function Ye(a,t){var e=new qe(null,void 0);return Be(e,"https"),a&&(e.b=a),t&&(e.c=t),e}function $e(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ze(a,o,e){return c(a)?(a=encodeURI(a).replace(o,Qe),e&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Qe(e){return"%"+(15&(e=e.charCodeAt(0))>>4).toString(16)+(15&e).toString(16)}function tn(n,t){this.b=this.a=null,this.c=n||null,this.f=!!t}function sn(a){a.a||(a.a=new Ve,a.b=0,a.c&&function(a,s){if(a){a=a.split("&");for(var e=0;e<a.length;e++){var d=a[e].indexOf("="),i=null;if(0<=d){var l=a[e].substring(0,d);i=a[e].substring(d+1)}else l=a[e];s(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(a.c,function(n,t){a.add(decodeURIComponent(n.replace(/\+/g," ")),t)}))}function un(a){var s=Ue(a);if(void 0===s)throw Error("Keys are undefined");var e=new tn(null,void 0);a=je(a);for(var n=0;n<s.length;n++){var d=s[n],r=a[n];p(r)?ln(e,d,r):e.add(d,r)}return e}function cn(n,a){sn(n),a=dn(n,a),Fe(n.a.b,a)&&(n.c=null,n.b-=n.a.get(a).length,Fe((n=n.a).b,a)&&(delete n.b[a],n.c--,n.a.length>2*n.c&&Ke(n)))}function hn(n,t){return sn(n),t=dn(n,t),Fe(n.a.b,t)}function ln(a,t,e){cn(a,t),0<e.length&&(a.c=null,a.a.set(dn(a,t),F(e)),a.b+=e.length)}function fn(n){var t=new tn;return t.c=n.c,n.a&&(t.a=new Ve(n.a),t.b=n.b),t}function dn(n,t){return t=t+"",n.f&&(t=t.toLowerCase()),t}function pn(n,t){this.a=n===bn&&t||"",this.b=vn}function mn(e){return e instanceof pn&&e.constructor===pn&&e.b===vn?e.a:(A("expected object of type Const, got '"+e+"'"),"type_error:Const")}function gn(){this.a="",this.b=En}function wn(e){return e instanceof gn&&e.constructor===gn&&e.b===En?e.a:(A("expected object of type TrustedResourceUrl, got '"+e+"' of type "+ed(e)),"type_error:TrustedResourceUrl")}function In(a,o){var n=mn(a),r,s;if(!kn.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return a=n.replace(yn,function(a,r){if(!Object.prototype.hasOwnProperty.call(o,r))throw Error("Found marker, \""+r+"\", in format string, \""+n+"\", but no valid label mapping found in args: "+JSON.stringify(o));return(a=o[r])instanceof pn?mn(a):encodeURIComponent(a+"")}),r=a,(s=new gn).a=r,s}function Tn(){this.a="",this.b=On}function An(e){return e instanceof Tn&&e.constructor===Tn&&e.b===On?e.a:(A("expected object of type SafeUrl, got '"+e+"' of type "+ed(e)),"type_error:SafeUrl")}function Nn(e){return e instanceof Tn?e:(e="object"==typeof e&&e.na?e.ma():e+"",Sn.test(e)||(e="about:invalid#zClosurez"),_n(e))}function _n(n){var t=new Tn;return t.a=n,t}function Cn(){this.a="",this.b=Pn}function Rn(n){var t=new Cn;return t.a=n,t}function Ln(n){var t=document;return c(n)?t.getElementById(n):n}function xn(a,e){Z(e,function(n,o){n&&"object"==typeof n&&n.na&&(n=n.ma()),"style"==o?a.style.cssText=n:"class"==o?a.className=n:"for"==o?a.htmlFor=n:Dn.hasOwnProperty(o)?a.setAttribute(Dn[o],n):0==o.lastIndexOf("aria-",0)||0==o.lastIndexOf("data-",0)?a.setAttribute(o,n):a[o]=n})}function Mn(){var e=arguments,t=document,n=e[0]+"",r=e[1];if(!an&&r&&(r.name||r.type)){if(n=["<",n],r.name&&n.push(" name=\"",ct(r.name),"\""),r.type){n.push(" type=\"",ct(r.type),"\"");var i={};ot(i,r),delete i.type,r=i}n.push(">"),n=n.join("")}return n=t.createElement(n),r&&(c(r)?n.className=r:p(r)?n.className=r.join(" "):xn(n,r)),2<e.length&&function(a,e,n){function t(n){n&&e.appendChild(c(n)?a.createTextNode(n):n)}for(var i=2,d;i<n.length;i++)d=n[i],!s(d)||g(d)&&0<d.nodeType?t(d):L(Un(d)?F(d):d,t)}(t,n,e),n}function Un(e){if(e&&"number"==typeof e.length){if(g(e))return"function"==typeof e.item||"string"==typeof e.item;if(m(e))return"function"==typeof e.item}return!1}function Vn(n){var t=[];return function s(t,e,d){if(null==e)d.push("null");else{if("object"==typeof e){if(p(e)){var i=e;e=i.length,d.push("[");for(var l="",c=0;c<e;c++)d.push(l),s(t,i[c],d),l=",";return void d.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(i in d.push("{"),l="",e)Object.prototype.hasOwnProperty.call(e,i)&&"function"!=typeof(c=e[i])&&(d.push(l),Fn(i,d),d.push(":"),s(t,c,d),l=",");return void d.push("}")}e=e.valueOf()}switch(typeof e){case"string":Fn(e,d);break;case"number":d.push(isFinite(e)&&!isNaN(e)?e+"":"null");break;case"boolean":d.push(e+"");break;case"function":d.push("null");break;default:throw Error("Unknown type: "+typeof e);}}}(new Kn,n,t),t.join("")}function Kn(){}function Fn(n,t){t.push("\"",n.replace(qn,function(n){var t=jn[n];return t||(t="\\u"+(65536|n.charCodeAt(0)).toString(16).substr(1),jn[n]=t),t}),"\"")}function Bn(){var e=ci();return Bt&&!!ie&&11==ie||/Edge\/\d+/.test(e)}function Gn(){return yp.window&&yp.window.location.href||self&&self.location&&self.location.href||""}function Wn(a,t){t=t||yp.window;var o="about:blank";a&&(o=An(Nn(a)).toString()),t.location.href=o}function Xn(e){return!!((e=(e||ci()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Jn(e){e=e||yp.window;try{e.close()}catch(e){}}function zn(d,l,p){var c=Vt(1e9*Math.random()).toString();l=l||500,p=p||600;var u=(window.screen.availHeight-p)/2,h=(window.screen.availWidth-l)/2;for(o in l={width:l,height:p,top:0<u?u:0,left:0<h?h:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},p=ci().toLowerCase(),c&&(l.target=c,q(p,"crios/")&&(l.target="_blank")),ri(ci())==Zn&&(d=d||"http://localhost",l.scrollbars=!0),p=d||"",(d=l)||(d={}),c=window,l=p instanceof Tn?p:Nn(void 0===p.href?p+"":p.href),p=d.target||p.target,u=[],d)switch(o){case"width":case"height":case"top":case"left":u.push(o+"="+d[o]);break;case"target":case"noopener":case"noreferrer":break;default:u.push(o+"="+(d[o]?1:0));}var o=u.join(","),m;if((Q("iPhone")&&!Q("iPod")&&!Q("iPad")||Q("iPad")||Q("iPod"))&&c.navigator&&c.navigator.standalone&&p&&"_self"!=p?(o=c.document.createElement("A"),l instanceof Tn||l instanceof Tn||(l="object"==typeof l&&l.na?l.ma():l+"",Sn.test(l)||(l="about:invalid#zClosurez"),l=_n(l)),o.href=An(l),o.setAttribute("target",p),d.noreferrer&&o.setAttribute("rel","noreferrer"),(d=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,c,1),o.dispatchEvent(d),o={}):d.noreferrer?(o=c.open("",p,o),d=An(l).toString(),o&&(Wt&&q(d,";")&&(d="'"+d.replace(/'/g,"%27")+"'"),o.opener=null,d=Rn("<meta name=\"referrer\" content=\"no-referrer\"><meta http-equiv=\"refresh\" content=\"0; url="+ct(d)+"\">"),o.document.write((m=d)instanceof Cn&&m.constructor===Cn&&m.b===Pn?m.a:(A("expected object of type SafeHtml, got '"+m+"' of type "+ed(m)),"type_error:SafeHtml")),o.document.close())):(o=c.open(An(l).toString(),p,o))&&d.noopener&&(o.opener=null),o)try{o.focus()}catch(e){}return o}function Yn(){var n=null;return new mt(function(e){"complete"==yp.document.readyState?e():(n=function(){e()},Ie(window,"load",n))}).s(function(e){throw Te(window,"load",n),e})}function Qn(e){return e=e||ci(),"file:"===pi()&&e.toLowerCase().match(/iphone|ipad|ipod|android/)}function ti(){var e=yp.window;try{return e&&e!=e.top}catch(e){return!1}}function ei(){return void 0!==yp.WorkerGlobalScope&&"function"==typeof yp.importScripts}function ni(){return d.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":d.INTERNAL.hasOwnProperty("node")?"Node":ei()?"Worker":"Browser"}function ii(){var e=ni();return"ReactNative"===e||"Node"===e}function ri(n){var a=n.toLowerCase();return q(a,"opera/")||q(a,"opr/")||q(a,"opios/")?"Opera":q(a,"iemobile")?"IEMobile":q(a,"msie")||q(a,"trident/")?"IE":q(a,"edge/")?"Edge":q(a,"firefox/")?"Firefox":q(a,"silk/")?"Silk":q(a,"blackberry")?"Blackberry":q(a,"webos")?"Webos":!q(a,"safari/")||q(a,"chrome/")||q(a,"crios/")||q(a,"android")?(q(a,"chrome/")||q(a,"crios/"))&&!q(a,"edge/")?"Chrome":q(a,"android")?"Android":(n=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==n.length?n[1]:"Other":"Safari"}function si(a,t){t=t||[];var o=[],s={},d;for(d in oi)s[oi[d]]=!0;for(d=0;d<t.length;d++)void 0!==s[t[d]]&&(delete s[t[d]],o.push(t[d]));return o.sort(),(t=o).length||(t=["FirebaseCore-web"]),"Browser"===(o=ni())?o=ri(s=ci()):"Worker"===o&&(o=ri(s=ci())+"-"+o),o+"/JsCore/"+a+"/"+t.join(",")}function ci(){return yp.navigator&&yp.navigator.userAgent||""}function hi(a,o){a=a.split("."),o=o||yp;for(var r=0;r<a.length&&"object"==typeof o&&null!=o;r++)o=o[a[r]];return r!=a.length&&(o=void 0),o}function li(){try{var n=yp.localStorage,t=yi();if(n)return n.setItem(t,"1"),n.removeItem(t),!Bn()||!!yp.indexedDB}catch(e){return ei()&&!!yp.indexedDB}return!1}function fi(){return(di()||"chrome-extension:"===pi()||Qn())&&!ii()&&li()&&!ei()}function di(){return"http:"===pi()||"https:"===pi()}function pi(){return yp.location&&yp.location.protocol||null}function vi(e){return!Xn(e=e||ci())&&ri(e)!="Firefox"}function mi(e){return void 0===e?null:Vn(e)}function gi(a){var t={},n;for(n in a)a.hasOwnProperty(n)&&null!==a[n]&&void 0!==a[n]&&(t[n]=a[n]);return t}function bi(e){if(null!==e)return JSON.parse(e)}function yi(e){return e||Vt(1e9*Math.random()).toString()}function wi(e){return"Safari"!=ri(e=e||ci())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Ii(){var a=yp.___jsl;if(a&&a.H)for(var t in a.H)if(a.H[t].r=a.H[t].r||[],a.H[t].L=a.H[t].L||[],a.H[t].r=a.H[t].L.concat(),a.CP)for(var e=0;e<a.CP.length;e++)a.CP[e]=null}function Ti(n,a){if(a<n)throw Error("Short delay should be less than long delay!");this.a=n,this.c=a,n=ci(),a=ni(),this.b=Xn(n)||"ReactNative"===a}function ki(){var e=yp.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Ei(n){try{var t=new Date(parseInt(n,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(n))return t.toUTCString()}catch(e){}return null}function Si(){return hi("fireauth.oauthhelper",yp)||hi("fireauth.iframe",yp)}function Ai(e){ui[e]||(ui[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}function _i(a,t,e){Oi?Object.defineProperty(a,t,{configurable:!0,enumerable:!0,value:e}):a[t]=e}function Ci(a,t){if(t)for(var e in t)t.hasOwnProperty(e)&&_i(a,e,t[e])}function Ri(n){var t={};return Ci(t,n),t}function Di(a){var t=a;if("object"==typeof a&&null!=a)for(var o in t="length"in a?[]:{},a)_i(t,o,Di(a[o]));return t}function Li(a){var o={},e=a[Mi],n=a[ji];if(!(a=a[Ui])||a!=Pi&&!e)throw Error("Invalid provider user info!");o[Ki]=n||null,o[Vi]=e||null,_i(this,qi,a),_i(this,Fi,Di(o))}function xi(n,t){this.code=Hi+n,this.message=t||Wi[n]||""}function Bi(n){var t=n&&n.code;return t?new xi(t.substring(Hi.length),n.message):null}function Gi(a){var o=a[Zi];if(void 0===o)throw new xi("missing-continue-uri");if("string"!=typeof o||"string"==typeof o&&!o.length)throw new xi("invalid-continue-uri");this.h=o,this.b=this.a=null,this.g=!1;var r=a[Xi];if(r&&"object"==typeof r){o=r[er];var s=r[Qi];if(r=r[tr],"string"==typeof o&&o.length){if(this.a=o,void 0!==s&&"boolean"!=typeof s)throw new xi("argument-error",Qi+" property must be a boolean when specified.");if(this.g=!!s,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new xi("argument-error",tr+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==o)throw new xi("argument-error",er+" property must be a non empty string when specified.");if(void 0!==s||void 0!==r)throw new xi("missing-android-pkg-name")}}else if(void 0!==r)throw new xi("argument-error",Xi+" property must be a non null object when specified.");if(this.f=null,(o=a[$i])&&"object"==typeof o){if("string"==typeof(o=o[nr])&&o.length)this.f=o;else if(void 0!==o)throw new xi("argument-error",nr+" property must be a non empty string when specified.");}else if(void 0!==o)throw new xi("argument-error",$i+" property must be a non null object when specified.");if(void 0!==(o=a[Yi])&&"boolean"!=typeof o)throw new xi("argument-error",Yi+" property must be a boolean when specified.");if(this.c=!!o,void 0!==(a=a[zi])&&("string"!=typeof a||"string"==typeof a&&!a.length))throw new xi("argument-error",zi+" property must be a non empty string when specified.");this.i=a||null}function Ji(a){var t={};for(var e in t.continueUrl=a.h,t.canHandleCodeInApp=a.c,(t.androidPackageName=a.a)&&(t.androidMinimumVersion=a.b,t.androidInstallApp=a.g),t.iOSBundleId=a.f,t.dynamicLinkDomain=a.i,t)null===t[e]&&delete t[e];return t}function rr(n){var a="";return function(d,i){function t(a){for(;l<d.length;){var t=d.charAt(l++),e=Ap[t];if(null!=e)return e;if(!/^[\s\xa0]*$/.test(t))throw Error("Unknown base64 encoding at char: "+t)}return a}!function(){if(!ir){ir={},Ap={};for(var e=0;65>e;e++)ir[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),62<=(Ap[ir[e]]=e)&&(Ap["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var l=0;;){var e=t(-1),n=t(0),o=t(64),a=t(64);if(64===a&&-1===e)break;i(e<<2|n>>4),64!=o&&(i(240&n<<4|o>>2),64!=a&&i(192&o<<6|a))}}(n,function(e){a+=String.fromCharCode(e)}),a}function sr(e){this.c=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function ur(e){return(e=cr(e))&&e.sub&&e.iss&&e.aud&&e.exp?new sr(e):null}function cr(a){if(!a)return null;if(3!=(a=a.split(".")).length)return null;for(var o=(4-(a=a[1]).length%4)%4,e=0;e<o;e++)a+=".";try{return JSON.parse(rr(a))}catch(e){}return null}function hr(n){for(var a in xp)if(xp[a].id===n)return{firebaseEndpoint:(n=xp[a]).ab,secureTokenEndpoint:n.ib};return null}function dr(n){for(var t in vr)if(vr[t].Pa==n)return vr[t];return null}function gr(a){var t={"facebook.com":Tr,"google.com":Er,"github.com":kr,"twitter.com":Sr},e=a&&a[yr];try{if(e)return t[e]?new t[e](a):new Ir(a);if(void 0!==a[mr])return new br(a)}catch(e){}return null}function br(a){var t=a.providerId;if(!t&&a.idToken){var o=ur(a.idToken);o&&o.a&&(t=o.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),o=!1,void 0===a.isNewUser?"identitytoolkit#SignupNewUserResponse"===a.kind&&(o=!0):o=!!a.isNewUser,_i(this,"providerId",t),_i(this,"isNewUser",o)}function Ir(e){br.call(this,e),_i(this,"profile",Di((e=bi(e.rawUserInfo||"{}"))||{}))}function Tr(e){if(Ir.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function kr(e){if(Ir.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");_i(this,"username",this.profile&&this.profile.login||null)}function Er(e){if(Ir.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Sr(e){if(Ir.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");_i(this,"username",e.screenName||null)}function Ar(e){this.a=ze(e)}function Nr(a){var t=ze(a),o=Je(t,"link"),n=Je(ze(o),"link");return Je(ze(t=Je(t,"deep_link_id")),"link")||t||n||o||a}function Or(){}function _r(e,a){return e.then(function(n){if(n[pa]){var t=ur(n[pa]);if(!t||a!=t.c)throw new xi("user-mismatch");return n}throw new xi("user-mismatch")}).s(function(e){throw e&&e.code&&e.code=="auth/user-not-found"?new xi("user-mismatch"):e})}function Pr(n,t){if(!t)throw new xi("internal-error","failed to construct a credential");this.a=t,_i(this,"providerId",n),_i(this,"signInMethod",n)}function Cr(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Rr(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Pr(e.providerId,e.pendingToken)}catch(e){}return null}function Dr(a,t,e){if(this.a=null,t.idToken||t.accessToken)t.idToken&&_i(this,"idToken",t.idToken),t.accessToken&&_i(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&_i(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new xi("internal-error","failed to construct a credential");_i(this,"accessToken",t.oauthToken),_i(this,"secret",t.oauthTokenSecret)}_i(this,"providerId",a),_i(this,"signInMethod",e)}function Lr(n){var t={};return n.idToken&&(t.id_token=n.idToken),n.accessToken&&(t.access_token=n.accessToken),n.secret&&(t.oauth_token_secret=n.secret),t.providerId=n.providerId,n.nonce&&!n.a&&(t.nonce=n.nonce),t={postBody:un(t).toString(),requestUri:"http://localhost"},n.a&&(delete t.postBody,t.pendingToken=n.a),t}function xr(n){if(n&&n.providerId&&n.signInMethod){var t={idToken:n.oauthIdToken,accessToken:n.oauthTokenSecret?null:n.oauthAccessToken,oauthTokenSecret:n.oauthTokenSecret,oauthToken:n.oauthTokenSecret&&n.oauthAccessToken,nonce:n.nonce,pendingToken:n.pendingToken};try{return new Dr(n.providerId,t,n.signInMethod)}catch(e){}}return null}function Mr(n,t){this.Dc=t||[],Ci(this,{providerId:n,isOAuthProvider:!0}),this.zb={},this.cb=(dr(n)||{}).Oa||null,this.$a=null}function jr(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new xi("argument-error","SAML provider IDs must be prefixed with \"saml.\"");Mr.call(this,e,[])}function Ur(e){Mr.call(this,e,pr),this.a=[]}function Vr(){Ur.call(this,"facebook.com")}function Kr(n){if(!n)throw new xi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=n;return g(n)&&(t=n.accessToken),new Vr().credential({accessToken:t})}function Fr(){Ur.call(this,"github.com")}function qr(n){if(!n)throw new xi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=n;return g(n)&&(t=n.accessToken),new Fr().credential({accessToken:t})}function Hr(){Ur.call(this,"google.com"),this.ua("profile")}function Br(a,t){var o=a;return g(a)&&(o=a.idToken,t=a.accessToken),new Hr().credential({idToken:o,accessToken:t})}function Gr(){Mr.call(this,"twitter.com",Np)}function Wr(a,t){var e=a;if(g(e)||(e={oauthToken:a,oauthTokenSecret:t}),!e.oauthToken||!e.oauthTokenSecret)throw new xi("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Dr("twitter.com",e,"twitter.com")}function Xr(a,t,e){this.a=a,this.c=t,_i(this,"providerId","password"),_i(this,"signInMethod",e===zr.EMAIL_LINK_SIGN_IN_METHOD?zr.EMAIL_LINK_SIGN_IN_METHOD:zr.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Jr(e){return e&&e.email&&e.password?new Xr(e.email,e.password,e.signInMethod):null}function zr(){Ci(this,{providerId:"password",isOAuthProvider:!1})}function Yr(n,t){if(!(t=$r(t)))throw new xi("argument-error","Invalid email link!");return new Xr(n,t,zr.EMAIL_LINK_SIGN_IN_METHOD)}function $r(n){var a=Je((n=new Ar(n=Nr(n))).a,"oobCode")||null;return"signIn"===(Je(n.a,"mode")||null)&&a?a:null}function Zr(e){if(!(e.Ta&&e.Sa||e.Fa&&e.$))throw new xi("internal-error");this.a=e,_i(this,"providerId","phone"),_i(this,"signInMethod","phone")}function Qr(a){if(a&&"phone"===a.providerId&&(a.verificationId&&a.verificationCode||a.temporaryProof&&a.phoneNumber)){var e={};return L(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){a[n]&&(e[n]=a[n])}),new Zr(e)}return null}function to(e){return e.a.Fa&&e.a.$?{temporaryProof:e.a.Fa,phoneNumber:e.a.$}:{sessionInfo:e.a.Ta,code:e.a.Sa}}function eo(e){try{this.a=e||d.auth()}catch(e){throw new xi("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ci(this,{providerId:"phone",isOAuthProvider:!1})}function no(n,t){if(!n)throw new xi("missing-verification-id");if(!t)throw new xi("missing-verification-code");return new Zr({Ta:n,Sa:t})}function io(s){if(s.temporaryProof&&s.phoneNumber)return new Zr({Fa:s.temporaryProof,$:s.phoneNumber});var t=s&&s.providerId;if(!t||"password"===t)return null;var e=s&&s.oauthAccessToken,n=s&&s.oauthTokenSecret,i=s&&s.nonce,r=s&&s.oauthIdToken,o=s&&s.pendingToken;try{return"google.com"===t?Br(r,e):"facebook.com"===t?Kr(e):"github.com"===t?qr(e):"twitter.com"===t?Wr(e,n):e||n||r||o?o?0==t.indexOf("saml.")?new Pr(t,o):new Dr(t,{pendingToken:o,idToken:s.oauthIdToken,accessToken:s.oauthAccessToken},t):new Ur(t).credential({idToken:r,accessToken:e,rawNonce:i}):null}catch(e){return null}}function ro(e){if(!e.isOAuthProvider)throw new xi("invalid-oauth-provider")}function oo(a,t,e,n,i,r){if(this.c=a,this.b=t||null,this.g=e||null,this.f=n||null,this.h=r||null,this.a=i||null,!this.g&&!this.a)throw new xi("invalid-auth-event");if(this.g&&this.a)throw new xi("invalid-auth-event");if(this.g&&!this.f)throw new xi("invalid-auth-event")}function ao(e){return(e=e||{}).type?new oo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Bi(e.error),e.postBody):null}function so(){this.b=null,this.a=[]}function uo(a){var o="unauthorized-domain",r=ze(a),s;a=r.b,"chrome-extension"==(r=r.f)?s=it("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):"http"==r||"https"==r?s=it("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):o="operation-not-supported-in-this-environment",xi.call(this,o,s)}function lo(a,o,e){xi.call(this,a,e),(a=o||{}).Ab&&_i(this,"email",a.Ab),a.$&&_i(this,"phoneNumber",a.$),a.credential&&_i(this,"credential",a.credential)}function fo(a){if(a.code){var t=a.code||"";0==t.indexOf("auth/")&&(t=t.substring("auth/".length));var o={credential:io(a)};if(a.email)o.Ab=a.email;else if(a.phoneNumber)o.$=a.phoneNumber;else if(!o.credential)return new xi(t,a.message||void 0);return new lo(t,o,a.message)}return null}function po(){}function vo(e){return e.c||(e.c=e.b())}function mo(){}function go(a){if(a.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return a.f;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e=0,o;e<t.length;e++){o=t[e];try{return new ActiveXObject(o),a.f=o}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function bo(){}function yo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.dc,this),this.a.onerror=b(this.Gb,this),this.a.onprogress=b(this.ec,this),this.a.ontimeout=b(this.ic,this)}function wo(n,t){n.readyState=t,n.onreadystatechange&&n.onreadystatechange()}function Io(a,t,e){this.reset(a,t,e,void 0,void 0)}function To(e){this.f=e,this.b=this.c=this.a=null}function ko(n,t){this.name=n,this.value=t}function Eo(a){var t;if(Po||(Po=new To(""),(Oo[""]=Po).c=Ao),!(t=Oo[a])){t=new To(a);var o=a.lastIndexOf("."),r=a.substr(o+1);(o=Eo(a.substr(0,o))).b||(o.b={}),(o.b[r]=t).a=o,Oo[a]=t}return t}function Ro(n,t){n&&n.log(No,t,void 0)}function Do(e){this.f=e}function Lo(e){Ce.call(this),this.u=e,this.readyState=Mp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.o="GET",this.g="",this.a=!1,this.h=Eo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}function xo(e){e.c.read().then(e.cc.bind(e)).catch(e.Ma.bind(e))}function jo(n,t){t&&n.f&&(n.status=n.f.status,n.statusText=n.f.statusText),n.readyState=4,n.f=null,n.c=null,n.l=null,Uo(n)}function Uo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Vo(e){Ce.call(this),this.headers=new Ve,this.D=e||null,this.c=!1,this.A=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=Mo,this.v=this.O=!1}function Ko(d,e,l,p,u){if(d.a)throw Error("[goog.net.XhrIo] Object is active with another request="+d.l+"; newUri="+e);l=l?l.toUpperCase():"GET",d.l=e,d.h="",d.N=l,d.G=!1,d.c=!0,d.a=d.D?d.D.a():Lp.a(),d.A=d.D?vo(d.D):vo(Lp),d.a.onreadystatechange=b(d.Jb,d);try{Ro(d.b,Zo(d,"Opening Xhr")),d.I=!0,d.a.open(l,e+"",!0),d.I=!1}catch(e){return Ro(d.b,Zo(d,"Error opening Xhr: "+e.message)),void Go(d,e)}e=p||"";var h=new Ve(d.headers),a;u&&function(a,t){if(a.forEach&&"function"==typeof a.forEach)a.forEach(t,void 0);else if(s(a)||c(a))L(a,t,void 0);else for(var e=Ue(a),n=je(a),i=n.length,r=0;r<i;r++)t.call(void 0,n[r],e&&e[r],a)}(u,function(n,t){h.set(t,n)}),u=function(a){t:{for(var t=Bo,o=a.length,n=c(a)?a.split(""):a,i=0;i<o;i++)if(i in n&&t.call(void 0,n[i],i,a)){t=i;break t}t=-1}return 0>t?null:c(a)?a.charAt(t):a[t]}(h.U()),p=yp.FormData&&e instanceof yp.FormData,!D(qo,l)||u||p||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(n,t){this.a.setRequestHeader(t,n)},d),d.o&&(d.a.responseType=d.o),"withCredentials"in d.a&&d.a.withCredentials!==d.O&&(d.a.withCredentials=d.O);try{zo(d),0<d.g&&(d.v=(a=d.a,Bt&&Yt(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout),Ro(d.b,Zo(d,"Will abort after "+d.g+"ms if incomplete, xhr2 "+d.v)),d.v?(d.a.timeout=d.g,d.a.ontimeout=b(d.Ga,d)):d.u=xe(d.Ga,d.g,d)),Ro(d.b,Zo(d,"Sending request")),d.i=!0,d.a.send(e),d.i=!1}catch(e){Ro(d.b,Zo(d,"Send error: "+e.message)),Go(d,e)}}function Bo(e){return"content-type"==e.toLowerCase()}function Go(n,t){n.c=!1,n.a&&(n.f=!0,n.a.abort(),n.f=!1),n.h=t,Wo(n),Jo(n)}function Wo(e){e.G||(e.G=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Xo(d){if(d.c&&void 0!==gp)if(d.A[1]&&4==Yo(d)&&2==$o(d))Ro(d.b,Zo(d,"Local request error detected and ignored"));else if(d.i&&4==Yo(d))xe(d.Jb,0,d);else if(d.dispatchEvent("readystatechange"),4==Yo(d)){Ro(d.b,Zo(d,"Request complete")),d.c=!1;try{var e=$o(d),n;t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break t;default:l=!1;}if(!(n=l)){var p;if(p=0===e){var c=(d.l+"").match(Pe)[1]||null;if(!c&&yp.self&&yp.self.location){var u=yp.self.location.protocol;c=u.substr(0,u.length-1)}p=!Fo.test(c?c.toLowerCase():"")}n=p}if(n)d.dispatchEvent("complete"),d.dispatchEvent("success");else{try{var a=2<Yo(d)?d.a.statusText:""}catch(e){Ro(d.b,"Can not get status: "+e.message),a=""}d.h=a+" ["+$o(d)+"]",Wo(d)}}finally{Jo(d)}}}function Jo(a,o){if(a.a){zo(a);var t=a.a,n=a.A[0]?h:null;a.a=null,a.A=null,o||a.dispatchEvent("ready");try{t.onreadystatechange=n}catch(e){(a=a.b)&&a.log(Op,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function zo(e){e.a&&e.v&&(e.a.ontimeout=null),e.u&&(yp.clearTimeout(e.u),e.u=null)}function Yo(e){return e.a?e.a.readyState:0}function $o(e){try{return 2<Yo(e)?e.a.status:-1}catch(e){return-1}}function Zo(n,t){return t+" ["+n.N+" "+n.l+" "+$o(n)+"]"}function Qo(e){this.g=[],this.v=ha,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.l=this.A=this.i=!1,this.h=0,this.b=null,this.m=0}function ta(a,t,e){a.a=!0,a.c=e,a.f=!t,ra(a)}function ea(e){if(e.a){if(!e.l)throw new oa(e);e.l=!1}}function na(a,t,e,n){a.g.push([t,e,n]),a.a&&ra(a)}function ia(n){return e(n.g,function(e){return m(e[1])})}function ra(d){if(d.h&&d.a&&ia(d)){var e=d.h,l=Ho[e];l&&(yp.clearTimeout(l.a),delete Ho[e]),d.h=0}d.b&&(d.b.m--,delete d.b),e=d.c;for(var p=l=!1;d.g.length&&!d.i;){var c=d.g.shift(),u=c[0],h=c[1];if(c=c[2],u=d.f?h:u)try{var a=u.call(c||d.u,e);void 0!==a&&(d.f=d.f&&(a==e||a instanceof Error),d.c=e=a),(E(e)||"function"==typeof yp.Promise&&e instanceof yp.Promise)&&(p=!0,d.i=!0)}catch(n){e=n,d.f=!0,ia(d)||(l=!0)}}d.c=e,p&&(a=b(d.o,d,!0),p=b(d.o,d,!1),e instanceof Qo?(na(e,a,p),e.A=!0):e.then(a,p)),l&&(e=new sa(e),Ho[e.a]=e,d.h=e.a)}function oa(){S.call(this)}function aa(){S.call(this)}function sa(e){this.a=yp.setTimeout(b(this.c,this),0),this.b=e}function ua(d){var t=document,a=wn(d).toString(),s=document.createElement("SCRIPT"),p={Lb:s,Ga:void 0},u=new Qo(p),h,m,g,y,b;return h=window.setTimeout(function(){la(s,!0);var e=new fa(da,"Timeout reached for loading script "+a);ea(u),ta(u,!1,e)},5e3),p.Ga=h,s.onload=s.onreadystatechange=function(){s.readyState&&"loaded"!=s.readyState&&"complete"!=s.readyState||(la(s,!1,h),ea(u),ta(u,!0,null))},s.onerror=function(){la(s,!0,h);var e=new fa(ca,"Error while loading script "+a);ea(u),ta(u,!1,e)},ot(p={},{type:"text/javascript",charset:"UTF-8"}),xn(s,p),g=d,(m=s).src=wn(g),null===f&&(f=(g=(g=yp.document).querySelector&&g.querySelector("script[nonce]"))&&(g=g.nonce||g.getAttribute("nonce"))&&l.test(g)?g:""),(g=f)&&m.setAttribute("nonce",g),(y=t,(b=(y||document).getElementsByTagName("HEAD"))&&0!=b.length?b[0]:y.documentElement).appendChild(s),u}function ha(){if(this&&this.Lb){var e=this.Lb;e&&"SCRIPT"==e.tagName&&la(e,!0,this.Ga)}}function la(a,t,e){null!=e&&yp.clearTimeout(e),a.onload=h,a.onerror=h,a.onreadystatechange=h,t&&window.setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},0)}function fa(a,t){var e="Jsloader error (code #"+a+")";t&&(e+=": "+t),S.call(this,e),this.code=a}function va(e){this.f=e}function ma(a,o,e){if(this.b=a,a=o||{},this.i=a.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=a.secureTokenTimeout||ya,this.f=rt(a.secureTokenHeaders||wa),this.g=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=a.firebaseTimeout||Ia,this.a=rt(a.firebaseHeaders||Ta),e&&(this.a["X-Client-Version"]=e,this.f["X-Client-Version"]=e),e="Node"==ni(),!(e=yp.XMLHttpRequest||e&&d.INTERNAL.node&&d.INTERNAL.node.XMLHttpRequest)&&!ei())throw new xi("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,this.c=ei()?new Do(self):ii()?new va(e):new bo}function ga(n,t){t?n.a["X-Firebase-Locale"]=t:delete n.a["X-Firebase-Locale"]}function Ea(n,t){t?(n.a["X-Client-Version"]=t,n.f["X-Client-Version"]=t):(delete n.a["X-Client-Version"],delete n.f["X-Client-Version"])}function Sa(d,l,e,n,i,r,o){var a;(d=!((a=ri(a=ci())=="Chrome"?(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null:null)&&30>a||Bt&&ie&&!(9<ie))||ei()?b(d.o,d):(ka||(ka=new mt(function(n,t){!function(a,t){if(((window.gapi||{}).client||{}).request)a();else{yp[Na]=function(){((window.gapi||{}).client||{}).request?a():t(Error("CORS_UNSUPPORTED"))};var e=In(Pp,{onload:Na});na(ua(e),null,function(){t(Error("CORS_UNSUPPORTED"))},void 0)}}(n,t)})),b(d.l,d)))(l,e,n,i,r,o)}function Aa(e){if(!c(e=e.email)||!$n.test(e))throw new xi("invalid-email")}function _a(e){"email"in e&&Aa(e)}function Pa(e){if(!e.idToken)throw new xi("internal-error")}function Ca(e){if(!(e.phoneNumber||e.temporaryProof)){if(!e.sessionInfo)throw new xi("missing-verification-id");if(!e.code)throw new xi("missing-verification-code")}else if(!e.phoneNumber||!e.temporaryProof)throw new xi("internal-error")}function Ra(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new xi("internal-error")}function La(n,a){return a.oauthIdToken&&a.providerId&&0==a.providerId.indexOf("oidc.")&&!a.pendingToken&&(n.sessionId?a.nonce=n.sessionId:n.postBody&&hn(n=new tn(n.postBody),"nonce")&&(a.nonce=n.get("nonce"))),a}function xa(n){var t=null;if(n.needConfirmation?(n.code="account-exists-with-different-credential",t=fo(n)):"FEDERATED_USER_ID_ALREADY_LINKED"==n.errorMessage?(n.code="credential-already-in-use",t=fo(n)):"EMAIL_EXISTS"==n.errorMessage?(n.code="email-already-in-use",t=fo(n)):n.errorMessage&&(t=ps(n.errorMessage)),t)throw t;if(!n.idToken)throw new xi("internal-error")}function Ma(n,t){return t.returnIdpCredential=!0,Ka(n,os,t)}function ja(n,t){return t.returnIdpCredential=!0,Ka(n,ss,t)}function Ua(n,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Ka(n,as,t)}function Va(e){if(!e.oobCode)throw new xi("invalid-action-code")}function Ka(a,o,e){if(!function(a,t){if(!t||!t.length)return!0;if(!a)return!1;for(var e=0,o;e<t.length;e++)if(o=a[t[e]],null==o||""===o)return!1;return!0}(e,o.T))return Et(new xi("internal-error"));var t=o.Ib||"POST",n;return kt(e).then(o.C).then(function(){return o.R&&(e.returnSecureToken=!0),function(d,t,l,i,r,e){var o=ze(d.g+t);Xe(o,"key",d.b),e&&Xe(o,"cb",fp().toString());var a="GET"==l;if(a)for(var n in i)i.hasOwnProperty(n)&&Xe(o,n,i[n]);return new mt(function(s,e){Sa(d,o.toString(),function(n){n?n.error?e(vs(n,r||{})):s(n):e(new xi("network-request-failed"))},l,a?void 0:Vn(gi(i)),d.a,d.h.get())})}(a,o.endpoint,t,e,o.Wb,o.wb||!1)}).then(function(a){return n=a,o.Qa?o.Qa(e,n):n}).then(o.J).then(function(){if(!o.da)return n;if(!(o.da in n))throw new xi("internal-error");return n[o.da]})}function ps(e){return vs({error:{errors:[{message:e}],code:400,message:e}})}function vs(a,t){var o=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"",s={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(o=s[o]?new xi(s[o]):null)return o;for(var d in o=a.error&&a.error.message||"",ot(s={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=o.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0,s)if(0===o.indexOf(d))return new xi(s[d],t);return!t&&a&&(t=mi(a)),new xi("internal-error",t)}function ms(e){var a;this.b=e,this.a=null,this.fb=(a=this,(ws||(ws=new mt(function(a,t){function e(){Ii(),hi("gapi.load")("gapi.iframes",{callback:a,ontimeout:function(){Ii(),t(Error("Network Error"))},timeout:bs.get()})}if(hi("gapi.iframes.Iframe"))a();else if(hi("gapi.load"))e();else{var n="__iframefcb"+Vt(1e6*Math.random()).toString();yp[n]=function(){hi("gapi.load")?e():t(Error("Network Error"))},kt(ua(n=In(ds,{onload:n}))).s(function(){t(Error("Network Error"))})}}).s(function(e){throw ws=null,e}))).then(function(){return new mt(function(e,t){hi("gapi.iframes.getContext")().open({where:document.body,url:a.b,messageHandlersFilter:hi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(o){function r(){clearTimeout(i),e()}a.a=o,a.a.restyle({setHideOnLeave:!1});var i=setTimeout(function(){t(Error("Network Error"))},ys.get());o.ping(r).then(r,function(){t(Error("Network Error"))})})})}))}function gs(a,t,e){this.i=a,this.g=t,this.h=e,this.f=null,this.a=Ye(this.i,"/__/auth/iframe"),Xe(this.a,"apiKey",this.g),Xe(this.a,"appName",this.h),this.b=null,this.c=[]}function Ts(a,t,e,n,o){this.o=a,this.l=t,this.c=e,this.m=n,this.h=this.g=this.i=null,this.a=o,this.f=null}function ks(e){try{return d.app(e).auth().ya()}catch(e){return[]}}function Es(a,t,e,n,o){this.l=a,this.f=t,this.b=e,this.c=n||null,this.h=o||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function Ss(n){var d=Gn(),t;return(t=n,Ka(t,Za,{}).then(function(e){return e.authorizedDomains||[]})).then(function(s){t:{var l=ze(d),p=l.f;l=l.b;for(var n=0;n<s.length;n++){var c=s[n],u=l,h=p;if(u=0==c.indexOf("chrome-extension://")?ze(c).b==u&&"chrome-extension"==h:("http"==h||"https"==h)&&(Hn.test(c)?u==c:(c=c.split(".").join("\\."),new RegExp("^(.+\\."+c+"|"+c+")$","i").test(u)))){s=!0;break t}}s=!1}if(!s)throw new uo(Gn())})}function As(a){return a.m||(a.m=Yn().then(function(){if(!a.u){var o=a.c,t=a.h,e=ks(a.b),n=new gs(a.l,a.f,a.b);n.f=o,n.b=t,n.c=F(e||[]),a.u=n.toString()}a.i=new ms(a.u),function(a){if(!a.i)throw Error("IfcHandler must be initialized!");n=a.i,o=function(o){var r={};if(o&&o.authEvent){var i=!1;for(o=ao(o.authEvent),r=0;r<a.g.length;r++)i=a.g[r](o)||i;return(r={}).status=i?"ACK":"ERROR",kt(r)}return r.status="ERROR",kt(r)},n.fb.then(function(){n.a.register("authEvent",o,hi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))});var n,o}(a)})),a.m}function Ns(e){return e.o||(e.v=e.c?si(e.c,ks(e.b)):null,e.o=new ma(e.f,hr(e.h),e.v)),e.o}function Os(d,l,e,n,i,r,o,a,s,p){return(d=new Ts(d,l,e,n,i)).i=r,d.g=o,d.h=a,d.b=rt(s||null),d.f=p,d.toString()}function _s(e){if(this.a=e||d.INTERNAL.reactNative&&d.INTERNAL.reactNative.AsyncStorage,!this.a)throw new xi("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ps(e){this.b=e,this.a={},this.c=b(this.f,this)}function Cs(e){this.a=e}function Ls(e){this.c=e,this.b=!1,this.a=[]}function xs(d,i,t,e){var p=t||{},u=null,m,g,y,f;if(d.b)return Et(Error("connection_unavailable"));var b=e?800:50,h="undefined"==typeof MessageChannel?null:new MessageChannel;return new mt(function(a,e){h?(m=Vt(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),y=setTimeout(function(){e(Error("unsupported_event"))},b),u={messageChannel:h,onMessage:g=function(n){n.data.eventId===m&&("ack"===n.data.status?(clearTimeout(y),f=setTimeout(function(){e(Error("timeout"))},3e3)):"done"===n.data.status?(clearTimeout(f),void 0===n.data.response?e(Error("unknown_error")):a(n.data.response)):(clearTimeout(y),clearTimeout(f),e(Error("invalid_response"))))}},d.a.push(u),h.port1.addEventListener("message",g),d.c.postMessage({eventType:i,eventId:m,data:p},[h.port2])):e(Error("connection_unavailable"))}).then(function(e){return Ms(d,u),e}).s(function(e){throw Ms(d,u),e})}function Ms(a,o){if(o){var e=o.messageChannel,t=o.onMessage;e&&(e.port1.removeEventListener("message",t),e.port1.close()),V(a.a,function(e){return e==o})}}function js(){if(!Ks())throw new xi("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=yp.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.i=null,this.u=!1,this.h=null;var a=this,e;ei()&&self?(this.m=function(){var a=ei()?self:null;if(L(Bp,function(n){n.b==a&&(e=n)}),!e){var e=new Ps(a);Bp.push(e)}return e}(),this.m.subscribe("keyChanged",function(e,t){return Gs(a).then(function(n){return 0<n.length&&L(a.a,function(e){e(n)}),{keyProcessed:D(n,t.key)}})}),this.m.subscribe("ping",function(){return kt(["keyChanged"])})):(e=yp.navigator,e&&e.serviceWorker?kt().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).s(function(){return null}):kt(null)).then(function(e){(a.h=e)&&(a.g=new Ls(new Cs(e)),xs(a.g,"ping",null,!0).then(function(e){e[0].fulfilled&&D(e[0].value,"keyChanged")&&(a.u=!0)}).s(function(){}))})}function Us(a){return new mt(function(o,e){var n=a.l.open("firebaseLocalStorageDb",1);n.onerror=function(n){try{n.preventDefault()}catch(e){}e(Error(n.target.error))},n.onupgradeneeded=function(n){n=n.target.result;try{n.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(n){e(n)}},n.onsuccess=function(n){var r;(n=n.target.result).objectStoreNames.contains("firebaseLocalStorage")?o(n):(r=a,new mt(function(a,o){var e=r.l.deleteDatabase("firebaseLocalStorageDb");e.onsuccess=function(){a()},e.onerror=function(e){o(Error(e.target.error))}})).then(function(){return Us(a)}).then(function(e){o(e)}).s(function(n){e(n)})}})}function Vs(e){return e.o||(e.o=Us(e)),e.o}function Ks(){try{return!!yp.indexedDB}catch(e){return!1}}function Fs(e){return e.objectStore("firebaseLocalStorage")}function qs(n,t){return n.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Hs(a){return new mt(function(o,e){a.onsuccess=function(e){e&&e.target?o(e.target.result):o()},a.onerror=function(n){e(n.target.error)}})}function Bs(a,t){return a.g&&a.h&&((e=yp.navigator)&&e.serviceWorker&&e.serviceWorker.controller||null)===a.h?xs(a.g,"keyChanged",{key:t},a.u).then(function(){}).s(function(){}):kt();var e}function Gs(a){return Vs(a).then(function(e){var a=Fs(qs(e,!1));return a.getAll?Hs(a.getAll()):new mt(function(o,e){var n=[],r=a.openCursor();r.onsuccess=function(e){(e=e.target.result)?(n.push(e.value),e.continue()):o(n)},r.onerror=function(n){e(n.target.error)}})}).then(function(o){var t={},e=[];if(0==a.b){for(e=0;e<o.length;e++)t[o[e].fbase_key]=o[e].value;e=function a(t,e){var n=[],o;for(o in t)o in e?typeof t[o]==typeof e[o]?"object"==typeof t[o]&&null!=t[o]&&null!=e[o]?0<a(t[o],e[o]).length&&n.push(o):t[o]!==e[o]&&n.push(o):n.push(o):n.push(o);for(o in e)o in t||n.push(o);return n}(a.c,t),a.c=t}return e})}function Ws(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Xs(e){var a=this,o=null;this.a=[],this.type="indexedDB",this.c=e,this.b=kt().then(function(){if(Ks()){var r=yi(),e="__sak"+r;return Ds||(Ds=new js),(o=Ds).set(e,r).then(function(){return o.get(e)}).then(function(n){if(n!==r)throw Error("indexedDB not supported!");return o.P(e)}).then(function(){return o}).s(function(){return a.c})}return a.c}).then(function(e){return a.type=e.type,e.Y(function(n){L(a.a,function(e){e(n)})}),e})}function Js(){this.a={},this.type="inMemory"}function zs(){if(!function(){var e="Node"==ni();if(!(e=Ys()||e&&d.INTERNAL.node&&d.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==ni())throw new xi("internal-error","The LocalStorage compatibility library was not found.");throw new xi("web-storage-unsupported")}this.a=Ys()||d.INTERNAL.node.localStorage,this.type="localStorage"}function Ys(){try{var n=yp.localStorage,t=yi();return n&&(n.setItem(t,"1"),n.removeItem(t)),n}catch(e){return null}}function $s(){this.type="nullStorage"}function Zs(){if(!function(){var e="Node"==ni();if(!(e=Qs()||e&&d.INTERNAL.node&&d.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==ni())throw new xi("internal-error","The SessionStorage compatibility library was not found.");throw new xi("web-storage-unsupported")}this.a=Qs()||d.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Qs(){try{var n=yp.sessionStorage,t=yi();return n&&(n.setItem(t,"1"),n.removeItem(t)),n}catch(e){return null}}function td(){var e={};e.Browser=qp,e.Node=Fp,e.ReactNative=Vp,e.Worker=Up,this.a=e[ni()]}function nd(){var a=!wi(ci())&&ti(),o=vi(),e=li();this.o=a,this.h=o,this.m=e,this.a={},Wp||(Wp=new td),a=Wp;try{this.g=(Bn()||!Si())&&yp.indexedDB?new Xs(ei()?new Js:new a.a.B):new a.a.B}catch(e){this.g=new Js,this.h=!0}try{this.i=new a.a.Ra}catch(e){this.i=new Js}this.l=new Js,this.f=b(this.Ob,this),this.b={}}function ad(){return Hp||(Hp=new nd),Hp}function od(n,t){return"session"===t?n.i:"none"===t?n.l:n.g}function rd(n,t){return"firebase:"+n.name+(t?":"+t:"")}function id(a,t,e){return e=rd(t,e),"local"==t.B&&(a.b[e]=null),od(a,t.B).P(e)}function sd(e){e.c&&(clearInterval(e.c),e.c=null)}function dd(e){this.a=e,this.b=ad()}function ld(){this.a=ad()}function pd(n,t){this.b=$p,this.f=yp.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=n,this.h=t,this.m=yp.Int32Array?new Int32Array(64):Array(64),void 0!==zp||(zp=yp.Int32Array?new Int32Array(Yp):Yp),this.reset()}function cd(d){for(var t=d.f,p=d.m,n=0,m=0;m<t.length;)p[n++]=t[m]<<24|t[m+1]<<16|t[m+2]<<8|t[m+3],m=4*n;for(t=16;64>t;t++){m=0|p[t-15],n=0|p[t-2];var g=0|(0|p[t-16])+((m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3),y=0|(0|p[t-7])+((n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10);p[t]=0|g+y}n=0|d.a[0],m=0|d.a[1];var b=0|d.a[2],v=0|d.a[3],T=0|d.a[4],_=0|d.a[5],E=0|d.a[6];for(g=0|d.a[7],t=0;64>t;t++){var k=0|((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&m^n&b^m&b);y=0|(g=0|g+((T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7)))+(0|(y=0|(y=T&_^~T&E)+(0|zp[t]))+(0|p[t])),g=E,E=_,_=T,T=0|v+y,v=b,b=m,m=n,n=0|y+k}d.a[0]=0|d.a[0]+n,d.a[1]=0|d.a[1]+m,d.a[2]=0|d.a[2]+b,d.a[3]=0|d.a[3]+v,d.a[4]=0|d.a[4]+T,d.a[5]=0|d.a[5]+_,d.a[6]=0|d.a[6]+E,d.a[7]=0|d.a[7]+g}function ud(a,t,e){void 0===e&&(e=t.length);var d=0,l=a.c;if(c(t))for(;d<e;)a.f[l++]=t.charCodeAt(d++),l==a.b&&(cd(a),l=0);else{if(!s(t))throw Error("message must be string or array");for(;d<e;){var p=t[d++];if(!("number"==typeof p&&0<=p&&255>=p&&p==(0|p)))throw Error("message must be a byte array");a.f[l++]=p,l==a.b&&(cd(a),l=0)}}a.c=l,a.g+=e}function hd(){pd.call(this,8,Jp)}function md(a,t,e,n,o){this.l=a,this.i=t,this.m=e,this.o=n||null,this.u=o||null,this.h=t+":"+e,this.v=new ld,this.g=new dd(this.h),this.f=null,this.b=[],this.a=this.c=null}function gd(e){return new xi("invalid-cordova-configuration",e)}function yd(a){var o=new hd;ud(o,a),a=[];var e=8*o.g;56>o.c?ud(o,Xp,56-o.c):ud(o,Xp,o.b-(o.c-56));for(var s=63;56<=s;s--)o.f[s]=255&e,e/=256;for(cd(o),s=e=0;s<o.i;s++)for(var d=24;0<=d;d-=8)a[e++]=255&o.a[s]>>d;return x(a,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}function fd(a,t){for(var e=0;e<a.b.length;e++)try{a.b[e](t)}catch(e){}}function bd(a){return a.f||(a.f=a.ga().then(function(){return new mt(function(o){a.wa(function n(t){return o(t),a.La(n),!1}),function(a){function r(r){e=!0,o&&o.cancel(),vd(a).then(function(o){var t=s;if(o&&r&&r.url){var i=null;-1!=(t=Nr(r.url)).indexOf("/__/auth/callback")&&(i=(i="object"==typeof(i=bi(Je(i=ze(t),"firebaseError")||null))?Bi(i):null)?new oo(o.c,o.b,null,null,i):new oo(o.c,o.b,t,o.f)),t=i||s}fd(a,t)})}var s=new oo("unknown",null,null,null,new xi("no-auth-event")),e=!1,o=Me(500).then(function(){return vd(a).then(function(){e||fd(a,s)})}),n=yp.handleOpenURL;yp.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(hi("BuildInfo.packageName",yp).toLowerCase()+"://")&&r({url:e}),"function"==typeof n)try{n(e)}catch(e){console.error(e)}},wr||(wr=new so),wr.subscribe(r)}(a)})})),a.f}function vd(a){var e=null,o;return(o=a.g,o.b.get(Kp,o.a).then(function(e){return ao(e)})).then(function(n){return e=n,id((n=a.g).b,Kp,n.a)}).then(function(){return e})}function Td(e){this.a=e,this.b=ad()}function _d(e){return id(e.b,Zp,e.a)}function Ed(a,t,e){this.i={},this.u=0,this.A=a,this.l=t,this.o=e,this.h=[],this.f=!1,this.m=b(this.bb,this),this.b=new Ad,this.v=new Od,this.g=new Td(this.l+":"+this.o),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.v,this.c.linkViaPopup=this.v,this.c.reauthViaPopup=this.v,this.a=kd(this.A,this.l,this.o,fr)}function kd(a,t,e,n){var o=d.SDK_VERSION||null;return Qn()?new md(a,t,e,o,n):new Es(a,t,e,o,n)}function Cd(a){a.f||(a.f=!0,a.a.wa(a.m));var e=a.a;return a.a.ga().s(function(n){throw a.a==e&&a.reset(),n})}function Sd(a){a.a.Mb()&&Cd(a).s(function(n){var t=new oo("unknown",null,null,null,new xi("operation-not-supported-in-this-environment"));wd(n)&&a.bb(t)}),a.a.Hb()||xd(a.b)}function Id(a,t,e,n,i,r){return a.a.Db(t,e,n,function(){a.f||(a.f=!0,a.a.wa(a.m))},function(){a.reset()},i,r)}function wd(e){return e&&"auth/cordova-not-ready"==e.code}function Dd(a,t,e){var n=t+":"+e;return nc[n]||(nc[n]=new Ed(a,t,e)),nc[n]}function Ad(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function xd(e){e.g||(e.g=!0,Ld(e,!1,null,null))}function Nd(a,t){if(a.b=function(){return kt(t)},a.f.length)for(var e=0;e<a.f.length;e++)a.f[e](t)}function Ld(a,t,e,n){t?n?function(a,t){if(a.b=function(){return Et(t)},a.c.length)for(var e=0;e<a.c.length;e++)a.c[e](t)}(a,n):Nd(a,e):Nd(a,{user:null}),a.f=[],a.c=[]}function Od(){}function Rd(){this.ub=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ub},set:function(e){this.ub=e},enumerable:!1})}function Md(n,t){this.a=t,_i(this,"verificationId",n)}function Pd(a,t,e,n){return new eo(a).Ua(t,e).then(function(e){return new Md(e,n)})}function Bd(n){var t=cr(n);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new xi("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ci(this,{token:n,expirationTime:Ei(1e3*t.exp),authTime:Ei(1e3*t.auth_time),issuedAtTime:Ei(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function qd(a,t,e){if(this.h=a,this.i=t,this.g=e,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Fd(n,t){return t?(n.a=n.c,n.g()):(t=n.a,n.a*=2,n.a>n.f&&(n.a=n.f),t)}function Vd(e){this.f=e,this.b=this.a=null,this.c=0}function Ud(a,t){var o=t.idToken,n=t.refreshToken;t=jd(t.expiresIn),a.b=o,a.c=t,a.a=n}function jd(e){return fp()+1e3*parseInt(e,10)}function Wd(n,e){return(t=n.f,a=e,new mt(function(o,e){"refresh_token"==a.grant_type&&a.refresh_token||"authorization_code"==a.grant_type&&a.code?Sa(t,t.i+"?key="+encodeURIComponent(t.b),function(n){n?n.error?e(vs(n)):n.access_token&&n.refresh_token?o(n):e(new xi("internal-error")):e(new xi("network-request-failed"))},"POST",un(a).toString(),t.f,t.m.get()):e(new xi("internal-error"))})).then(function(e){return n.b=e.access_token,n.c=jd(e.expires_in),n.a=e.refresh_token,{accessToken:n.b,expirationTime:n.c,refreshToken:n.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(n.a=null),e});var t,a}function Hd(n,t){this.a=n||null,this.b=t||null,Ci(this,{lastSignInTime:Ei(t||null),creationTime:Ei(n||null)})}function Kd(a,t,e,n,i,r){Ci(this,{uid:a,displayName:n||null,photoURL:i||null,email:e||null,phoneNumber:r||null,providerId:t})}function zd(a,t){for(var e in ne.call(this,a),t)this[e]=t[e]}function $d(a,o,e){var n;this.G=[],this.l=a.apiKey,this.o=a.appName,this.u=a.authDomain||null,a=d.SDK_VERSION?si(d.SDK_VERSION):null,this.c=new ma(this.l,hr(fr),a),this.h=new Vd(this.c),el(this,o.idToken),Ud(this.h,o),_i(this,"refreshToken",this.h.a),al(this,e||{}),Ce.call(this),this.I=!1,this.u&&fi()&&(this.a=Dd(this.u,this.l,this.o)),this.N=[],this.i=null,this.A=(n=this,new qd(function(){return n.F(!0)},function(e){return e&&"auth/network-request-failed"==e.code},function(){var e=n.h.c-fp()-3e5;return 0<e?e:0})),this.V=b(this.Ha,this);var s=this;this.ka=null,this.ta=function(e){s.pa(e.g)},this.X=null,this.O=[],this.sa=function(e){Gd(s,e.c)},this.W=null}function Qd(n,t){n.X&&Te(n.X,"languageCodeChanged",n.ta),(n.X=t)&&ge(t,"languageCodeChanged",n.ta)}function Gd(n,t){n.O=t,Ea(n.c,d.SDK_VERSION?si(d.SDK_VERSION,n.O):null)}function Xd(n,t){n.W&&Te(n.W,"frameworkChanged",n.sa),(n.W=t)&&ge(t,"frameworkChanged",n.sa)}function Yd(t){try{return d.app(t.o).auth()}catch(e){throw new xi("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function Jd(e){e.D||e.A.b||(e.A.start(),Te(e,"tokenChanged",e.V),ge(e,"tokenChanged",e.V))}function Zd(e){Te(e,"tokenChanged",e.V),e.A.stop()}function el(n,t){n.ra=t,_i(n,"_lat",t)}function tl(a){for(var t=[],e=0;e<a.N.length;e++)t.push(a.N[e](a));return It(t).then(function(){return a})}function nl(e){e.a&&!e.I&&(e.I=!0,e.a.subscribe(e))}function al(n,t){Ci(n,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,metadata:new Hd(t.createdAt,t.lastLoginAt),providerData:[]})}function ol(){}function rl(e){return kt().then(function(){if(e.D)throw new xi("app-deleted")})}function il(e){return x(e.providerData,function(e){return e.providerId})}function sl(n,t){t&&(dl(n,t.providerId),n.providerData.push(t))}function dl(n,a){V(n.providerData,function(e){return e.providerId==a})}function ll(a,t,e){("uid"!=t||e)&&a.hasOwnProperty(t)&&_i(a,t,e)}function pl(a,e){var t,o,s;a!=e&&(Ci(a,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),e.metadata?_i(a,"metadata",new Hd((s=e.metadata).a,s.b)):_i(a,"metadata",new Hd),L(e.providerData,function(e){sl(a,e)}),t=a.h,o=e.h,t.b=o.b,t.a=o.a,t.c=o.c,_i(a,"refreshToken",a.h.a))}function cl(a){return a.F().then(function(o){var t=a.isAnonymous,r,i;return(r=a,i=o,Ka(r.c,Ja,{idToken:i}).then(b(r.xc,r))).then(function(){return t||ll(a,"isAnonymous",!1),o})})}function ul(n,t){t.idToken&&n.ra!=t.idToken&&(Ud(n.h,t),n.dispatchEvent(new zd("tokenChanged")),el(n,t.idToken),ll(n,"refreshToken",n.h.a))}function hl(n,t){return cl(n).then(function(){if(D(il(n),t))return tl(n).then(function(){throw new xi("provider-already-linked")})})}function ml(a,t,o){return Ri({user:a,credential:io(t),additionalUserInfo:t=gr(t),operationType:o})}function gl(n,t){return ul(n,t),n.reload().then(function(){return n})}function yl(l,n,i,t,p){if(!fi())return Et(new xi("operation-not-supported-in-this-environment"));if(l.i&&!p)return Et(l.i);var r=dr(i.providerId),o=yi(l.uid+":::"),a=null;(!vi()||ti())&&l.u&&i.isOAuthProvider&&(a=Os(l.u,l.l,l.o,n,i,null,o,d.SDK_VERSION||null));var c=zn(a,r&&r.Ba,r&&r.Aa);return t=t().then(function(){if(bl(l),!p)return l.F().then(function(){})}).then(function(){return Id(l.a,c,n,i,o,!!a)}).then(function(){return new mt(function(a,t){l.ha(n,null,new xi("cancelled-popup-request"),l.g||null),l.f=a,l.v=t,l.g=o,l.b=l.a.Ea(l,n,c,o)})}).then(function(e){return c&&Jn(c),e?Ri(e):null}).s(function(e){throw c&&Jn(c),e}),vl(l,t,p)}function fl(s,e,t,n,d){if(!fi())return Et(new xi("operation-not-supported-in-this-environment"));if(s.i&&!d)return Et(s.i);var r=null,l=yi(s.uid+":::");return n=n().then(function(){if(bl(s),!d)return s.F().then(function(){})}).then(function(){return s.aa=l,tl(s)}).then(function(e){return s.ba&&(e=(e=s.ba).b.set(ac,s.w(),e.a)),e}).then(function(){return s.a.Ca(e,t,l)}).s(function(e){if(r=e,s.ba)return El(s.ba);throw r}).then(function(){if(r)throw r}),vl(s,n,d)}function bl(e){if(!e.a||!e.I){if(e.a&&!e.I)throw new xi("internal-error");throw new xi("auth-domain-config-required")}}function vl(s,t,e){var n=(d=t,l=e,(a=s).i&&!l?(d.cancel(),Et(a.i)):d.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(a.i||a.dispatchEvent(new zd("userInvalidated")),a.i=e),e})),a,d,l;return s.G.push(n),n.ia(function(){P(s.G,n)}),n}function Tl(a){if(!a.apiKey)return null;var t={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName},e={};if(!(a.stsTokenManager&&a.stsTokenManager.accessToken&&a.stsTokenManager.expirationTime))return null;e.idToken=a.stsTokenManager.accessToken,e.refreshToken=a.stsTokenManager.refreshToken||null,e.expiresIn=(a.stsTokenManager.expirationTime-fp())/1e3;var n=new $d(t,e,a);return a.providerData&&L(a.providerData,function(e){e&&sl(n,Ri(e))}),a.redirectEventId&&(n.aa=a.redirectEventId),n}function _l(e){this.a=e,this.b=ad()}function El(e){return id(e.b,ac,e.a)}function kl(d){var l,p,h,m,g,y,f,v,T;this.a=d,this.b=ad(),this.c=null,this.f=(l=this,p=Sl("local"),h=Sl("session"),m=Sl("none"),(g=l.b,y=p,f=l.a,v=rd(y,f),T=od(g,y.B),g.get(y,f).then(function(n){var t=null;try{t=bi(yp.localStorage.getItem(v))}catch(e){}return t&&!n?(yp.localStorage.removeItem(v),g.set(y,t,f)):void(t&&n&&"localStorage"!=T.type&&yp.localStorage.removeItem(v))})).then(function(){return l.b.get(h,l.a)}).then(function(e){return e?h:l.b.get(m,l.a).then(function(e){return e?m:l.b.get(p,l.a).then(function(e){return e?p:l.b.get(oc,l.a).then(function(e){return e?Sl(e):p})})})}).then(function(e){return l.c=e,Cl(l,e.B)}).s(function(){l.c||(l.c=p)})),this.b.addListener(Sl("local"),this.a,b(this.g,this))}function Cl(a,t){var e=[],o,d;for(o in jp)jp[o]!==t&&e.push(id(a.b,Sl(jp[o]),a.a));return e.push(id(a.b,oc,a.a)),d=e,new mt(function(s,n){var l=d.length,p=[];if(l)for(var e=function(n,t){l--,p[n]=t,0==l&&s(p)},t=function(e){n(e)},o=0;o<d.length;o++)St(d[o],v(e,o),t);else s(p)})}function Sl(e){return{name:"authUser",B:e}}function Il(n,t){return Al(n,function(){return n.b.set(n.c,t.w(),n.a)})}function wl(e){return Al(e,function(){return id(e.b,e.c,e.a)})}function Dl(n,a){return Al(n,function(){return n.b.get(n.c,n.a).then(function(e){return e&&a&&(e.authDomain=a),Tl(e||{})})})}function Al(n,t){return n.f=n.f.then(t,t),n.f}function xl(p){if(this.l=!1,_i(this,"settings",new Rd),_i(this,"app",p),!Bl(this).options||!Bl(this).options.apiKey)throw new xi("invalid-api-key");var m,g,y,v,T,_,E,k,C,S,I,w;p=d.SDK_VERSION?si(d.SDK_VERSION):null,this.c=new ma(Bl(this).options&&Bl(this).options.apiKey,hr(fr),p),this.N=[],this.o=[],this.I=[],this.Sb=d.INTERNAL.createSubscribe(b(this.mc,this)),this.O=void 0,this.Tb=d.INTERNAL.createSubscribe(b(this.nc,this)),Ml(this,null),this.h=new kl(Bl(this).options.apiKey+":"+Bl(this).name),this.A=new _l(Bl(this).options.apiKey+":"+Bl(this).name),this.V=Ul(this,(g=Bl(m=this).options.authDomain,y=(v=m,T=(_=v.A,E=Bl(v).options.authDomain,_.b.get(ac,_.a).then(function(e){return e&&E&&(e.authDomain=E),Tl(e||{})})).then(function(e){return(v.D=e)&&(e.ba=v.A),El(v.A)}),Ul(v,T)).then(function(){return Dl(m.h,g)}).then(function(n){return n?(n.ba=m.A,m.D&&(m.D.aa||null)==(n.aa||null)?n:n.reload().then(function(){return Il(m.h,n).then(function(){return n})}).s(function(e){return"auth/network-request-failed"==e.code?n:wl(m.h)})):null}).then(function(e){Ml(m,e||null)}),Ul(m,y))),this.i=Ul(this,(k=this).V.then(function(){return k.fa()}).s(function(){}).then(function(){if(!k.l)return k.ka()}).s(function(){}).then(function(){if(!k.l){k.X=!0;var e=k.h;e.b.addListener(Sl("local"),e.a,k.ka)}})),this.X=!1,this.ka=b(this.Kc,this),this.Ha=b(this.Z,this),this.ra=b(this.$b,this),this.sa=b(this.jc,this),this.ta=b(this.kc,this),S=Bl(C=this).options.authDomain,I=Bl(C).options.apiKey,S&&fi()&&(C.Rb=C.V.then(function(){if(!C.l){if(C.a=Dd(S,I,Bl(C).name),C.a.subscribe(C),ql(C)&&nl(ql(C)),C.D){nl(C.D);var e=C.D;e.pa(C.ea()),Qd(e,C),Gd(e=C.D,C.G),Xd(e,C),C.D=null}return C.a}})),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.tc,this),this.u=0,Ce.call(this),w=this,Object.defineProperty(w,"lc",{get:function(){return this.ea()},set:function(e){this.pa(e)},enumerable:!1}),w.W=null,this.G=[]}function Nl(e){ne.call(this,"languageCodeChanged"),this.g=e}function Ll(e){ne.call(this,"frameworkChanged"),this.c=e}function Ol(e){return e.Rb||Et(new xi("auth-domain-config-required"))}function Rl(d,o){var a={};return a.apiKey=Bl(d).options.apiKey,a.authDomain=Bl(d).options.authDomain,a.appName=Bl(d).name,d.V.then(function(){return s=a,l=o,p=d.A,c=d.ya(),u=new $d(s,l),p&&(u.ba=p),c&&Gd(u,c),u.reload().then(function(){return u});var s,l,p,c,u}).then(function(e){return ql(d)&&e.uid==ql(d).uid?pl(ql(d),e):(Ml(d,e),nl(e)),d.Z(e)}).then(function(){Vl(d)})}function Ml(a,t){var e,o;ql(a)&&(e=ql(a),o=a.Ha,V(e.N,function(e){return e==o}),Te(ql(a),"tokenChanged",a.ra),Te(ql(a),"userDeleted",a.sa),Te(ql(a),"userInvalidated",a.ta),Zd(ql(a))),t&&(t.N.push(a.Ha),ge(t,"tokenChanged",a.ra),ge(t,"userDeleted",a.sa),ge(t,"userInvalidated",a.ta),0<a.u&&Jd(t)),_i(a,"currentUser",t),t&&(t.pa(a.ea()),Qd(t,a),Gd(t,a.G),Xd(t,a))}function Pl(a,e){var o=null,r=null;return Ul(a,e.then(function(e){return o=io(e),r=gr(e),Rl(a,e)}).then(function(){return Ri({user:ql(a),credential:o,additionalUserInfo:r,operationType:"signIn"})}))}function Bl(e){return e.app}function ql(e){return e.currentUser}function Fl(e){return ql(e)&&ql(e)._lat||null}function Vl(n){if(n.X){for(var t=0;t<n.o.length;t++)n.o[t]&&n.o[t](Fl(n));if(n.O!==n.getUid()&&n.I.length)for(n.O=n.getUid(),t=0;t<n.I.length;t++)n.I[t]&&n.I[t](Fl(n))}}function Ul(n,t){return n.N.push(t),t.ia(function(){P(n.N,t)}),t}function jl(){}function Wl(){this.a={},this.b=1e12}function Hl(n,t){return(t=Kl(t))&&n.a[t]||null}function Kl(e){return(e=void 0===e?1e12:e)?e.toString():null}function zl(a,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Ln(a);var e=this;this.i=function(){e.execute()},this.h?this.execute():ge(this.f,"click",this.i)}function $l(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Ql(){}function Gl(){this.b=yp.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Vt(1e6*Math.random()).toString()}function Xl(d,t,e,n,i,r,o){if(_i(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.l=t,this.g=null,o=o?(ic||(ic=new Ql),ic):(lc||(lc=new Gl),lc),this.o=o,this.a=e||{theme:"light",type:"image"},this.h=[],this.a[uc])throw new xi("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[hc],!yp.document)throw new xi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Ln(t)||!this.i&&Ln(t).hasChildNodes())throw new xi("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new ma(d,r||null,i||null),this.v=n||function(){return null};var l=this;this.m=[];var s=this.a[pc];this.a[pc]=function(n){if(Yl(l,n),"function"==typeof s)s(n);else if("string"==typeof s){var t=hi(s,yp);"function"==typeof t&&t(n)}};var p=this.a[cc];this.a[cc]=function(){if(Yl(l,null),"function"==typeof p)p();else if("string"==typeof p){var e=hi(p,yp);"function"==typeof e&&e()}}}function Yl(a,t){for(var e=0;e<a.m.length;e++)try{a.m[e](t)}catch(e){}}function Jl(n,t){return n.h.push(t),t.ia(function(){P(n.h,t)}),t}function Zl(e){if(e.D)throw new xi("internal-error","RecaptchaVerifier instance has been destroyed.")}function ep(a,t,e){var s=!1;try{this.b=e||d.app()}catch(e){throw new xi("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new xi("invalid-api-key");e=this.b.options.apiKey;var l=this,r=null;try{r=this.b.auth().ya()}catch(e){}try{s=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}r=d.SDK_VERSION?si(d.SDK_VERSION,r):null,Xl.call(this,e,a,t,function(){try{var t=l.b.auth().ea()}catch(e){t=null}return t},r,hr(fr),s)}function tp(s,t,d,l){t:{d=Array.prototype.slice.call(d);for(var p=0,c=!1,u=0;u<t.length;u++)if(t[u].optional)c=!0;else{if(c)throw new xi("internal-error","Argument validator encountered a required argument after an optional argument.");p++}if(c=t.length,d.length<p||c<d.length)l="Expected "+(p==c?1==p?"1 argument":p+" arguments":p+"-"+c+" arguments")+" but got "+d.length+".";else{for(p=0;p<d.length;p++)if(c=t[p].optional&&void 0===d[p],!t[p].M(d[p])&&!c){if(t=t[p],0>p||p>=mc.length)throw new xi("internal-error","Argument validator received an unsupported number of arguments.");d=mc[p],l=(l?"":d+" argument ")+(t.name?"\""+t.name+"\" ":"")+"must be "+t.K+".";break t}l=null}}if(l)throw new xi("argument-error",s+" failed: "+l)}function np(n,t){return{name:n||"",K:"a valid string",optional:!!t,M:c}}function ap(n,t){return{name:n||"",K:"a boolean",optional:!!t,M:r}}function op(n,t){return{name:n||"",K:"a valid object",optional:!!t,M:g}}function rp(n,t){return{name:n||"",K:"a function",optional:!!t,M:m}}function ip(a,t){return{name:a||"",K:"null",optional:!!t,M:n}}function sp(a){return{name:a?a+"Credential":"credential",K:a?"a valid "+a+" credential":"a valid credential",optional:!1,M:function(n){if(!n)return!1;var t=!a||n.providerId===a;return n.la&&t}}}function dp(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!!(e&&c(e.type)&&m(e.verify))}}}function lp(a,e,n,t){return{name:n||"",K:a.K+" or "+e.K,optional:!!t,M:function(n){return a.M(n)||e.M(n)}}}function pp(a,t){for(var e in t){var n=t[e].name;a[n]=hp(n,a[e],t[e].j)}}function cp(a,t){for(var e in t){var n=t[e].name;n!==e&&Object.defineProperty(a,n,{get:v(function(e){return this[e]},e),set:v(function(a,t,e,n){tp(a,[e],[n],!0),this[t]=n},n,e,t[e].vb),enumerable:!0})}}function up(a,t,e,n){a[t]=hp(t,e,n)}function hp(s,d,e){function t(){var a=Array.prototype.slice.call(arguments);return tp(n,e,a),d.apply(this,a)}if(!e)return d;var n=(i=(i=s).split("."))[i.length-1],a,i;for(a in d)t[a]=d[a];for(a in d.prototype)t.prototype[a]=d.prototype[a];return t}var mp="function"==typeof Object.defineProperties?Object.defineProperty:function(a,t,e){a!=Array.prototype&&a!=Object.prototype&&(a[t]=e.value)},o="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,a;!function(a,s){if(s){var d=o;a=a.split(".");for(var l=0,p;l<a.length-1;l++)p=a[l],p in d||(d[p]={}),d=d[p];(s=s(l=d[a=a[a.length-1]]))!=l&&null!=s&&mp(d,a,{configurable:!0,writable:!0,value:s})}}("Promise",function(a){function d(n){this.b=0,this.c=void 0,this.a=[];var a=this.f();try{n(a.resolve,a.reject)}catch(e){a.reject(e)}}function t(){this.a=null}function s(n){return n instanceof d?n:new d(function(e){e(n)})}if(a)return a;t.prototype.b=function(n){if(null==this.a){this.a=[];var t=this;this.c(function(){t.g()})}this.a.push(n)};var e=o.setTimeout;t.prototype.c=function(n){e(n,0)},t.prototype.g=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var t=0,o;t<a.length;++t){o=a[t],a[t]=null;try{o()}catch(e){this.f(e)}}}this.a=null},t.prototype.f=function(e){this.c(function(){throw e})},d.prototype.f=function(){function e(o){return function(e){n||(n=!0,o.call(a,e))}}var a=this,n=!1;return{resolve:e(this.o),reject:e(this.g)}},d.prototype.o=function(n){if(n===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(n instanceof d)this.u(n);else{t:switch(typeof n){case"object":var t=null!=n;break t;case"function":t=!0;break t;default:t=!1;}t?this.l(n):this.h(n)}},d.prototype.l=function(n){var t;try{t=n.then}catch(e){return void this.g(e)}"function"==typeof t?this.v(t,n):this.h(n)},d.prototype.g=function(e){this.i(2,e)},d.prototype.h=function(e){this.i(1,e)},d.prototype.i=function(n,t){if(0!=this.b)throw Error("Cannot settle("+n+", "+t+"): Promise already settled in state"+this.b);this.b=n,this.c=t,this.m()},d.prototype.m=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)l.b(this.a[e]);this.a=null}};var l=new t;return d.prototype.u=function(n){var t=this.f();n.Ja(t.resolve,t.reject)},d.prototype.v=function(a,t){var e=this.f();try{a.call(t,e.resolve,e.reject)}catch(n){e.reject(n)}},d.prototype.then=function(a,t){function e(n,e){return"function"==typeof n?function(e){try{o(n(e))}catch(e){s(e)}}:e}var n=new d(function(n,t){o=n,s=t}),o,s;return this.Ja(e(a,o),e(t,s)),n},d.prototype.catch=function(e){return this.then(void 0,e)},d.prototype.Ja=function(a,t){function e(){switch(n.b){case 1:a(n.c);break;case 2:t(n.c);break;default:throw Error("Unexpected state: "+n.b);}}var n=this;null==this.a?l.b(e):this.a.push(e)},d.resolve=s,d.reject=function(a){return new d(function(n,t){t(a)})},d.race=function(a){return new d(function(o,t){for(var e=ai(a),n=e.next();!n.done;n=e.next())s(n.value).Ja(o,t)})},d.all=function(e){var n=ai(e),o=n.next();return o.done?s([]):new d(function(a,d){function t(n){return function(e){l[n]=e,0==--i&&a(l)}}for(var l=[],i=0;l.push(void 0),i++,s(o.value).Ja(t(l.length-1),d),!(o=n.next()).done;);})},d});var gp=gp||{},yp=this,l=/^[\w+/_-]+[=]{0,2}$/,f=null,u="closure_uid_"+(1e9*Math.random()>>>0),fp=Date.now||function(){return+new Date};T(S,Error),S.prototype.name="CustomError",T(w,S),w.prototype.name="AssertionError",N.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var k=new N(function(){return new C},function(e){e.reset()});O.prototype.add=function(a,t){var e=k.get();e.set(a,t),this.b?this.b.next=e:this.a=e,this.b=e},C.prototype.set=function(n,t){this.a=n,this.b=t,this.next=null},C.prototype.reset=function(){this.next=this.b=this.a=null};var R=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(a,t){if(c(a))return c(t)&&1==t.length?a.indexOf(t,0):-1;for(var e=0;e<a.length;e++)if(e in a&&a[e]===t)return e;return-1},L=Array.prototype.forEach?function(a,t,e){Array.prototype.forEach.call(a,t,e)}:function(a,t,e){for(var n=a.length,i=c(a)?a.split(""):a,r=0;r<n;r++)r in i&&t.call(e,i[r],r,a)},x=Array.prototype.map?function(n,t){return Array.prototype.map.call(n,t,void 0)}:function(a,t){for(var e=a.length,n=Array(e),i=c(a)?a.split(""):a,r=0;r<e;r++)r in i&&(n[r]=t.call(void 0,i[r],r,a));return n},e=Array.prototype.some?function(n,t){return Array.prototype.some.call(n,t,void 0)}:function(a,t){for(var e=a.length,n=c(a)?a.split(""):a,o=0;o<e;o++)if(o in n&&t.call(void 0,n[o],o,a))return!0;return!1},j=String.prototype.trim?function(e){return e.trim()}:function(e){return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},B=/&/g,G=/</g,W=/>/g,X=/"/g,J=/'/g,z=/\x00/g,Y=/[\x00&<>"']/,bp;t:{var vp=yp.navigator;if(vp){var tt=vp.userAgent;if(tt){bp=tt;break t}}bp=""}var et=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ut=!1,Tp=new O,vt=0,bt=2,yt=3,wt,_p;gt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ep=new N(function(){return new gt},function(e){e.reset()});mt.prototype.then=function(a,t,e){return Nt(this,m(a)?a:null,m(t)?t:null,e)},mt.prototype.$goog_Thenable=!0,(a=mt.prototype).ia=function(n,a){return(n=ft(n,n,a)).c=!0,At(this,n),this},a.s=function(n,t){return Nt(this,null,n,t)},a.cancel=function(e){this.a==0&&ht(function(){!function d(t,e){if(t.a==0)if(t.c){var n=t.c;if(n.b){for(var i=0,l=null,p=null,c=n.b;c&&(c.c||(i++,c.a==t&&(l=c),!(l&&1<i)));c=c.next)l||(p=c);l&&(n.a==0&&1==i?d(n,e):(p?((i=p).next==n.f&&(n.f=i),i.next=i.next.next):Rt(n),Dt(n,l,3,e)))}t.c=null}else _t(t,3,e)}(this,new xt(e))},this)},a.Lc=function(e){this.a=0,_t(this,2,e)},a.Mc=function(e){this.a=0,_t(this,3,e)},a.Xb=function(){for(var e;e=Rt(this);)Dt(this,e,this.a,this.i);this.h=!1};var Tt=lt;T(xt,S);Pt.prototype.qa=!(xt.prototype.name="cancel"),Pt.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},Kt[" "]=h;var Mt=Q("Opera"),Bt=Q("Trident")||Q("MSIE"),Gt=Q("Edge"),Wt=Gt||Bt,Xt=Q("Gecko")&&(!q(bp.toLowerCase(),"webkit")||Q("Edge"))&&!(Q("Trident")||Q("MSIE"))&&!Q("Edge"),Jt=q(bp.toLowerCase(),"webkit")&&!Q("Edge"),zt,kp;t:{var Cp="",Sp=(kp=bp,Xt?/rv:([^\);]+)(\)|;)/.exec(kp):Gt?/Edge\/([\d\.]+)/.exec(kp):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(kp):Jt?/WebKit\/(\S+)/.exec(kp):Mt?/(?:Version)[ \/]?(\S+)/.exec(kp):void 0);if(Sp&&(Cp=Sp?Sp[1]:""),Bt){var Zt=Ft();if(null!=Zt&&Zt>parseFloat(Cp)){zt=Zt+"";break t}}zt=Cp}var Qt={},ee=yp.document,ie;ie=ee&&Bt?Ft()||("CSS1Compat"==ee.compatMode?parseInt(zt,10):5):void 0;var Ip=Object.freeze||function(e){return e},re=!Bt||9<=+ie,oe=Bt&&!Yt("9"),ae=function(){if(!yp.addEventListener||!Object.defineProperty)return!1;var n=!1,a=Object.defineProperty({},"passive",{get:function(){n=!0}});try{yp.addEventListener("test",h,a),yp.removeEventListener("test",h,a)}catch(e){}return n}();ne.prototype.preventDefault=function(){this.Kb=!1},T(ue,ne);var se=Ip({2:"touch",3:"pen",4:"mouse"});ue.prototype.preventDefault=function(){ue.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,oe)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},ue.prototype.f=function(){return this.a};var he="closure_listenable_"+(0|1e6*Math.random()),le=0;pe.prototype.add=function(s,d,l,n,i){var r=s.toString();(s=this.a[r])||(s=this.a[r]=[],this.b++);var o=me(s,d,n,i);return-1<o?(d=s[o],l||(d.Ia=!1)):((d=new ce(d,this.src,r,!!n,i)).Ia=l,s.push(d)),d};var wp="closure_lm_"+(0|1e6*Math.random()),be={},ye="__closure_events_fn_"+(1e9*Math.random()>>>0);T(Ce,Pt),Ce.prototype[he]=!0,Ce.prototype.addEventListener=function(a,t,e,n){ge(this,a,t,e,n)},Ce.prototype.removeEventListener=function(a,t,e,n){Te(this,a,t,e,n)},Ce.prototype.dispatchEvent=function(s){var d=this.Va,l;if(d)for(l=[];d;d=d.Va)l.push(d);d=this.Qb;var p=s.type||s;if(c(s))s=new ne(s,d);else if(s instanceof ne)s.target=s.target||d;else{var i=s;ot(s=new ne(p,d),i)}if(i=!0,l)for(var u=l.length-1,h;0<=u;u--)h=s.b=l[u],i=Le(h,p,!0,s)&&i;if(i=Le(h=s.b=d,p,!0,s)&&i,i=Le(h,p,!1,s)&&i,l)for(u=0;u<l.length;u++)i=Le(h=s.b=l[u],p,!1,s)&&i;return i},Ce.prototype.va=function(){if(Ce.qb.va.call(this),this.m){var a=this.m,e;for(e in a.a){for(var o=a.a[e],n=0;n<o.length;n++)de(o[n]);delete a.a[e],a.b--}}this.Va=null},(a=Ve.prototype).S=function(){Ke(this);for(var n=[],t=0;t<this.a.length;t++)n.push(this.b[this.a[t]]);return n},a.U=function(){return Ke(this),this.a.concat()},a.clear=function(){this.b={},this.c=this.a.length=0},a.get=function(n,t){return Fe(this.b,n)?this.b[n]:t},a.set=function(n,t){Fe(this.b,n)||(this.c++,this.a.push(n)),this.b[n]=t},a.forEach=function(a,t){for(var e=this.U(),n=0;n<e.length;n++){var s=e[n],r=this.get(s);a.call(t,r,s,this)}};var Pe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;qe.prototype.toString=function(){var a=[],t=this.f;t&&a.push(Ze(t,He,!0),":");var o=this.b;return(o||"file"==t)&&(a.push("//"),(t=this.i)&&a.push(Ze(t,He,!0),"@"),a.push(encodeURIComponent(o+"").replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(o=this.m)&&a.push(":",o+"")),(o=this.c)&&(this.b&&"/"!=o.charAt(0)&&a.push("/"),a.push(Ze(o,"/"==o.charAt(0)?nn:en,!0))),(o=this.a.toString())&&a.push("?",o),(o=this.g)&&a.push("#",Ze(o,on)),a.join("")},qe.prototype.resolve=function(d){var t=new qe(this),e=!!d.f;e?Be(t,d.f):e=!!d.i,e?t.i=d.i:e=!!d.b,e?t.b=d.b:e=null!=d.m;var l=d.c;if(e)Ge(t,d.m);else if(e=!!d.c){if("/"!=l.charAt(0))if(this.b&&!this.c)l="/"+l;else{var p=t.c.lastIndexOf("/");-1!=p&&(l=t.c.substr(0,p+1)+l)}if(".."==(p=l)||"."==p)l="";else if(q(p,"./")||q(p,"/.")){l=0==p.lastIndexOf("/",0),p=p.split("/");for(var c=[],o=0,u;o<p.length;)u=p[o++],"."==u?l&&o==p.length&&c.push(""):".."==u?((1<c.length||1==c.length&&""!=c[0])&&c.pop(),l&&o==p.length&&c.push("")):(c.push(u),l=!0);l=c.join("/")}else l=p}return e?t.c=l:e=""!==d.a.toString(),e?We(t,fn(d.a)):e=!!d.g,e&&(t.g=d.g),t};var He=/[#\/\?@]/g,en=/[#\?:]/g,nn=/[#\?]/g,rn=/[#\?@]/g,on=/#/g;(a=tn.prototype).add=function(a,o){sn(this),this.c=null,a=dn(this,a);var e=this.a.get(a);return e||this.a.set(a,e=[]),e.push(o),this.b+=1,this},a.clear=function(){this.a=this.c=null,this.b=0},a.forEach=function(a,n){sn(this),this.a.forEach(function(o,r){L(o,function(e){a.call(n,e,r,this)},this)},this)},a.U=function(){sn(this);for(var a=this.a.S(),t=this.a.U(),e=[],n=0;n<t.length;n++)for(var s=a[n],r=0;r<s.length;r++)e.push(t[n]);return e},a.S=function(a){sn(this);var o=[];if(c(a))hn(this,a)&&(o=U(o,this.a.get(dn(this,a))));else{a=this.a.S();for(var r=0;r<a.length;r++)o=U(o,a[r])}return o},a.set=function(n,a){return sn(this),this.c=null,hn(this,n=dn(this,n))&&(this.b-=this.a.get(n).length),this.a.set(n,[a]),this.b+=1,this},a.get=function(n,a){return n&&0<(n=this.S(n)).length?n[0]+"":a},a.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var s=[],t=this.a.U(),e=0;e<t.length;e++){var d=t[e],l=encodeURIComponent(d+"");d=this.S(d);for(var r=0,p;r<d.length;r++)p=l,""!==d[r]&&(p+="="+encodeURIComponent(d[r]+"")),s.push(p)}return this.c=s.join("&")};var an=!Bt||9<=+ie;pn.prototype.na=!0,pn.prototype.ma=function(){return this.a},pn.prototype.toString=function(){return"Const{"+this.a+"}"};var vn={},bn={};gn.prototype.na=!0,gn.prototype.ma=function(){return this.a.toString()},gn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var yn=/%{(\w+)}/g,kn=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,En={};Tn.prototype.na=!0,Tn.prototype.ma=function(){return this.a.toString()},Tn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Sn=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,On={};_n("about:blank"),Cn.prototype.na=!0,Cn.prototype.ma=function(){return this.a.toString()},Cn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Pn={};Rn("<!DOCTYPE html>"),Rn(""),Rn("<br>");var Dn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},jn={'"':"\\\"","\\":"\\\\","/":"\\/","":"\\b","":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},qn=/\uffff/.test("\uFFFF")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,Hn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$n=/^[^@]+@[^@]+$/,Zn="Firefox",oi={Sc:"FirebaseCore-web",Uc:"FirebaseUI-web"};Ti.prototype.get=function(){var e=yp.navigator;return e&&"boolean"==typeof e.onLine&&(di()||"chrome-extension:"===pi()||void 0!==e.connection)&&!e.onLine?Math.min(5e3,this.a):this.b?this.c:this.a};var ui={},Oi;try{var Dp={};Object.defineProperty(Dp,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Dp,"abcd",{configurable:!0,enumerable:!0,value:2}),Oi=2==Dp.abcd}catch(e){Oi=!1}var Pi="EMAIL_SIGNIN",Mi="email",ji="newEmail",Ui="requestType",Vi="email",Ki="fromEmail",Fi="data",qi="operation";T(xi,Error),xi.prototype.w=function(){return{code:this.code,message:this.message}},xi.prototype.toJSON=function(){return this.w()};var Hi="auth/",Wi={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":"This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.","popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Xi="android",zi="dynamicLinkDomain",Yi="handleCodeInApp",$i="iOS",Zi="url",Qi="installApp",tr="minimumVersion",er="packageName",nr="bundleId",ir=null,Ap=null;sr.prototype.f=function(){return this.b};var xp={Yc:{ab:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},$c:{ab:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ad:{ab:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}},fr;fr=hr("__EID__")?"__EID__":void 0;var Np=["oauth_consumer_key","oauth_nonce","oauth_signature","oauth_signature_method","oauth_timestamp","oauth_token","oauth_version"],pr=["client_id","response_type","scope","redirect_uri","state"],vr={Tc:{Oa:"locale",Ba:500,Aa:600,Pa:"facebook.com",hb:pr},Vc:{Oa:null,Ba:500,Aa:620,Pa:"github.com",hb:pr},Wc:{Oa:"hl",Ba:515,Aa:680,Pa:"google.com",hb:pr},bd:{Oa:"lang",Ba:485,Aa:705,Pa:"twitter.com",hb:Np}},mr="idToken",yr="providerId";T(Ir,br),T(Tr,Ir),T(kr,Ir),T(Er,Ir),T(Sr,Ir),Pr.prototype.la=function(e){return Ma(e,Cr(this))},Pr.prototype.b=function(a,t){var e=Cr(this);return e.idToken=t,ja(a,e)},Pr.prototype.f=function(n,t){return _r(Ua(n,Cr(this)),t)},Pr.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Dr.prototype.la=function(e){return Ma(e,Lr(this))},Dr.prototype.b=function(a,t){var e=Lr(this);return e.idToken=t,ja(a,e)},Dr.prototype.f=function(n,t){return _r(Ua(n,Lr(this)),t)},Dr.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Mr.prototype.Da=function(e){return this.zb=rt(e),this},T(jr,Mr),T(Ur,Mr),Ur.prototype.ua=function(e){return D(this.a,e)||this.a.push(e),this},Ur.prototype.Fb=function(){return F(this.a)},Ur.prototype.credential=function(a,t){var e;if(!(e=g(a)?{idToken:a.idToken||null,accessToken:a.accessToken||null,nonce:a.rawNonce||null}:{idToken:a||null,accessToken:t||null}).idToken&&!e.accessToken)throw new xi("argument-error","credential failed: must provide the ID token and/or the access token.");return new Dr(this.providerId,e,this.providerId)},T(Vr,Ur),_i(Vr,"PROVIDER_ID","facebook.com"),_i(Vr,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(Fr,Ur),_i(Fr,"PROVIDER_ID","github.com"),_i(Fr,"GITHUB_SIGN_IN_METHOD","github.com"),T(Hr,Ur),_i(Hr,"PROVIDER_ID","google.com"),_i(Hr,"GOOGLE_SIGN_IN_METHOD","google.com"),T(Gr,Mr),_i(Gr,"PROVIDER_ID","twitter.com"),_i(Gr,"TWITTER_SIGN_IN_METHOD","twitter.com"),Xr.prototype.la=function(e){return this.signInMethod==zr.EMAIL_LINK_SIGN_IN_METHOD?Ka(e,Wa,{email:this.a,oobCode:this.c}):Ka(e,cs,{email:this.a,password:this.c})},Xr.prototype.b=function(n,t){return this.signInMethod==zr.EMAIL_LINK_SIGN_IN_METHOD?Ka(n,Xa,{idToken:t,email:this.a,oobCode:this.c}):Ka(n,is,{idToken:t,email:this.a,password:this.c})},Xr.prototype.f=function(n,t){return _r(this.la(n),t)},Xr.prototype.w=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Ci(zr,{PROVIDER_ID:"password"}),Ci(zr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ci(zr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Zr.prototype.la=function(e){return e.Ua(to(this))},Zr.prototype.b=function(a,t){var e=to(this);return e.idToken=t,Ka(a,ls,e)},Zr.prototype.f=function(a,o){var e=to(this);return e.operation="REAUTH",_r(a=Ka(a,fs,e),o)},Zr.prototype.w=function(){var e={providerId:"phone"};return this.a.Ta&&(e.verificationId=this.a.Ta),this.a.Sa&&(e.verificationCode=this.a.Sa),this.a.Fa&&(e.temporaryProof=this.a.Fa),this.a.$&&(e.phoneNumber=this.a.$),e},eo.prototype.Ua=function(a,i){var r=this.a.c;return kt(i.verify()).then(function(o){if(!c(o))throw new xi("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(i.type){case"recaptcha":return(t=r,s={phoneNumber:a,recaptchaToken:o},Ka(t,es,s)).then(function(e){return"function"==typeof i.reset&&i.reset(),e},function(e){throw"function"==typeof i.reset&&i.reset(),e});default:throw new xi("argument-error","Only firebase.auth.ApplicationVerifiers with type=\"recaptcha\" are currently supported.");}var t,s})},Ci(eo,{PROVIDER_ID:"phone"}),Ci(eo,{PHONE_SIGN_IN_METHOD:"phone"}),oo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.i&&e.push(this.i),e.join("-")},oo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,error:this.a&&this.a.w()}};var wr=null,Lp;so.prototype.subscribe=function(e){var a=this;this.a.push(e),this.b||(this.b=function(n){for(var t=0;t<a.a.length;t++)a.a[t](n)},"function"==typeof(e=hi("universalLinks.subscribe",yp))&&e(null,this.b))},so.prototype.unsubscribe=function(n){V(this.a,function(e){return e==n})},T(uo,xi),T(lo,xi),lo.prototype.w=function(){var n={code:this.code,message:this.message};this.email&&(n.email=this.email),this.phoneNumber&&(n.phoneNumber=this.phoneNumber);var t=this.credential&&this.credential.w();return t&&ot(n,t),n},lo.prototype.toJSON=function(){return this.w()},po.prototype.c=null,T(mo,po),mo.prototype.a=function(){var e=go(this);return e?new ActiveXObject(e):new XMLHttpRequest},mo.prototype.b=function(){var e={};return go(this)&&(e[0]=!0,e[1]=!0),e},Lp=new mo,T(bo,po),bo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new yo;throw Error("Unsupported browser")},bo.prototype.b=function(){return{}},(a=yo.prototype).open=function(a,t,e){if(null!=e&&!e)throw Error("Only async requests are supported.");this.a.open(a,t)},a.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},a.abort=function(){this.a.abort()},a.setRequestHeader=function(){},a.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},a.dc=function(){this.status=200,this.response=this.responseText=this.a.responseText,wo(this,4)},a.Gb=function(){this.status=500,this.response=this.responseText="",wo(this,4)},a.ic=function(){this.Gb()},a.ec=function(){this.status=200,wo(this,1)},a.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Io.prototype.a=null,Io.prototype.reset=function(){delete this.a},ko.prototype.toString=function(){return this.name};var Op=new ko("SEVERE",1e3),So=new ko("WARNING",900),Ao=new ko("CONFIG",700),No=new ko("FINE",500);To.prototype.log=function(a,o,r){if(a.value>=function n(t){return t.c?t.c:t.a?n(t.a):(A("Root logger has no level set."),null)}(this).value)for(m(o)&&(o=o()),a=new Io(a,o+"",this.f),r&&(a.a=r),r=this;r;)r=r.a};var Oo={},Po=null,Rp;T(Do,po),Do.prototype.a=function(){return new Lo(this.f)},Do.prototype.b=(Rp={},function(){return Rp}),T(Lo,Ce);var Mp=0;(a=Lo.prototype).open=function(n,t){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.o=n,this.g=t,this.readyState=1,Uo(this)},a.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.o,credentials:void 0,cache:void 0};n&&(t.body=n),this.u.fetch(new Request(this.g,t)).then(this.hc.bind(this),this.Ma.bind(this))},a.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,jo(this,!1)),this.readyState=0},a.hc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Uo(this)),this.a&&(this.readyState=3,Uo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.fc.bind(this),this.Ma.bind(this)):void 0!==yp.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,xo(this)):e.text().then(this.gc.bind(this),this.Ma.bind(this)))))},a.cc=function(n){if(this.a){var t=this.l.decode(n.value?n.value:new Uint8Array(0),{stream:!n.done});t&&(this.response=this.responseText+=t),n.done?jo(this,!0):Uo(this),3==this.readyState&&xo(this)}},a.gc=function(e){this.a&&(this.response=this.responseText=e,jo(this,!0))},a.fc=function(e){this.a&&(this.response=e,jo(this,!0))},a.Ma=function(n){var t=this.h;t&&t.log(So,"Failed to fetch url "+this.g,n instanceof Error?n:Error(n)),this.a&&jo(this,!0)},a.setRequestHeader=function(n,t){this.i.append(n,t)},a.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(So,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},a.getAllResponseHeaders=function(){if(!this.b){var a=this.h;return a&&a.log(So,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}a=[];for(var o=this.b.entries(),e=o.next();!e.done;)e=e.value,a.push(e[0]+": "+e[1]),e=o.next();return a.join("\r\n")},T(Vo,Ce);var Mo="";Vo.prototype.b=Eo("goog.net.XhrIo");var Fo=/^https?$/i,qo=["POST","PUT"];(a=Vo.prototype).Ga=function(){void 0!==gp&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ro(this.b,Zo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},a.abort=function(){this.a&&this.c&&(Ro(this.b,Zo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Jo(this))},a.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Jo(this,!0)),Vo.qb.va.call(this)},a.Jb=function(){this.qa||(this.I||this.i||this.f?Xo(this):this.wc())},a.wc=function(){Xo(this)},a.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case"":case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer;}var e=this.b;return e&&e.log(Op,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(e){return Ro(this.b,"Can not get response: "+e.message),null}},Qo.prototype.cancel=function(n){if(this.a)this.c instanceof Qo&&this.c.cancel();else{if(this.b){var a=this.b;delete this.b,n?a.cancel(n):(a.m--,0>=a.m&&a.cancel())}this.v?this.v.call(this.u,this):this.l=!0,this.a||(n=new aa(this),ea(this),ta(this,!1,n))}},Qo.prototype.o=function(n,t){this.i=!1,ta(this,n,t)},Qo.prototype.then=function(a,t,e){var n=new mt(function(n,t){o=n,s=t}),o,s;return na(this,o,function(e){e instanceof aa?n.cancel():s(e)}),n.then(a,t,e)},Qo.prototype.$goog_Thenable=!0,T(oa,S),oa.prototype.message="Deferred has already fired",oa.prototype.name="AlreadyCalledError",T(aa,S),aa.prototype.message="Deferred was canceled",aa.prototype.name="CanceledError",sa.prototype.c=function(){throw delete Ho[this.a],this.b};var Ho={},ca=0,da=1;T(fa,S),T(va,po),va.prototype.a=function(){return new this.f},va.prototype.b=function(){return{}};var pa="idToken",ya=new Ti(3e4,6e4),wa={"Content-Type":"application/x-www-form-urlencoded"},Ia=new Ti(3e4,6e4),Ta={"Content-Type":"application/json"},ka;ma.prototype.o=function(d,t,n,e,i,r){if(ei()&&(void 0===yp.fetch||void 0===yp.Headers||void 0===yp.Request))throw new xi("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var o=new Vo(this.c);if(r){o.g=Ut(0,r);var a=setTimeout(function(){o.dispatchEvent("timeout")},r)}Re(o,"complete",function(){a&&clearTimeout(a);var n=null;try{n=JSON.parse(function(n){try{return n.a?n.a.responseText:""}catch(e){return Ro(n.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){n=null}t&&t(n)}),De(o,"ready",function(){a&&clearTimeout(a),jt(this)}),De(o,"timeout",function(){a&&clearTimeout(a),jt(this),t&&t(null)}),Ko(o,d,n,e,i)};var Pp=new pn(bn,"https://apis.google.com/js/client.js?onload=%{onload}"),Na="__fcb"+Vt(1e6*Math.random()).toString();ma.prototype.l=function(s,d,t,n,r){var o=this;ka.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:s,method:t,body:n,headers:r,authType:"none",callback:function(e){window.gapi.auth.setToken(a),d&&d(e)}})}).s(function(e){d&&d({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},ma.prototype.ob=function(){return Ka(this,rs,{})},ma.prototype.rb=function(n,t){return Ka(this,ns,{idToken:n,email:t})},ma.prototype.sb=function(n,t){return Ka(this,is,{idToken:n,password:t})};var Oa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};(a=ma.prototype).tb=function(e,a){var i={idToken:e},r=[];return Z(Oa,function(o,t){var e=a[t];null===e?r.push(o):t in a&&(i[t]=e)}),r.length&&(i.deleteAttribute=r),Ka(this,ns,i)},a.kb=function(n,a){return ot(n={requestType:"PASSWORD_RESET",email:n},a),Ka(this,$a,n)},a.lb=function(n,a){return ot(n={requestType:"EMAIL_SIGNIN",email:n},a),Ka(this,za,n)},a.jb=function(n,a){return ot(n={requestType:"VERIFY_EMAIL",idToken:n},a),Ka(this,Ya,n)},a.Ua=function(e){return Ka(this,hs,e)},a.Za=function(n,t){return Ka(this,ts,{oobCode:n,newPassword:t})},a.Ka=function(e){return Ka(this,Fa,{oobCode:e})},a.Wa=function(e){return Ka(this,Da,{oobCode:e})};var Da={endpoint:"setAccountInfo",C:Va,da:"email"},Fa={endpoint:"resetPassword",C:Va,J:function(n){var t=n.requestType;if(!t||!n.email&&"EMAIL_SIGNIN"!=t)throw new xi("internal-error")}},qa={endpoint:"signupNewUser",C:function(e){if(Aa(e),!e.password)throw new xi("weak-password")},J:Pa,R:!0},Ha={endpoint:"createAuthUri"},Ba={endpoint:"deleteAccount",T:["idToken"]},Ga={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],C:function(e){if(!p(e.deleteProvider))throw new xi("internal-error")}},Wa={endpoint:"emailLinkSignin",T:["email","oobCode"],C:Aa,J:Pa,R:!0},Xa={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],C:Aa,J:Pa,R:!0},Ja={endpoint:"getAccountInfo"},za={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new xi("internal-error");Aa(e)},da:"email"},Ya={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],C:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new xi("internal-error")},da:"email"},$a={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(e){if("PASSWORD_RESET"!=e.requestType)throw new xi("internal-error");Aa(e)},da:"email"},Za={wb:!0,endpoint:"getProjectConfig",Ib:"GET"},Qa={wb:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(e){if(!e.recaptchaSiteKey)throw new xi("internal-error")}},ts={endpoint:"resetPassword",C:Va,da:"email"},es={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},ns={endpoint:"setAccountInfo",T:["idToken"],C:_a,R:!0},is={endpoint:"setAccountInfo",T:["idToken"],C:function(e){if(_a(e),!e.password)throw new xi("weak-password")},J:Pa,R:!0},rs={endpoint:"signupNewUser",J:Pa,R:!0},os={endpoint:"verifyAssertion",C:Ra,Qa:La,J:xa,R:!0},as={endpoint:"verifyAssertion",C:Ra,Qa:La,J:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new xi("user-not-found");if(e.errorMessage)throw ps(e.errorMessage);if(!e.idToken)throw new xi("internal-error")},R:!0},ss={endpoint:"verifyAssertion",C:function(e){if(Ra(e),!e.idToken)throw new xi("internal-error")},Qa:La,J:xa,R:!0},us={endpoint:"verifyCustomToken",C:function(e){if(!e.token)throw new xi("invalid-custom-token")},J:Pa,R:!0},cs={endpoint:"verifyPassword",C:function(e){if(Aa(e),!e.password)throw new xi("wrong-password")},J:Pa,R:!0},hs={endpoint:"verifyPhoneNumber",C:Ca,J:Pa},ls={endpoint:"verifyPhoneNumber",C:function(e){if(!e.idToken)throw new xi("internal-error");Ca(e)},J:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",fo(e);Pa(e)}},fs={Wb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",C:Ca,J:Pa},ds=new pn(bn,"https://apis.google.com/js/api.js?onload=%{onload}"),bs=new Ti(3e4,6e4),ys=new Ti(5e3,15e3),ws=null;gs.prototype.toString=function(){return this.f?Xe(this.a,"v",this.f):cn(this.a.a,"v"),this.b?Xe(this.a,"eid",this.b):cn(this.a.a,"eid"),this.c.length?Xe(this.a,"fw",this.c.join(",")):cn(this.a.a,"fw"),this.a.toString()},Ts.prototype.toString=function(){var s=Ye(this.o,"/__/auth/handler");if(Xe(s,"apiKey",this.l),Xe(s,"appName",this.c),Xe(s,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var l=d.app(this.c).auth().ea()}catch(e){l=null}for(var p in t.$a=l,Xe(s,"providerId",this.a.providerId),l=gi((t=this.a).zb))l[p]=l[p].toString();p=t.Dc,l=rt(l);for(var c=0,u;c<p.length;c++)u=p[c],u in l&&delete l[u];t.cb&&t.$a&&!l[t.cb]&&(l[t.cb]=t.$a),nt(l)||Xe(s,"customParameters",mi(l))}if("function"==typeof this.a.Fb&&(t=this.a.Fb()).length&&Xe(s,"scopes",t.join(",")),this.i?Xe(s,"redirectUrl",this.i):cn(s.a,"redirectUrl"),this.g?Xe(s,"eventId",this.g):cn(s.a,"eventId"),this.h?Xe(s,"v",this.h):cn(s.a,"v"),this.b)for(var h in this.b)this.b.hasOwnProperty(h)&&!Je(s,h)&&Xe(s,h,this.b[h]);return this.f?Xe(s,"eid",this.f):cn(s.a,"eid"),(h=ks(this.c)).length&&Xe(s,"fw",h.join(",")),s.toString()},(a=Es.prototype).Ea=function(s,e,n){var t=new xi("popup-closed-by-user"),i=new xi("web-storage-unsupported"),r=this,o=!1;return this.ga().then(function(){var a,d;(a=r,d={type:"webStorageSupport"},As(a).then(function(){return o=a.i,r=d,o.fb.then(function(){return new mt(function(e){o.a.send(r.type,r,e,hi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var o,r}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})).then(function(n){n||(s&&Jn(s),e(i),o=!0)})}).s(function(){}).then(function(){if(!o)return a=s,new mt(function(n){return function e(){Me(2e3).then(function(){return a&&!a.closed?e():void n()})}()});var a}).then(function(){if(!o)return Me(n).then(function(){e(t)})})},a.Mb=function(){var e=ci();return!vi(e)&&!wi(e)},a.Hb=function(){return!1},a.Db=function(d,e,t,n,i,r,o){if(!d)return Et(new xi("popup-blocked"));if(o&&!vi())return this.ga().s(function(e){Jn(d),i(e)}),n(),kt();this.a||(this.a=Ss(Ns(this)));var a=this;return this.a.then(function(){var e=a.ga().s(function(e){throw Jn(d),i(e),e});return n(),e}).then(function(){(ro(t),o)||Wn(Os(a.l,a.f,a.b,e,t,null,r,a.c,void 0,a.h),d)}).s(function(e){throw"auth/network-request-failed"==e.code&&(a.a=null),e})},a.Ca=function(a,t,e){this.a||(this.a=Ss(Ns(this)));var n=this;return this.a.then(function(){ro(t),Wn(Os(n.l,n.f,n.b,a,t,Gn(),e,n.c,void 0,n.h))}).s(function(e){throw"auth/network-request-failed"==e.code&&(n.a=null),e})},a.ga=function(){var e=this;return As(this).then(function(){return e.i.fb}).s(function(){throw e.a=null,new xi("network-request-failed")})},a.Pb=function(){return!0},a.wa=function(e){this.g.push(e)},a.La=function(n){V(this.g,function(e){return e==n})},(a=_s.prototype).get=function(e){return kt(this.a.getItem(e)).then(function(e){return e&&bi(e)})},a.set=function(n,t){return kt(this.a.setItem(n,mi(t)))},a.P=function(e){return kt(this.a.removeItem(e))},a.Y=function(){},a.ca=function(){};var Bp=[],Ds;Ps.prototype.f=function(a){var n=a.data.eventType,o=a.data.eventId,r=this.a[n];if(r&&0<r.length){a.ports[0].postMessage({status:"ack",eventId:o,eventType:n,response:null});var i=[];L(r,function(e){i.push(kt().then(function(){return e(a.origin,a.data.data)}))}),It(i).then(function(r){var i=[];L(r,function(e){i.push({fulfilled:e.Eb,value:e.value,reason:e.reason?e.reason.message:void 0})}),L(i,function(n){for(var t in n)void 0===n[t]&&delete n[t]}),a.ports[0].postMessage({status:"done",eventId:o,eventType:n,response:i})})}},Ps.prototype.subscribe=function(n,t){nt(this.a)&&this.b.addEventListener("message",this.c),void 0===this.a[n]&&(this.a[n]=[]),this.a[n].push(t)},Ps.prototype.unsubscribe=function(n,a){void 0!==this.a[n]&&a?(V(this.a[n],function(e){return e==a}),0==this.a[n].length&&delete this.a[n]):a||delete this.a[n],nt(this.a)&&this.b.removeEventListener("message",this.c)},Cs.prototype.postMessage=function(n,t){this.a.postMessage(n,t)},Ls.prototype.close=function(){for(;0<this.a.length;)Ms(this,this.a[0]);this.b=!0},(a=js.prototype).set=function(s,n){var i=!1,d=this,a;return Vs(this).then(function(e){return Hs((e=Fs(qs(a=e,!0))).get(s))}).then(function(o){var r=Fs(qs(a,!0));return o?(o.value=n,Hs(r.put(o))):(d.b++,i=!0,(o={}).fbase_key=s,o.value=n,Hs(r.add(o)))}).then(function(){return d.c[s]=n,Bs(d,s)}).ia(function(){i&&d.b--})},a.get=function(n){return Vs(this).then(function(e){return Hs(Fs(qs(e,!1)).get(n))}).then(function(e){return e&&e.value})},a.P=function(a){var e=!1,o=this;return Vs(this).then(function(n){return e=!0,o.b++,Hs(Fs(qs(n,!0)).delete(a))}).then(function(){return delete o.c[a],Bs(o,a)}).ia(function(){e&&o.b--})},a.Y=function(e){var t;0==this.a.length&&(Ws(t=this),function n(){t.f=setTimeout(function(){t.i=Gs(t).then(function(n){0<n.length&&L(t.a,function(e){e(n)})}).then(function(){n()}).s(function(e){"STOP_EVENT"!=e.message&&n()})},800)}()),this.a.push(e)},a.ca=function(n){V(this.a,function(e){return e==n}),0==this.a.length&&Ws(this)},(a=Xs.prototype).get=function(n){return this.b.then(function(e){return e.get(n)})},a.set=function(a,e){return this.b.then(function(n){return n.set(a,e)})},a.P=function(n){return this.b.then(function(e){return e.P(n)})},a.Y=function(e){this.a.push(e)},a.ca=function(n){V(this.a,function(e){return e==n})},(a=Js.prototype).get=function(e){return kt(this.a[e])},a.set=function(n,t){return this.a[n]=t,kt()},a.P=function(e){return delete this.a[e],kt()},a.Y=function(){},a.ca=function(){},(a=zs.prototype).get=function(n){var t=this;return kt().then(function(){return bi(t.a.getItem(n))})},a.set=function(a,e){var n=this;return kt().then(function(){var o=mi(e);null===o?n.P(a):n.a.setItem(a,o)})},a.P=function(n){var t=this;return kt().then(function(){t.a.removeItem(n)})},a.Y=function(e){yp.window&&ge(yp.window,"storage",e)},a.ca=function(e){yp.window&&Te(yp.window,"storage",e)},(a=$s.prototype).get=function(){return kt(null)},a.set=function(){return kt()},a.P=function(){return kt()},a.Y=function(){},a.ca=function(){},(a=Zs.prototype).get=function(n){var t=this;return kt().then(function(){return bi(t.a.getItem(n))})},a.set=function(a,e){var n=this;return kt().then(function(){var o=mi(e);null===o?n.P(a):n.a.setItem(a,o)})},a.P=function(n){var t=this;return kt().then(function(){t.a.removeItem(n)})},a.Y=function(){},a.ca=function(){};var qp={B:zs,Ra:Zs},Fp={B:zs,Ra:Zs},Vp={B:_s,Ra:$s},Up={B:zs,Ra:$s},jp={Xc:"local",NONE:"none",Zc:"session"},Wp,Hp;(a=nd.prototype).get=function(n,t){return od(this,n.B).get(rd(n,t))},a.set=function(a,e,t){var n=rd(a,t),i=this,r=od(this,a.B);return r.set(n,e).then(function(){return r.get(n)}).then(function(e){"local"==a.B&&(i.b[n]=e)})},a.addListener=function(a,o,e){var r;a=rd(a,o),this.m&&(this.b[a]=yp.localStorage.getItem(a)),nt(this.a)&&(od(this,"local").Y(this.f),this.h||(Bn()||!Si())&&yp.indexedDB||!this.m||(sd(r=this),r.c=setInterval(function(){for(var a in r.a){var t=yp.localStorage.getItem(a),o=r.b[a];t!=o&&(r.b[a]=t,t=new ue({type:"storage",key:a,target:window,oldValue:o,newValue:t,a:!0}),r.Ob(t))}},1e3))),this.a[a]||(this.a[a]=[]),this.a[a].push(e)},a.removeListener=function(a,o,e){a=rd(a,o),this.a[a]&&(V(this.a[a],function(n){return n==e}),0==this.a[a].length&&delete this.a[a]),nt(this.a)&&(od(this,"local").ca(this.f),sd(this))},a.Ob=function(a){if(a&&a.f){var t=a.a.key;if(null==t)for(var e in this.a){var s=this.b[e];void 0===s&&(s=null);var d=yp.localStorage.getItem(e);d!==s&&(this.b[e]=d,this.Xa(e))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0===a.a.a?sd(this):od(this,"local").ca(this.f),this.o)if(e=yp.localStorage.getItem(t),(s=a.a.newValue)!==e)null===s?yp.localStorage.removeItem(t):yp.localStorage.setItem(t,s);else if(this.b[t]===s&&void 0===a.a.a)return;var r=this;e=function(){void 0===a.a.a&&r.b[t]===yp.localStorage.getItem(t)||(r.b[t]=yp.localStorage.getItem(t),r.Xa(t))},Bt&&ie&&10==ie&&yp.localStorage.getItem(t)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(e,10):e()}}else L(a,b(this.Xa,this))},a.Xa=function(e){this.a[e]&&L(this.a[e],function(e){e()})};var Kp={name:"authEvent",B:"local"},zp;T(pd,function(){this.b=-1});for(var $p=64,Qp=[],Gp=0;Gp<63;Gp++)Qp[Gp]=0;var Xp=U(128,Qp);pd.prototype.reset=function(){this.g=this.c=0,this.a=yp.Int32Array?new Int32Array(this.h):F(this.h)};var Yp=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];T(hd,pd);var Jp=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];(a=md.prototype).ga=function(){return this.za?this.za:this.za=(Qn(void 0)?Yn().then(function(){return new mt(function(a,t){var e=yp.document,n=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);e.addEventListener("deviceready",function(){clearTimeout(n),a()},!1)})}):Et(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof hi("universalLinks.subscribe",yp))throw gd("cordova-universal-links-plugin-fix is not installed");if(void 0===hi("BuildInfo.packageName",yp))throw gd("cordova-plugin-buildinfo is not installed");if("function"!=typeof hi("cordova.plugins.browsertab.openUrl",yp))throw gd("cordova-plugin-browsertab is not installed");if("function"!=typeof hi("cordova.InAppBrowser.open",yp))throw gd("cordova-plugin-inappbrowser is not installed")},function(){throw new xi("cordova-not-ready")})},a.Ea=function(n,t){return t(new xi("operation-not-supported-in-this-environment")),kt()},a.Db=function(){return Et(new xi("operation-not-supported-in-this-environment"))},a.Pb=function(){return!1},a.Mb=function(){return!0},a.Hb=function(){return!0},a.Ca=function(d,t,e){if(this.c)return Et(new xi("redirect-operation-pending"));var n=this,i=yp.document,r=null,l=null,p=null,c=null;return this.c=kt().then(function(){return ro(t),bd(n)}).then(function(){return function(d,n,t,e){var i=function(){for(var n=20,a=[];0<n;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Vt(62*Math.random()))),n--;return a.join("")}(),l=new oo(n,e,null,i,new xi("no-auth-event")),o=hi("BuildInfo.packageName",yp);if("string"!=typeof o)throw new xi("invalid-cordova-configuration");var a=hi("BuildInfo.displayName",yp),s={};if(ci().toLowerCase().match(/iphone|ipad|ipod/))s.ibi=o;else{if(!ci().toLowerCase().match(/android/))return Et(new xi("operation-not-supported-in-this-environment"));s.apn=o}a&&(s.appDisplayName=a),i=yd(i),s.sessionId=i;var p=Os(d.l,d.i,d.m,n,t,null,e,d.o,s,d.u);return d.ga().then(function(){var e=d.h;return d.v.a.set(Kp,l.w(),e)}).then(function(){var n=hi("cordova.plugins.browsertab.isAvailable",yp);if("function"!=typeof n)throw new xi("invalid-cordova-configuration");var a=null;n(function(e){if(e){if("function"!=typeof(a=hi("cordova.plugins.browsertab.openUrl",yp)))throw new xi("invalid-cordova-configuration");a(p)}else{if("function"!=typeof(a=hi("cordova.InAppBrowser.open",yp)))throw new xi("invalid-cordova-configuration");e=ci(),d.a=a(p,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(n,d,t,e)}).then(function(){return new mt(function(a,e){l=function(){var e=hi("cordova.plugins.browsertab.close",yp);return a(),"function"==typeof e&&e(),n.a&&"function"==typeof n.a.close&&(n.a.close(),n.a=null),!1},n.wa(l),p=function(){r||(r=Me(2e3).then(function(){e(new xi("redirect-cancelled-by-user"))}))},c=function(){ki()&&p()},i.addEventListener("resume",p,!1),ci().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",c,!1)}).s(function(e){return vd(n).then(function(){throw e})})}).ia(function(){p&&i.removeEventListener("resume",p,!1),c&&i.removeEventListener("visibilitychange",c,!1),r&&r.cancel(),l&&n.La(l),n.c=null})},a.wa=function(n){this.b.push(n),bd(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new oo("unknown",null,null,null,new xi("no-auth-event")),n(e))})},a.La=function(n){V(this.b,function(e){return e==n})};var Zp={name:"pendingRedirect",B:"session"};(a=Ed.prototype).reset=function(){this.f=!1,this.a.La(this.m),this.a=kd(this.A,this.l,this.o),this.i={}},a.Ya=function(){this.b.Ya()},a.subscribe=function(a){if(D(this.h,a)||this.h.push(a),!this.f){var o=this;(t=this.g,t.b.get(Zp,t.a).then(function(e){return"pending"==e})).then(function(e){e?_d(o.g).then(function(){Cd(o).s(function(n){var t=new oo("unknown",null,null,null,new xi("operation-not-supported-in-this-environment"));wd(n)&&o.bb(t)})}):Sd(o)}).s(function(){Sd(o)})}var t},a.unsubscribe=function(n){V(this.h,function(e){return e==n})},a.bb=function(a){if(!a)throw new xi("invalid-auth-event");if(6e5<=fp()-this.u&&(this.i={},this.u=0),a&&a.getUid()&&this.i.hasOwnProperty(a.getUid()))return!1;for(var t=!1,o=0,r;o<this.h.length;o++)if(r=this.h[o],r.xb(a.c,a.b)){(t=this.c[a.c])&&(t.h(a,r),a&&(a.f||a.b)&&(this.i[a.getUid()]=!0,this.u=fp())),t=!0;break}return xd(this.b),t};var ec=new Ti(2e3,1e4),tc=new Ti(3e4,6e4);Ed.prototype.fa=function(){return this.b.fa()},Ed.prototype.Ca=function(a,t,e){var n=this,o,s;return(s=this.g,s.b.set(Zp,"pending",s.a)).then(function(){return n.a.Ca(a,t,e).s(function(e){if(wd(e))throw new xi("operation-not-supported-in-this-environment");return o=e,_d(n.g).then(function(){throw o})}).then(function(){return n.a.Pb()?new mt(function(){}):_d(n.g).then(function(){return n.fa()}).then(function(){}).s(function(){})})})},Ed.prototype.Ea=function(a,e,n,o){return this.a.Ea(n,function(n){a.ha(e,null,n,o)},ec.get())};var nc={};Ad.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ad.prototype.h=function(a,t){if(a){this.reset(),this.g=!0;var e=a.c,n=a.b,i=a.a&&"auth/web-storage-unsupported"==a.a.code,r=a.a&&"auth/operation-not-supported-in-this-environment"==a.a.code;this.i=i||r,"unknown"!=e||i||r?a.a?(Ld(this,!0,null,a.a),kt()):t.xa(e,n)?function(s,e,t){t=t.xa(e.c,e.b);var d=e.g,i=e.f,r=e.h,o=!!e.c.match(/Redirect$/);t(d,i,r).then(function(e){Ld(s,o,e,null)}).s(function(e){Ld(s,o,null,e)})}(this,a,t):Et(new xi("invalid-auth-event")):(Ld(this,!1,null,null),kt())}else Et(new xi("invalid-auth-event"))},Ad.prototype.Ya=function(){this.g&&!this.i&&Ld(this,!1,null,null)},Ad.prototype.fa=function(){var a=this;return new mt(function(o,t){var e,r;a.b?a.b().then(o,t):(a.f.push(o),a.c.push(t),e=a,r=new xi("timeout"),e.a&&e.a.cancel(),e.a=Me(tc.get()).then(function(){e.b||(e.g=!0,Ld(e,!0,null,r))}))})},Od.prototype.h=function(d,t){if(d){var e=d.c,n=d.b;d.a?(t.ha(d.c,null,d.a,d.b),kt()):t.xa(e,n)?(l=t,p=(i=d).b,c=i.c,l.xa(c,p)(i.g,i.f,i.h).then(function(e){l.ha(c,e,null,p)}).s(function(e){l.ha(c,null,e,p)})):Et(new xi("invalid-auth-event"))}else Et(new xi("invalid-auth-event"));var i,l,p,c},Md.prototype.confirm=function(e){return e=no(this.verificationId,e),this.a(e)},qd.prototype.start=function(){this.a=this.c,function a(e,n){e.stop(),e.b=Me(Fd(e,n)).then(function(){return a=yp.document,o=null,ki()||!a?kt():new mt(function(e){o=function(){ki()&&(a.removeEventListener("visibilitychange",o,!1),e())},a.addEventListener("visibilitychange",o,!1)}).s(function(e){throw a.removeEventListener("visibilitychange",o,!1),e});var a,o}).then(function(){return e.h()}).then(function(){a(e,!0)}).s(function(n){e.i(n)&&a(e,!1)})}(this,!0)},qd.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Vd.prototype.w=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Vd.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Et(new xi("user-token-expired")):e||!this.b||fp()>this.c-3e4?this.a?Wd(this,{grant_type:"refresh_token",refresh_token:this.a}):kt(null):kt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Hd.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(zd,ne),T($d,Ce),$d.prototype.pa=function(e){this.ka=e,ga(this.c,e)},$d.prototype.ea=function(){return this.ka},$d.prototype.ya=function(){return F(this.O)},$d.prototype.Ha=function(){this.A.b&&(this.A.stop(),this.A.start())},_i($d.prototype,"providerId","firebase"),(a=$d.prototype).reload=function(){var e=this;return vl(this,rl(this).then(function(){return cl(e).then(function(){return tl(e)}).then(ol)}))},a.bc=function(e){return this.F(e).then(function(e){return new Bd(e)})},a.F=function(n){var a=this;return vl(this,rl(this).then(function(){return a.h.getToken(n)}).then(function(e){if(!e)throw new xi("internal-error");return e.accessToken!=a.ra&&(el(a,e.accessToken),a.dispatchEvent(new zd("tokenChanged"))),ll(a,"refreshToken",e.refreshToken),e.accessToken}))},a.xc=function(a){if(!(a=a.users)||!a.length)throw new xi("internal-error");al(this,{uid:(a=a[0]).localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt});for(var o=(r=(r=a).providerUserInfo)&&r.length?x(r,function(e){return new Kd(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[],e=0;e<o.length;e++)sl(this,o[e]);var r;ll(this,"isAnonymous",!(this.email&&a.passwordHash||this.providerData&&this.providerData.length))},a.yc=function(e){return Ai("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.gb(e)},a.gb=function(a){var o=this,e=null;return vl(this,a.f(this.c,this.uid).then(function(n){return ul(o,n),e=ml(o,n,"reauthenticate"),o.i=null,o.reload()}).then(function(){return e}),!0)},a.pc=function(e){return Ai("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.eb(e)},a.eb=function(a){var e=this,n=null;return vl(this,hl(this,a.providerId).then(function(){return e.F()}).then(function(n){return a.b(e.c,n)}).then(function(a){return n=ml(e,a,"link"),gl(e,a)}).then(function(){return n}))},a.qc=function(a,t){var e=this;return vl(this,hl(this,"phone").then(function(){return Pd(Yd(e),a,t,b(e.eb,e))}))},a.zc=function(a,t){var e=this;return vl(this,kt().then(function(){return Pd(Yd(e),a,t,b(e.gb,e))}),!0)},a.rb=function(a){var e=this;return vl(this,this.F().then(function(n){return e.c.rb(n,a)}).then(function(n){return ul(e,n),e.reload()}))},a.Pc=function(a){var e=this;return vl(this,this.F().then(function(n){return a.b(e.c,n)}).then(function(n){return ul(e,n),e.reload()}))},a.sb=function(a){var e=this;return vl(this,this.F().then(function(n){return e.c.sb(n,a)}).then(function(n){return ul(e,n),e.reload()}))},a.tb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return rl(this);var e=this;return vl(this,this.F().then(function(n){return e.c.tb(n,{displayName:a.displayName,photoUrl:a.photoURL})}).then(function(n){return ul(e,n),ll(e,"displayName",n.displayName||null),ll(e,"photoURL",n.photoUrl||null),L(e.providerData,function(n){"password"===n.providerId&&(_i(n,"displayName",e.displayName),_i(n,"photoURL",e.photoURL))}),tl(e)}).then(ol))},a.Nc=function(a){var r=this;return vl(this,cl(this).then(function(o){return D(il(r),a)?(t=r.c,s=o,d=[a],Ka(t,Ga,{idToken:s,deleteProvider:d})).then(function(n){var a={};return L(n.providerUserInfo||[],function(e){a[e.providerId]=!0}),L(il(r),function(e){a[e]||dl(r,e)}),a[eo.PROVIDER_ID]||_i(r,"phoneNumber",null),tl(r)}):tl(r).then(function(){throw new xi("no-such-provider")});var t,s,d}))},a.delete=function(){var n=this;return vl(this,this.F().then(function(e){return Ka(n.c,Ba,{idToken:e})}).then(function(){n.dispatchEvent(new zd("userDeleted"))})).then(function(){for(var e=0;e<n.G.length;e++)n.G[e].cancel("app-deleted");Qd(n,null),Xd(n,null),n.G=[],n.D=!0,Zd(n),_i(n,"refreshToken",null),n.a&&n.a.unsubscribe(n)})},a.xb=function(n,t){return!!("linkViaPopup"==n&&(this.g||null)==t&&this.f||"reauthViaPopup"==n&&(this.g||null)==t&&this.f||"linkViaRedirect"==n&&(this.aa||null)==t||"reauthViaRedirect"==n&&(this.aa||null)==t)},a.ha=function(a,t,e,n){"linkViaPopup"!=a&&"reauthViaPopup"!=a||n!=(this.g||null)||(e&&this.v?this.v(e):t&&!e&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},a.xa=function(n,t){return"linkViaPopup"==n&&t==(this.g||null)?b(this.Bb,this):"reauthViaPopup"==n&&t==(this.g||null)?b(this.Cb,this):"linkViaRedirect"==n&&(this.aa||null)==t?b(this.Bb,this):"reauthViaRedirect"==n&&(this.aa||null)==t?b(this.Cb,this):null},a.rc=function(n){var t=this;return yl(this,"linkViaPopup",n,function(){return hl(t,n.providerId).then(function(){return tl(t)})},!1)},a.Ac=function(e){return yl(this,"reauthViaPopup",e,function(){return kt()},!0)},a.sc=function(n){var t=this;return fl(this,"linkViaRedirect",n,function(){return hl(t,n.providerId)},!1)},a.Bc=function(e){return fl(this,"reauthViaRedirect",e,function(){return kt()},!0)},a.Bb=function(a,e,n){var i=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return vl(this,this.F().then(function(o){return ja(i.c,{requestUri:a,postBody:n,sessionId:e,idToken:o})}).then(function(e){return r=ml(i,e,"link"),gl(i,e)}).then(function(){return r}))},a.Cb=function(a,t,e){var n=this;this.b&&(this.b.cancel(),this.b=null);var o=null;return vl(this,kt().then(function(){return _r(Ua(n.c,{requestUri:a,sessionId:t,postBody:e}),n.uid)}).then(function(e){return o=ml(n,e,"reauthenticate"),ul(n,e),n.i=null,n.reload()}).then(function(){return o}),!0)},a.jb=function(a){var e=this,n=null;return vl(this,this.F().then(function(e){return n=e,void 0===a||nt(a)?{}:Ji(new Gi(a))}).then(function(a){return e.c.jb(n,a)}).then(function(n){if(e.email!=n)return e.reload()}).then(function(){}))},a.toJSON=function(){return this.w()},a.w=function(){var n={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.h.w(),redirectEventId:this.aa||null};return this.metadata&&ot(n,this.metadata.w()),L(this.providerData,function(e){n.providerData.push(function(a){var t={},n;for(n in a)a.hasOwnProperty(n)&&(t[n]=a[n]);return t}(e))}),n};var ac={name:"redirectUser",B:"session"};kl.prototype.g=function(){var a=this,e=Sl("local");Al(this,function(){return kt().then(function(){return a.c&&"local"!=a.c.B?a.b.get(e,a.a):null}).then(function(n){if(n)return Cl(a,"local").then(function(){a.c=e})})})};var oc={name:"persistence",B:"session"};kl.prototype.mb=function(a){var e=null,o=this;return function(a){var t=new xi("invalid-persistence-type"),e=new xi("unsupported-persistence-type");t:{for(n in jp)if(jp[n]==a){var n=!0;break t}n=!1}if(!n||"string"!=typeof a)throw t;switch(ni()){case"ReactNative":if("session"===a)throw e;break;case"Node":if("none"!==a)throw e;break;default:if(!li()&&"none"!==a)throw e;}}(a),Al(this,function(){return a==o.c.B?kt():o.b.get(o.c,o.a).then(function(n){return e=n,Cl(o,a)}).then(function(){if(o.c=Sl(a),e)return o.b.set(o.c,e,o.a)})})},T(xl,Ce),T(Nl,ne),T(Ll,ne),(a=xl.prototype).mb=function(e){return Ul(this,e=this.h.mb(e))},a.pa=function(e){this.W===e||this.l||(this.W=e,ga(this.c,this.W),this.dispatchEvent(new Nl(this.ea())))},a.ea=function(){return this.W},a.Qc=function(){var e=yp.navigator;this.pa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},a.tc=function(e){this.G.push(e),Ea(this.c,d.SDK_VERSION?si(d.SDK_VERSION,this.G):null),this.dispatchEvent(new Ll(this.G))},a.ya=function(){return F(this.G)},a.toJSON=function(){return{apiKey:Bl(this).options.apiKey,authDomain:Bl(this).options.authDomain,appName:Bl(this).name,currentUser:ql(this)&&ql(this).w()}},a.xb=function(n,t){return!("unknown"!==n&&"signInViaRedirect"!==n)||!("signInViaPopup"!==n)&&this.g==t&&!!this.f},a.ha=function(a,t,e,n){"signInViaPopup"==a&&this.g==n&&(e&&this.v?this.v(e):t&&!e&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},a.xa=function(n,t){return"signInViaRedirect"==n||"signInViaPopup"==n&&this.g==t&&this.f?b(this.Zb,this):null},a.Zb=function(s,d,e){var n=this;s={requestUri:s,postBody:e,sessionId:d},this.b&&(this.b.cancel(),this.b=null);var i=null,l=null,p=Ma(n.c,s).then(function(e){return i=io(e),l=gr(e),e});return Ul(this,s=n.V.then(function(){return p}).then(function(e){return Rl(n,e)}).then(function(){return Ri({user:ql(n),credential:i,additionalUserInfo:l,operationType:"signIn"})}))},a.Ic=function(a){if(!fi())return Et(new xi("operation-not-supported-in-this-environment"));var s=this,e=dr(a.providerId),n=yi(),i=null;(!vi()||ti())&&Bl(this).options.authDomain&&a.isOAuthProvider&&(i=Os(Bl(this).options.authDomain,Bl(this).options.apiKey,Bl(this).name,"signInViaPopup",a,null,n,d.SDK_VERSION||null));var l=zn(i,e&&e.Ba,e&&e.Aa);return Ul(this,e=Ol(this).then(function(e){return Id(e,l,"signInViaPopup",a,n,!!i)}).then(function(){return new mt(function(a,t){s.ha("signInViaPopup",null,new xi("cancelled-popup-request"),s.g),s.f=a,s.v=t,s.g=n,s.b=s.a.Ea(s,"signInViaPopup",l,n)})}).then(function(e){return l&&Jn(l),e?Ri(e):null}).s(function(e){throw l&&Jn(l),e}))},a.Jc=function(n){if(!fi())return Et(new xi("operation-not-supported-in-this-environment"));var a=this;return Ul(this,Ol(this).then(function(){return Al(e=a.h,function(){return e.b.set(oc,e.c.B,e.a)});var e}).then(function(){return a.a.Ca("signInViaRedirect",n)}))},a.fa=function(){if(!fi())return Et(new xi("operation-not-supported-in-this-environment"));var e=this;return Ul(this,Ol(this).then(function(){return e.a.fa()}).then(function(e){return e?Ri(e):null}))},a.Oc=function(a){if(!a)return Et(new xi("null-user"));var t=this,e={};e.apiKey=Bl(this).options.apiKey,e.authDomain=Bl(this).options.authDomain,e.appName=Bl(this).name;var n=function(a,t,s,n){t=t||{apiKey:a.l,authDomain:a.u,appName:a.o};var i=a.h,r={};return r.idToken=i.b,r.refreshToken=i.a,r.expiresIn=(i.c-fp())/1e3,t=new $d(t,r),s&&(t.ba=s),n&&Gd(t,n),pl(t,a),t}(a,e,t.A,t.ya());return Ul(this,this.i.then(function(){if(Bl(t).options.apiKey!=a.l)return n.reload()}).then(function(){return ql(t)&&a.uid==ql(t).uid?(pl(ql(t),a),t.Z(a)):(Ml(t,n),nl(n),t.Z(n))}).then(function(){Vl(t)}))},a.pb=function(){var e=this;return Ul(this,this.i.then(function(){return ql(e)?(Ml(e,null),wl(e.h).then(function(){Vl(e)})):kt()}))},a.Kc=function(){var a=this;return Dl(this.h,Bl(this).options.authDomain).then(function(o){if(!a.l){var t;if(t=ql(a)&&o){t=ql(a).uid;var r=o.uid;t=null!=t&&""!==t&&null!=r&&""!==r&&t==r}if(t)return pl(ql(a),o),ql(a).F();(ql(a)||o)&&(Ml(a,o),o&&(nl(o),o.ba=a.A),a.a&&a.a.subscribe(a),Vl(a))}})},a.Z=function(e){return Il(this.h,e)},a.$b=function(){Vl(this),this.Z(ql(this))},a.jc=function(){this.pb()},a.kc=function(){this.pb()},a.mc=function(n){var t=this;this.addAuthTokenListener(function(){n.next(ql(t))})},a.nc=function(a){var t=this,o,r;r=function(){a.next(ql(t))},(o=this).I.push(r),Ul(o,o.i.then(function(){!o.l&&D(o.I,r)&&o.O!==o.getUid()&&(o.O=o.getUid(),r(Fl(o)))}))},a.vc=function(a,t,e){var n=this;return this.X&&Promise.resolve().then(function(){m(a)?a(ql(n)):m(a.next)&&a.next(ql(n))}),this.Sb(a,t,e)},a.uc=function(a,t,e){var n=this;return this.X&&Promise.resolve().then(function(){n.O=n.getUid(),m(a)?a(ql(n)):m(a.next)&&a.next(ql(n))}),this.Tb(a,t,e)},a.ac=function(n){var t=this;return Ul(this,this.i.then(function(){return ql(t)?ql(t).F(n).then(function(e){return{accessToken:e}}):null}))},a.Ec=function(e){var a=this;return this.i.then(function(){return Pl(a,Ka(a.c,us,{token:e}))}).then(function(n){var t=n.user;return ll(t,"isAnonymous",!1),a.Z(t),n})},a.Fc=function(a,t){var e=this;return this.i.then(function(){return Pl(e,Ka(e.c,cs,{email:a,password:t}))})},a.Vb=function(a,t){var e=this;return this.i.then(function(){return Pl(e,Ka(e.c,qa,{email:a,password:t}))})},a.Nb=function(n){var t=this;return this.i.then(function(){return Pl(t,n.la(t.c))})},a.nb=function(e){return Ai("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Nb(e)},a.ob=function(){var a=this;return this.i.then(function(){var e=ql(a);return e&&e.isAnonymous?Ri({user:e,credential:null,additionalUserInfo:Ri({providerId:null,isNewUser:!1}),operationType:"signIn"}):Pl(a,a.c.ob()).then(function(n){var t=n.user;return ll(t,"isAnonymous",!0),a.Z(t),n})})},a.getUid=function(){return ql(this)&&ql(this).uid||null},a.Ub=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&ql(this)&&Jd(ql(this))},a.Cc=function(a){var e=this;L(this.o,function(n){n==a&&e.u--}),0>this.u&&(this.u=0),0==this.u&&ql(this)&&Zd(ql(this)),this.removeAuthTokenListener(a)},a.addAuthTokenListener=function(n){var t=this;this.o.push(n),Ul(this,this.i.then(function(){t.l||D(t.o,n)&&n(Fl(t))}))},a.removeAuthTokenListener=function(n){V(this.o,function(e){return e==n})},a.delete=function(){this.l=!0;for(var e=0;e<this.N.length;e++)this.N[e].cancel("app-deleted");return this.N=[],this.h&&(e=this.h).b.removeListener(Sl("local"),e.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Ya()),Promise.resolve()},a.Yb=function(e){return Ul(this,Ka(this.c,Ha,{identifier:e,continueUri:di()?Gn():"http://localhost"}).then(function(e){return e.signinMethods||[]}))},a.oc=function(e){return!!$r(e)},a.lb=function(a,e){var n=this;return Ul(this,kt().then(function(){var n=new Gi(e);if(!n.c)throw new xi("argument-error","handleCodeInApp must be true when sending sign in link to email");return Ji(n)}).then(function(e){return n.c.lb(a,e)}).then(function(){}))},a.Rc=function(e){return this.Ka(e).then(function(e){return e.data.email})},a.Za=function(n,t){return Ul(this,this.c.Za(n,t).then(function(){}))},a.Ka=function(e){return Ul(this,this.c.Ka(e).then(function(e){return new Li(e)}))},a.Wa=function(e){return Ul(this,this.c.Wa(e).then(function(){}))},a.kb=function(a,e){var o=this;return Ul(this,kt().then(function(){return void 0===e||nt(e)?{}:Ji(new Gi(e))}).then(function(e){return o.c.kb(a,e)}).then(function(){}))},a.Hc=function(n,t){return Ul(this,Pd(this,n,t,b(this.nb,this)))},a.Gc=function(a,e){var n=this;return Ul(this,kt().then(function(){var o=Yr(a,e||Gn());return n.nb(o)}))},jl.prototype.render=function(){},jl.prototype.reset=function(){},jl.prototype.getResponse=function(){},jl.prototype.execute=function(){};var rc=null;Wl.prototype.render=function(n,t){return this.a[this.b.toString()]=new zl(n,t),this.b++},Wl.prototype.reset=function(n){var a=Hl(this,n);n=Kl(n),a&&n&&(a.delete(),delete this.a[n])},Wl.prototype.getResponse=function(e){return(e=Hl(this,e))?e.getResponse():null},Wl.prototype.execute=function(e){(e=Hl(this,e))&&e.execute()},zl.prototype.getResponse=function(){return $l(this),this.b},zl.prototype.execute=function(){$l(this);var a=this;this.a||(this.a=setTimeout(function(){a.b=function(){for(var n=50,a=[];0<n;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Vt(62*Math.random()))),n--;return a.join("")}();var n=a.c.callback,t=a.c["expired-callback"];if(n)try{n(a.b)}catch(e){}a.a=setTimeout(function(){if(a.a=null,a.b=null,t)try{t()}catch(e){}a.h&&a.execute()},6e4)},500))},zl.prototype.delete=function(){$l(this),this.g=!0,clearTimeout(this.a),this.a=null,Te(this.f,"click",this.i)},Ql.prototype.g=function(){return rc||(rc=new Wl),kt(rc)},Ql.prototype.c=function(){};var ic=null,sc=new pn(bn,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),dc=new Ti(3e4,6e4);Gl.prototype.g=function(a){var r=this;return new mt(function(o,t){var e=setTimeout(function(){t(new xi("network-request-failed"))},dc.get());yp.grecaptcha&&(a===r.f||r.b)?(clearTimeout(e),o(yp.grecaptcha)):(yp[r.a]=function(){if(yp.grecaptcha){r.f=a;var i=yp.grecaptcha.render;yp.grecaptcha.render=function(n,a){return n=i(n,a),r.b++,n},clearTimeout(e),o(yp.grecaptcha)}else clearTimeout(e),t(new xi("internal-error"));delete yp[r.a]},kt(ua(In(sc,{onload:r.a,hl:a||""}))).s(function(){clearTimeout(e),t(new xi("internal-error","Unable to load external reCAPTCHA dependencies!"))}))})},Gl.prototype.c=function(){this.b--};var lc=null,pc="callback",cc="expired-callback",uc="sitekey",hc="size";(a=Xl.prototype).za=function(){var n=this;return this.f?this.f:this.f=Jl(this,kt().then(function(){if(di()&&!ei())return Yn();throw new xi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return n.o.g(n.v())}).then(function(e){return n.g=e,Ka(n.u,Qa,{})}).then(function(e){n.a.sitekey=e.recaptchaSiteKey}).s(function(e){throw n.f=null,e}))},a.render=function(){Zl(this);var a=this;return Jl(this,this.za().then(function(){if(null===a.c){var n=a.l;if(!a.i){var o=Ln(n);n=Mn("DIV"),o.appendChild(n)}a.c=a.g.render(n,a.a)}return a.c}))},a.verify=function(){Zl(this);var a=this;return Jl(this,this.render().then(function(o){return new mt(function(r){var e=a.g.getResponse(o);if(e)r(e);else{var n=function(o){var i;o&&(i=n,V(a.m,function(e){return e==i}),r(o))};a.m.push(n),a.i&&a.g.execute(a.c)}})}))},a.reset=function(){Zl(this),null!==this.c&&this.g.reset(this.c)},a.clear=function(){Zl(this),this.D=!0,this.o.c();for(var n=0;n<this.h.length;n++)this.h[n].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){n=Ln(this.l);for(var a;a=n.firstChild;)n.removeChild(a)}},T(ep,Xl);var mc=["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth"];pp(xl.prototype,{Wa:{name:"applyActionCode",j:[np("code")]},Ka:{name:"checkActionCode",j:[np("code")]},Za:{name:"confirmPasswordReset",j:[np("code"),np("newPassword")]},Vb:{name:"createUserWithEmailAndPassword",j:[np("email"),np("password")]},Yb:{name:"fetchSignInMethodsForEmail",j:[np("email")]},fa:{name:"getRedirectResult",j:[]},oc:{name:"isSignInWithEmailLink",j:[np("emailLink")]},uc:{name:"onAuthStateChanged",j:[lp(op(),rp(),"nextOrObserver"),rp("opt_error",!0),rp("opt_completed",!0)]},vc:{name:"onIdTokenChanged",j:[lp(op(),rp(),"nextOrObserver"),rp("opt_error",!0),rp("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[np("email"),lp(op("opt_actionCodeSettings",!0),ip(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[np("email"),op("actionCodeSettings")]},mb:{name:"setPersistence",j:[np("persistence")]},nb:{name:"signInAndRetrieveDataWithCredential",j:[sp()]},ob:{name:"signInAnonymously",j:[]},Nb:{name:"signInWithCredential",j:[sp()]},Ec:{name:"signInWithCustomToken",j:[np("token")]},Fc:{name:"signInWithEmailAndPassword",j:[np("email"),np("password")]},Gc:{name:"signInWithEmailLink",j:[np("email"),np("emailLink",!0)]},Hc:{name:"signInWithPhoneNumber",j:[np("phoneNumber"),dp()]},Ic:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"updateCurrentUser",j:[lp({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof $d)}},ip(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[np(null,!0)]},Qc:{name:"useDeviceLanguage",j:[]},Rc:{name:"verifyPasswordResetCode",j:[np("code")]}}),cp(xl.prototype,{lc:{name:"languageCode",vb:lp(np(),ip(),"languageCode")}}),(xl.Persistence=jp).LOCAL="local",xl.Persistence.SESSION="session",xl.Persistence.NONE="none",pp($d.prototype,{delete:{name:"delete",j:[]},bc:{name:"getIdTokenResult",j:[ap("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[ap("opt_forceRefresh",!0)]},pc:{name:"linkAndRetrieveDataWithCredential",j:[sp()]},eb:{name:"linkWithCredential",j:[sp()]},qc:{name:"linkWithPhoneNumber",j:[np("phoneNumber"),dp()]},rc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},sc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},yc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[sp()]},gb:{name:"reauthenticateWithCredential",j:[sp()]},zc:{name:"reauthenticateWithPhoneNumber",j:[np("phoneNumber"),dp()]},Ac:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Bc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[lp(op("opt_actionCodeSettings",!0),ip(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[np(null,!0)]},Nc:{name:"unlink",j:[np("provider")]},rb:{name:"updateEmail",j:[np("email")]},sb:{name:"updatePassword",j:[np("password")]},Pc:{name:"updatePhoneNumber",j:[sp("phone")]},tb:{name:"updateProfile",j:[op("profile")]}}),pp(Wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),pp(jl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),pp(mt.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),cp(Rd.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",vb:ap("appVerificationDisabledForTesting")}}),pp(Md.prototype,{confirm:{name:"confirm",j:[np("verificationCode")]}}),up(Or,"fromJSON",function(a){a=c(a)?JSON.parse(a):a;for(var o=[xr,Jr,Qr,Rr],n=0,r;n<o.length;n++)if(r=o[n](a))return r;return null},[lp(np(),op(),"json")]),up(zr,"credential",function(n,t){return new Xr(n,t)},[np("email"),np("password")]),pp(Xr.prototype,{w:{name:"toJSON",j:[np(null,!0)]}}),pp(Vr.prototype,{ua:{name:"addScope",j:[np("scope")]},Da:{name:"setCustomParameters",j:[op("customOAuthParameters")]}}),up(Vr,"credential",Kr,[lp(np(),op(),"token")]),up(zr,"credentialWithLink",Yr,[np("email"),np("emailLink")]),pp(Fr.prototype,{ua:{name:"addScope",j:[np("scope")]},Da:{name:"setCustomParameters",j:[op("customOAuthParameters")]}}),up(Fr,"credential",qr,[lp(np(),op(),"token")]),pp(Hr.prototype,{ua:{name:"addScope",j:[np("scope")]},Da:{name:"setCustomParameters",j:[op("customOAuthParameters")]}}),up(Hr,"credential",Br,[lp(np(),lp(op(),ip()),"idToken"),lp(np(),ip(),"accessToken",!0)]),pp(Gr.prototype,{Da:{name:"setCustomParameters",j:[op("customOAuthParameters")]}}),up(Gr,"credential",Wr,[lp(np(),op(),"token"),np("secret",!0)]),pp(Ur.prototype,{ua:{name:"addScope",j:[np("scope")]},credential:{name:"credential",j:[lp(np(),lp(op(),ip()),"optionsOrIdToken"),lp(np(),ip(),"accessToken",!0)]},Da:{name:"setCustomParameters",j:[op("customOAuthParameters")]}}),pp(Dr.prototype,{w:{name:"toJSON",j:[np(null,!0)]}}),pp(Pr.prototype,{w:{name:"toJSON",j:[np(null,!0)]}}),up(eo,"credential",no,[np("verificationId"),np("verificationCode")]),pp(eo.prototype,{Ua:{name:"verifyPhoneNumber",j:[np("phoneNumber"),dp()]}}),pp(Zr.prototype,{w:{name:"toJSON",j:[np(null,!0)]}}),pp(xi.prototype,{toJSON:{name:"toJSON",j:[np(null,!0)]}}),pp(lo.prototype,{toJSON:{name:"toJSON",j:[np(null,!0)]}}),pp(uo.prototype,{toJSON:{name:"toJSON",j:[np(null,!0)]}}),pp(ep.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===d||!d.INTERNAL||!d.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:xl,AuthCredential:Or,Error:xi};up(e,"EmailAuthProvider",zr,[]),up(e,"FacebookAuthProvider",Vr,[]),up(e,"GithubAuthProvider",Fr,[]),up(e,"GoogleAuthProvider",Hr,[]),up(e,"TwitterAuthProvider",Gr,[]),up(e,"OAuthProvider",Ur,[np("providerId")]),up(e,"SAMLAuthProvider",jr,[np("providerId")]),up(e,"PhoneAuthProvider",eo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof xl)}}]),up(e,"RecaptchaVerifier",ep,[lp(np(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),op("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof d.app.App)}}]),d.INTERNAL.registerService("auth",function(n,a){return a({INTERNAL:{getUid:b((n=new xl(n)).getUid,n),getToken:b(n.ac,n),addAuthTokenListener:b(n.Ub,n),removeAuthTokenListener:b(n.Cc,n)}}),n},e,function(n,t){if("create"===n)try{t.auth()}catch(e){}}),d.INTERNAL.extendNamespace({User:$d})}()}.apply("undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)}).apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-auth - be sure to load firebase-app.js first.")}}),!function(n,a){"object"==typeof exports&&"undefined"!=typeof module?a(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],a):a((n=n||self).firebase)}(this,function(ka){"use strict";var a=Math.round,d=Math.min,Oa=Math.pow,Ra=Math.floor,Ma=Math.max;try{(function(){var cd=Number.POSITIVE_INFINITY,ud=Number.NEGATIVE_INFINITY;function Pa(a,t){function e(){this.constructor=a}r(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}function ja(d,o,a,l){return new(a||(a=Promise))(function(s,p){function t(n){try{e(l.next(n))}catch(e){p(e)}}function n(n){try{e(l.throw(n))}catch(e){p(e)}}function e(o){o.done?s(o.value):new a(function(e){e(o.value)}).then(t,n)}e((l=l.apply(d,o||[])).next())})}function Wa(d,n){function r(a){return function(e){return function(a){if(p)throw new TypeError("Generator is already executing.");for(;l;)try{if(p=1,c&&(u=2&a[0]?c.return:a[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,a[1])).done)return u;switch(c=0,u&&(a=[2&a[0],u.value]),a[0]){case 0:case 1:u=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,c=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(u=0<(u=l.trys).length&&u[u.length-1])&&(6===a[0]||2===a[0])){l=0;continue}if(3===a[0]&&(!u||a[1]>u[0]&&a[1]<u[3])){l.label=a[1];break}if(6===a[0]&&l.label<u[1]){l.label=u[1],u=a;break}if(u&&l.label<u[2]){l.label=u[2],l.ops.push(a);break}u[2]&&l.ops.pop(),l.trys.pop();continue;}a=n.call(d,l)}catch(e){a=[6,e],c=0}finally{p=u=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,e])}}var l={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},p,c,u,e;return e={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e}function s(e){return"string"==typeof e}function l(e){return"number"==typeof e}function p(a,o){a=a.split("."),o=o||c;for(var r=0;r<a.length;r++)if(null==(o=o[a[r]]))return null;return o}function h(){}function m(a){var t=typeof a;if("object"==t){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return t;var e=Object.prototype.toString.call(a);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===a.call)return"object";return t}function g(e){return"array"==m(e)}function y(n){var t=m(n);return"array"==t||"object"==t&&"number"==typeof n.length}function b(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}function v(e){return e.call.apply(e.bind,arguments)}function T(a,e){if(!a)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,n),a.apply(e,o)}}return function(){return a.apply(e,arguments)}}function I(){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:T).apply(null,arguments)}function w(a){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),a.apply(this,n)}}function D(n,a){function t(){}t.prototype=a.prototype,n.N=a.prototype,n.prototype=new t,(n.prototype.constructor=n).yb=function(n,t){for(var e=Array(arguments.length-2),o=2;o<arguments.length;o++)e[o-2]=arguments[o];return a.prototype[t].apply(n,e)}}function A(){this.j=this.j,this.i=this.i}function k(){return Array.prototype.concat.apply([],arguments)}function O(a){var t=a.length;if(0<t){for(var e=Array(t),n=0;n<t;n++)e[n]=a[n];return e}return[]}function _(e){return /^[\s\xa0]*$/.test(e)}function P(n,t){return-1!=n.indexOf(t)}function q(n,t){return n<t?-1:t<n?1:0}function F(a,t,e){for(var n in a)t.call(e,a[n],n,a)}function U(a){var t={},n;for(n in a)t[n]=a[n];return t}function Q(e){for(var t=1,a,s;t<arguments.length;t++){for(a in s=arguments[t])e[a]=s[a];for(var d=0;d<B.length;d++)a=B[d],Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}}function j(e){return j[" "](e),e}function G(){var e=c.document;return e?e.documentMode:void 0}function tt(d){return a=d,o=function(){for(var s=0,l=vd(Z+"").split("."),e=vd(d+"").split("."),n=Ma(l.length,e.length),r=0;0==s&&r<n;r++){var p=l[r]||"",c=e[r]||"";do{if(p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==p[0].length&&0==c[0].length)break;s=q(0==p[1].length?0:parseInt(p[1],10),0==c[1].length?0:parseInt(c[1],10))||q(0==p[2].length,0==c[2].length)||q(p[2],c[2]),p=p[3],c=c[3]}while(0==s)}return 0<=s},r=rt,Object.prototype.hasOwnProperty.call(r,a)?r[a]:r[a]=o(a);var a,o,r}function at(n,t){this.type=n,this.a=this.target=t,this.Ja=!0}function lt(a,t){if(at.call(this,a?a.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,a){var o=this.type=a.type,n=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(!(this.target=a.target||a.srcElement,this.a=t,t=a.relatedTarget))"mouseover"==o?t=a.fromElement:"mouseout"==o&&(t=a.toElement);else if(J){t:{try{j(t.nodeName);var r=!0;break t}catch(e){}r=!1}r||(t=null)}this.relatedTarget=t,this.screenY=n?(this.clientX=void 0===n.clientX?n.pageX:n.clientX,this.clientY=void 0===n.clientY?n.pageY:n.clientY,this.screenX=n.screenX||0,n.screenY||0):(this.clientX=void 0===a.clientX?a.pageX:a.clientX,this.clientY=void 0===a.clientY?a.pageY:a.clientY,this.screenX=a.screenX||0,a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=s(a.pointerType)?a.pointerType:ht[a.pointerType]||"",(this.c=a).defaultPrevented&&this.b()}}function ft(a,t,e,n,o){this.listener=a,this.proxy=null,this.src=t,this.type=e,this.capture=!!n,this.da=o,this.key=++dt,this.X=this.Z=!1}function yt(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function gt(e){this.src=e,this.a={},this.b=0}function vt(a,t){var e=t.type;if(e in a.a){var n=a.a[e],i=bd(n,t),o;(o=0<=i)&&Array.prototype.splice.call(n,i,1),o&&(yt(t),0==a.a[e].length&&(delete a.a[e],a.b--))}}function bt(a,t,e,n){for(var r=0,s;r<a.length;++r)if(s=a[r],!s.X&&s.listener==t&&s.capture==!!e&&s.da==n)return r;return-1}function wt(a,t,e,s,r){if(s&&s.once)return function s(t,e,n,d,i){if(g(e)){for(var o=0;o<e.length;o++)s(t,e[o],n,d,i);return null}return n=kt(n),t&&t[pt]?t.Ba(e,n,b(d)?!!d.capture:!!d,i):Tt(t,e,n,!0,d,i)}(a,t,e,s,r);if(g(t)){for(var i=0;i<t.length;i++)wt(a,t[i],e,s,r);return null}return e=kt(e),a&&a[pt]?a.Aa(t,e,b(s)?!!s.capture:!!s,r):Tt(a,t,e,!1,s,r)}function Tt(d,t,e,l,p,h){if(!t)throw Error("Invalid event type");var o=b(p)?!!p.capture:!!p;if(o&&!Sd)return null;var a=At(d),m,g;if(a||(d[Id]=a=new gt(d)),(e=a.add(t,e,l,o,h)).proxy)return e;if(m=Nt,l=g=Sd?function(e){return m.call(g.src,g.listener,e)}:function(e){if(!(e=m.call(g.src,g.listener,e)))return e},(e.proxy=l).src=d,l.listener=e,d.addEventListener)ct||(p=o),void 0===p&&(p=!1),d.addEventListener(t.toString(),l,p);else if(d.attachEvent)d.attachEvent(Ct(t.toString()),l);else{if(!d.addListener||!d.removeListener)throw Error("addEventListener and attachEvent are unavailable.");d.addListener(l)}return e}function It(a){if(!l(a)&&a&&!a.X){var t=a.src;if(t&&t[pt])vt(t.c,a);else{var e=a.type,o=a.proxy;t.removeEventListener?t.removeEventListener(e,o,a.capture):t.detachEvent?t.detachEvent(Ct(e),o):t.addListener&&t.removeListener&&t.removeListener(o),(e=At(t))?(vt(e,a),0==e.b&&(e.src=null,t[Id]=null)):yt(a)}}}function Ct(e){return e in Et?Et[e]:Et[e]="on"+e}function Dt(a,t){var e=a.listener,n=a.da||a.src;return a.Z&&It(a),e.call(n,t)}function Nt(n,t){return!!n.X||(Sd?Dt(n,new lt(t,this)):Dt(n,t=new lt(t||p("window.event"),this)))}function At(e){return(e=e[Id])instanceof gt?e:null}function kt(n){return"function"==m(n)?n:(n[St]||(n[St]=function(e){return n.handleEvent(e)}),n[St])}function Mt(){A.call(this),this.c=new gt(this),(this.J=this).B=null}function Ot(d,t,l,n){if(!(t=d.c.a[t+""]))return!0;t=t.concat();for(var r=!0,p=0,c;p<t.length;++p)if(c=t[p],c&&!c.X&&c.capture==l){var h=c.listener,s=c.da||c.src;c.Z&&vt(d.c,c),r=!1!==h.call(s,n)&&r}return r&&0!=n.Ja}function _t(n,t){this.c=n,this.f=t,this.b=0,this.a=null}function Lt(){this.b=this.a=null}function xt(){this.next=this.b=this.a=null}function Vt(e){c.setTimeout(function(){throw e},0)}function Bt(a,t){var e;Ft||(e=c.Promise.resolve(void 0),Ft=function(){e.then(Ut)}),wd||(Ft(),wd=!0),Dd.add(a,t)}function Ut(){for(var a;i=e=void 0,i=null,(e=Dd).a&&(i=e.a,e.a=e.a.next,e.a||(e.b=null),i.next=null),a=i;){try{a.a.call(a.b)}catch(e){Vt(e)}var o=Pt;o.f(a),100>o.b&&(o.b++,a.next=o.a,o.a=a)}var e,i;wd=!1}function jt(n,t){Mt.call(this),this.b=n||1,this.a=t||c,this.f=I(this.gb,this),this.g=fd()}function Gt(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Wt(a,o,e){if("function"==m(a))e&&(a=I(a,e));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=I(a.handleEvent,a)}return 2147483647<+o?-1:c.setTimeout(a,o||0)}function zt(a,t,e){A.call(this),this.f=null==e?a:I(a,e),this.c=t,this.b=I(this.ab,this),this.a=[]}function Ht(e){e.U=Wt(e.b,e.c),e.f.apply(null,e.a)}function Yt(e){A.call(this),this.b=e,this.a={}}function Xt(a,t,e,s){g(e)||(e&&(Kt[0]=e.toString()),e=Kt);for(var r=0,d;r<e.length&&(d=wt(t,e[r],s||a.handleEvent,!1,a.b||a),!!d);r++)a.a[d.key]=d}function $t(e){F(e.a,function(n,t){this.a.hasOwnProperty(t)&&It(n)},e),e.a={}}function Zt(){}function te(e){at.call(this,"serverreachability",e)}function ne(e){Jt.dispatchEvent(new te(Jt,e))}function re(e){at.call(this,"statevent",e)}function ie(e){Jt.dispatchEvent(new re(Jt,e))}function oe(e){at.call(this,"timingevent",e)}function ae(n,t){if("function"!=m(n))throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){n()},t)}function se(){}function he(n){var t;return(t=n.a)||(t=n.a={}),t}function le(){}function fe(){at.call(this,"d")}function me(){at.call(this,"c")}function ye(){}function ge(a,o,e){this.g=a,this.W=o,this.V=e||1,this.I=new Yt(this),this.O=Ad,a=X?125:void 0,this.P=new jt(a),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}function ve(a,t,e){a.F=1,a.f=We(Ve(t)),a.l=e,a.H=!0,Te(a,null)}function Se(a,t,e,n){a.F=1,a.f=We(Ve(t)),a.l=null,a.H=e,Te(a,n)}function Te(n,t){n.v=fd(),De(n),n.D=Ve(n.f),Ge(n.D,"t",n.V),n.A=0,n.a=n.g.$(n.g.Y()?t:null),0<n.J&&(n.B=new zt(I(n.Ka,n,n.a),n.J)),Xt(n.I,n.a,"readystatechange",n.eb),t=n.h?U(n.h):{},n.l?(n.w||(n.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.a.ca(n.D,n.w,n.l,t)):(n.w="GET",n.a.ca(n.D,n.w,null,t)),ne(1)}function Ie(a,t,e){for(var n=!0,o;!a.m&&a.A<e.length;){if(o=Ce(a,e),o==we){4==t&&(a.c=4,ie(14),n=!1);break}if(o==be){a.c=4,ie(15),n=!1;break}Me(a,o)}4==t&&0==e.length&&(a.c=1,ie(16),n=!1),a.b=a.b&&n,n||(Re(a),ke(a))}function Ce(a,t){var o=a.A,i=t.indexOf("\n",o);return-1==i?we:(o=+t.substring(o,i),isNaN(o)?be:(i+=1)+o>t.length?we:(t=t.substr(i,o),a.A=i+o,t))}function De(e){e.R=fd()+e.O,Ne(e,e.O)}function Ne(n,t){if(null!=n.i)throw Error("WatchDog timer not null");n.i=ae(I(n.bb,n),t)}function Ae(e){e.i&&(c.clearTimeout(e.i),e.i=null)}function ke(e){e.g.Da()||e.m||e.g.na(e)}function Re(n){Ae(n);var t=n.B;t&&"function"==typeof t.la&&t.la(),n.B=null,Gt(n.P),$t(n.I),n.a&&(t=n.a,n.a=null,t.abort(),t.la())}function Me(n,t){try{n.g.Ga(n,t),ne(4)}catch(e){}}function Oe(a,t){if(a.forEach&&"function"==typeof a.forEach)a.forEach(t,void 0);else if(y(a)||s(a))R(a,t,void 0);else{if(a.K&&"function"==typeof a.K)var e=a.K();else if(a.C&&"function"==typeof a.C)e=void 0;else if(y(a)||s(a)){e=[];for(var d=a.length,l=0;l<d;l++)e.push(l)}else for(l in e=[],d=0,a)e[d++]=l;l=(d=function(a){if(a.C&&"function"==typeof a.C)return a.C();if(s(a))return a.split("");if(y(a)){for(var t=[],o=a.length,i=0;i<o;i++)t.push(a[i]);return t}for(i in t=[],o=0,a)t[o++]=a[i];return t}(a)).length;for(var p=0;p<l;p++)t.call(void 0,d[p],e&&e[p],a)}}function _e(e){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var a=0;a<t;a+=2)this.set(arguments[a],arguments[a+1])}else if(e)if(e instanceof _e)for(t=e.K(),a=0;a<t.length;a++)this.set(t[a],e.get(t[a]));else for(a in e)this.set(a,e[a])}function Pe(n,t){xe(n.b,t)&&(delete n.b[t],n.c--,n.a.length>2*n.c&&Le(n))}function Le(a){if(a.c!=a.a.length){for(var t=0,o=0,s;t<a.a.length;)s=a.a[t],xe(a.b,s)&&(a.a[o++]=s),t++;a.a.length=o}if(a.c!=a.a.length){var d={};for(o=t=0;t<a.a.length;)xe(d,s=a.a[t])||(d[a.a[o++]=s]=1),t++;a.a.length=o}}function xe(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function qe(a,t){var e;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,a instanceof qe?(this.h=void 0===t?a.h:t,Be(this,a.f),this.j=a.j,Ue(this,a.b),Qe(this,a.i),this.a=a.a,Ke(this,sn(a.c)),this.g=a.g):a&&(e=(a+"").match(Ee))?(this.h=!!t,Be(this,e[1]||"",!0),this.j=ze(e[2]||""),Ue(this,e[3]||"",!0),Qe(this,e[4]),this.a=ze(e[5]||"",!0),Ke(this,e[6]||"",!0),this.g=ze(e[7]||"")):(this.h=!!t,this.c=new Xe(null,this.h))}function Ve(e){return new qe(e)}function Be(a,t,e){a.f=e?ze(t,!0):t,a.f&&(a.f=a.f.replace(/:$/,""))}function Ue(a,t,e){a.b=e?ze(t,!0):t}function Qe(n,t){if(t){if(t=+t,isNaN(t)||0>t)throw Error("Bad port number "+t);n.i=t}else n.i=null}function Ke(a,t,o){var n,s;t instanceof Xe?(a.c=t,n=a.c,(s=a.h)&&!n.f&&(nn(n),n.c=null,n.a.forEach(function(a,t){var e=t.toLowerCase();t!=e&&(rn(this,t),an(this,e,a))},n)),n.f=s):(o||(t=He(t,Ze)),a.c=new Xe(t,a.h))}function je(a,t,e){a.c.set(t,e)}function Ge(a,t,e){g(e)||(e=[e+""]),an(a.c,t,e)}function We(e){return je(e,"zx",Ra(2147483648*Math.random()).toString(36)+Math.abs(Ra(2147483648*Math.random())^fd()).toString(36)),e}function ze(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function He(a,o,e){return s(a)?(a=encodeURI(a).replace(o,Ye),e&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ye(e){return"%"+(15&(e=e.charCodeAt(0))>>4).toString(16)+(15&e).toString(16)}function Xe(n,t){this.b=this.a=null,this.c=n||null,this.f=!!t}function nn(a){a.a||(a.a=new _e,a.b=0,a.c&&function(a,s){if(a){a=a.split("&");for(var e=0;e<a.length;e++){var d=a[e].indexOf("="),r=null;if(0<=d){var l=a[e].substring(0,d);r=a[e].substring(d+1)}else l=a[e];s(l,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(a.c,function(n,t){a.add(decodeURIComponent(n.replace(/\+/g," ")),t)}))}function rn(n,t){nn(n),t=un(n,t),xe(n.a.b,t)&&(n.c=null,n.b-=n.a.get(t).length,Pe(n.a,t))}function on(n,t){return nn(n),t=un(n,t),xe(n.a.b,t)}function an(a,t,e){rn(a,t),0<e.length&&(a.c=null,a.a.set(un(a,t),O(e)),a.b+=e.length)}function sn(n){var t=new Xe;return t.c=n.c,n.a&&(t.a=new _e(n.a),t.b=n.b),t}function un(n,t){return t=t+"",n.f&&(t=t.toLowerCase()),t}function cn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function hn(a){var t=a.a.F.a;if(null!=t)ie(4),t?(ie(10),$n(a.a,a,!1)):(ie(11),$n(a.a,a,!0));else{a.b=new ge(a,void 0,void 0),a.b.h=a.h,t=tr(t=a.a,t.Y()?a.f:null,a.i),ie(4),Ge(t,"TYPE","xmlhttp");var o=a.a.j,n=a.a.I;o&&n&&je(t,o,n),Se(a.b,t,!1,a.f)}}function ln(){this.a=this.b=null}function fn(){this.a=new _e}function pn(n){var t=typeof n;return"object"==t&&n||"function"==t?"o"+(n[f]||(n[f]=++E)):t.charAt(0)+n}function dn(n,t){this.b=n,this.a=t}function mn(e){this.g=e||en,e=c.PerformanceNavigationTiming?0<(e=c.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(c.ka&&c.ka.Ea&&c.ka.Ea()&&c.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new fn),this.b=null,this.c=[]}function yn(n,t){!n.a&&(P(t,"spdy")||P(t,"quic")||P(t,"h2"))&&(n.f=n.g,n.a=new fn,n.b&&(En(n,n.b),n.b=null))}function vn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function bn(e){return e.b?1:e.a?e.a.a.c:0}function wn(n,a){return n=n.b?n.b==a:!!n.a&&(a=pn(a),xe(n.a.a.b,a))}function En(n,t){n.a?n.a.add(t):n.b=t}function Sn(a,t){var e;a.b&&a.b==t?a.b=null:((e=a.a)&&(e=pn(t),e=xe(a.a.a.b,e)),e&&Pe(a.a.a,pn(t)))}function Tn(n){if(null!=n.b)return n.c.concat(n.b.j);if(null==n.a||0==n.a.a.c)return O(n.c);var a=n.c;return R(n.a.C(),function(e){a=a.concat(e.j)}),a}function In(){}function Cn(){this.a=new In}function Dn(n,a,t){var o=t||"";try{Oe(n,function(r,t){var e=r;b(r)&&(e=Rt(r)),a.push(o+t+"="+encodeURIComponent(e))})}catch(e){throw a.push(o+"type="+encodeURIComponent("_badmap")),e}}function Nn(a,t,e,n,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(n)}catch(e){}}function An(e){Mt.call(this),this.headers=new _e,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=kn,this.D=this.F=!1}function Rn(e){return"content-type"==e.toLowerCase()}function Pn(n,t){n.b=!1,n.a&&(n.g=!0,n.a.abort(),n.g=!1),n.f=t,n.h=5,Ln(n),qn(n)}function Ln(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function xn(s){if(s.b&&void 0!==u&&(!s.s[1]||4!=Vn(s)||2!=s.T()))if(s.l&&4==Vn(s))Wt(s.Fa,0,s);else if(s.dispatchEvent("readystatechange"),4==Vn(s)){s.b=!1;try{var t=s.T(),n;t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break t;default:d=!1;}if(!(n=d)){var l;if(l=0===t){var p=(s.A+"").match(Ee)[1]||null;if(!p&&c.self&&c.self.location){var h=c.self.location.protocol;p=h.substr(0,h.length-1)}l=!Mn.test(p?p.toLowerCase():"")}n=l}n?(s.dispatchEvent("complete"),s.dispatchEvent("success")):(s.h=6,s.f=s.za()+" ["+s.T()+"]",Ln(s))}finally{qn(s)}}}function qn(a,t){if(a.a){Fn(a);var e=a.a,n=a.s[0]?h:null;a.a=null,a.s=null,t||a.dispatchEvent("ready");try{e.onreadystatechange=n}catch(e){}}}function Fn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(c.clearTimeout(e.m),e.m=null)}function Vn(e){return e.a?e.a.readyState:0}function Bn(n,t){return n.a?n.a.getResponseHeader(t):null}function Un(a,d,l){t:{for(p in l){var p=!1;break t}p=!0}if(p)return a;var c;if(c="",F(l,function(n,t){c+=t,c+=":",c+=n,c+="\r\n"}),l=c,s(a)){if(d=encodeURIComponent(d+""),d+=l=null==l?"":"="+encodeURIComponent(l+"")){if(0>(l=a.indexOf("#"))&&(l=a.length),0>(p=a.indexOf("?"))||l<p){p=l;var u=""}else u=a.substring(p+1,l);l=(a=[a.substr(0,p),u,a.substr(l)])[1],a[1]=d?l?l+"&"+d:d:l,a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a}return je(a,d,l),a}function Qn(e){this.f=[],this.F=new ln,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!p("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=p("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=p("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=p("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=p("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new mn(e&&e.concurrentRequestLimit),this.ja=new Cn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Kn(a){if(jn(a),3==a.u){var t=a.P++,o=Ve(a.B);je(o,"SID",a.H),je(o,"RID",t),je(o,"TYPE","terminate"),Hn(a,o),(t=new ge(a,t,void 0)).F=2,t.f=We(Ve(o)),o=!1,c.navigator&&c.navigator.sendBeacon&&(o=c.navigator.sendBeacon(t.f.toString(),"")),!o&&c.Image&&(new Image().src=t.f,o=!0),o||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=fd(),De(t)}er(a)}function jn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(c.clearTimeout(e.l),e.l=null),Zn(e),e.b.cancel(),e.h&&(l(e.h)&&c.clearTimeout(e.h),e.h=null)}function Gn(n,t){n.f.push(new dn(n.Ra++,t)),3==n.u&&Wn(n)}function Wn(e){vn(e.b)||e.h||(e.h=!0,Bt(e.Ia,e),e.A=0)}function zn(o,t){var i=t?t.W:o.P++;var s=Ve(o.B);je(s,"SID",o.H),je(s,"RID",i),je(s,"AID",o.O),Hn(o,s),o.g&&o.i&&Un(s,o.g,o.i),i=new ge(o,i,o.A+1),null===o.g&&(i.h=o.i),t&&(o.f=t.j.concat(o.f)),t=Yn(o,i,1e3),i.setTimeout(a(.5*o.qa)+a(.5*o.qa*Math.random())),En(o.b,i),ve(i,s,t)}function Hn(e,a){e.c&&Oe({},function(n,t){je(a,t,n)})}function Yn(l,p,e){e=d(l.f.length,e);var m=l.c?I(l.c.Ta,l.c,l):null;t:for(var g=l.f,i=-1,y;;){y=["count="+e],-1==i?0<e?(i=g[0].b,y.push("ofs="+i)):i=0:y.push("ofs="+i);for(var f=!0,b=0;b<e;b++){var v=g[b].b,T=g[b].a;if(0>(v-=i))i=Ma(0,g[b].b-100),f=!1;else try{Dn(T,y,"req"+v+"_")}catch(e){m&&m(T)}}if(f){m=y.join("&");break t}}return l=l.f.splice(0,e),p.j=l,m}function Xn(e){e.a||e.l||(e.S=1,Bt(e.Ha,e),e.v=0)}function Jn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=ae(I(e.Ha,e),Ka(e,e.v)),e.v++,!0)}function $n(a,t,e){var n=t.l;n&&yn(a.b,n),a.ia=a.oa&&e,a.m=t.c,a.B=tr(a,null,a.ha),Wn(a)}function Zn(e){null!=e.s&&(c.clearTimeout(e.s),e.s=null)}function Ka(a,t){var e=a.Oa+Ra(Math.random()*a.Sa);return a.ma()||(e*=2),e*t}function Ga(a,t){if(2==t){var e=null;a.c&&(e=null);var o=I(a.fb,a);e||(e=new qe("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Be(e,"https"),We(e)),function(a,t){var e=new Zt;if(c.Image){var n=new Image;n.onload=w(Nn,e,n,"TestLoadImage: loaded",!0,t),n.onerror=w(Nn,e,n,"TestLoadImage: error",!1,t),n.onabort=w(Nn,e,n,"TestLoadImage: abort",!1,t),n.ontimeout=w(Nn,e,n,"TestLoadImage: timeout",!1,t),c.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=a}else t(!1)}(e.toString(),o)}else ie(2);a.u=0,a.c&&a.c.ta(t),er(a),jn(a)}function er(e){e.u=0,e.m=-1,e.c&&(0==Tn(e.b).length&&0==e.f.length||(e.b.c.length=0,O(e.f),e.f.length=0),e.c.sa())}function tr(d,t,p){var m=(g=p)instanceof qe?Ve(g):new qe(g,void 0),g,y,f,b,v,T;if(""!=m.b)t&&Ue(m,t+"."+m.b),Qe(m,m.i);else{var _=c.location,l;l=t?t+"."+_.hostname:_.hostname,y=_.protocol,f=l,b=+_.port,v=p,T=new qe(null,void 0),y&&Be(T,y),f&&Ue(T,f),b&&Qe(T,b),v&&(T.a=v),m=T}return d.V&&F(d.V,function(n,t){je(m,t,n)}),t=d.j,p=d.I,t&&p&&je(m,t,p),je(m,"VER",d.wa),Hn(d,m),m}function nr(){}function or(){if(H&&!(10<=+st))throw Error("Environmental error: no available transport.")}function ar(n,a){Mt.call(this),this.a=new Qn(a),this.g=n,this.m=a&&a.testUrl?a.testUrl:function(a){for(var t=a,o=1;o<arguments.length;o++){var s=arguments[o],i;0==s.lastIndexOf("/",0)?t=s:((i=""==t)||(i=0<=(i=t.length-1)&&t.indexOf("/",i)==i),t+=i?s:"/"+s)}return t}(this.g,"test"),this.b=a&&a.messageUrlParams||null,n=a&&a.messageHeaders||null,a&&a.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.a.i=n,n=a&&a.initMessageHeaders||null,a&&a.messageContentType&&(n?n["X-WebChannel-Content-Type"]=a.messageContentType:n={"X-WebChannel-Content-Type":a.messageContentType}),a&&a.xa&&(n?n["X-WebChannel-Client-Profile"]=a.xa:n={"X-WebChannel-Client-Profile":a.xa}),this.a.J=n,(n=a&&a.httpHeadersOverwriteParam)&&!_(n)&&(this.a.g=n),this.l=a&&a.supportsCrossDomainXhr||!1,this.h=a&&a.sendRawJson||!1,(a=a&&a.httpSessionIdParam)&&!_(a)&&(this.a.j=a,null!==(n=this.b)&&a in n&&a in(n=this.b)&&delete n[a]),this.f=new sr(this)}function rr(a){fe.call(this);var o=a.__sm__;if(o){t:{for(var e in o){a=e;break t}a=void 0}(this.c=a)?(a=this.c,this.data=null!==o&&a in o?o[a]:void 0):this.data=o}else this.data=a}function ir(){me.call(this),this.status=1}function sr(e){this.a=e}function cr(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ur(){return Ir.logLevel===hd.DEBUG?Cr.DEBUG:Ir.logLevel===hd.SILENT?Cr.SILENT:Cr.ERROR}function hr(e){e===Cr.DEBUG?Ir.logLevel=hd.DEBUG:e===Cr.ERROR?Ir.logLevel=hd.ERROR:e===Cr.SILENT?Ir.logLevel=hd.SILENT:Ir.error("Firestore ("+Tr+"): Invalid value passed to `setLogLevel`")}function vr(a,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];if(Ir.logLevel<=hd.DEBUG){var o=e.map(kr);Ir.debug.apply(Ir,["Firestore ("+Tr+") ["+a+"]: "+t].concat(o))}}function Dr(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(Ir.logLevel<=hd.ERROR){var o=t.map(kr);Ir.error.apply(Ir,["Firestore ("+Tr+"): "+a].concat(o))}}function kr(n){if("string"==typeof n)return n;var e=Nd.getPlatform();try{return e.formatJSON(n)}catch(e){return n}}function Ar(n){var t="FIRESTORE ("+Tr+") INTERNAL ASSERTION FAILED: "+n;throw Dr(t),new Error(t)}function Nr(n,t){n||Ar(t)}function Or(){return Nd.getPlatform().emptyByteString}function Rr(a,o){function e(){var e="This constructor is private.";throw o&&(e+=" ",e+=o),new Lr(_r.INVALID_ARGUMENT,e)}for(var t in e.prototype=a.prototype,a)a.hasOwnProperty(t)&&(e[t]=a[t]);return e}function Mr(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function Pr(n,t){return void 0===n?t:n}function qr(a,t){for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)){var n=+e;isNaN(n)||t(n,a[e])}}function Br(a,t){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&t(e,a[e])}function Fr(n){for(var t in Nr(null!=n&&"object"==typeof n,"isEmpty() expects object parameter."),n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Vr(n,t){if(0!==t.length)throw new Lr(_r.INVALID_ARGUMENT,"Function "+n+"() does not support arguments, but was called with "+oi(t.length,"argument")+".")}function Ur(a,t,e){if(t.length!==e)throw new Lr(_r.INVALID_ARGUMENT,"Function "+a+"() requires "+oi(e,"argument")+", but was called with "+oi(t.length,"argument")+".")}function jr(a,t,e){if(t.length<e)throw new Lr(_r.INVALID_ARGUMENT,"Function "+a+"() requires at least "+oi(e,"argument")+", but was called with "+oi(t.length,"argument")+".")}function Kr(a,t,e,n){if(t.length<e||t.length>n)throw new Lr(_r.INVALID_ARGUMENT,"Function "+a+"() requires between "+e+" and "+n+" arguments, but was called with "+oi(t.length,"argument")+".")}function Wr(a,t,e,n){$r(a,t,ni(e)+" argument",n)}function zr(a,t,e,n){void 0!==n&&Wr(a,t,e,n)}function Hr(a,t,e,n){$r(a,t,e+" option",n)}function Qr(a,t,e,n){void 0!==n&&Hr(a,t,e,n)}function Gr(a,t,e,n,o){void 0!==n&&function(a,t,e,n,r){if(!(n instanceof Array))throw new Lr(_r.INVALID_ARGUMENT,"Function "+a+"() requires its "+t+" option to be an array, but it was: "+Jr(n));for(var i=0;i<n.length;++i)if(!r(n[i]))throw new Lr(_r.INVALID_ARGUMENT,"Function "+a+"() requires all "+t+" elements to be "+e+", but the value at index "+i+" was: "+Jr(n[i]))}(a,t,e,n,o)}function Xr(a,t,e,n,o){void 0!==n&&function(d,t,e,n,r){for(var i=[],o=0,l=r,s;o<l.length;o++){if(s=l[o],s===n)return;i.push(Jr(s))}var p=Jr(n);throw new Lr(_r.INVALID_ARGUMENT,"Invalid value "+p+" provided to function "+d+"() for option \""+e+"\". Acceptable values: "+i.join(", "))}(a,0,e,n,o)}function $r(a,t,e,n){if("object"===t?!Yr(n):"non-empty string"===t?"string"!=typeof n||""===n:typeof n!=t){var o=Jr(n);throw new Lr(_r.INVALID_ARGUMENT,"Function "+a+"() requires its "+e+" to be of type "+t+", but it was: "+o)}}function Yr(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Jr(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return 20<n.length&&(n=n.substring(0,20)+"..."),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"!=typeof n)return"function"==typeof n?"a function":Ar("Unknown wrong type: "+typeof n);if(n instanceof Array)return"an array";var a=function(n){if(n.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(t&&1<t.length)return t[1]}return null}(n);return a?"a custom "+a+" object":"an object"}function Zr(a,t,e){if(void 0===e)throw new Lr(_r.INVALID_ARGUMENT,"Function "+a+"() requires a valid "+ni(t)+" argument, but it was undefined.")}function ei(e,n,a){Br(n,function(n){if(0>a.indexOf(n))throw new Lr(_r.INVALID_ARGUMENT,"Unknown option '"+n+"' passed to function "+e+"(). Available options: "+a.join(", "))})}function ti(a,t,e,n){var o=Jr(n);return new Lr(_r.INVALID_ARGUMENT,"Function "+a+"() requires its "+ni(e)+" argument to be a "+t+", but it was: "+o)}function ni(e){return 1===e?"first":2===e?"second":3===e?"third":e+"th"}function oi(n,t){return n+" "+t+(1===n?"":"s")}function ai(n,t){return n<t?-1:t<n?1:0}function ri(a,t){if(a.length!==t.length)return!1;for(var e=0;e<a.length;e++)if(!a[e].isEqual(t[e]))return!1;return!0}function ii(e){return e+"\0"}function ci(){if("undefined"==typeof Uint8Array)throw new Lr(_r.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function li(){if(!Nd.getPlatform().base64Available)throw new Lr(_r.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function ui(n,t){return n===t?0!==n||1/n==1/t:n!=n&&t!=t}function hi(e){return null==e}function io(e){return no(e)&&e<=eo&&to<=e}function oo(e){return e instanceof $i?e.internalValue.slice():[]}function Vo(e){return e===_r.OK?Ar("Treated status OK as error"):e!==_r.CANCELLED&&e!==_r.UNKNOWN&&e!==_r.DEADLINE_EXCEEDED&&e!==_r.RESOURCE_EXHAUSTED&&e!==_r.INTERNAL&&e!==_r.UNAVAILABLE&&e!==_r.UNAUTHENTICATED&&(!(e!==_r.INVALID_ARGUMENT&&e!==_r.NOT_FOUND&&e!==_r.ALREADY_EXISTS&&e!==_r.PERMISSION_DENIED&&e!==_r.FAILED_PRECONDITION&&e!==_r.ABORTED&&e!==_r.OUT_OF_RANGE&&e!==_r.UNIMPLEMENTED&&e!==_r.DATA_LOSS)||Ar("Unknown status code: "+e))}function Ko(e){if(void 0===e)return Dr("GRPC error has no .code"),_r.UNKNOWN;return e===Qo.OK?_r.OK:e===Qo.CANCELLED?_r.CANCELLED:e===Qo.UNKNOWN?_r.UNKNOWN:e===Qo.DEADLINE_EXCEEDED?_r.DEADLINE_EXCEEDED:e===Qo.RESOURCE_EXHAUSTED?_r.RESOURCE_EXHAUSTED:e===Qo.INTERNAL?_r.INTERNAL:e===Qo.UNAVAILABLE?_r.UNAVAILABLE:e===Qo.UNAUTHENTICATED?_r.UNAUTHENTICATED:e===Qo.INVALID_ARGUMENT?_r.INVALID_ARGUMENT:e===Qo.NOT_FOUND?_r.NOT_FOUND:e===Qo.ALREADY_EXISTS?_r.ALREADY_EXISTS:e===Qo.PERMISSION_DENIED?_r.PERMISSION_DENIED:e===Qo.FAILED_PRECONDITION?_r.FAILED_PRECONDITION:e===Qo.ABORTED?_r.ABORTED:e===Qo.OUT_OF_RANGE?_r.OUT_OF_RANGE:e===Qo.UNIMPLEMENTED?_r.UNIMPLEMENTED:e===Qo.DATA_LOSS?_r.DATA_LOSS:Ar("Unknown status code: "+e)}function jo(){return Ud}function Wo(){return jo()}function zo(){return Go}function Yo(){return Ho}function Jo(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];for(var s=Xo,d=0,l=a,i;d<l.length;d++)i=l[d],s=s.add(i);return s}function Zo(){return $o}function ea(){return new _i(Ai.comparator)}function va(){return new _i(Ai.comparator)}function ba(n,t){Nr(!hi(n),t+" is missing")}function Ca(e){return"number"==typeof e?e:"string"==typeof e?+e:Ar("can't parse "+e)}function Da(a){for(var t="",o=0;o<a.length;o++)0<t.length&&(t=Ha(t)),t=za(a.get(o),t);return Ha(t)}function za(a,t){for(var e=t,s=a.length,r=0,d;r<s;r++)d=a.charAt(r),e+="\0"===d?"\x01\x10":"\x01"===d?"\x01\x11":d;return e}function Ha(e){return e+"\x01"+"\x01"}function Ya(n){var t=n.length;if(Nr(2<=t,"Invalid path "+n),2===t)return Nr(n.charAt(0)==="\x01"&&n.charAt(1)==="\x01","Non-empty path "+n+" had length 2"),Ci.EMPTY_PATH;for(var e=[],r="",d=0,l;d<t;){switch(l=n.indexOf("\x01",d),(0>l||t-2<l)&&Ar("Invalid encoded resource path: \""+n+"\""),n.charAt(l+1)){case"\x01":var p=n.substring(d,l),s=void 0;0===r.length?s=p:(s=r+=p,r=""),e.push(s);break;case"\x10":r+=n.substring(d,l),r+="\0";break;case"\x11":r+=n.substring(d,l+1);break;default:Ar("Invalid encoded resource path: \""+n+"\"");}d=l+2}return new Ci(e)}function Xa(i,d,t){var e=Bs.prefixForPath(d,t.path),o=e[1],n=IDBKeyRange.lowerBound(e),a=!1;return Ki(i).iterate({range:n,keysOnly:!0},function(s,t,e){var n=s[0],r=s[1];s[2],n===d&&r===o&&(a=!0),e.done()}).next(function(){return a})}function fi(d,t,e){var n=d.store(Vs.store),r=d.store(Bs.store),i=[],o=IDBKeyRange.only(e.batchId),a=0,m=n.iterate({range:o},function(o,t,e){return a++,e.delete()});i.push(m.next(function(){Nr(1==a,"Dangling document-mutation reference found: Missing batch "+e.batchId)}));for(var u=[],c=0,g=e.mutations;c<g.length;c++){var l=g[c],y=Bs.key(t,l.key.path,e.batchId);i.push(r.delete(y)),u.push(l.key)}return $a.waitFor(i).next(function(){return u})}function Si(e){return e instanceof Uint8Array?(Nr("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function Ii(e){return pl.getStore(e,Vs.store)}function Ki(e){return pl.getStore(e,Bs.store)}function es(e){return pl.getStore(e,Fs.store)}function ns(e){return new $a(function(a,n){e.onsuccess=function(n){var t=n.target.result;a(t)},e.onerror=function(a){var t=a.target.error;as(t),n(t)}})}function as(n){if(!ds){var t=cs.getIOSVersion(cr());if(12.2<=t&&13>t){0<=n.message.indexOf("An internal error was encountered in the Indexed Database server")&&(ds=!0,setTimeout(function(){throw new Lr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown 'An internal error was encountered in the Indexed Database server'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")},0))}}}function os(e){return pl.getStore(e,Gs.store)}function rs(e){return cs.getStore(e,zs.store).get(zs.key).next(function(e){return Nr(null!==e,"Missing metadata row."),e})}function is(e){return rs(e).next(function(e){return e.highestListenSequenceNumber})}function hs(e){return pl.getStore(e,Ws.store)}function ms(e){return pl.getStore(e,js.store)}function gs(e){return pl.getStore(e,Ks.store)}function bs(e){return pl.getStore(e,Ys.store)}function Es(e){return e.path.toArray()}function ks(n){var t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Ar("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length}function Cs(e){e.createObjectStore(Ws.store,{keyPath:Ws.keyPath}).createIndex(Ws.documentTargetsIndex,Ws.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Gs.store,{keyPath:Gs.keyPath}).createIndex(Gs.queryTargetsIndexName,Gs.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(zs.store)}function Ss(e){return pl.getStore(e,Hs.store)}function ws(s,t){var e=s[0],n=s[1],r=t[0],i=t[1],o=ai(e,r);return 0===o?ai(n,i):o}function Ns(t){return ja(this,void 0,void 0,function(){return Wa(this,function(){if((n=t).code!==_r.FAILED_PRECONDITION||n.message!=="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.")throw t;var n;return vr("IndexedDbPersistence","Unexpectedly lost primary lease"),[2]})})}function Os(e){return e.store(qs.store)}function Rs(e){return e.store(Js.store)}function Ms(a,t){return hs(a).put((e=t,o=a.currentSequenceNumber,new Ws(0,Da(e.path),o)));var e,o}function Xs(e){return function(a,t){if("object"!=typeof a||null===a)return!1;for(var e=a,n=0,s=t,i;n<s.length;n++)if(i=s[n],i in e&&"function"==typeof e[i])return!0;return!1}(e,["next","error","complete"])}function ed(e){switch(e){case kp.Set:case kp.MergeSet:case kp.Update:return!0;case kp.Argument:return!1;default:throw Ar("Unexpected case for UserDataSource: "+e);}}function td(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof bi||e instanceof vi||e instanceof si||e instanceof Ip||e instanceof hp)}function nd(a,t,e){if(!td(e)||!Yr(e)){var n=Jr(e);throw"an object"===n?t.createError(a+" a custom object"):t.createError(a+" "+n)}}function ad(n,t){if(t instanceof ip)return t._internalPath;if("string"==typeof t)return od(n,t);throw new Lr(_r.INVALID_ARGUMENT,"Function "+n+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function od(a,e){try{return function(t){if(0<=t.search(sp))throw new Lr(_r.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ip.bind.apply(ip,[void 0].concat(t.split("."))))}catch(e){throw new Lr(_r.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var o=rd(e);throw new Lr(_r.INVALID_ARGUMENT,"Function "+a+"() called with invalid data. "+o)}}function rd(e){return e instanceof Error?e.message:e.toString()}function id(n,t){if(void 0===t)return{merge:!1};if(ei(n,t,["merge","mergeFields"]),Qr(n,"boolean","merge",t.merge),Gr(n,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"==typeof e||e instanceof ip}),void 0!==t.mergeFields&&void 0!==t.merge)throw new Lr(_r.INVALID_ARGUMENT,"Invalid options passed to function "+n+"(): You cannot specify both \"merge\" and \"mergeFields\".");return t}function sd(n,t){return void 0===t?{}:(ei(n,t,["serverTimestamps"]),Xr(n,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function dd(n,t){zr(n,"object",1,t),t&&(ei(n,t,["source"]),Xr(n,0,"source",t.source,["default","server","cache"]))}function ld(a,t,e){if(t instanceof Rp){if(t.firestore!==e)throw new Lr(_r.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw ti(a,"DocumentReference",1,t)}function pd(e){e.INTERNAL.registerService("firestore",function(e){return new Np(e)},function(a){Nr(a&&"object"==typeof a,"shallowCopy() expects object parameter.");var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e]);return t}(Xp))}var hd,md;ka=ka&&ka.hasOwnProperty("default")?ka.default:ka,(md=hd||(hd={}))[md.DEBUG=0]="DEBUG",md[md.VERBOSE=1]="VERBOSE",md[md.INFO=2]="INFO",md[md.WARN=3]="WARN",md[md.ERROR=4]="ERROR",md[md.SILENT=5]="SILENT";var gd=hd.INFO,e=function(a,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];if(!(t<a.logLevel)){var o=new Date().toISOString();switch(t){case hd.DEBUG:case hd.VERBOSE:console.log.apply(console,["["+o+"]  "+a.name+":"].concat(e));break;case hd.INFO:console.info.apply(console,["["+o+"]  "+a.name+":"].concat(e));break;case hd.WARN:console.warn.apply(console,["["+o+"]  "+a.name+":"].concat(e));break;case hd.ERROR:console.error.apply(console,["["+o+"]  "+a.name+":"].concat(e));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");}}},n=function(){function n(n){this.name=n,this._logLevel=gd,this._logHandler=e}return Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in hd))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),n.prototype.debug=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,hd.DEBUG].concat(n))},n.prototype.log=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,hd.VERBOSE].concat(n))},n.prototype.info=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,hd.INFO].concat(n))},n.prototype.warn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,hd.WARN].concat(n))},n.prototype.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,hd.ERROR].concat(n))},n}(),r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(a,t){for(var e in t)t.hasOwnProperty(e)&&(a[e]=t[e])})(n,t)},yd="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,u=u||{},c=yd,f="closure_uid_"+(1e9*Math.random()>>>0),E=0,fd=Date.now||function(){return+new Date},N;A.prototype.j=!1,A.prototype.la=function(){this.j||(this.j=!0,this.G(),0)},A.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var bd=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(a,t){if(s(a))return s(t)&&1==t.length?a.indexOf(t,0):-1;for(var e=0;e<a.length;e++)if(e in a&&a[e]===t)return e;return-1},R=Array.prototype.forEach?function(a,t,e){Array.prototype.forEach.call(a,t,e)}:function(a,t,e){for(var n=a.length,r=s(a)?a.split(""):a,i=0;i<n;i++)i in r&&t.call(e,r[i],i,a)},vd=String.prototype.trim?function(e){return e.trim()}:function(e){return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},x;t:{var Td=c.navigator;if(Td){var V=Td.userAgent;if(V){x=V;break t}}x=""}var B=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];j[" "]=h;var K=P(x,"Opera"),H=P(x,"Trident")||P(x,"MSIE"),Y=P(x,"Edge"),X=Y||H,J=P(x,"Gecko")&&(!P(x.toLowerCase(),"webkit")||P(x,"Edge"))&&!(P(x,"Trident")||P(x,"MSIE"))&&!P(x,"Edge"),_d=P(x.toLowerCase(),"webkit")&&!P(x,"Edge"),Z,Ed;t:{var kd="",Cd=(Ed=x,J?/rv:([^\);]+)(\)|;)/.exec(Ed):Y?/Edge\/([\d\.]+)/.exec(Ed):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ed):_d?/WebKit\/(\S+)/.exec(Ed):K?/(?:Version)[ \/]?(\S+)/.exec(Ed):void 0);if(Cd&&(kd=Cd?Cd[1]:""),H){var nt=G();if(null!=nt&&nt>parseFloat(kd)){Z=nt+"";break t}}Z=kd}var rt={},ot=c.document,st;st=ot&&H?G()||("CSS1Compat"==ot.compatMode?parseInt(Z,10):5):void 0;var Sd=!H||9<=+st,ut=H&&!tt("9"),ct=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var n=!1,a=Object.defineProperty({},"passive",{get:function(){n=!0}});try{c.addEventListener("test",h,a),c.removeEventListener("test",h,a)}catch(e){}return n}();at.prototype.b=function(){this.Ja=!1},D(lt,at);var ht={2:"touch",3:"pen",4:"mouse"};lt.prototype.b=function(){lt.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ut)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var pt="closure_listenable_"+(0|1e6*Math.random()),dt=0;gt.prototype.add=function(s,d,l,n,r){var i=s.toString();(s=this.a[i])||(s=this.a[i]=[],this.b++);var o=bt(s,d,n,r);return-1<o?(d=s[o],l||(d.Z=!1)):((d=new ft(d,this.src,i,!!n,r)).Z=l,s.push(d)),d};var Id="closure_lm_"+(0|1e6*Math.random()),Et={},St="__closure_events_fn_"+(1e9*Math.random()>>>0);D(Mt,A),Mt.prototype[pt]=!0,(N=Mt.prototype).addEventListener=function(a,t,e,n){wt(this,a,t,e,n)},N.removeEventListener=function(a,t,e,n){!function s(t,d,l,p,c){if(g(d))for(var o=0;o<d.length;o++)s(t,d[o],l,p,c);else p=b(p)?!!p.capture:!!p,l=kt(l),t&&t[pt]?(t=t.c,(d=(d+"").toString())in t.a&&-1<(l=bt(o=t.a[d],l,p,c))&&(yt(o[l]),Array.prototype.splice.call(o,l,1),0==o.length&&(delete t.a[d],t.b--))):t&&(t=At(t))&&(d=t.a[d.toString()],t=-1,d&&(t=bt(d,l,p,c)),(l=-1<t?d[t]:null)&&It(l))}(this,a,t,e,n)},N.dispatchEvent=function(d){var l=this.B,p;if(l)for(p=[];l;l=l.B)p.push(l);l=this.J;var c=d.type||d;if(s(d))d=new at(d,l);else if(d instanceof at)d.target=d.target||l;else{var r=d;Q(d=new at(c,l),r)}if(r=!0,p)for(var u=p.length-1,h;0<=u;u--)h=d.a=p[u],r=Ot(h,c,!0,d)&&r;if(r=Ot(h=d.a=l,c,!0,d)&&r,r=Ot(h,c,!1,d)&&r,p)for(u=0;u<p.length;u++)r=Ot(h=d.a=p[u],c,!1,d)&&r;return r},N.G=function(){if(Mt.N.G.call(this),this.c){var a=this.c,e;for(e in a.a){for(var o=a.a[e],n=0;n<o.length;n++)yt(o[n]);delete a.a[e],a.b--}}this.B=null},N.Aa=function(a,t,e,n){return this.c.add(a+"",t,!1,e,n)},N.Ba=function(a,t,e,n){return this.c.add(a+"",t,!0,e,n)};var Rt=c.JSON.stringify;_t.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Pt=new _t(function(){return new xt},function(e){e.reset()}),Ft;Lt.prototype.add=function(a,t){var e=Pt.get();e.set(a,t),this.b?this.b.next=e:this.a=e,this.b=e},xt.prototype.set=function(n,t){this.a=n,this.b=t,this.next=null};var wd=!(xt.prototype.reset=function(){this.next=this.b=this.a=null}),Dd=new Lt;D(jt,Mt),(N=jt.prototype).ba=!1,N.L=null,N.gb=function(){if(this.ba){var e=fd()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Gt(this),this.start()))}},N.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=fd())},N.G=function(){jt.N.G.call(this),Gt(this),delete this.a},D(zt,A),(N=zt.prototype).ea=!1,N.U=null,N.Ua=function(){this.a=arguments,this.U?this.ea=!0:Ht(this)},N.G=function(){zt.N.G.call(this),this.U&&(c.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},N.ab=function(){this.U=null,this.ea&&(this.ea=!1,Ht(this))},D(Yt,A);var Kt=[];Yt.prototype.G=function(){Yt.N.G.call(this),$t(this)},Yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jt=new Mt;D(te,at),D(re,at),D(oe,at);var ee={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},ue={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};se.prototype.a=null;var ce={OPEN:"a",ib:"b",Na:"c",rb:"d"},de;D(fe,at),D(me,at),D(ye,se),de=new ye;var Ad=45e3,be={},we={};(N=ge.prototype).setTimeout=function(e){this.O=e},N.eb=function(n){n=n.target;var a=this.B;a&&3==Vn(n)?a.Ua():this.Ka(n)},N.Ka=function(d){try{if(d==this.a)t:{var t=Vn(this.a),e=this.a.ya(),n=this.a.T();if(!(3>t)&&(3!=t||X||this.a.aa())){this.m||4!=t||7==e||ne(8==e||0>=n?3:2),Ae(this);var r=this.a.T();this.o=r;var i=this.a.aa();if(this.b=200==r){if(this.S&&!this.s){e:{if(this.a){var o=Bn(this.a,"X-HTTP-Initial-Response");if(o&&!_(o)){var a=o;break e}}a=null}if(!a){this.b=!1,this.c=3,ie(12),Re(this),ke(this);break t}this.s=!0,Me(this,a)}this.H?(Ie(this,t,i),X&&this.b&&3==t&&(Xt(this.I,this.P,"tick",this.cb),this.P.start())):Me(this,i),4==t&&Re(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,De(this)))}else 400==r&&0<i.indexOf("Unknown SID")?(this.c=3,ie(12)):(this.c=0,ie(13)),Re(this),ke(this)}}}catch(e){}},N.cb=function(){if(this.a){var n=Vn(this.a),t=this.a.aa();this.A<t.length&&(Ae(this),Ie(this,n,t),this.b&&4!=n&&De(this))}},N.cancel=function(){this.m=!0,Re(this)},N.bb=function(){this.i=null;var e=fd();0<=e-this.R?(2!=this.F&&(ne(3),ie(17)),Re(this),this.c=2,ke(this)):Ne(this,this.R-e)},(N=_e.prototype).C=function(){Le(this);for(var n=[],t=0;t<this.a.length;t++)n.push(this.b[this.a[t]]);return n},N.K=function(){return Le(this),this.a.concat()},N.get=function(n,t){return xe(this.b,n)?this.b[n]:t},N.set=function(n,t){xe(this.b,n)||(this.c++,this.a.push(n)),this.b[n]=t},N.forEach=function(a,t){for(var e=this.K(),n=0;n<e.length;n++){var s=e[n],i=this.get(s);a.call(t,i,s,this)}};var Ee=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;qe.prototype.toString=function(){var a=[],t=this.f;t&&a.push(He(t,Fe,!0),":");var o=this.b;return(o||"file"==t)&&(a.push("//"),(t=this.j)&&a.push(He(t,Fe,!0),"@"),a.push(encodeURIComponent(o+"").replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(o=this.i)&&a.push(":",o+"")),(o=this.a)&&(this.b&&"/"!=o.charAt(0)&&a.push("/"),a.push(He(o,"/"==o.charAt(0)?$e:Je,!0))),(o=this.c.toString())&&a.push("?",o),(o=this.g)&&a.push("#",He(o,tn)),a.join("")},qe.prototype.resolve=function(d){var t=Ve(this),e=!!d.f;e?Be(t,d.f):e=!!d.j,e?t.j=d.j:e=!!d.b,e?Ue(t,d.b):e=null!=d.i;var l=d.a;if(e)Qe(t,d.i);else if(e=!!d.a){if("/"!=l.charAt(0))if(this.b&&!this.a)l="/"+l;else{var p=t.a.lastIndexOf("/");-1!=p&&(l=t.a.substr(0,p+1)+l)}if(".."==(p=l)||"."==p)l="";else if(P(p,"./")||P(p,"/.")){l=0==p.lastIndexOf("/",0),p=p.split("/");for(var c=[],o=0,u;o<p.length;)u=p[o++],"."==u?l&&o==p.length&&c.push(""):".."==u?((1<c.length||1==c.length&&""!=c[0])&&c.pop(),l&&o==p.length&&c.push("")):(c.push(u),l=!0);l=c.join("/")}else l=p}return e?t.a=l:e=""!==d.c.toString(),e?Ke(t,sn(d.c)):e=!!d.g,e&&(t.g=d.g),t};var Fe=/[#\/\?@]/g,Je=/[#\?:]/g,$e=/[#\?]/g,Ze=/[#\?@]/g,tn=/#/g;(N=Xe.prototype).add=function(a,o){nn(this),this.c=null,a=un(this,a);var e=this.a.get(a);return e||this.a.set(a,e=[]),e.push(o),this.b+=1,this},N.forEach=function(a,n){nn(this),this.a.forEach(function(o,r){R(o,function(e){a.call(n,e,r,this)},this)},this)},N.K=function(){nn(this);for(var a=this.a.C(),t=this.a.K(),e=[],n=0;n<t.length;n++)for(var s=a[n],i=0;i<s.length;i++)e.push(t[n]);return e},N.C=function(a){nn(this);var o=[];if(s(a))on(this,a)&&(o=k(o,this.a.get(un(this,a))));else{a=this.a.C();for(var r=0;r<a.length;r++)o=k(o,a[r])}return o},N.set=function(n,a){return nn(this),this.c=null,on(this,n=un(this,n))&&(this.b-=this.a.get(n).length),this.a.set(n,[a]),this.b+=1,this},N.get=function(n,a){return n&&0<(n=this.C(n)).length?n[0]+"":a},N.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var s=[],t=this.a.K(),e=0;e<t.length;e++){var d=t[e],l=encodeURIComponent(d+"");d=this.C(d);for(var i=0,p;i<d.length;i++)p=l,""!==d[i]&&(p+="="+encodeURIComponent(d[i]+"")),s.push(p)}return this.c=s.join("&")},D(function(){},function(){}),(N=cn.prototype).M=null,N.$=function(e){return this.a.$(e)},N.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},N.Da=function(){return!1},N.Ga=function(a,o){if(this.c=a.o,0==this.M){if(!this.a.o&&(a=a.a)){var i=Bn(a,"X-Client-Wire-Protocol");this.l=i||null,this.a.j&&(a=Bn(a,"X-HTTP-Session-Id"))&&(this.a.I=a)}if(o){try{var n=this.a.ja.a.parse(o)}catch(e){return(o=this.a).m=this.c,void Ga(o,2)}this.f=n[0]}else(o=this.a).m=this.c,Ga(o,2)}else 1==this.M&&(this.g?ie(6):"11111"==o?(ie(5),this.g=!0,(!H||10<=+st)&&(this.c=200,this.b.cancel(),ie(11),$n(this.a,this,!0))):(ie(7),this.g=!1))},N.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,hn(this)):1==this.M&&(this.g?(ie(11),$n(this.a,this,!0)):(ie(10),$n(this.a,this,!1)));else{0==this.M?ie(8):1==this.M&&ie(9);var e=this.a;e.m=this.c,Ga(e,2)}},N.Y=function(){return this.a.Y()},N.ma=function(){return this.a.ma()},fn.prototype.add=function(e){this.a.set(pn(e),e)},fn.prototype.C=function(){return this.a.C()};var en=10;mn.prototype.cancel=function(){var e;this.c=Tn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(R(this.a.C(),function(e){e.cancel()}),(e=this.a.a).b={},e.a.length=0,e.c=0)},In.prototype.stringify=function(e){return c.JSON.stringify(e,void 0)},In.prototype.parse=function(e){return c.JSON.parse(e,void 0)};var gn=c.JSON.parse;D(An,Mt);var kn="",Mn=/^https?$/i,On=["POST","PUT"];(N=An.prototype).ca=function(a,d,p,u){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+a);d=d?d.toUpperCase():"GET",this.A=a,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?he(this.H):he(de),this.a.onreadystatechange=I(this.Fa,this);try{this.w=!0,this.a.open(d,a+"",!0),this.w=!1}catch(e){return void Pn(this,e)}a=p||"";var h=new _e(this.headers),o;u&&Oe(u,function(n,t){h.set(t,n)}),u=function(a){t:{for(var t=Rn,o=a.length,n=s(a)?a.split(""):a,r=0;r<o;r++)if(r in n&&t.call(void 0,n[r],r,a)){t=r;break t}t=-1}return 0>t?null:s(a)?a.charAt(t):a[t]}(h.K()),p=c.FormData&&a instanceof c.FormData,!(0<=bd(On,d))||u||p||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(n,t){this.a.setRequestHeader(t,n)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Fn(this),0<this.o&&((this.D=(o=this.a,H&&tt(9)&&l(o.timeout)&&void 0!==o.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=I(this.Ca,this)):this.m=Wt(this.Ca,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(e){Pn(this,e)}},N.Ca=function(){void 0!==u&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},N.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),qn(this))},N.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),qn(this,!0)),An.N.G.call(this)},N.Fa=function(){this.j||(this.w||this.l||this.g?xn(this):this.$a())},N.$a=function(){xn(this)},N.T=function(){try{return 2<Vn(this)?this.a.status:-1}catch(e){return-1}},N.za=function(){try{return 2<Vn(this)?this.a.statusText:""}catch(e){return""}},N.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},N.Va=function(n){if(this.a){var t=this.a.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),gn(t)}},N.ya=function(){return this.h},N.Ya=function(){return s(this.f)?this.f:this.f+""},(N=Qn.prototype).wa=8,N.u=1,N.Da=function(){return 0==this.u},N.Ia=function(a){if(this.h)if(!(this.h=null,1==this.u))3==this.u&&(a?zn(this,a):0==this.f.length||vn(this.b)||zn(this));else if(!a){this.P=Ra(1e5*Math.random());var d=new ge(this,a=this.P++,void 0),n=this.i,l;if(this.J&&(n?Q(n=U(n),this.J):n=this.J),null===this.g&&(d.h=n),this.W)t:{for(var p=l=0,c;p<this.f.length&&(c=this.f[p],void 0!==(c="__data__"in c.a&&s(c=c.a.__data__)?c.length:void 0));p++){if(4096<(l+=c)){l=p;break t}if(4096===l||p===this.f.length-1){l=p+1;break t}}l=1e3}else l=1e3;l=Yn(this,d,l),je(p=Ve(this.B),"RID",a),je(p,"CVER",22),this.o&&this.j&&je(p,"X-HTTP-Session-Id",this.j),Hn(this,p),this.g&&n&&Un(p,this.g,n),En(this.b,d),this.W?(je(p,"$req",l),je(p,"SID","null"),d.S=!0,ve(d,p,null)):ve(d,p,l),this.u=2}},N.Ha=function(){this.l=null,this.a=new ge(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Ve(this.pa);je(e,"RID","rpc"),je(e,"SID",this.H),je(e,"CI",this.ia?"0":"1"),je(e,"AID",this.O),Hn(this,e),je(e,"TYPE","xmlhttp"),this.g&&this.i&&Un(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),Se(this.a,e,!0,this.ga)},N.Ga=function(a,t){if(0!=this.u&&(this.a==a||wn(this.b,a)))if(this.m=a.o,!a.s&&wn(this.b,a)&&3==this.u){try{var o=this.ja.a.parse(t)}catch(e){o=null}if(g(o)&&3==o.length){if(0==(t=o)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<a.v))break t;Zn(this),this.a.cancel(),this.a=null}Jn(this),ie(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ae(I(this.Za,this),6e3));if(1>=bn(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Ga(this,11)}else if((a.s||this.a==a)&&Zn(this),!_(t))for(t=o=this.ja.a.parse(t),o=0;o<t.length;o++){var s=t[o];if(!(this.O=s[0],s=s[1],2==this.u))3==this.u&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?Ga(this,7):Kn(this):"noop"!=s[0]&&this.c&&this.c.ua(s),this.v=0);else if("c"==s[0]){this.H=s[1],this.ga=s[2];var d=s[3];null!=d&&(this.wa=d),null!=(s=s[5])&&l(s)&&0<s&&(this.D=1.5*s),this.o&&(s=a.a)&&((d=Bn(s,"X-Client-Wire-Protocol"))&&yn(this.b,d),this.j&&(s=Bn(s,"X-HTTP-Session-Id")))&&(this.I=s,je(this.B,this.j,s)),this.u=3,this.c&&this.c.va(),s=a,this.pa=tr(this,this.Y()?this.ga:null,this.ha),s.s?(Sn(this.b,s),(d=this.D)&&s.setTimeout(d),s.i&&(Ae(s),De(s)),this.a=s):Xn(this),0<this.f.length&&Wn(this)}else"stop"!=s[0]&&"close"!=s[0]||Ga(this,7)}},N.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Jn(this),ie(19))},N.na=function(a){var s=null,d,l;if(this.a==a){Zn(this),this.a=null;var p=2}else{if(!wn(this.b,a))return;s=a.j,Sn(this.b,a),p=1}if(this.m=a.o,0!=this.u)if(a.b)1==p?(s=fd()-a.v,Jt.dispatchEvent(new oe(Jt,a.l?a.l.length:0,s,this.A)),Wn(this)):Xn(this);else{var c=a.c;if(3==c||0==c&&0<this.m||(1!=p||(l=a,bn((d=this).b)>=d.b.f-(d.h?1:0)||(d.h?(d.f=l.j.concat(d.f),0):1==d.u||2==d.u||d.A>=(d.Pa?0:d.Qa)||(d.h=ae(I(d.Ia,d,l),Ka(d,d.A)),d.A++,0))))&&(2!=p||!Jn(this)))switch(s&&0<s.length&&(a=this.b,a.c=a.c.concat(s)),c){case 1:Ga(this,5);break;case 4:Ga(this,10);break;case 3:Ga(this,6);break;default:Ga(this,2);}}},N.fb=function(e){ie(e?2:1)},N.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new An(this.La)).F=this.R,e},N.ma=function(){return!!this.c&&!0},N.Y=function(){return this.R},(N=nr.prototype).va=function(){},N.ua=function(){},N.ta=function(){},N.sa=function(){},N.Ta=function(){},or.prototype.a=function(n,t){return new ar(n,t)},D(ar,Mt),(N=ar.prototype).addEventListener=function(a,t,e,n){ar.N.addEventListener.call(this,a,t,e,n)},N.removeEventListener=function(a,t,e,n){ar.N.removeEventListener.call(this,a,t,e,n)},N.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var a=this.a,o=this.m,i=this.g,s=this.b||void 0;ie(0),a.ha=i,a.V=s||{},a.o&&(a.F.b=[],a.F.a=!1),a.w=new cn(a),null===a.g&&(a.w.h=a.i),i=o,a.g&&a.i&&(i=Un(o,a.g,a.i)),(a=a.w).i=i,o=tr(a.a,null,a.i),ie(3),null==(i=a.a.F.b)?(Ge(o,"MODE","init"),!a.a.o&&a.a.j&&Ge(o,"X-HTTP-Session-Id",a.a.j),a.b=new ge(a,void 0,void 0),a.b.h=a.h,Se(a.b,o,!1,null),a.M=0):(a.f=i[0],a.M=1,hn(a))},N.close=function(){Kn(this.a)},N.Xa=function(n){if(s(n)){var t={};t.__data__=n,Gn(this.a,t)}else this.h?((t={}).__data__=Rt(n),Gn(this.a,t)):Gn(this.a,n)},N.G=function(){this.a.c=null,delete this.f,Kn(this.a),delete this.a,ar.N.G.call(this)},D(rr,fe),D(ir,me),D(sr,nr),sr.prototype.va=function(){this.a.dispatchEvent("a")},sr.prototype.ua=function(e){this.a.dispatchEvent(new rr(e))},sr.prototype.ta=function(e){this.a.dispatchEvent(new ir(e))},sr.prototype.sa=function(){this.a.dispatchEvent("b")};var _n=w(function(e){function t(){}t.prototype=e.prototype;var n=new t;return e.apply(n,Array.prototype.slice.call(arguments,1)),n},or);or.prototype.createWebChannel=or.prototype.a,ar.prototype.send=ar.prototype.Xa,ar.prototype.open=ar.prototype.Wa,ar.prototype.close=ar.prototype.close,ee.NO_ERROR=0,ee.TIMEOUT=8,ee.HTTP_ERROR=6,ue.COMPLETE="complete",(le.EventType=ce).OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",Mt.prototype.listen=Mt.prototype.Aa,An.prototype.listenOnce=An.prototype.Ba,An.prototype.getLastError=An.prototype.Ya,An.prototype.getLastErrorCode=An.prototype.ya,An.prototype.getStatus=An.prototype.T,An.prototype.getStatusText=An.prototype.za,An.prototype.getResponseJson=An.prototype.Va,An.prototype.getResponseText=An.prototype.aa,An.prototype.send=An.prototype.ca;var lr={createWebChannelTransport:_n,ErrorCode:ee,EventType:ue,WebChannel:le,XhrIo:An},fr=lr.createWebChannelTransport,pr=lr.ErrorCode,dr=lr.EventType,mr=lr.WebChannel,yr=lr.XhrIo,gr=function(a){function o(r,t){var e=a.call(this,t)||this;return e.code=r,e.name="FirebaseError",Object.setPrototypeOf(e,o.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,br.prototype.create),e}return Pa(o,a),o}(Error),br=function(){function e(a,t,e){this.service=a,this.serviceName=t,this.errors=e}return e.prototype.create=function(d){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var p=t[0]||{},i=this.service+"/"+d,o=this.errors[d],a=o?(l=p,o.replace(wr,function(a,t){var e=l[t];return null==e?"<"+t+"?>":e.toString()})):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new gr(i,s),c=0,m=Object.keys(p),l,g;c<m.length;c++)g=m[c],"_"!==g.slice(-1)&&(g in u&&console.warn("Overwriting FirebaseError base field \""+g+"\" can cause unexpected behavior."),u[g]=p[g]);return u},e}(),wr=/\{\$([^}]+)}/g,Tr=ka.SDK_VERSION,Ir=new n("@firebase/firestore"),Cr,xd;(xd=Cr||(Cr={}))[xd.DEBUG=0]="DEBUG",xd[xd.ERROR=1]="ERROR",xd[xd.SILENT=2]="SILENT";var Nd=function(){function n(){}return n.setPlatform=function(e){n.platform&&Ar("Platform already defined"),n.platform=e},n.getPlatform=function(){return n.platform||Ar("Platform not set"),n.platform},n}(),_r={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lr=function(a){function e(o,t){var e=a.call(this,t)||this;return e.code=o,e.message=t,e.name="FirebaseError",e.toString=function(){return e.name+": [code="+e.code+"]: "+e.message},e}return Pa(e,a),e}(Error),xr=function(){function e(){}return e.newId=function(){for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",o=0;20>o;o++)t+=a.charAt(Ra(Math.random()*a.length));return Nr(20===t.length,"Invalid auto ID: "+t),t},e}(),si=function(){function n(e){li(),this._binaryString=e}return n.fromBase64String=function(e){Ur("Blob.fromBase64String",arguments,1),Wr("Blob.fromBase64String","string",1,e),li();try{return new n(Nd.getPlatform().atob(e))}catch(e){throw new Lr(_r.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},n.fromUint8Array=function(e){if(Ur("Blob.fromUint8Array",arguments,1),ci(),!(e instanceof Uint8Array))throw ti("Blob.fromUint8Array","Uint8Array",1,e);return new n(Array.prototype.map.call(e,function(e){return String.fromCharCode(e)}).join(""))},n.prototype.toBase64=function(){return Ur("Blob.toBase64",arguments,0),li(),Nd.getPlatform().btoa(this._binaryString)},n.prototype.toUint8Array=function(){Ur("Blob.toUint8Array",arguments,0),ci();for(var n=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)n[t]=this._binaryString.charCodeAt(t);return n},n.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},n.prototype.isEqual=function(e){return this._binaryString===e._binaryString},n.prototype._compareTo=function(e){return ai(this._binaryString,e._binaryString)},n}(),gi=Rr(si,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),vi=function(){function e(n,t){if(Ur("GeoPoint",arguments,2),Wr("GeoPoint","number",1,n),Wr("GeoPoint","number",2,t),!isFinite(n)||-90>n||90<n)throw new Lr(_r.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(t)||-180>t||180<t)throw new Lr(_r.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=n,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return ai(this._lat,e._lat)||ai(this._long,e._long)},e}(),bi=function(){function a(n,t){if(this.seconds=n,0>(this.nanoseconds=t))throw new Lr(_r.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new Lr(_r.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(-62135596800>n)throw new Lr(_r.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(253402300800<=n)throw new Lr(_r.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}return a.now=function(){return a.fromMillis(Date.now())},a.fromDate=function(e){return a.fromMillis(e.getTime())},a.fromMillis=function(n){var t=Ra(n/1e3);return new a(t,1e6*(n-1e3*t))},a.prototype.toDate=function(){return new Date(this.toMillis())},a.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},a.prototype._compareTo=function(e){return this.seconds===e.seconds?ai(this.nanoseconds,e.nanoseconds):ai(this.seconds,e.seconds)},a.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},a.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},a}(),wi=function(a,t,e,n,o){this.databaseId=a,this.persistenceKey=t,this.host=e,this.ssl=n,this.forceLongPolling=o},Ei=function(){function n(n,t){this.projectId=n,this.database=t||"(default)"}return Object.defineProperty(n.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database},n.prototype.compareTo=function(e){return ai(this.projectId,e.projectId)||ai(this.database,e.database)},n}(),Ti=function(){function a(a,t,e){this.init(a,t,e)}return a.prototype.init=function(a,t,o){void 0===t?t=0:t>a.length&&Ar("offset "+t+" out of range "+a.length),void 0===o?o=a.length-t:o>a.length-t&&Ar("length "+o+" out of range "+(a.length-t)),this.segments=a,this.offset=t,this.len=o},a.prototype.construct=function(a,t,e){var n=Object.create(Object.getPrototypeOf(this));return n.init(a,t,e),n},Object.defineProperty(a.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),a.prototype.isEqual=function(e){return 0===a.comparator(this,e)},a.prototype.child=function(n){var o=this.segments.slice(this.offset,this.limit());return n instanceof a?n.forEach(function(e){o.push(e)}):"string"==typeof n?o.push(n):Ar("Unknown parameter type for Path.child(): "+n),this.construct(o)},a.prototype.limit=function(){return this.offset+this.length},a.prototype.popFirst=function(e){return e=void 0===e?1:e,Nr(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},a.prototype.popLast=function(){return Nr(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},a.prototype.firstSegment=function(){return Nr(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},a.prototype.lastSegment=function(){return this.get(this.length-1)},a.prototype.get=function(e){return Nr(e<this.length,"Index out of range"),this.segments[this.offset+e]},a.prototype.isEmpty=function(){return 0===this.length},a.prototype.isPrefixOf=function(n){if(n.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==n.get(t))return!1;return!0},a.prototype.isImmediateParentOf=function(n){if(this.length+1!==n.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==n.get(t))return!1;return!0},a.prototype.forEach=function(a){for(var t=this.offset,o=this.limit();t<o;t++)a(this.segments[t])},a.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},a.comparator=function(a,t){for(var e=d(a.length,t.length),n=0;n<e;n++){var s=a.get(n),i=t.get(n);if(s<i)return-1;if(i<s)return 1}return a.length<t.length?-1:a.length>t.length?1:0},a}(),Ci=function(n){function a(){return null!==n&&n.apply(this,arguments)||this}return Pa(a,n),a.prototype.canonicalString=function(){return this.toArray().join("/")},a.prototype.toString=function(){return this.canonicalString()},a.fromString=function(e){if(0<=e.indexOf("//"))throw new Lr(_r.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new a(e.split("/").filter(function(e){return 0<e.length}))},a.EMPTY_PATH=new a([]),a}(Ti),Di=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ni=function(e){function d(){return null!==e&&e.apply(this,arguments)||this}return Pa(d,e),d.isValidIdentifier=function(e){return Di.test(e)},d.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),d.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},d.prototype.toString=function(){return this.canonicalString()},d.prototype.isKeyField=function(){return 1===this.length&&this.get(0)==="__name__"},d.keyField=function(){return new d(["__name__"])},d.fromServerFormat=function(l){for(var t=[],e="",p=0,c=function(){if(0===e.length)throw new Lr(_r.INVALID_ARGUMENT,"Invalid field path ("+l+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(e),e=""},i=!1,u;p<l.length;)if(u=l[p],"\\"===u){if(p+1===l.length)throw new Lr(_r.INVALID_ARGUMENT,"Path has trailing escape character: "+l);var h=l[p+1];if("\\"!==h&&"."!==h&&"`"!==h)throw new Lr(_r.INVALID_ARGUMENT,"Path has invalid escape sequence: "+l);e+=h,p+=2}else"`"===u?i=!i:"."!==u||i?e+=u:c(),p++;if(c(),i)throw new Lr(_r.INVALID_ARGUMENT,"Unterminated ` in path: "+l);return new d(t)},d.EMPTY_PATH=new d([]),d}(Ti),Ai=function(){function n(e){this.path=e,Nr(n.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return n.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},n.prototype.isEqual=function(e){return null!==e&&0===Ci.comparator(this.path,e.path)},n.prototype.toString=function(){return this.path.toString()},n.comparator=function(n,t){return Ci.comparator(n.path,t.path)},n.isDocumentKey=function(e){return 0==e.length%2},n.fromSegments=function(e){return new n(new Ci(e.slice()))},n.fromPathString=function(e){return new n(Ci.fromString(e))},n.EMPTY=new n(new Ci([])),n}(),ki=function(){function e(n,t){this.key=n,this.version=t}return e.compareByKey=function(n,t){return Ai.comparator(n.key,t.key)},e}(),Ri=function(s){function n(a,t,e,n,r){var i=s.call(this,a,t)||this;return i.data=e,i.proto=r,i.hasLocalMutations=!!n.hasLocalMutations,i.hasCommittedMutations=!!n.hasCommittedMutations,i}return Pa(n,s),n.prototype.field=function(e){return this.data.field(e)},n.prototype.fieldValue=function(n){var t=this.field(n);return t?t.value():void 0},n.prototype.value=function(){return this.data.value()},n.prototype.isEqual=function(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},n.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),n.compareByField=function(a,t,e){var n=t.field(a),o=e.field(a);return void 0!==n&&void 0!==o?n.compareTo(o):Ar("Trying to compare documents on fields that don't exist")},n}(ki),Mi=function(a){function n(o,t,e){var n=a.call(this,o,t)||this;return n.hasCommittedMutations=e&&e.hasCommittedMutations,n}return Pa(n,a),n.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(e){return e instanceof n&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},n}(ki),Oi=function(a){function n(n,t){return a.call(this,n,t)||this}return Pa(n,a),n.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(e){return e instanceof n&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},n}(ki),_i=function(){function a(n,t){this.comparator=n,this.root=t||Li.EMPTY}return a.prototype.insert=function(n,t){return new a(this.comparator,this.root.insert(n,t,this.comparator).copy(null,null,Li.BLACK,null,null))},a.prototype.remove=function(e){return new a(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Li.BLACK,null,null))},a.prototype.get=function(a){for(var t=this.root,o;!t.isEmpty();){if(o=this.comparator(a,t.key),0===o)return t.value;0>o?t=t.left:0<o&&(t=t.right)}return null},a.prototype.indexOf=function(a){for(var t=0,o=this.root,i;!o.isEmpty();){if(i=this.comparator(a,o.key),0===i)return t+o.left.size;o=0>i?o.left:(t+=o.left.size+1,o.right)}return-1},a.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(a.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),a.prototype.minKey=function(){return this.root.minKey()},a.prototype.maxKey=function(){return this.root.maxKey()},a.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},a.prototype.forEach=function(a){this.inorderTraversal(function(n,t){return a(n,t),!1})},a.prototype.toString=function(){var a=[];return this.inorderTraversal(function(n,t){return a.push(n+":"+t),!1}),"{"+a.join(", ")+"}"},a.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},a.prototype.getIterator=function(){return new Pi(this.root,null,this.comparator,!1)},a.prototype.getIteratorFrom=function(e){return new Pi(this.root,e,this.comparator,!1)},a.prototype.getReverseIterator=function(){return new Pi(this.root,null,this.comparator,!0)},a.prototype.getReverseIteratorFrom=function(e){return new Pi(this.root,e,this.comparator,!0)},a}(),Pi=function(){function e(a,o,e,n){this.isReverse=n,this.nodeStack=[];for(var r=1;!a.isEmpty();)if(r=o?e(a.key,o):1,n&&(r*=-1),0>r)a=this.isReverse?a.left:a.right;else{if(0===r){this.nodeStack.push(a);break}this.nodeStack.push(a),a=this.isReverse?a.right:a.left}}return e.prototype.getNext=function(){Nr(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var n=this.nodeStack.pop(),a={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return a},e.prototype.hasNext=function(){return 0<this.nodeStack.length},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Li=function(){function a(o,t,e,n,r){this.key=o,this.value=t,this.color=null==e?a.RED:e,this.left=null==n?a.EMPTY:n,this.right=null==r?a.EMPTY:r,this.size=this.left.size+1+this.right.size}return a.prototype.copy=function(o,t,e,n,r){return new a(null==o?this.key:o,null==t?this.value:t,null==e?this.color:e,null==n?this.left:n,null==r?this.right:r)},a.prototype.isEmpty=function(){return!1},a.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},a.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},a.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},a.prototype.minKey=function(){return this.min().key},a.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},a.prototype.insert=function(a,t,e){var n=this,o=e(a,n.key);return(n=0>o?n.copy(null,null,null,n.left.insert(a,t,e),null):0===o?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(a,t,e))).fixUp()},a.prototype.removeMin=function(){if(this.left.isEmpty())return a.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},a.prototype.remove=function(o,t){var e=this,i;if(0>t(o,e.key))e.left.isEmpty()||e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.remove(o,t),null);else{if(e.left.isRed()&&(e=e.rotateRight()),e.right.isEmpty()||e.right.isRed()||e.right.left.isRed()||(e=e.moveRedRight()),0===t(o,e.key)){if(e.right.isEmpty())return a.EMPTY;i=e.right.min(),e=e.copy(i.key,i.value,null,null,e.right.removeMin())}e=e.copy(null,null,null,null,e.right.remove(o,t))}return e.fixUp()},a.prototype.isRed=function(){return this.color},a.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},a.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},a.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},a.prototype.rotateLeft=function(){var e=this.copy(null,null,a.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},a.prototype.rotateRight=function(){var e=this.copy(null,null,a.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},a.prototype.colorFlip=function(){var n=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,t)},a.prototype.checkMaxDepth=function(){var e=this.check();return Oa(2,e)<=this.size+1},a.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ar("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw Ar("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw Ar("Black depths differ");return e+(this.isRed()?0:1)},a.EMPTY=null,a.RED=!0,a.BLACK=!1,a}(),xi=function(){function e(){this.size=0}return e.prototype.copy=function(){return this},e.prototype.insert=function(n,t){return new Li(n,t)},e.prototype.remove=function(){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(){return!1},e.prototype.reverseTraversal=function(){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}(),qi,Ld,Od,Rd;Li.EMPTY=new xi,(Ld=qi||(qi={}))[Ld.NullValue=0]="NullValue",Ld[Ld.BooleanValue=1]="BooleanValue",Ld[Ld.NumberValue=2]="NumberValue",Ld[Ld.TimestampValue=3]="TimestampValue",Ld[Ld.StringValue=4]="StringValue",Ld[Ld.BlobValue=5]="BlobValue",Ld[Ld.RefValue=6]="RefValue",Ld[Ld.GeoPointValue=7]="GeoPointValue",Ld[Ld.ArrayValue=8]="ArrayValue",Ld[Ld.ObjectValue=9]="ObjectValue",(Rd=Od||(Od={}))[Rd.Default=0]="Default",Rd[Rd.Estimate=1]="Estimate",Rd[Rd.Previous=2]="Previous";var Md=function(){function a(n,t){this.serverTimestampBehavior=n,this.timestampsInSnapshots=t}return a.fromSnapshotOptions=function(n,t){switch(n.serverTimestamps){case"estimate":return new a(Od.Estimate,t);case"previous":return new a(Od.Previous,t);case"none":case void 0:return new a(Od.Default,t);default:return Ar("fromSnapshotOptions() called with invalid options.");}},a}(),Fi=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return Nr(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),ai(this.typeOrder,e.typeOrder)},e}(),Vi=function(a){function e(){var e=a.call(this)||this;return e.typeOrder=qi.NullValue,e.internalValue=null,e}return Pa(e,a),e.prototype.value=function(){return null},e.prototype.isEqual=function(n){return n instanceof e},e.prototype.compareTo=function(n){return n instanceof e?0:this.defaultCompareTo(n)},e.INSTANCE=new e,e}(Fi),Bi=function(a){function n(n){var t=a.call(this)||this;return t.internalValue=n,t.typeOrder=qi.BooleanValue,t}return Pa(n,a),n.prototype.value=function(){return this.internalValue},n.prototype.isEqual=function(e){return e instanceof n&&this.internalValue===e.internalValue},n.prototype.compareTo=function(e){return e instanceof n?ai(this,e):this.defaultCompareTo(e)},n.of=function(e){return e?n.TRUE:n.FALSE},n.TRUE=new n(!0),n.FALSE=new n(!1),n}(Fi),Ui=function(a){function o(n){var t=a.call(this)||this;return t.internalValue=n,t.typeOrder=qi.NumberValue,t}return Pa(o,a),o.prototype.value=function(){return this.internalValue},o.prototype.compareTo=function(a){return a instanceof o?(t=this.internalValue,r=a.internalValue,t<r?-1:r<t?1:t===r?0:isNaN(t)?isNaN(r)?0:-1:1):this.defaultCompareTo(a);var t,r},o}(Fi),Qi=function(a){function e(e){return a.call(this,e)||this}return Pa(e,a),e.prototype.isEqual=function(n){return n instanceof e&&ui(this.internalValue,n.internalValue)},e}(Ui),ji=function(a){function n(n){var t=a.call(this,n)||this;return t.internalValue=n,t}return Pa(n,a),n.prototype.isEqual=function(e){return e instanceof n&&ui(this.internalValue,e.internalValue)},n.NAN=new n(NaN),n.POSITIVE_INFINITY=new n(1/0),n.NEGATIVE_INFINITY=new n(-1/0),n}(Ui),Gi=function(a){function n(n){var t=a.call(this)||this;return t.internalValue=n,t.typeOrder=qi.StringValue,t}return Pa(n,a),n.prototype.value=function(){return this.internalValue},n.prototype.isEqual=function(e){return e instanceof n&&this.internalValue===e.internalValue},n.prototype.compareTo=function(e){return e instanceof n?ai(this.internalValue,e.internalValue):this.defaultCompareTo(e)},n}(Fi),Wi=function(a){function n(n){var t=a.call(this)||this;return t.internalValue=n,t.typeOrder=qi.TimestampValue,t}return Pa(n,a),n.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},n.prototype.isEqual=function(e){return e instanceof n&&this.internalValue.isEqual(e.internalValue)},n.prototype.compareTo=function(e){return e instanceof n?this.internalValue._compareTo(e.internalValue):e instanceof zi?-1:this.defaultCompareTo(e)},n}(Fi),zi=function(a){function n(o,t){var e=a.call(this)||this;return e.localWriteTime=o,e.previousValue=t,e.typeOrder=qi.TimestampValue,e}return Pa(n,a),n.prototype.value=function(e){return e&&e.serverTimestampBehavior===Od.Estimate?new Wi(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Od.Previous&&this.previousValue?this.previousValue.value(e):null},n.prototype.isEqual=function(e){return e instanceof n&&this.localWriteTime.isEqual(e.localWriteTime)},n.prototype.compareTo=function(e){return e instanceof n?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Wi?1:this.defaultCompareTo(e)},n.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},n}(Fi),Hi=function(a){function n(n){var t=a.call(this)||this;return t.internalValue=n,t.typeOrder=qi.BlobValue,t}return Pa(n,a),n.prototype.value=function(){return this.internalValue},n.prototype.isEqual=function(e){return e instanceof n&&this.internalValue.isEqual(e.internalValue)},n.prototype.compareTo=function(e){return e instanceof n?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},n}(Fi),Yi=function(a){function o(o,t){var e=a.call(this)||this;return e.databaseId=o,e.key=t,e.typeOrder=qi.RefValue,e}return Pa(o,a),o.prototype.value=function(){return this.key},o.prototype.isEqual=function(e){return e instanceof o&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},o.prototype.compareTo=function(n){if(n instanceof o){var t=this.databaseId.compareTo(n.databaseId);return 0===t?Ai.comparator(this.key,n.key):t}return this.defaultCompareTo(n)},o}(Fi),Xi=function(a){function n(n){var t=a.call(this)||this;return t.internalValue=n,t.typeOrder=qi.GeoPointValue,t}return Pa(n,a),n.prototype.value=function(){return this.internalValue},n.prototype.isEqual=function(e){return e instanceof n&&this.internalValue.isEqual(e.internalValue)},n.prototype.compareTo=function(e){return e instanceof n?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},n}(Fi),Ji=function(o){function s(n){var t=o.call(this)||this;return t.internalValue=n,t.typeOrder=qi.ObjectValue,t}return Pa(s,o),s.prototype.value=function(a){var n={};return this.internalValue.inorderTraversal(function(o,t){n[o]=t.value(a)}),n},s.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},s.prototype.isEqual=function(a){if(a instanceof s){for(var t=this.internalValue.getIterator(),e=a.internalValue.getIterator();t.hasNext()&&e.hasNext();){var n=t.getNext(),o=e.getNext();if(n.key!==o.key||!n.value.isEqual(o.value))return!1}return!t.hasNext()&&!e.hasNext()}return!1},s.prototype.compareTo=function(a){if(a instanceof s){for(var t=this.internalValue.getIterator(),e=a.internalValue.getIterator();t.hasNext()&&e.hasNext();){var n=t.getNext(),r=e.getNext(),i=ai(n.key,r.key)||n.value.compareTo(r.value);if(i)return i}return ai(t.hasNext(),e.hasNext())}return this.defaultCompareTo(a)},s.prototype.set=function(a,t){if(Nr(!a.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===a.length)return this.setChild(a.firstSegment(),t);var e=this.child(a.firstSegment());e instanceof s||(e=s.EMPTY);var o=e.set(a.popFirst(),t);return this.setChild(a.firstSegment(),o)},s.prototype.delete=function(a){if(Nr(!a.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===a.length)return new s(this.internalValue.remove(a.firstSegment()));var t=this.child(a.firstSegment());if(t instanceof s){var e=t.delete(a.popFirst());return new s(this.internalValue.insert(a.firstSegment(),e))}return this},s.prototype.contains=function(e){return void 0!==this.field(e)},s.prototype.field=function(n){Nr(!n.isEmpty(),"Can't get field of empty path");var a=this;return n.forEach(function(e){a=a instanceof s&&a.internalValue.get(e)||void 0}),a},s.prototype.toString=function(){return this.internalValue.toString()},s.prototype.child=function(e){return this.internalValue.get(e)||void 0},s.prototype.setChild=function(n,t){return new s(this.internalValue.insert(n,t))},s.EMPTY=new s(new _i(ai)),s}(Fi),$i=function(a){function o(n){var t=a.call(this)||this;return t.internalValue=n,t.typeOrder=qi.ArrayValue,t}return Pa(o,a),o.prototype.value=function(n){return this.internalValue.map(function(e){return e.value(n)})},o.prototype.forEach=function(e){this.internalValue.forEach(e)},o.prototype.isEqual=function(n){if(n instanceof o){if(this.internalValue.length!==n.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(n.internalValue[t]))return!1;return!0}return!1},o.prototype.compareTo=function(a){if(a instanceof o){for(var t=d(this.internalValue.length,a.internalValue.length),e=0,i;e<t;e++)if(i=this.internalValue[e].compareTo(a.internalValue[e]),i)return i;return ai(this.internalValue.length,a.internalValue.length)}return this.defaultCompareTo(a)},o.prototype.toString=function(){return"["+this.internalValue.map(function(e){return e.toString()}).join(",")+"]"},o}(Fi),Zi=Number,to=Zi.MIN_SAFE_INTEGER||-(Oa(2,53)-1),eo=Zi.MAX_SAFE_INTEGER||Oa(2,53)-1,no=Zi.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Ra(e)===e},ro=function(){function a(s,t,d,l,p,c,u){void 0===t&&(t=null),void 0===d&&(d=[]),void 0===l&&(l=[]),void 0===p&&(p=null),void 0===c&&(c=null),void 0===u&&(u=null),this.path=s,this.collectionGroup=t,this.explicitOrderBy=d,this.filters=l,this.limit=p,this.startAt=c,this.endAt=u,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return a.atPath=function(e){return new a(e)},Object.defineProperty(a.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var s=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==s&&null===t)this.memoizedOrderBy=s.isKeyField()?[go]:[new yo(s),go];else{Nr(null===s||null!==t&&s.isEqual(t),"First orderBy should match inequality field.");for(var e=!(this.memoizedOrderBy=[]),d=0,l=this.explicitOrderBy,i;d<l.length;d++)i=l[d],this.memoizedOrderBy.push(i),i.field.isKeyField()&&(e=!0);if(!e){var p=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:po.ASCENDING;this.memoizedOrderBy.push(p===po.ASCENDING?go:vo)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),a.prototype.addFilter=function(n){Nr(null==this.getInequalityFilterField()||!(n instanceof ho)||!n.isInequality()||n.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),Nr(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([n]);return new a(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.startAt,this.endAt)},a.prototype.addOrderBy=function(n){Nr(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([n]);return new a(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.startAt,this.endAt)},a.prototype.withLimit=function(e){return new a(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},a.prototype.withStartAt=function(e){return new a(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},a.prototype.withEndAt=function(e){return new a(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},a.prototype.asCollectionQueryAtPath=function(e){return new a(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},a.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var a=this.path.canonicalString();this.isCollectionGroupQuery()&&(a+="|cg:"+this.collectionGroup),a+="|f:";for(var o=0,s=this.filters;o<s.length;o++)a+=s[o].canonicalId(),a+=",";a+="|ob:";for(var n=0,d=this.orderBy;n<d.length;n++)a+=d[n].canonicalId(),a+=",";hi(this.limit)||(a+="|l:",a+=this.limit),this.startAt&&(a+="|lb:",a+=this.startAt.canonicalId()),this.endAt&&(a+="|ub:",a+=this.endAt.canonicalId()),this.memoizedCanonicalId=a}return this.memoizedCanonicalId},a.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),hi(this.limit)||(e+=", limit: "+this.limit),0<this.explicitOrderBy.length&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},a.prototype.isEqual=function(n){if(this.limit!==n.limit)return!1;if(this.orderBy.length!==n.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(n.orderBy[t]))return!1;if(this.filters.length!==n.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(n.filters[t]))return!1;return this.collectionGroup===n.collectionGroup&&!!this.path.isEqual(n.path)&&(null===this.startAt?null===n.startAt:!!this.startAt.isEqual(n.startAt))&&(null===this.endAt?null===n.endAt:this.endAt.isEqual(n.endAt))},a.prototype.docComparator=function(s,t){for(var e=!1,d=0,l=this.orderBy;d<l.length;d++){var i=l[d],o=i.compare(s,t);if(0!==o)return o;e=e||i.field.isKeyField()}return Nr(e,"orderBy used that doesn't compare on key field"),0},a.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},a.prototype.hasLimit=function(){return!hi(this.limit)},a.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},a.prototype.getInequalityFilterField=function(){for(var a=0,o=this.filters,e;a<o.length;a++)if(e=o[a],e instanceof ho&&e.isInequality())return e.field;return null},a.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(e){return e instanceof ho&&e.op===co.ARRAY_CONTAINS})},a.prototype.isDocumentQuery=function(){return Ai.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},a.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},a.prototype.matchesPathAndCollectionGroup=function(n){var t=n.key.path;return null===this.collectionGroup?Ai.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t):n.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t)},a.prototype.matchesOrderBy=function(a){for(var t=0,o=this.explicitOrderBy,n;t<o.length;t++)if(n=o[t],!n.field.isKeyField()&&void 0===a.field(n.field))return!1;return!0},a.prototype.matchesFilters=function(a){for(var t=0,o=this.filters;t<o.length;t++)if(!o[t].matches(a))return!1;return!0},a.prototype.matchesBounds=function(e){return(!this.startAt||this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},a.prototype.assertValidBound=function(e){Nr(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},a}(),uo=function(){function e(){}return e.create=function(a,t,e){if(e.isEqual(Vi.INSTANCE)){if(t!==co.EQUAL)throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new lo(a)}if(e.isEqual(ji.NAN)){if(t!==co.EQUAL)throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new fo(a)}return new ho(a,t,e)},e}(),co=function(){function n(e){this.name=e}return n.fromString=function(e){return"<"===e?n.LESS_THAN:"<="===e?n.LESS_THAN_OR_EQUAL:"=="===e?n.EQUAL:">="===e?n.GREATER_THAN_OR_EQUAL:">"===e?n.GREATER_THAN:"array-contains"===e?n.ARRAY_CONTAINS:Ar("Unknown relation: "+e)},n.prototype.toString=function(){return this.name},n.prototype.isEqual=function(e){return this.name===e.name},n.LESS_THAN=new n("<"),n.LESS_THAN_OR_EQUAL=new n("<="),n.EQUAL=new n("=="),n.GREATER_THAN=new n(">"),n.GREATER_THAN_OR_EQUAL=new n(">="),n.ARRAY_CONTAINS=new n("array-contains"),n}(),ho=function(a){function n(o,t,e){var n=a.call(this)||this;return n.field=o,n.op=t,n.value=e,n}return Pa(n,a),n.prototype.matches=function(a){if(this.field.isKeyField()){Nr(this.value instanceof Yi,"Comparing on key, but filter value not a RefValue"),Nr(this.op!==co.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var t=this.value,e=Ai.comparator(a.key,t.key);return this.matchesComparison(e)}var n=a.field(this.field);return void 0!==n&&this.matchesValue(n)},n.prototype.matchesValue=function(n){var a=this;return this.op===co.ARRAY_CONTAINS?n instanceof $i&&void 0!==n.internalValue.find(function(e){return e.isEqual(a.value)}):this.value.typeOrder===n.typeOrder&&this.matchesComparison(n.compareTo(this.value))},n.prototype.matchesComparison=function(e){switch(this.op){case co.LESS_THAN:return 0>e;case co.LESS_THAN_OR_EQUAL:return 0>=e;case co.EQUAL:return 0===e;case co.GREATER_THAN:return 0<e;case co.GREATER_THAN_OR_EQUAL:return 0<=e;default:return Ar("Unknown relation op"+this.op);}},n.prototype.isInequality=function(){return this.op!==co.EQUAL&&this.op!==co.ARRAY_CONTAINS},n.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},n.prototype.isEqual=function(e){return e instanceof n&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},n.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},n}(uo),lo=function(a){function n(n){var t=a.call(this)||this;return t.field=n,t}return Pa(n,a),n.prototype.matches=function(n){var t=n.field(this.field);return void 0!==t&&null===t.value()},n.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},n.prototype.toString=function(){return this.field.canonicalString()+" IS null"},n.prototype.isEqual=function(e){return e instanceof n&&this.field.isEqual(e.field)},n}(uo),fo=function(a){function n(n){var t=a.call(this)||this;return t.field=n,t}return Pa(n,a),n.prototype.matches=function(a){var t=a.field(this.field),e=t&&t.value();return"number"==typeof e&&isNaN(e)},n.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},n.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},n.prototype.isEqual=function(e){return e instanceof n&&this.field.isEqual(e.field)},n}(uo),po=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),mo=function(){function e(n,t){this.position=n,this.before=t}return e.prototype.canonicalId=function(){for(var a=this.before?"b:":"a:",o=0,r=this.position;o<r.length;o++)a+=r[o].toString();return a},e.prototype.sortsBeforeDocument=function(s,t){Nr(this.position.length<=s.length,"Bound has more components than query's orderBy");for(var e=0,d=0;d<this.position.length;d++){var l=s[d],i=this.position[d];if(l.field.isKeyField())Nr(i instanceof Yi,"Bound has a non-key value where the key path is being used."),e=Ai.comparator(i.key,t.key);else{var o=t.field(l.field);Nr(void 0!==o,"Field should exist since document matched the orderBy already."),e=i.compareTo(o)}if(l.dir===po.DESCENDING&&(e*=-1),0!==e)break}return this.before?0>=e:0>e},e.prototype.isEqual=function(a){if(null===a)return!1;if(this.before!==a.before||this.position.length!==a.position.length)return!1;for(var t=0;t<this.position.length;t++){var o=this.position[t],n=a.position[t];return o.isEqual(n)}return!0},e}(),yo=function(){function e(n,t){this.field=n,void 0===t&&(t=po.ASCENDING),this.dir=t,this.isKeyOrderBy=n.isKeyField()}return e.prototype.compare=function(a,t){var e=this.isKeyOrderBy?Ri.compareByKey(a,t):Ri.compareByField(this.field,a,t);switch(this.dir){case po.ASCENDING:return e;case po.DESCENDING:return-1*e;default:return Ar("Unknown direction: "+this.dir);}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),go=new yo(Ni.keyField(),po.ASCENDING),vo=new yo(Ni.keyField(),po.DESCENDING),bo=function(){function a(e){this.timestamp=e}return a.fromMicroseconds=function(n){var t=Ra(n/1e6);return new a(new bi(t,1e3*(n%1e6)))},a.fromTimestamp=function(e){return new a(e)},a.forDeletedDoc=function(){return a.MIN},a.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},a.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},a.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},a.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},a.prototype.toTimestamp=function(){return this.timestamp},a.MIN=new a(new bi(0,0)),a}(),wo,Pd;(Pd=wo||(wo={}))[Pd.Listen=0]="Listen",Pd[Pd.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Pd[Pd.LimboResolution=2]="LimboResolution";var Bd=function(){function n(a,t,e,n,r,s){void 0===r&&(r=bo.MIN),void 0===s&&(s=Or()),this.query=a,this.targetId=t,this.purpose=e,this.sequenceNumber=n,this.snapshotVersion=r,this.resumeToken=s}return n.prototype.copy=function(e){return new n(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},n.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},n}(),To=function(){function a(e){this.comparator=e,this.data=new _i(this.comparator)}return a.fromMapKeys=function(n){var o=new a(n.comparator);return n.forEach(function(e){o=o.add(e)}),o},a.prototype.has=function(e){return null!==this.data.get(e)},a.prototype.first=function(){return this.data.minKey()},a.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(a.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),a.prototype.indexOf=function(e){return this.data.indexOf(e)},a.prototype.forEach=function(e){this.data.inorderTraversal(function(n){return e(n),!1})},a.prototype.forEachInRange=function(a,t){for(var e=this.data.getIteratorFrom(a[0]),n;e.hasNext();){if(n=e.getNext(),0<=this.comparator(n.key,a[1]))return;t(n.key)}},a.prototype.forEachWhile=function(a,t){var e;for(e=void 0===t?this.data.getIterator():this.data.getIteratorFrom(t);e.hasNext();)if(!a(e.getNext().key))return},a.prototype.firstAfterOrEqual=function(n){var t=this.data.getIteratorFrom(n);return t.hasNext()?t.getNext().key:null},a.prototype.getIterator=function(){return new Io(this.data.getIterator())},a.prototype.getIteratorFrom=function(e){return new Io(this.data.getIteratorFrom(e))},a.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},a.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},a.prototype.isEmpty=function(){return this.data.isEmpty()},a.prototype.unionWith=function(n){var a=this;return n.forEach(function(e){a=a.add(e)}),a},a.prototype.isEqual=function(o){if(!(o instanceof a))return!1;if(this.size!==o.size)return!1;for(var t=this.data.getIterator(),e=o.data.getIterator();t.hasNext();){var n=t.getNext().key,r=e.getNext().key;if(0!==this.comparator(n,r))return!1}return!0},a.prototype.toArray=function(){var n=[];return this.forEach(function(e){n.push(e)}),n},a.prototype.toString=function(){var n=[];return this.forEach(function(e){return n.push(e)}),"SortedSet("+n.toString()+")"},a.prototype.copy=function(n){var t=new a(this.comparator);return t.data=n,t},a}(),Io=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Co=function(){function a(e){this.fields=e}return a.fromSet=function(e){return new a(e)},a.fromArray=function(n){var o=new To(Ni.comparator);return n.forEach(function(e){return o=o.add(e)}),new a(o)},a.prototype.covers=function(a){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(a)&&(e=!0)}),e},a.prototype.applyTo=function(a){var n=Ji.EMPTY;return this.fields.forEach(function(o){if(o.isEmpty())return a;var t=a.field(o);void 0!==t&&(n=n.set(o,t))}),n},a.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},a}(),Do=function(){function e(n,t){this.field=n,this.transform=t}return Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return this.transform.isIdempotent},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),No=function(n,t){this.version=n,this.transformResults=t},Ao,qd;(qd=Ao||(Ao={}))[qd.Set=0]="Set",qd[qd.Patch=1]="Patch",qd[qd.Transform=2]="Transform",qd[qd.Delete=3]="Delete";var Fd=function(){function n(n,t){this.updateTime=n,this.exists=t,Nr(void 0===n||void 0===t,"Precondition can specify \"exists\" or \"updateTime\" but not both")}return n.exists=function(e){return new n(void 0,e)},n.updateTime=function(e){return new n(e)},Object.defineProperty(n.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),n.prototype.isValidFor=function(e){return void 0===this.updateTime?void 0===this.exists?(Nr(this.isNone,"Precondition should be empty"),!0):this.exists===e instanceof Ri:e instanceof Ri&&e.version.isEqual(this.updateTime)},n.prototype.isEqual=function(a){return t=this.updateTime,o=a.updateTime,(null==t?t===o:o&&t.isEqual(o))&&this.exists===a.exists;var t,o},n.NONE=new n,n}(),ko=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&Nr(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Ri?e.version:bo.MIN},e}(),Ro=function(a){function n(o,t,e){var n=a.call(this)||this;return n.key=o,n.value=t,n.precondition=e,n.type=Ao.Set,n}return Pa(n,a),n.prototype.applyToRemoteDocument=function(a,t){this.verifyKeyMatches(a),Nr(null==t.transformResults,"Transform results received by SetMutation.");var e=t.version;return new Ri(this.key,e,this.value,{hasCommittedMutations:!0})},n.prototype.applyToLocalView=function(e){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var t=ko.getPostMutationVersion(e);return new Ri(this.key,t,this.value,{hasLocalMutations:!0})},Object.defineProperty(n.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(e){return e instanceof n&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},n}(ko),Mo=function(a){function n(o,t,e,n){var r=a.call(this)||this;return r.key=o,r.data=t,r.fieldMask=e,r.precondition=n,r.type=Ao.Patch,r}return Pa(n,a),n.prototype.applyToRemoteDocument=function(a,t){if(this.verifyKeyMatches(a),Nr(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(a))return new Oi(this.key,t.version);var e=this.patchDocument(a);return new Ri(this.key,t.version,e,{hasCommittedMutations:!0})},n.prototype.applyToLocalView=function(e){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var t=ko.getPostMutationVersion(e),n=this.patchDocument(e);return new Ri(this.key,t,n,{hasLocalMutations:!0})},Object.defineProperty(n.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(e){return e instanceof n&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},n.prototype.patchDocument=function(n){var t;return t=n instanceof Ri?n.data:Ji.EMPTY,this.patchObject(t)},n.prototype.patchObject=function(a){var o=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var t=o.data.field(n);a=void 0===t?a.delete(n):a.set(n,t)}}),a},n}(ko),Oo=function(a){function n(o,t){var e=a.call(this)||this;return e.key=o,e.fieldTransforms=t,e.type=Ao.Transform,e.precondition=Fd.exists(!0),e}return Pa(n,a),n.prototype.applyToRemoteDocument=function(a,t){if(this.verifyKeyMatches(a),Nr(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(a))return new Oi(this.key,t.version);var e=this.requireDocument(a),n=this.serverTransformResults(a,t.transformResults),r=t.version,i=this.transformObject(e.data,n);return new Ri(this.key,r,i,{hasCommittedMutations:!0})},n.prototype.applyToLocalView=function(a,t,e){if(this.verifyKeyMatches(a),!this.precondition.isValidFor(a))return a;var n=this.requireDocument(a),r=this.localTransformResults(e,t),i=this.transformObject(n.data,r);return new Ri(this.key,n.version,i,{hasLocalMutations:!0})},Object.defineProperty(n.prototype,"isIdempotent",{get:function(){for(var n=0,a=this.fieldTransforms;n<a.length;n++)if(!a[n].isIdempotent)return!1;return!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fieldMask",{get:function(){var n=new To(Ni.comparator);return this.fieldTransforms.forEach(function(e){return n=n.add(e.field)}),new Co(n)},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(e){return e instanceof n&&this.key.isEqual(e.key)&&ri(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},n.prototype.requireDocument=function(n){Nr(n instanceof Ri,"Unknown MaybeDocument type "+n);var t=n;return Nr(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},n.prototype.serverTransformResults=function(s,t){var e=[];Nr(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var n=0;n<t.length;n++){var d=this.fieldTransforms[n],i=d.transform,o=null;s instanceof Ri&&(o=s.field(d.field)||null),e.push(i.applyToRemoteDocument(o,t[n]))}return e},n.prototype.localTransformResults=function(d,t){for(var e=[],n=0,l=this.fieldTransforms;n<l.length;n++){var i=l[n],o=i.transform,a=null;t instanceof Ri&&(a=t.field(i.field)||null),e.push(o.applyToLocalView(a,d))}return e},n.prototype.transformObject=function(a,o){Nr(o.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var e=0,i;e<this.fieldTransforms.length;e++)i=this.fieldTransforms[e].field,a=a.set(i,o[e]);return a},n}(ko),_o=function(a){function n(o,t){var e=a.call(this)||this;return e.key=o,e.precondition=t,e.type=Ao.Delete,e}return Pa(n,a),n.prototype.applyToRemoteDocument=function(n,t){return this.verifyKeyMatches(n),Nr(null==t.transformResults,"Transform results received by DeleteMutation."),new Mi(this.key,t.version,{hasCommittedMutations:!0})},n.prototype.applyToLocalView=function(e){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&Nr(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Mi(this.key,bo.forDeletedDoc())):e},n.prototype.isEqual=function(e){return e instanceof n&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Object.defineProperty(n.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),n}(ko),Po=function(){function n(){this.isIdempotent=!0}return n.prototype.applyToLocalView=function(n,t){return new zi(t,n)},n.prototype.applyToRemoteDocument=function(n,t){return t},n.prototype.isEqual=function(e){return e instanceof n},n.instance=new n,n}(),Lo=function(){function n(e){this.elements=e,this.isIdempotent=!0}return n.prototype.applyToLocalView=function(e){return this.apply(e)},n.prototype.applyToRemoteDocument=function(e){return this.apply(e)},n.prototype.apply=function(a){for(var t=oo(a),n=function(n){t.find(function(e){return e.isEqual(n)})||t.push(n)},e=0,o=this.elements;e<o.length;e++)n(o[e]);return new $i(t)},n.prototype.isEqual=function(e){return e instanceof n&&ri(e.elements,this.elements)},n}(),xo=function(){function n(e){this.elements=e,this.isIdempotent=!0}return n.prototype.applyToLocalView=function(e){return this.apply(e)},n.prototype.applyToRemoteDocument=function(e){return this.apply(e)},n.prototype.apply=function(a){for(var t=oo(a),o=function(n){t=t.filter(function(e){return!e.isEqual(n)})},e=0,s=this.elements;e<s.length;e++)o(s[e]);return new $i(t)},n.prototype.isEqual=function(e){return e instanceof n&&ri(e.elements,this.elements)},n}(),qo=function(){function n(e){this.operand=e,this.isIdempotent=!1}return n.prototype.applyToLocalView=function(e){if(e instanceof Qi&&this.operand instanceof Qi){var t=e.internalValue+this.operand.internalValue;return new Qi(t)}return e instanceof Ui?(t=e.internalValue+this.operand.internalValue,new ji(t)):this.operand},n.prototype.applyToRemoteDocument=function(n,t){return Nr(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},n.prototype.isEqual=function(e){return e instanceof n&&this.operand.isEqual(e.operand)},n}(),Fo=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),Qo,Vd;(Vd=Qo||(Qo={}))[Vd.OK=0]="OK",Vd[Vd.CANCELLED=1]="CANCELLED",Vd[Vd.UNKNOWN=2]="UNKNOWN",Vd[Vd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vd[Vd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vd[Vd.NOT_FOUND=5]="NOT_FOUND",Vd[Vd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vd[Vd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vd[Vd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vd[Vd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vd[Vd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vd[Vd.ABORTED=10]="ABORTED",Vd[Vd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vd[Vd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vd[Vd.INTERNAL=13]="INTERNAL",Vd[Vd.UNAVAILABLE=14]="UNAVAILABLE",Vd[Vd.DATA_LOSS=15]="DATA_LOSS";var Ud=new _i(Ai.comparator),Go=new _i(Ai.comparator),Ho=new _i(Ai.comparator),Xo=new To(Ai.comparator),$o=new To(ai),ta=function(){function a(a){this.comparator=a?function(n,t){return a(n,t)||Ai.comparator(n.key,t.key)}:function(n,t){return Ai.comparator(n.key,t.key)},this.keyedMap=zo(),this.sortedSet=new _i(this.comparator)}return a.emptySet=function(e){return new a(e.comparator)},a.prototype.has=function(e){return null!=this.keyedMap.get(e)},a.prototype.get=function(e){return this.keyedMap.get(e)},a.prototype.first=function(){return this.sortedSet.minKey()},a.prototype.last=function(){return this.sortedSet.maxKey()},a.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},a.prototype.indexOf=function(n){var t=this.keyedMap.get(n);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(a.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),a.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(n){return e(n),!1})},a.prototype.add=function(n){var t=this.delete(n.key);return t.copy(t.keyedMap.insert(n.key,n),t.sortedSet.insert(n,null))},a.prototype.delete=function(n){var t=this.get(n);return t?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(t)):this},a.prototype.isEqual=function(o){if(!(o instanceof a))return!1;if(this.size!==o.size)return!1;for(var t=this.sortedSet.getIterator(),e=o.sortedSet.getIterator();t.hasNext();){var n=t.getNext().key,r=e.getNext().key;if(!n.isEqual(r))return!1}return!0},a.prototype.toString=function(){var n=[];return this.forEach(function(e){n.push(e.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"},a.prototype.copy=function(o,t){var e=new a;return e.comparator=this.comparator,e.keyedMap=o,e.sortedSet=t,e},a}(),aa,jd,Wd,Hd;(jd=aa||(aa={}))[jd.Added=0]="Added",jd[jd.Removed=1]="Removed",jd[jd.Modified=2]="Modified",jd[jd.Metadata=3]="Metadata",(Hd=Wd||(Wd={}))[Hd.Local=0]="Local",Hd[Hd.Synced=1]="Synced";var Kd=function(){function e(){this.changeMap=new _i(Ai.comparator)}return e.prototype.track=function(a){var t=a.doc.key,e=this.changeMap.get(t);e?a.type!==aa.Added&&e.type===aa.Metadata?this.changeMap=this.changeMap.insert(t,a):a.type===aa.Metadata&&e.type!==aa.Removed?this.changeMap=this.changeMap.insert(t,{type:e.type,doc:a.doc}):a.type===aa.Modified&&e.type===aa.Modified?this.changeMap=this.changeMap.insert(t,{type:aa.Modified,doc:a.doc}):a.type===aa.Modified&&e.type===aa.Added?this.changeMap=this.changeMap.insert(t,{type:aa.Added,doc:a.doc}):a.type===aa.Removed&&e.type===aa.Added?this.changeMap=this.changeMap.remove(t):a.type===aa.Removed&&e.type===aa.Modified?this.changeMap=this.changeMap.insert(t,{type:aa.Removed,doc:e.doc}):a.type===aa.Added&&e.type===aa.Removed?this.changeMap=this.changeMap.insert(t,{type:aa.Modified,doc:a.doc}):Ar("unsupported combination of changes: "+JSON.stringify(a)+" after "+JSON.stringify(e)):this.changeMap=this.changeMap.insert(t,a)},e.prototype.getChanges=function(){var a=[];return this.changeMap.inorderTraversal(function(n,t){a.push(t)}),a},e}(),ca=function(){function a(d,t,e,n,r,i,o,a){this.query=d,this.docs=t,this.oldDocs=e,this.docChanges=n,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a}return a.fromInitialDocuments=function(o,t,e,n){var r=[];return t.forEach(function(e){r.push({type:aa.Added,doc:e})}),new a(o,t,ta.emptySet(t),r,e,n,!0,!1)},Object.defineProperty(a.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),a.prototype.isEqual=function(a){if(!(this.fromCache===a.fromCache&&this.syncStateChanged===a.syncStateChanged&&this.mutatedKeys.isEqual(a.mutatedKeys)&&this.query.isEqual(a.query)&&this.docs.isEqual(a.docs)&&this.oldDocs.isEqual(a.oldDocs)))return!1;var t=this.docChanges,e=a.docChanges;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].type!==e[n].type||!t[n].doc.isEqual(e[n].doc))return!1;return!0},a}(),ha=function(){function a(a,t,e,n,o){this.snapshotVersion=a,this.targetChanges=t,this.targetMismatches=e,this.documentUpdates=n,this.resolvedLimboDocuments=o}return a.createSynthesizedRemoteEventForCurrentChange=function(o,t){var e=((r={})[o]=la.createSynthesizedTargetChangeForCurrentChange(o,t),r),r;return new a(bo.MIN,e,Zo(),jo(),Jo())},a}(),la=function(){function a(a,t,e,n,o){this.resumeToken=a,this.current=t,this.addedDocuments=e,this.modifiedDocuments=n,this.removedDocuments=o}return a.createSynthesizedTargetChangeForCurrentChange=function(n,t){return new a(Or(),t,Jo(),Jo(),Jo())},a}(),fa=function(a,t,e,n){this.updatedTargetIds=a,this.removedTargetIds=t,this.key=e,this.newDoc=n},pa=function(n,t){this.targetId=n,this.existenceFilter=t},da,zd;(zd=da||(da={}))[zd.NoChange=0]="NoChange",zd[zd.Added=1]="Added",zd[zd.Removed=2]="Removed",zd[zd.Current=3]="Current",zd[zd.Reset=4]="Reset";var $d=function(a,t,e,o){void 0===e&&(e=Or()),void 0===o&&(o=null),this.state=a,this.targetIds=t,this.resumeToken=e,this.cause=o},ma=function(){function e(){this.pendingResponses=0,this.documentChanges=va(),this._resumeToken=Or(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var a=Jo(),o=Jo(),s=Jo();return this.documentChanges.forEach(function(n,t){t===aa.Added?a=a.add(n):t===aa.Modified?o=o.add(n):t===aa.Removed?s=s.add(n):Ar("Encountered invalid change type: "+t)}),new la(this._resumeToken,this._current,a,o,s)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=va()},e.prototype.addDocumentChange=function(n,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(n,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),ya=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=jo(),this.pendingDocumentTargetMapping=ea(),this.pendingTargetResets=new To(ai)}return e.prototype.handleDocumentChange=function(a){for(var t=0,s=a.updatedTargetIds,n;t<s.length;t++)n=s[t],a.newDoc instanceof Ri?this.addDocumentToTarget(n,a.newDoc):a.newDoc instanceof Mi&&this.removeDocumentFromTarget(n,a.key,a.newDoc);for(var d=0,l=a.removedTargetIds;d<l.length;d++)n=l[d],this.removeDocumentFromTarget(n,a.key,a.newDoc)},e.prototype.handleTargetChange=function(a){var n=this;this.forEachTarget(a,function(o){var t=n.ensureTargetState(o);switch(a.state){case da.NoChange:n.isActiveTarget(o)&&t.updateResumeToken(a.resumeToken);break;case da.Added:t.recordTargetResponse(),t.isPending||t.clearPendingChanges(),t.updateResumeToken(a.resumeToken);break;case da.Removed:t.recordTargetResponse(),t.isPending||n.removeTarget(o),Nr(!a.cause,"WatchChangeAggregator does not handle errored targets");break;case da.Current:n.isActiveTarget(o)&&(t.markCurrent(),t.updateResumeToken(a.resumeToken));break;case da.Reset:n.isActiveTarget(o)&&(n.resetTarget(o),t.updateResumeToken(a.resumeToken));break;default:Ar("Unknown target watch change state: "+a.state);}})},e.prototype.forEachTarget=function(n,t){0<n.targetIds.length?n.targetIds.forEach(t):qr(this.targetStates,t)},e.prototype.handleExistenceFilter=function(a){var t=a.targetId,e=a.existenceFilter.count,n=this.queryDataForActiveTarget(t);if(n){var r=n.query;if(!r.isDocumentQuery())this.getCurrentDocumentCountForTarget(t)!==e&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t));else if(0===e){var i=new Ai(r.path);this.removeDocumentFromTarget(t,i,new Mi(i,bo.forDeletedDoc()))}else Nr(1===e,"Single document existence filter with count: "+e)}},e.prototype.createRemoteEvent=function(e){var i=this,o={};qr(this.targetStates,function(a,t){var s=i.queryDataForActiveTarget(a);if(s){if(t.current&&s.query.isDocumentQuery()){var n=new Ai(s.query.path);null!==i.pendingDocumentUpdates.get(n)||i.targetContainsDocument(a,n)||i.removeDocumentFromTarget(a,n,new Mi(n,e))}t.hasPendingChanges&&(o[a]=t.toTargetChange(),t.clearPendingChanges())}});var a=Jo();this.pendingDocumentTargetMapping.forEach(function(o,t){var r=!0;t.forEachWhile(function(n){var t=i.queryDataForActiveTarget(n);return!t||t.purpose===wo.LimboResolution||(r=!1)}),r&&(a=a.add(o))});var n=new ha(e,o,this.pendingTargetResets,this.pendingDocumentUpdates,a);return this.pendingDocumentUpdates=jo(),this.pendingDocumentTargetMapping=ea(),this.pendingTargetResets=new To(ai),n},e.prototype.addDocumentToTarget=function(a,t){if(this.isActiveTarget(a)){var e=this.targetContainsDocument(a,t.key)?aa.Modified:aa.Added;this.ensureTargetState(a).addDocumentChange(t.key,e),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(a))}},e.prototype.removeDocumentFromTarget=function(a,t,e){if(this.isActiveTarget(a)){var n=this.ensureTargetState(a);this.targetContainsDocument(a,t)?n.addDocumentChange(t,aa.Removed):n.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(a)),e&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,e))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(n){var t=this.ensureTargetState(n).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(n).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new ma),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(n){var t=this.pendingDocumentTargetMapping.get(n);return t||(t=new To(ai),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(n,t)),t},e.prototype.isActiveTarget=function(e){return null!==this.queryDataForActiveTarget(e)},e.prototype.queryDataForActiveTarget=function(n){var t=this.targetStates[n];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(n)},e.prototype.resetTarget=function(a){var e=this;Nr(!this.targetStates[a].isPending,"Should only reset active targets"),this.targetStates[a]=new ma,this.metadataProvider.getRemoteKeysForTarget(a).forEach(function(n){e.removeDocumentFromTarget(a,n,null)})},e.prototype.targetContainsDocument=function(n,t){return this.metadataProvider.getRemoteKeysForTarget(n).has(t)},e}(),ga=((xa={})[po.ASCENDING.name]="ASCENDING",xa[po.DESCENDING.name]="DESCENDING",xa),Sa=((Xd={})[co.LESS_THAN.name]="LESS_THAN",Xd[co.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Xd[co.GREATER_THAN.name]="GREATER_THAN",Xd[co.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Xd[co.EQUAL.name]="EQUAL",Xd[co.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Xd),Ta=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),Ia=function(){function e(n,t){this.databaseId=n,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(n){var t=void 0===n.code?_r.UNKNOWN:Ko(n.code);return new Lr(t,n.message||"")},e.prototype.toInt32Value=function(e){return hi(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(n){var t;return hi(t="object"==typeof n?n.value:n)?null:t},e.prototype.toTimestamp=function(e){return{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(a){if("string"==typeof a)return this.fromIso8601String(a);Nr(!!a,"Cannot deserialize null or undefined timestamp.");var t=Ca(a.seconds||"0"),e=a.nanos||0;return new bi(t,e)},e.prototype.fromIso8601String=function(a){var t=0,s=Ta.exec(a);if(Nr(!!s,"invalid timestamp: "+a),s[1]){var n=s[1];n=(n+"000000000").substr(0,9),t=+n}var d=new Date(a),i=Ra(d.getTime()/1e3);return new bi(i,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(Nr(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),si.fromBase64String(e)):(Nr(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),si.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return Nr(!!e,"Trying to deserialize version that isn't set"),bo.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(n,t){return this.fullyQualifiedPrefixPath(n).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(n){var t=Ci.fromString(n);return Nr(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(n){var t=this.fromResourceName(n);return Nr(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),Nr(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Ai(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(n){var t=this.fromResourceName(n);return 4===t.length?Ci.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new Ci(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new Ci(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return Nr(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(n){if(n instanceof Vi)return{nullValue:"NULL_VALUE"};if(n instanceof Bi)return{booleanValue:n.value()};if(n instanceof Qi)return{integerValue:""+n.value()};if(n instanceof ji){var t=n.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:n.value()}}return n instanceof Gi?{stringValue:n.value()}:n instanceof Ji?{mapValue:this.toMapValue(n)}:n instanceof $i?{arrayValue:this.toArrayValue(n)}:n instanceof Wi?{timestampValue:this.toTimestamp(n.internalValue)}:n instanceof Xi?{geoPointValue:{latitude:n.value().latitude,longitude:n.value().longitude}}:n instanceof Hi?{bytesValue:this.toBytes(n.value())}:n instanceof Yi?{referenceValue:this.toResourceName(n.databaseId,n.key.path)}:Ar("Unknown FieldValue "+JSON.stringify(n))},e.prototype.fromValue=function(d){var l=this;if("nullValue"in d)return Vi.INSTANCE;if("booleanValue"in d)return Bi.of(d.booleanValue);if("integerValue"in d)return new Qi(Ca(d.integerValue));if("doubleValue"in d){if(this.options.useProto3Json){if("NaN"===d.doubleValue)return ji.NAN;if("Infinity"===d.doubleValue)return ji.POSITIVE_INFINITY;if("-Infinity"===d.doubleValue)return ji.NEGATIVE_INFINITY}return new ji(d.doubleValue)}if("stringValue"in d)return new Gi(d.stringValue);if("mapValue"in d)return this.fromFields(d.mapValue.fields||{});if("arrayValue"in d){ba(d.arrayValue,"arrayValue");var e=d.arrayValue.values||[];return new $i(e.map(function(e){return l.fromValue(e)}))}if("timestampValue"in d)return ba(d.timestampValue,"timestampValue"),new Wi(this.fromTimestamp(d.timestampValue));if("geoPointValue"in d){ba(d.geoPointValue,"geoPointValue");var t=d.geoPointValue.latitude||0,n=d.geoPointValue.longitude||0;return new Xi(new vi(t,n))}if("bytesValue"in d){ba(d.bytesValue,"bytesValue");var r=this.fromBlob(d.bytesValue);return new Hi(r)}if("referenceValue"in d){ba(d.referenceValue,"referenceValue");var o=this.fromResourceName(d.referenceValue),a=new Ei(o.get(1),o.get(3)),i=new Ai(this.extractLocalPathFromResourceName(o));return new Yi(a,i)}return Ar("Unknown Value proto "+JSON.stringify(d))},e.prototype.toMutationDocument=function(n,t){return{name:this.toName(n),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return Nr(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(n,t){return new Ri(this.fromName(n.name),this.fromVersion(n.updateTime),this.fromFields(n.fields||{}),{hasCommittedMutations:!!t})},e.prototype.toFields=function(e){var a=this,n={};return e.forEach(function(o,t){n[o]=a.toValue(t)}),n},e.prototype.fromFields=function(e){var a=this,n=Ji.EMPTY;return Br(e,function(o,t){n=n.set(new Ni([o]),a.fromValue(t))}),n},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(a){var o=this,e=[];return a.forEach(function(n){e.push(o.toValue(n))}),{values:e}},e.prototype.fromFound=function(a){Nr(!!a.found,"Tried to deserialize a found document from a missing document."),ba(a.found.name,"doc.found.name"),ba(a.found.updateTime,"doc.found.updateTime");var t=this.fromName(a.found.name),e=this.fromVersion(a.found.updateTime),n=this.fromFields(a.found.fields||{});return new Ri(t,e,n,{},a.found)},e.prototype.fromMissing=function(a){Nr(!!a.missing,"Tried to deserialize a missing document from a found document."),Nr(!!a.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(a.missing),e=this.fromVersion(a.readTime);return new Mi(t,e)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):Ar("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){return e===da.Added?"ADD":e===da.Current?"CURRENT":e===da.NoChange?"NO_CHANGE":e===da.Removed?"REMOVE":e===da.Reset?"RESET":Ar("Unknown WatchTargetChangeState: "+e)},e.prototype.toTestWatchChange=function(a){if(a instanceof pa)return{filter:{count:a.existenceFilter.count,targetId:a.targetId}};if(a instanceof fa){if(a.newDoc instanceof Ri){var t=a.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:a.updatedTargetIds,removedTargetIds:a.removedTargetIds}}}if(a.newDoc instanceof Mi)return t=a.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:a.removedTargetIds}};if(null===a.newDoc)return{documentRemove:{document:this.toName(a.key),removedTargetIds:a.removedTargetIds}}}if(a instanceof $d){var o;return a.cause&&(o={code:function(e){return void 0===e?Qo.OK:e===_r.OK?Qo.OK:e===_r.CANCELLED?Qo.CANCELLED:e===_r.UNKNOWN?Qo.UNKNOWN:e===_r.DEADLINE_EXCEEDED?Qo.DEADLINE_EXCEEDED:e===_r.RESOURCE_EXHAUSTED?Qo.RESOURCE_EXHAUSTED:e===_r.INTERNAL?Qo.INTERNAL:e===_r.UNAVAILABLE?Qo.UNAVAILABLE:e===_r.UNAUTHENTICATED?Qo.UNAUTHENTICATED:e===_r.INVALID_ARGUMENT?Qo.INVALID_ARGUMENT:e===_r.NOT_FOUND?Qo.NOT_FOUND:e===_r.ALREADY_EXISTS?Qo.ALREADY_EXISTS:e===_r.PERMISSION_DENIED?Qo.PERMISSION_DENIED:e===_r.FAILED_PRECONDITION?Qo.FAILED_PRECONDITION:e===_r.ABORTED?Qo.ABORTED:e===_r.OUT_OF_RANGE?Qo.OUT_OF_RANGE:e===_r.UNIMPLEMENTED?Qo.UNIMPLEMENTED:e===_r.DATA_LOSS?Qo.DATA_LOSS:Ar("Unknown status code: "+e)}(a.cause.code),message:a.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(a.state),targetIds:a.targetIds,resumeToken:this.unsafeCastProtoByteString(a.resumeToken),cause:o}}}return Ar("Unrecognized watch change: "+JSON.stringify(a))},e.prototype.fromWatchChange=function(T){var t;if("targetChange"in T){ba(T.targetChange,"targetChange");var _=this.fromWatchTargetChangeState(T.targetChange.targetChangeType||"NO_CHANGE"),n=T.targetChange.targetIds||[],r=T.targetChange.resumeToken||this.emptyByteString(),i=T.targetChange.cause,o=i&&this.fromRpcStatus(i);t=new $d(_,n,r,o||null)}else if("documentChange"in T){ba(T.documentChange,"documentChange"),ba(T.documentChange.document,"documentChange.name"),ba(T.documentChange.document.name,"documentChange.document.name"),ba(T.documentChange.document.updateTime,"documentChange.document.updateTime");var a=T.documentChange,s=this.fromName(a.document.name),E=this.fromVersion(a.document.updateTime),k=this.fromFields(a.document.fields||{}),h=new Ri(s,E,k,{},a.document),C=a.targetIds||[],f=a.removedTargetIds||[];t=new fa(C,f,h.key,h)}else if("documentDelete"in T){ba(T.documentDelete,"documentDelete"),ba(T.documentDelete.document,"documentDelete.document");var S=T.documentDelete;s=this.fromName(S.document),E=S.readTime?this.fromVersion(S.readTime):bo.forDeletedDoc(),h=new Mi(s,E),f=S.removedTargetIds||[],t=new fa([],f,h.key,h)}else if("documentRemove"in T){ba(T.documentRemove,"documentRemove"),ba(T.documentRemove.document,"documentRemove");var d=T.documentRemove;s=this.fromName(d.document),f=d.removedTargetIds||[],t=new fa([],f,s,null)}else{if(!("filter"in T))return Ar("Unknown change type "+JSON.stringify(T));ba(T.filter,"filter"),ba(T.filter.targetId,"filter.targetId");var m=T.filter,y=m.count||0,g=new Fo(y),v=m.targetId;t=new pa(v,g)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?da.NoChange:"ADD"===e?da.Added:"REMOVE"===e?da.Removed:"CURRENT"===e?da.Current:"RESET"===e?da.Reset:Ar("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(n){if(!("targetChange"in n))return bo.MIN;var t=n.targetChange;return t.targetIds&&t.targetIds.length?bo.MIN:t.readTime?this.fromVersion(t.readTime):bo.MIN},e.prototype.toMutation=function(a){var o=this,t;if(a instanceof Ro)t={update:this.toMutationDocument(a.key,a.value)};else if(a instanceof _o)t={delete:this.toName(a.key)};else if(a instanceof Mo)t={update:this.toMutationDocument(a.key,a.data),updateMask:this.toDocumentMask(a.fieldMask)};else{if(!(a instanceof Oo))return Ar("Unknown mutation type "+a.type);t={transform:{document:this.toName(a.key),fieldTransforms:a.fieldTransforms.map(function(e){return o.toFieldTransform(e)})}}}return a.precondition.isNone||(t.currentDocument=this.toPrecondition(a.precondition)),t},e.prototype.fromMutation=function(s){var d=this,e=s.currentDocument?this.fromPrecondition(s.currentDocument):Fd.NONE;if(s.update){ba(s.update.name,"name");var t=this.fromName(s.update.name),n=this.fromFields(s.update.fields||{});if(s.updateMask){var i=this.fromDocumentMask(s.updateMask);return new Mo(t,n,i,e)}return new Ro(t,n,e)}if(s.delete)return t=this.fromName(s.delete),new _o(t,e);if(s.transform){t=this.fromName(s.transform.document);var o=s.transform.fieldTransforms.map(function(e){return d.fromFieldTransform(e)});return Nr(!0===e.exists,"Transforms only support precondition \"exists == true\""),new Oo(t,o)}return Ar("unknown mutation proto: "+JSON.stringify(s))},e.prototype.toPrecondition=function(e){return Nr(!e.isNone,"Can't serialize an empty precondition"),void 0===e.updateTime?void 0===e.exists?Ar("Unknown precondition"):{exists:e.exists}:{updateTime:this.toVersion(e.updateTime)}},e.prototype.fromPrecondition=function(e){return void 0===e.updateTime?void 0===e.exists?Fd.NONE:Fd.exists(e.exists):Fd.updateTime(this.fromVersion(e.updateTime))},e.prototype.fromWriteResult=function(a,t){var e=this,n=a.updateTime?this.fromVersion(a.updateTime):this.fromVersion(t),o=null;return a.transformResults&&0<a.transformResults.length&&(o=a.transformResults.map(function(n){return e.fromValue(n)})),new No(n,o)},e.prototype.fromWriteResults=function(a,o){var e=this;return a&&0<a.length?(Nr(void 0!==o,"Received a write result without a commit time"),a.map(function(n){return e.fromWriteResult(n,o)})):[]},e.prototype.toFieldTransform=function(a){var o=this,e=a.transform;if(e instanceof Po)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(e instanceof Lo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:e.elements.map(function(e){return o.toValue(e)})}};if(e instanceof xo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:e.elements.map(function(e){return o.toValue(e)})}};if(e instanceof qo)return{fieldPath:a.field.canonicalString(),increment:this.toValue(e.operand)};throw Ar("Unknown transform: "+a.transform)},e.prototype.fromFieldTransform=function(a){var s=this,e=null;if("setToServerValue"in a)Nr("REQUEST_TIME"===a.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(a)),e=Po.instance;else if("appendMissingElements"in a){var t=a.appendMissingElements.values||[];e=new Lo(t.map(function(e){return s.fromValue(e)}))}else if("removeAllFromArray"in a)t=a.removeAllFromArray.values||[],e=new xo(t.map(function(e){return s.fromValue(e)}));else if("increment"in a){var d=this.fromValue(a.increment);Nr(d instanceof Ui,"NUMERIC_ADD transform requires a NumberValue"),e=new qo(d)}else Ar("Unknown transform proto: "+JSON.stringify(a));var i=Ni.fromServerFormat(a.fieldPath);return new Do(i,e)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(a){var t=a.documents.length;Nr(1===t,"DocumentsTarget contained other than 1 document: "+t);var e=a.documents[0];return ro.atPath(this.fromQueryPath(e))},e.prototype.toQueryTarget=function(a){var t={structuredQuery:{}},e=a.path;null===a.collectionGroup?(Nr(0!=e.length%2,"Document queries with filters are not supported."),t.parent=this.toQueryPath(e.popLast()),t.structuredQuery.from=[{collectionId:e.lastSegment()}]):(Nr(0==e.length%2,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(e),t.structuredQuery.from=[{collectionId:a.collectionGroup,allDescendants:!0}]);var n=this.toFilter(a.filters);n&&(t.structuredQuery.where=n);var r=this.toOrder(a.orderBy);r&&(t.structuredQuery.orderBy=r);var i=this.toInt32Value(a.limit);return void 0!==i&&(t.structuredQuery.limit=i),a.startAt&&(t.structuredQuery.startAt=this.toCursor(a.startAt)),a.endAt&&(t.structuredQuery.endAt=this.toCursor(a.endAt)),t},e.prototype.fromQueryTarget=function(d){var t=this.fromQueryPath(d.parent),l=d.structuredQuery,n=l.from?l.from.length:0,r=null;if(0<n){Nr(1===n,"StructuredQuery.from with more than one collection is not supported.");var p=l.from[0];p.allDescendants?r=p.collectionId:t=t.child(p.collectionId)}var o=[];l.where&&(o=this.fromFilter(l.where));var m=[];l.orderBy&&(m=this.fromOrder(l.orderBy));var g=null;l.limit&&(g=this.fromInt32Value(l.limit));var y=null;l.startAt&&(y=this.fromCursor(l.startAt));var f=null;return l.endAt&&(f=this.fromCursor(l.endAt)),new ro(t,r,m,o,g,y,f)},e.prototype.toListenRequestLabels=function(n){var t=this.toLabel(n.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){return e===wo.Listen?null:e===wo.ExistenceFilterMismatch?"existence-filter-mismatch":e===wo.LimboResolution?"limbo-document":Ar("Unrecognized query purpose: "+e)},e.prototype.toTarget=function(a){var t=a.query,n;return(n=t.isDocumentQuery()?{documents:this.toDocumentsTarget(t)}:{query:this.toQueryTarget(t)}).targetId=a.targetId,0<a.resumeToken.length&&(n.resumeToken=this.unsafeCastProtoByteString(a.resumeToken)),n},e.prototype.toFilter=function(a){var o=this;if(0!==a.length){var e=a.map(function(e){return e instanceof ho?o.toRelationFilter(e):o.toUnaryFilter(e)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}},e.prototype.fromFilter=function(n){var a=this;return n?void 0===n.unaryFilter?void 0===n.fieldFilter?void 0===n.compositeFilter?Ar("Unknown filter: "+JSON.stringify(n)):n.compositeFilter.filters.map(function(e){return a.fromFilter(e)}).reduce(function(n,t){return n.concat(t)}):[this.fromRelationFilter(n)]:[this.fromUnaryFilter(n)]:[]},e.prototype.toOrder=function(n){var a=this;if(0!==n.length)return n.map(function(e){return a.toPropertyOrder(e)})},e.prototype.fromOrder=function(n){var a=this;return n.map(function(e){return a.fromPropertyOrder(e)})},e.prototype.toCursor=function(n){var a=this;return{before:n.before,values:n.position.map(function(e){return a.toValue(e)})}},e.prototype.fromCursor=function(a){var o=this,e=!!a.before,t=a.values.map(function(e){return o.fromValue(e)});return new mo(t,e)},e.prototype.toDirection=function(e){return ga[e.name]},e.prototype.fromDirection=function(e){return"ASCENDING"===e?po.ASCENDING:"DESCENDING"===e?po.DESCENDING:void 0},e.prototype.toOperatorName=function(e){return Sa[e.name]},e.prototype.fromOperatorName=function(e){return"EQUAL"===e?co.EQUAL:"GREATER_THAN"===e?co.GREATER_THAN:"GREATER_THAN_OR_EQUAL"===e?co.GREATER_THAN_OR_EQUAL:"LESS_THAN"===e?co.LESS_THAN:"LESS_THAN_OR_EQUAL"===e?co.LESS_THAN_OR_EQUAL:"ARRAY_CONTAINS"===e?co.ARRAY_CONTAINS:"OPERATOR_UNSPECIFIED"===e?Ar("Unspecified relation"):Ar("Unknown relation")},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return Ni.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new yo(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.toRelationFilter=function(e){return e instanceof ho?{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}:Ar("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromRelationFilter=function(e){return new ho(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryFilter=function(e){return e instanceof fo?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}}:e instanceof lo?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}:Ar("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromUnaryFilter=function(a){switch(a.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(a.unaryFilter.field);return new fo(t);case"IS_NULL":var e=this.fromFieldPathReference(a.unaryFilter.field);return new lo(e);case"OPERATOR_UNSPECIFIED":return Ar("Unspecified filter");default:return Ar("Unknown filter");}},e.prototype.toDocumentMask=function(n){var a=[];return n.fields.forEach(function(e){return a.push(e.canonicalString())}),{fieldPaths:a}},e.prototype.fromDocumentMask=function(n){var t=(n.fieldPaths||[]).map(function(e){return Ni.fromServerFormat(e)});return Co.fromArray(t)},e}(),Na=function(){function e(){}return e.prototype.addCallback=function(){},e.prototype.shutdown=function(){},e}(),Aa=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){vr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var n=0,a=this.callbacks;n<a.length;n++)(0,a[n])(0)},e.prototype.onNetworkUnavailable=function(){vr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var n=0,a=this.callbacks;n<a.length;n++)(0,a[n])(1)},e}(),Qd=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){Nr(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){Nr(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){Nr(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){Nr(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){Nr(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){Nr(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),Gd={BatchGetDocuments:"batchGet",Commit:"commit"},_a=function(){function e(n){this.databaseId=n.databaseId;var t=n.ssl?"https":"http";this.baseUrl=t+"://"+n.host,this.forceLongPolling=n.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(a,t){if(t)for(var e in t.authHeaders)t.authHeaders.hasOwnProperty(e)&&(a[e]=t.authHeaders[e]);a["X-Goog-Api-Client"]="gl-js/ fire/"+Tr},e.prototype.invokeRPC=function(d,o,a){var s=this,l=this.makeUrl(d);return new Promise(function(p,n){var r=new yr;r.listenOnce(dr.COMPLETE,function(){try{switch(r.getLastErrorCode()){case pr.NO_ERROR:var a=r.getResponseJson();vr("Connection","XHR received:",JSON.stringify(a)),p(a);break;case pr.TIMEOUT:vr("Connection","RPC \""+d+"\" timed out"),n(new Lr(_r.DEADLINE_EXCEEDED,"Request time out"));break;case pr.HTTP_ERROR:var t=r.getStatus();vr("Connection","RPC \""+d+"\" failed with status:",t,"response text:",r.getResponseText()),0<t?n(new Lr(function(e){return 200===e?_r.OK:400===e?_r.INVALID_ARGUMENT:401===e?_r.UNAUTHENTICATED:403===e?_r.PERMISSION_DENIED:404===e?_r.NOT_FOUND:409===e?_r.ABORTED:416===e?_r.OUT_OF_RANGE:429===e?_r.RESOURCE_EXHAUSTED:499===e?_r.CANCELLED:500===e?_r.UNKNOWN:501===e?_r.UNIMPLEMENTED:503===e?_r.UNAVAILABLE:504===e?_r.DEADLINE_EXCEEDED:200<=e&&300>e?_r.OK:400<=e&&500>e?_r.FAILED_PRECONDITION:500<=e&&600>e?_r.INTERNAL:_r.UNKNOWN}(t),"Server responded with status "+r.getStatusText())):(vr("Connection","RPC \""+d+"\" failed"),n(new Lr(_r.UNAVAILABLE,"Connection failed.")));break;default:Ar("RPC \""+d+"\" failed with unanticipated webchannel error "+r.getLastErrorCode()+": "+r.getLastError()+", giving up.");}}finally{vr("Connection","RPC \""+d+"\" completed.")}});var i=JSON.stringify(o);vr("Connection","XHR sending: ",l+" "+i);var t={"Content-Type":"text/plain"};s.modifyHeadersForRequest(t,a),r.send(l,"POST",i,t,15)})},e.prototype.invokeStreamingRPC=function(a,t,e){return this.invokeRPC(a,t,e)},e.prototype.openStream=function(d,t){var e=[this.baseUrl,"/","google.firestore.v1.Firestore","/",d,"/channel"],n=fr(),r={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(r.initMessageHeaders,t),"object"==typeof navigator&&"ReactNative"===navigator.product||(r.httpHeadersOverwriteParam="$httpHeaders");var i=e.join("");vr("Connection","Creating WebChannel: "+i+" "+r);var l=n.createWebChannel(i,r),a=!1,p=!1,m=new Qd({sendFn:function(e){p?vr("Connection","Not sending because WebChannel is closed:",e):(a||(vr("Connection","Opening WebChannel transport."),l.open(),a=!0),vr("Connection","WebChannel sending:",e),l.send(e))},closeFn:function(){return l.close()}}),o=function(n,a){l.listen(n,function(e){try{a(e)}catch(e){setTimeout(function(){throw e},0)}})};return o(mr.EventType.OPEN,function(){p||vr("Connection","WebChannel transport opened.")}),o(mr.EventType.CLOSE,function(){p||(p=!0,vr("Connection","WebChannel transport closed"),m.callOnClose())}),o(mr.EventType.ERROR,function(e){p||(p=!0,vr("Connection","WebChannel transport errored:",e),m.callOnClose(new Lr(_r.UNAVAILABLE,"The operation could not be completed")))}),o(mr.EventType.MESSAGE,function(a){if(!p){var t=a.data[0];Nr(!!t,"Got a webchannel message without data.");var e=t.error||t[0]&&t[0].error;if(e){vr("Connection","WebChannel received error:",e);var n=e.status,r=function(n){var t=Qo[n];if(void 0!==t)return Ko(t)}(n),s=e.message;void 0===r&&(r=_r.INTERNAL,s="Unknown error status: "+n+" with message "+e.message),p=!0,m.callOnClose(new Lr(r,s)),l.close()}else vr("Connection","WebChannel received:",t),m.callOnMessage(t)}}),setTimeout(function(){m.callOnOpen()},0),m},e.prototype.makeUrl=function(a){var t=Gd[a];Nr(void 0!==t,"Unknown REST mapping for: "+a);var e=[this.baseUrl,"/","v1"];return e.push("/projects/"),e.push(this.databaseId.projectId),e.push("/databases/"),e.push(this.databaseId.database),e.push("/documents"),e.push(":"),e.push(t),e.join("")},e}(),La=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"==typeof document?null:document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"==typeof window?null:window},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new _a(e))},e.prototype.newConnectivityMonitor=function(){return this.window?new Aa:new Na},e.prototype.newSerializer=function(e){return new Ia(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}(),xa,Xd;Nd.setPlatform(new La);var Yd=function(){function e(a,o){var e=this;this.previousValue=a,o&&(o.sequenceNumberHandler=function(n){return e.setPreviousValue(n)},this.writeNewSequenceNumber=function(e){return o.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Ma(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),Va=function(){var a=this;this.promise=new Promise(function(n,t){a.resolve=n,a.reject=t})},Ba,Jd;(Jd=Ba||(Ba={})).All="all",Jd.ListenStreamIdle="listen_stream_idle",Jd.ListenStreamConnectionBackoff="listen_stream_connection_backoff",Jd.WriteStreamIdle="write_stream_idle",Jd.WriteStreamConnectionBackoff="write_stream_connection_backoff",Jd.OnlineStateTimeout="online_state_timeout",Jd.ClientMetadataRefresh="client_metadata_refresh",Jd.LruGarbageCollection="lru_garbage_collection";var Zd=function(){function s(a,t,e,n,o){this.asyncQueue=a,this.timerId=t,this.targetTimeMs=e,this.op=n,this.removalCallback=o,this.deferred=new Va,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(){})}return s.createAndSchedule=function(a,t,e,n,r){var i=new s(a,t,Date.now()+e,n,r);return i.start(e),i},s.prototype.start=function(n){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},n)},s.prototype.skipDelay=function(){return this.handleDelayElapsed()},s.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lr(_r.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},s.prototype.handleDelayElapsed=function(){var n=this;this.asyncQueue.enqueueAndForget(function(){return null===n.timerHandle?Promise.resolve():(n.clearTimeout(),n.op().then(function(e){return n.deferred.resolve(e)}))})},s.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},s}(),Ua=function(){function e(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueue=function(a){var o=this;this.verifyNotFailed();var t=this.tail.then(function(){return o.operationInProgress=!0,a().catch(function(n){o.failure=n,o.operationInProgress=!1;var t=n.stack||n.message||"";throw Dr("INTERNAL UNHANDLED ERROR: ",t),0>t.indexOf("Firestore Test Simulated Error")&&setTimeout(function(){throw n},0),n}).then(function(e){return o.operationInProgress=!1,e})});return this.tail=t},e.prototype.enqueueAfterDelay=function(a,t,e){var n=this;this.verifyNotFailed(),Nr(0<=t,"Attempted to schedule an operation with a negative delay of "+t),Nr(!this.containsDelayedOperation(a),"Attempted to schedule multiple operations with timer id "+a+".");var o=Zd.createAndSchedule(this,a,t,e,function(e){return n.removeDelayedOperation(e)});return this.delayedOperations.push(o),o},e.prototype.verifyNotFailed=function(){this.failure&&Ar("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){Nr(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(a){for(var t=0,o=this.delayedOperations;t<o.length;t++)if(o[t].timerId===a)return!0;return!1},e.prototype.runDelayedOperationsEarly=function(a){var o=this;return this.drain().then(function(){Nr(a===Ba.All||o.containsDelayedOperation(a),"Attempted to drain to missing operation "+a),o.delayedOperations.sort(function(n,t){return n.targetTimeMs-t.targetTimeMs});for(var r=0,i=o.delayedOperations,e;r<i.length&&(e=i[r],e.skipDelay(),a===Ba.All||e.timerId!==a);r++);return o.drain()})},e.prototype.removeDelayedOperation=function(n){var t=this.delayedOperations.indexOf(n);Nr(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),Qa=function(){function e(a,t,e,n){this.batchId=a,this.localWriteTime=t,this.baseMutations=e,Nr(0<(this.mutations=n).length,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(s,t,d){t&&Nr(t.key.isEqual(s),"applyToRemoteDocument: key "+s+" should match maybeDoc key\n        "+t.key);var n=d.mutationResults;Nr(n.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+n.length+").");for(var r=0,l;r<this.mutations.length;r++)if(l=this.mutations[r],l.key.isEqual(s)){var p=n[r];t=l.applyToRemoteDocument(t,p)}return t},e.prototype.applyToLocalView=function(d,t){t&&Nr(t.key.isEqual(d),"applyToLocalDocument: key "+d+" should match maybeDoc key\n        "+t.key);for(var l=0,p=this.baseMutations;l<p.length;l++)(a=p[l]).key.isEqual(d)&&(t=a.applyToLocalView(t,t,this.localWriteTime));for(var r=t,i=0,c=this.mutations;i<c.length;i++){var a;(a=c[i]).key.isEqual(d)&&(t=a.applyToLocalView(t,r,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(a){var n=this,o=a;return this.mutations.forEach(function(r){var t=n.applyToLocalView(r.key,a.get(r.key));t&&(o=o.insert(r.key,t))}),o},e.prototype.keys=function(){return this.mutations.reduce(function(n,t){return n.add(t.key)},Jo())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&ri(this.mutations,e.mutations)&&ri(this.baseMutations,e.baseMutations)},e}(),Ja=function(){function d(a,t,e,n,o){this.batch=a,this.commitVersion=t,this.mutationResults=e,this.streamToken=n,this.docVersions=o}return d.from=function(s,t,e,n){Nr(s.mutations.length===e.length,"Mutations sent "+s.mutations.length+" must equal results received "+e.length);for(var r=Yo(),l=s.mutations,o=0;o<l.length;o++)r=r.insert(l[o].key,e[o].version);return new d(s,t,e,n,r)},d}(),$a=function(){function s(n){var a=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(function(e){a.isDone=!0,a.result=e,a.nextCallback&&a.nextCallback(e)},function(e){a.isDone=!0,a.error=e,a.catchCallback&&a.catchCallback(e)})}return s.prototype.catch=function(e){return this.next(void 0,e)},s.prototype.next=function(a,r){var i=this;return this.callbackAttached&&Ar("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(a,this.result):new s(function(o,e){i.nextCallback=function(n){i.wrapSuccess(a,n).next(o,e)},i.catchCallback=function(n){i.wrapFailure(r,n).next(o,e)}})},s.prototype.toPromise=function(){var a=this;return new Promise(function(n,t){a.next(n,t)})},s.prototype.wrapUserFunction=function(n){try{var t=n();return t instanceof s?t:s.resolve(t)}catch(e){return s.reject(e)}},s.prototype.wrapSuccess=function(n,t){return n?this.wrapUserFunction(function(){return n(t)}):s.resolve(t)},s.prototype.wrapFailure=function(n,t){return n?this.wrapUserFunction(function(){return n(t)}):s.reject(t)},s.resolve=function(e){return new s(function(n){n(e)})},s.reject=function(a){return new s(function(n,t){t(a)})},s.waitFor=function(a){return new s(function(t,e){var n=0,s=0,d=!1;a.forEach(function(a){++n,a.next(function(){++s,d&&s==n&&t()},function(n){return e(n)})}),d=!0,s==n&&t()})},s.or=function(a){for(var t=s.resolve(!1),o=function(n){t=t.next(function(e){return e?s.resolve(e):n()})},e=0,d=a;e<d.length;e++)o(d[e]);return t},s.forEach=function(e,a){var n=this,o=[];return e.forEach(function(r,t){o.push(a.call(n,r,t))}),this.waitFor(o)},s}(),Za=function(){function a(a,t,e,n){this.userId=a,this.serializer=t,this.indexManager=e,this.referenceDelegate=n,this.documentKeysByBatchId={}}return a.forUser=function(o,t,e,n){return Nr(""!==o.uid,"UserID must not be an empty string."),new a(o.isAuthenticated()?o.uid:"",t,e,n)},a.prototype.checkEmpty=function(n){var a=!0,t=IDBKeyRange.bound([this.userId,ud],[this.userId,cd]);return Ii(n).iterate({index:Vs.userMutationsIndex,range:t},function(o,t,e){a=!1,e.done()}).next(function(){return a})},a.prototype.acknowledgeBatch=function(a,e,o){return this.getMutationQueueMetadata(a).next(function(e){return e.lastStreamToken=Si(o),es(a).put(e)})},a.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},a.prototype.setLastStreamToken=function(a,e){return this.getMutationQueueMetadata(a).next(function(n){return n.lastStreamToken=Si(e),es(a).put(n)})},a.prototype.addMutationBatch=function(e,u,c,h){var l=this,m=Ki(e),p=Ii(e);return p.add({}).next(function(d){Nr("number"==typeof d,"Auto-generated key is not a number");var t=new Qa(d,u,c,h),g=l.serializer.toDbMutationBatch(l.userId,t);l.documentKeysByBatchId[d]=t.keys();for(var n=[],r=0,y=h;r<y.length;r++){var o=y[r],a=Bs.key(l.userId,o.key.path,d);n.push(p.put(g)),n.push(m.put(a,Bs.PLACEHOLDER)),n.push(l.indexManager.addToCollectionParentIndex(e,o.key.path.popLast()))}return $a.waitFor(n).next(function(){return t})})},a.prototype.lookupMutationBatch=function(a,o){var e=this;return Ii(a).get(o).next(function(n){return n?(Nr(n.userId===e.userId,"Unexpected user '"+n.userId+"' for mutation batch "+o),e.serializer.fromDbMutationBatch(n)):null})},a.prototype.lookupMutationKeys=function(e,a){var n=this;return this.documentKeysByBatchId[a]?$a.resolve(this.documentKeysByBatchId[a]):this.lookupMutationBatch(e,a).next(function(o){if(o){var t=o.keys();return n.documentKeysByBatchId[a]=t}return null})},a.prototype.getNextMutationBatchAfterBatchId=function(a,t){var s=this,r=t+1,e=IDBKeyRange.lowerBound([this.userId,r]),i=null;return Ii(a).iterate({index:Vs.userMutationsIndex,range:e},function(a,t,e){t.userId===s.userId&&(Nr(t.batchId>=r,"Should have found mutation after "+r),i=s.serializer.fromDbMutationBatch(t)),e.done()}).next(function(){return i})},a.prototype.getAllMutationBatches=function(a){var o=this,e=IDBKeyRange.bound([this.userId,-1],[this.userId,cd]);return Ii(a).loadAll(Vs.userMutationsIndex,e).next(function(e){return e.map(function(e){return o.serializer.fromDbMutationBatch(e)})})},a.prototype.getAllMutationBatchesAffectingDocumentKey=function(d,s){var l=this,n=Bs.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(n),a=[];return Ki(d).iterate({range:t},function(p,e,t){var n=p[0],r=p[1],i=p[2],o=Ya(r);return n===l.userId&&s.path.isEqual(o)?Ii(d).get(i).next(function(e){if(!e)throw Ar("Dangling document-mutation reference found: "+p+" which points to "+i);Nr(e.userId===l.userId,"Unexpected user '"+e.userId+"' for mutation batch "+i),a.push(l.serializer.fromDbMutationBatch(e))}):void t.done()}).next(function(){return a})},a.prototype.getAllMutationBatchesAffectingDocumentKeys=function(a,e){var d=this,l=new To(ai),o=[];return e.forEach(function(p){var r=Bs.prefixForPath(d.userId,p.path),t=IDBKeyRange.lowerBound(r),e=Ki(a).iterate({range:t},function(s,t,e){var n=s[0],r=s[1],i=s[2],o=Ya(r);n===d.userId&&p.path.isEqual(o)?l=l.add(i):e.done()});o.push(e)}),$a.waitFor(o).next(function(){return d.lookupMutationBatches(a,l)})},a.prototype.getAllMutationBatchesAffectingQuery=function(a,t){var d=this;Nr(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),Nr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var s=t.path,l=s.length+1,e=Bs.prefixForPath(this.userId,s),n=IDBKeyRange.lowerBound(e),p=new To(ai);return Ki(a).iterate({range:n},function(c,t,e){var n=c[0],r=c[1],i=c[2],o=Ya(r);n===d.userId&&s.isPrefixOf(o)?o.length===l&&(p=p.add(i)):e.done()}).next(function(){return d.lookupMutationBatches(a,p)})},a.prototype.lookupMutationBatches=function(a,t){var o=this,n=[],r=[];return t.forEach(function(i){r.push(Ii(a).get(i).next(function(e){if(null===e)throw Ar("Dangling document-mutation reference found, which points to "+i);Nr(e.userId===o.userId,"Unexpected user '"+e.userId+"' for mutation batch "+i),n.push(o.serializer.fromDbMutationBatch(e))}))}),$a.waitFor(r).next(function(){return n})},a.prototype.removeMutationBatch=function(a,e){var n=this;return fi(a.simpleDbTransaction,this.userId,e).next(function(o){return n.removeCachedMutationKeys(e.batchId),$a.forEach(o,function(e){return n.referenceDelegate.removeMutationReference(a,e)})})},a.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},a.prototype.performConsistencyCheck=function(a){var s=this;return this.checkEmpty(a).next(function(n){if(!n)return $a.resolve();var t=IDBKeyRange.lowerBound(Bs.prefixForUser(s.userId)),e=[];return Ki(a).iterate({range:t},function(a,t,o){if(a[0]===s.userId){var n=Ya(a[1]);e.push(n)}else o.done()}).next(function(){Nr(0===e.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+e.map(function(e){return e.canonicalString()}))})})},a.prototype.containsKey=function(n,t){return Xa(n,this.userId,t)},a.prototype.getMutationQueueMetadata=function(n){var a=this;return es(n).get(this.userId).next(function(e){return e||new Fs(a.userId,-1,"")})},a}(),ts,el;(el=ts||(ts={}))[el.QueryCache=0]="QueryCache",el[el.SyncEngine=1]="SyncEngine";var tl=function(){function e(n,t){Nr((1&(this.generatorId=n))===n,"Generator ID "+n+" contains more than 1 reserved bits"),this.seek(void 0===t?this.generatorId:t)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},e.prototype.after=function(e){return this.seek(e+2),this.next()},e.prototype.seek=function(e){Nr((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){return new e(ts.QueryCache,2)},e.forSyncEngine=function(){return new e(ts.SyncEngine)},e}(),cs=function(){function i(e){this.db=e,12.2===i.getIOSVersion(cr())&&Dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return i.openOrCreate=function(s,e,o){return Nr(i.isAvailable(),"IndexedDB not supported in current environment."),vr("SimpleDb","Opening database:",s),new $a(function(a,n){var r=window.indexedDB.open(s,e);r.onsuccess=function(n){var t=n.target.result;a(new i(t))},r.onblocked=function(){n(new Lr(_r.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(a){var t=a.target.error;"VersionError"===t.name?n(new Lr(_r.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(t)},r.onupgradeneeded=function(a){vr("SimpleDb","Database \""+s+"\" requires upgrade from version:",a.oldVersion);var t=a.target.result,e=new fs(r.transaction);o.createOrUpgrade(t,e,a.oldVersion,Ps).next(function(){vr("SimpleDb","Database upgrade to version "+Ps+" complete")})}}).toPromise()},i.delete=function(e){return vr("SimpleDb","Removing database:",e),ns(window.indexedDB.deleteDatabase(e)).toPromise()},i.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var n=cr(),t=i.getIOSVersion(n),e=i.getAndroidVersion(n);return!(0<n.indexOf("MSIE ")||0<n.indexOf("Trident/")||0<n.indexOf("Edge/")||0<t&&10>t||0<e&&4.5>e)},i.getStore=function(n,t){return n.store(t)},i.getIOSVersion=function(a){var t=a.match(/i(?:phone|pad|pod) os ([\d_]+)/i),e=t?t[1].split("_").slice(0,2).join("."):"-1";return+e},i.getAndroidVersion=function(a){var t=a.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return+e},i.prototype.setVersionChangeListener=function(n){this.db.onversionchange=function(e){return n(e)}},i.prototype.runTransaction=function(a,t,e){var n=fs.open(this.db,a,t),o=e(n).catch(function(e){return n.abort(e),$a.reject(e)}).toPromise();return o.catch(function(){}),n.completionPromise.then(function(){return o})},i.prototype.close=function(){this.db.close()},i}(),ls=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return ns(this.dbCursor.delete())},e}(),fs=function(){function a(e){var a=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new Va,this.transaction.oncomplete=function(){a.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?a.completionDeferred.reject(e.error):a.completionDeferred.resolve()},this.transaction.onerror=function(n){var t=n.target.error;as(t),a.completionDeferred.reject(t)}}return a.open=function(o,t,e){return new a(o.transaction(e,t))},Object.defineProperty(a.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),a.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(vr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},a.prototype.store=function(n){var t=this.transaction.objectStore(n);return Nr(!!t,"Object store not part of transaction: "+n),new ps(t)},a}(),ps=function(){function e(e){this.store=e}return e.prototype.put=function(n,t){return ns(void 0===t?(vr("SimpleDb","PUT",this.store.name,"<auto-key>",n),this.store.put(n)):(vr("SimpleDb","PUT",this.store.name,n,t),this.store.put(t,n)))},e.prototype.add=function(e){return vr("SimpleDb","ADD",this.store.name,e,e),ns(this.store.add(e))},e.prototype.get=function(a){var e=this;return ns(this.store.get(a)).next(function(n){return void 0===n&&(n=null),vr("SimpleDb","GET",e.store.name,a,n),n})},e.prototype.delete=function(e){return vr("SimpleDb","DELETE",this.store.name,e),ns(this.store.delete(e))},e.prototype.count=function(){return vr("SimpleDb","COUNT",this.store.name),ns(this.store.count())},e.prototype.loadAll=function(a,t){var e=this.cursor(this.options(a,t)),n=[];return this.iterateCursor(e,function(a,t){n.push(t)}).next(function(){return n})},e.prototype.deleteAll=function(a,t){vr("SimpleDb","DELETE ALL",this.store.name);var e=this.options(a,t);e.keysOnly=!1;var n=this.cursor(e);return this.iterateCursor(n,function(a,t,e){return e.delete()})},e.prototype.iterate=function(a,t){var o;t?o=a:(o={},t=a);var i=this.cursor(o);return this.iterateCursor(i,t)},e.prototype.iterateSerial=function(a){var e=this.cursor({});return new $a(function(o,n){e.onerror=function(a){var t=a.target.error;as(t),n(t)},e.onsuccess=function(n){var r=n.target.result;r?a(r.primaryKey,r.value).next(function(e){e?r.continue():o()}):o()}})},e.prototype.iterateCursor=function(n,t){var e=[];return new $a(function(a,o){n.onerror=function(e){o(e.target.error)},n.onsuccess=function(o){var s=o.target.result;if(s){var d=new ls(s),n=t(s.primaryKey,s.value,d);if(n instanceof $a){var r=n.catch(function(e){return d.done(),$a.reject(e)});e.push(r)}d.isDone?a():null===d.skipToKey?s.continue():s.continue(d.skipToKey)}else a()}}).next(function(){return $a.waitFor(e)})},e.prototype.options=function(a,t){var o;return void 0!==a&&("string"==typeof a?o=a:(Nr(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=a)),{index:o,range:t}},e.prototype.cursor=function(a){var t="next";if(a.reverse&&(t="prev"),a.index){var o=this.store.index(a.index);return a.keysOnly?o.openKeyCursor(a.range,t):o.openCursor(a.range,t)}return this.store.openCursor(a.range,t)},e}(),ds=!1,nl=function(){function e(n,t){this.referenceDelegate=n,this.serializer=t,this.targetIdGenerator=tl.forQueryCache()}return e.prototype.allocateTargetId=function(a){var e=this;return this.retrieveMetadata(a).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(a,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return bo.fromTimestamp(new bi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return is(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(a,e,n){var o=this;return this.retrieveMetadata(a).next(function(r){return r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),o.saveMetadata(a,r)})},e.prototype.addQueryData=function(a,e){var n=this;return this.saveQueryData(a,e).next(function(){return n.retrieveMetadata(a).next(function(o){return o.targetCount+=1,n.updateMetadataFromQueryData(e,o),n.saveMetadata(a,o)})})},e.prototype.updateQueryData=function(n,t){return this.saveQueryData(n,t)},e.prototype.removeQueryData=function(a,e){var o=this;return this.removeMatchingKeysForTargetId(a,e.targetId).next(function(){return os(a).delete(e.targetId)}).next(function(){return o.retrieveMetadata(a)}).next(function(e){return Nr(0<e.targetCount,"Removing from an empty query cache"),e.targetCount-=1,o.saveMetadata(a,e)})},e.prototype.removeTargets=function(d,r,i){var o=this,a=0,l=[];return os(d).iterate(function(s,t){var e=o.serializer.fromDbTarget(t);e.sequenceNumber<=r&&void 0===i[e.targetId]&&(a++,l.push(o.removeQueryData(d,e)))}).next(function(){return $a.waitFor(l)}).next(function(){return a})},e.prototype.forEachTarget=function(e,a){var o=this;return os(e).iterate(function(r,t){var e=o.serializer.fromDbTarget(t);a(e)})},e.prototype.retrieveMetadata=function(e){return rs(e.simpleDbTransaction)},e.prototype.saveMetadata=function(a,t){return(e=a,pl.getStore(e,zs.store)).put(zs.key,t);var e},e.prototype.saveQueryData=function(n,t){return os(n).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(a,t){var e=!1;return a.targetId>t.highestTargetId&&(t.highestTargetId=a.targetId,e=!0),a.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=a.sequenceNumber,e=!0),e},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(r,s){var i=this,t=s.canonicalId(),e=IDBKeyRange.bound([t,ud],[t,cd]),o=null;return os(r).iterate({range:e,index:Gs.queryTargetsIndexName},function(a,t,e){var n=i.serializer.fromDbTarget(t);s.isEqual(n.query)&&(o=n,e.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(s,e,n){var r=this,i=[],o=hs(s);return e.forEach(function(a){var t=Da(a.path);i.push(o.put(new Ws(n,t))),i.push(r.referenceDelegate.addReference(s,a))}),$a.waitFor(i)},e.prototype.removeMatchingKeys=function(a,e,n){var r=this,i=hs(a);return $a.forEach(e,function(o){var t=Da(o.path);return $a.waitFor([i.delete([n,t]),r.referenceDelegate.removeReference(a,o)])})},e.prototype.removeMatchingKeysForTargetId=function(a,t){var e=hs(a),n=IDBKeyRange.bound([t],[t+1],!1,!0);return e.delete(n)},e.prototype.getMatchingKeysForTargetId=function(a,t){var e=IDBKeyRange.bound([t],[t+1],!1,!0),n=hs(a),s=Jo();return n.iterate({range:e,keysOnly:!0},function(e){var t=Ya(e[1]),n=new Ai(t);s=s.add(n)}).next(function(){return s})},e.prototype.containsKey=function(a,t){var e=Da(t.path),n=IDBKeyRange.bound([e],[ii(e)],!1,!0),o=0;return hs(a).iterate({index:Ws.documentTargetsIndex,keysOnly:!0,range:n},function(a,t,e){var n=a[0];a[1],0!==n&&(o++,e.done())}).next(function(){return 0<o})},e.prototype.getQueryDataForTarget=function(a,t){var e=this;return os(a).get(t).next(function(n){return n?e.serializer.fromDbTarget(n):null})},e}(),vs=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(d){var t=this.mapKeyFn(d),e=this.inner[t];if(void 0!==e)for(var n=0,l=e;n<l.length;n++){var i=l[n],o=i[0],a=i[1];if(o.isEqual(d))return a}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(a,t){var e=this.mapKeyFn(a),n=this.inner[e];if(void 0!==n){for(var o=0;o<n.length;o++)if(n[o][0].isEqual(a))return void(n[o]=[a,t]);n.push([a,t])}else this.inner[e]=[[a,t]]},e.prototype.delete=function(a){var t=this.mapKeyFn(a),e=this.inner[t];if(void 0===e)return!1;for(var n=0;n<e.length;n++)if(e[n][0].isEqual(a))return 1===e.length?delete this.inner[t]:e.splice(n,1),!0;return!1},e.prototype.forEach=function(e){Br(this.inner,function(s,t){for(var d=0,l=t;d<l.length;d++){var r=l[d],i=r[0],o=r[1];e(i,o)}})},e.prototype.isEmpty=function(){return Fr(this.inner)},e}(),Ts=function(){function e(){this.changes=jo(),this.documentSizes=new vs(function(e){return e.toString()})}return e.prototype.addEntry=function(n){var t=this.assertChanges();this.changes=t.insert(n.key,n)},e.prototype.getEntry=function(a,o){var e=this,t=this.assertChanges().get(o);return t?$a.resolve(t):this.getFromCache(a,o).next(function(n){return null===n?(e.documentSizes.set(o,0),null):(e.documentSizes.set(o,n.size),n.maybeDocument)})},e.prototype.getEntries=function(a,t){var o=this;return this.getAllFromCache(a,t).next(function(n){var t=n.maybeDocuments;return n.sizeMap.forEach(function(n,t){o.documentSizes.set(n,t)}),t})},e.prototype.apply=function(n){var t=this.applyChanges(n);return this.changes=null,t},e.prototype.assertChanges=function(){return Nr(null!==this.changes,"Changes have already been applied."),this.changes},e}(),Is=function(){function e(a,t,e){this.serializer=a,this.indexManager=t,this.keepDocumentChangeLog=e,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(n){var t=cs.getStore(n,Ys.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntries=function(d,t,e){var n=[];if(0<t.length){for(var r=gs(d),i=Jo(),l=0,p=t;l<p.length;l++){var s=p[l],u=s.key,c=s.doc;n.push(r.put(Es(u),c)),i=i.add(u),n.push(this.indexManager.addToCollectionParentIndex(d,u.path.popLast()))}this.keepDocumentChangeLog&&n.push(bs(d).put({changes:this.serializer.toDbResourcePaths(i)})),n.push(this.updateSize(d,e))}return $a.waitFor(n)},e.prototype.removeEntry=function(a,t){var e=gs(a),n=Es(t);return e.get(n).next(function(a){return a?e.delete(n).next(function(){return ks(a)}):$a.resolve(0)})},e.prototype.getEntry=function(a,t){var e=this;return gs(a).get(Es(t)).next(function(n){return n?e.serializer.fromDbRemoteDocument(n):null})},e.prototype.getSizedEntry=function(a,t){var e=this;return gs(a).get(Es(t)).next(function(n){return n?{maybeDocument:e.serializer.fromDbRemoteDocument(n),size:ks(n)}:null})},e.prototype.getEntries=function(a,t){var o=this,n=Wo();return this.forEachDbEntry(a,t,function(a,t){n=t?n.insert(a,o.serializer.fromDbRemoteDocument(t)):n.insert(a,null)}).next(function(){return n})},e.prototype.getSizedEntries=function(a,t){var o=this,n=Wo(),s=new _i(Ai.comparator);return this.forEachDbEntry(a,t,function(a,t){s=t?(n=n.insert(a,o.serializer.fromDbRemoteDocument(t)),s.insert(a,ks(t))):(n=n.insert(a,null),s.insert(a,0))}).next(function(){return{maybeDocuments:n,sizeMap:s}})},e.prototype.forEachDbEntry=function(r,t,s){if(t.isEmpty())return $a.resolve();var e=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return gs(r).iterate({range:e},function(a,t,e){for(var n=Ai.fromSegments(a);o&&0>Ai.comparator(o,n);)s(o,null),o=i.getNext();o&&o.isEqual(n)&&(s(o,t),o=i.hasNext()?i.getNext():null),o?e.skip(o.path.toArray()):e.done()}).next(function(){for(;o;)s(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(r,t){var i=this;Nr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var o=zo(),d=t.path.length+1,s=t.path.toArray(),e=IDBKeyRange.lowerBound(s);return gs(r).iterate({range:e},function(a,s,e){if(a.length===d){var n=i.serializer.fromDbRemoteDocument(s);t.path.isPrefixOf(n.key.path)?n instanceof Ri&&t.matches(n)&&(o=o.insert(n.key,n)):e.done()}}).next(function(){return o})},e.prototype.getNewDocumentChanges=function(s){var d=this;Nr(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var r=Jo(),l=jo(),e=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),p=!0,c=bs(s);return c.iterate({range:e},function(n,t){return p&&(p=!1,d._lastProcessedDocumentChangeId+1!==t.id)?d.synchronizeLastDocumentChangeId(c).next(function(){return $a.reject(new Lr(_r.DATA_LOSS,"The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views."))}):void(r=r.unionWith(d.serializer.fromDbResourcePaths(t.changes)),d._lastProcessedDocumentChangeId=t.id)}).next(function(){var e=[];return r.forEach(function(a){e.push(d.getEntry(s,a).next(function(n){var t=n||new Mi(a,bo.forDeletedDoc());l=l.insert(a,t)}))}),$a.waitFor(e)}).next(function(){return l})},e.prototype.removeDocumentChangesThroughChangeId=function(a,t){var e=IDBKeyRange.upperBound(t);return bs(a).delete(e)},e.prototype.synchronizeLastDocumentChangeId=function(e){var a=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(o,t,e){a._lastProcessedDocumentChangeId=o,e.done()})},e.prototype.newChangeBuffer=function(){return new Ds(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return ms(e).get(js.key).next(function(e){return Nr(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(n,t){return ms(n).put(js.key,t)},e.prototype.updateSize=function(a,e){var n=this;return this.getMetadata(a).next(function(o){return o.byteSize+=e,n.setMetadata(a,o)})},e}(),Ds=function(a){function e(n){var t=a.call(this)||this;return t.documentCache=n,t}return Pa(e,a),e.prototype.applyChanges=function(n){var d=this,t=this.assertChanges(),o=0,l=[];return t.forEach(function(a,t){var e=d.documentCache.serializer.toDbRemoteDocument(t),n=d.documentSizes.get(a);Nr(void 0!==n,"Attempting to change document "+a.toString()+" without having read it first");var r=ks(e);o+=r-n,l.push({key:a,doc:e})}),this.documentCache.addEntries(n,l,o)},e.prototype.getFromCache=function(n,t){return this.documentCache.getSizedEntry(n,t)},e.prototype.getAllFromCache=function(n,t){return this.documentCache.getSizedEntries(n,t)},e}(Ts),As=function(){function e(){this.collectionParentIndex=new _s}return e.prototype.addToCollectionParentIndex=function(n,t){return this.collectionParentIndex.add(t),$a.resolve()},e.prototype.getCollectionParents=function(n,t){return $a.resolve(this.collectionParentIndex.getEntries(t))},e}(),_s=function(){function e(){this.index={}}return e.prototype.add=function(a){Nr(1==a.length%2,"Expected a collection path.");var t=a.lastSegment(),e=a.popLast(),n=this.index[t]||new To(Ci.comparator),o=!n.has(e);return this.index[t]=n.add(e),o},e.prototype.getEntries=function(e){return(this.index[e]||new To(Ci.comparator)).toArray()},e}(),Ps=8,Ls=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(d,l,t,e){var n=this,o;Nr(t<e&&0<=t&&e<=8,"Unexpected schema upgrade from v"+t+" to v{toVersion}."),1>t&&1<=e&&(d.createObjectStore(qs.store),(o=d).createObjectStore(Fs.store,{keyPath:Fs.keyPath}),o.createObjectStore(Vs.store,{keyPath:Vs.keyPath,autoIncrement:!0}).createIndex(Vs.userMutationsIndex,Vs.userMutationsKeyPath,{unique:!0}),o.createObjectStore(Bs.store),Cs(d),d.createObjectStore(Ks.store));var r=$a.resolve(),p;return 3>t&&3<=e&&(0!==t&&((p=d).deleteObjectStore(Ws.store),p.deleteObjectStore(Gs.store),p.deleteObjectStore(zs.store),Cs(d)),r=r.next(function(){return n=l.store(zs.store),a=new zs(0,0,bo.MIN.toTimestamp(),0),n.put(zs.key,a);var n,a})),4>t&&4<=e&&(0!==t&&(r=r.next(function(){return a=d,(s=l).store(Vs.store).loadAll().next(function(o){a.deleteObjectStore(Vs.store);var t=a.createObjectStore(Vs.store,{keyPath:Vs.keyPath,autoIncrement:!0});t.createIndex(Vs.userMutationsIndex,Vs.userMutationsKeyPath,{unique:!0});var e=s.store(Vs.store),n=o.map(function(n){return e.put(n)});return $a.waitFor(n)});var a,s})),r=r.next(function(){d.createObjectStore(Js.store,{keyPath:Js.keyPath}),d.createObjectStore(Ys.store,{keyPath:"id",autoIncrement:!0})})),5>t&&5<=e&&(r=r.next(function(){return n.removeAcknowledgedMutations(l)})),6>t&&6<=e&&(r=r.next(function(){return d.createObjectStore(js.store),n.addDocumentGlobal(l)})),7>t&&7<=e&&(r=r.next(function(){return n.ensureSequenceNumbers(l)})),8>t&&8<=e&&(r=r.next(function(){return n.createCollectionParentIndex(d,l)})),r},e.prototype.addDocumentGlobal=function(a){var o=0;return a.store(Ks.store).iterate(function(n,t){o+=ks(t)}).next(function(){var e=new js(o);return a.store(js.store).put(js.key,e)})},e.prototype.removeAcknowledgedMutations=function(a){var o=this,n=a.store(Fs.store),r=a.store(Vs.store);return n.loadAll().next(function(e){return $a.forEach(e,function(i){var e=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.loadAll(Vs.userMutationsIndex,e).next(function(e){return $a.forEach(e,function(n){Nr(n.userId===i.userId,"Cannot process batch "+n.batchId+" from unexpected user");var t=o.serializer.fromDbMutationBatch(n);return fi(a,i.userId,t).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(n){var s=n.store(Ws.store),t=n.store(Ks.store);return is(n).next(function(a){var e=[];return t.iterate(function(o){var i=new Ci(o),t=[0,Da(i)];e.push(s.get(t).next(function(n){return n?$a.resolve():(t=i,s.put(new Ws(0,Da(t),a)));var t}))}).next(function(){return $a.waitFor(e)})})},e.prototype.createCollectionParentIndex=function(n,t){n.createObjectStore(Hs.store,{keyPath:Hs.keyPath});var a=t.store(Hs.store),r=new _s,e=function(o){if(r.add(o)){var t=o.lastSegment(),e=o.popLast();return a.put({collectionId:t,parent:Da(e)})}};return t.store(Ks.store).iterate({keysOnly:!0},function(a){var t=new Ci(a);return e(t.popLast())}).next(function(){return t.store(Bs.store).iterate({keysOnly:!0},function(a){a[0];var t=a[1],n=(a[2],Ya(t));return e(n.popLast())})})},e}(),xs=function(n,t){this.seconds=n,this.nanoseconds=t},qs=function(){function e(a,t,e){this.ownerId=a,this.allowTabSynchronization=t,this.leaseTimestampMs=e}return e.store="owner",e.key="owner",e}(),Fs=function(){function e(a,t,e){this.userId=a,this.lastAcknowledgedBatchId=t,this.lastStreamToken=e}return e.store="mutationQueues",e.keyPath="userId",e}(),Vs=function(){function e(a,t,e,n,o){this.userId=a,this.batchId=t,this.localWriteTimeMs=e,this.baseMutations=n,this.mutations=o}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),Bs=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(n,t){return[n,Da(t)]},e.key=function(a,t,e){return[a,Da(t),e]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),Us=function(n,t){this.path=n,this.readTime=t},Qs=function(n,t){this.path=n,this.version=t},Ks=function(){function e(a,t,e,n){this.unknownDocument=a,this.noDocument=t,this.document=e,this.hasCommittedMutations=n}return e.store="remoteDocuments",e}(),js=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),Gs=function(){function e(a,t,e,n,r,i){this.targetId=a,this.canonicalId=t,this.readTime=e,this.resumeToken=n,this.lastListenSequenceNumber=r,this.query=i}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),Ws=function(){function e(a,t,e){this.targetId=a,this.path=t,Nr(0===a==(void 0!==(this.sequenceNumber=e)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),zs=function(){function e(a,t,e,n){this.highestTargetId=a,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=e,this.targetCount=n}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),Hs=function(){function e(n,t){this.collectionId=n,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}(),Ys=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}(),Js=function(){function e(a,t,e,n,o){this.clientId=a,this.updateTimeMs=t,this.networkEnabled=e,this.inForeground=n,this.lastProcessedDocumentChangeId=o}return e.store="clientMetadata",e.keyPath="clientId",e}(),$s=[Fs.store,Vs.store,Bs.store,Ks.store,Gs.store,qs.store,zs.store,Ws.store].concat([Js.store,Ys.store]).concat([js.store]).concat([Hs.store]),Zs=function(){function e(){this.collectionParentsCache=new _s}return e.prototype.addToCollectionParentIndex=function(a,t){if(Nr(1==t.length%2,"Expected a collection path."),this.collectionParentsCache.add(t)){Nr(1<=t.length,"Invalid collection path.");var e=t.lastSegment(),n=t.popLast();return Ss(a).put({collectionId:e,parent:Da(n)})}return $a.resolve()},e.prototype.getCollectionParents=function(n,a){var i=[],t=IDBKeyRange.bound([a,""],[ii(a),""],!1,!0);return Ss(n).loadAll(t).next(function(o){for(var t=0,s=o,n;t<s.length&&(n=s[t],n.collectionId===a);t++)i.push(Ya(n.parent));return i})},e}(),al=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(a){if(a.document)return this.remoteSerializer.fromDocument(a.document,!!a.hasCommittedMutations);if(a.noDocument){var t=Ai.fromSegments(a.noDocument.path),o=this.fromDbTimestamp(a.noDocument.readTime);return new Mi(t,o,{hasCommittedMutations:!!a.hasCommittedMutations})}return a.unknownDocument?(t=Ai.fromSegments(a.unknownDocument.path),o=this.fromDbTimestamp(a.unknownDocument.version),new Oi(t,o)):Ar("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(a){if(a instanceof Ri){var t=a.proto?a.proto:this.remoteSerializer.toDocument(a),e=a.hasCommittedMutations;return new Ks(null,null,t,e)}if(a instanceof Mi){var o=a.key.path.toArray(),s=this.toDbTimestamp(a.version);return e=a.hasCommittedMutations,new Ks(null,new Us(o,s),null,e)}return a instanceof Oi?(o=a.key.path.toArray(),s=this.toDbTimestamp(a.version),new Ks(new Qs(o,s),null,null,!0)):Ar("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(n){var t=n.toTimestamp();return new xs(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(n){var t=new bi(n.seconds,n.nanoseconds);return bo.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(a,t){var e=this,n=t.baseMutations.map(function(n){return e.remoteSerializer.toMutation(n)}),o=t.mutations.map(function(n){return e.remoteSerializer.toMutation(n)});return new Vs(a,t.batchId,t.localWriteTime.toMillis(),n,o)},e.prototype.fromDbMutationBatch=function(a){var o=this,e=(a.baseMutations||[]).map(function(e){return o.remoteSerializer.fromMutation(e)}),t=a.mutations.map(function(e){return o.remoteSerializer.fromMutation(e)}),n=bi.fromMillis(a.localWriteTimeMs);return new Qa(a.batchId,n,e,t)},e.prototype.toDbResourcePaths=function(n){var a=[];return n.forEach(function(e){a.push(Da(e.path))}),a},e.prototype.fromDbResourcePaths=function(a){for(var t=Jo(),o=0,s=a,r;o<s.length;o++)r=s[o],t=t.add(new Ai(Ya(r)));return t},e.prototype.fromDbTarget=function(a){var t=this.fromDbTimestamp(a.readTime),n;return n=void 0===a.query.documents?this.remoteSerializer.fromQueryTarget(a.query):this.remoteSerializer.fromDocumentsTarget(a.query),new Bd(n,a.targetId,wo.Listen,a.lastListenSequenceNumber,t,a.resumeToken)},e.prototype.toDbTarget=function(a){Nr(wo.Listen===a.purpose,"Only queries with purpose "+wo.Listen+" may be stored, got "+a.purpose);var t=this.toDbTimestamp(a.snapshotVersion),o,r;return o=a.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(a.query):this.remoteSerializer.toQueryTarget(a.query),r=a.resumeToken instanceof Uint8Array?(Nr("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),a.resumeToken.toString()):a.resumeToken,new Gs(a.targetId,a.query.canonicalId(),t,r,a.sequenceNumber,o)},e}(),ol=function(){function e(e){this.maxElements=e,this.buffer=new To(ws),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(a){var t=[a,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var e=this.buffer.last();0>ws(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),rl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},il=function(){function n(a,t,e){this.cacheSizeCollectionThreshold=a,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=e}return n.withCacheSize=function(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},n.COLLECTION_DISABLED=-1,n.MINIMUM_CACHE_SIZE_BYTES=1048576,n.DEFAULT=new n(n.DEFAULT_CACHE_SIZE_BYTES=41943040,n.DEFAULT_COLLECTION_PERCENTILE=10,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),n.DISABLED=new n(n.COLLECTION_DISABLED,0,0),n}(),sl=function(){function e(a,t,e){this.garbageCollector=a,this.asyncQueue=t,this.localStore=e,this.gcTask=null}return e.prototype.start=function(){Nr(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==il.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var n=this;Nr(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;vr("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Ba.LruGarbageCollection,t,function(){return n.gcTask=null,n.hasRun=!0,n.localStore.collectGarbage(n.garbageCollector).then(function(){return n.scheduleGC()}).catch(Ns)})},e}(),dl=function(){function e(n,t){this.delegate=n,this.params=t}return e.prototype.calculateTargetCount=function(n,a){return this.delegate.getSequenceNumberCount(n).next(function(e){return Ra(a/100*e)})},e.prototype.nthSequenceNumber=function(a,t){var e=this;if(0===t)return $a.resolve(Yd.INVALID);var n=new ol(t);return this.delegate.forEachTarget(a,function(e){return n.addElement(e.sequenceNumber)}).next(function(){return e.delegate.forEachOrphanedDocumentSequenceNumber(a,function(e){return n.addElement(e)})}).next(function(){return n.maxValue})},e.prototype.removeTargets=function(a,t,e){return this.delegate.removeTargets(a,t,e)},e.prototype.removeOrphanedDocuments=function(n,t){return this.delegate.removeOrphanedDocuments(n,t)},e.prototype.collect=function(a,e){var n=this;return this.params.cacheSizeCollectionThreshold===il.COLLECTION_DISABLED?(vr("LruGarbageCollector","Garbage collection skipped; disabled"),$a.resolve(rl)):this.getCacheSize(a).next(function(o){return o<n.params.cacheSizeCollectionThreshold?(vr("LruGarbageCollector","Garbage collection skipped; Cache size "+o+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),rl):n.runGarbageCollection(a,e)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(d,e){var n=this,l,p,m,g,y,f,b,v;return g=Date.now(),this.calculateTargetCount(d,this.params.percentileToCollect).next(function(e){return p=e>n.params.maximumSequenceNumbersToCollect?(vr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+n.params.maximumSequenceNumbersToCollect+" from "+e),n.params.maximumSequenceNumbersToCollect):e,y=Date.now(),n.nthSequenceNumber(d,p)}).next(function(a){return l=a,f=Date.now(),n.removeTargets(d,l,e)}).next(function(e){return m=e,b=Date.now(),n.removeOrphanedDocuments(d,l)}).next(function(e){return(v=Date.now(),ur()<=Cr.DEBUG)&&vr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(y-g)+"ms\n\tDetermined least recently used "+p+" in "+(f-y)+"ms\n\tRemoved "+m+" targets in "+(b-f)+"ms\n\tRemoved "+e+" documents in "+(v-b)+"ms\nTotal Duration: "+(v-g)+"ms"),$a.resolve({didRun:!0,sequenceNumbersCollected:p,targetsRemoved:m,documentsRemoved:e})})},e}(),ll=function(a){function e(o,t){var e=a.call(this)||this;return e.simpleDbTransaction=o,e.currentSequenceNumber=t,e}return Pa(e,a),e}(function(){}),pl=function(){function l(s,t,e,n,r,i,o){if(this.persistenceKey=s,this.clientId=t,this.queue=n,this.multiClientParams=o,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=ud,this.primaryStateListener=function(){return Promise.resolve()},!l.isAvailable())throw new Lr(_r.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");if(this.referenceDelegate=new cl(this,i),this.dbName=s+l.MAIN_DATABASE,this.serializer=new al(r),this.document=e.document,this.allowTabSynchronization=void 0!==o,this.queryCache=new nl(this.referenceDelegate,this.serializer),this.indexManager=new Zs,this.remoteDocumentCache=new Is(this.serializer,this.indexManager,this.allowTabSynchronization),!e.window||!e.window.localStorage)throw new Lr(_r.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=e.window,this.webStorage=this.window.localStorage}return l.getStore=function(n,t){if(n instanceof ll)return cs.getStore(n.simpleDbTransaction,t);throw Ar("IndexedDbPersistence must use instances of IndexedDbTransaction")},l.createIndexedDbPersistence=function(d,n,r,i,o,a){return ja(this,void 0,void 0,function(){var s;return Wa(this,function(e){switch(e.label){case 0:return[4,(s=new l(d,n,r,i,o,a)).start()];case 1:return e.sent(),[2,s];}})})},l.createMultiClientIndexedDbPersistence=function(d,n,r,i,o,a,s){return ja(this,void 0,void 0,function(){var p;return Wa(this,function(e){switch(e.label){case 0:return[4,(p=new l(d,n,r,i,o,a,s)).start()];case 1:return e.sent(),[2,p];}})})},l.prototype.start=function(){var a=this;return Nr(!this.started,"IndexedDbPersistence double-started!"),Nr(null!==this.window,"Expected 'window' to be defined"),cs.openOrCreate(this.dbName,8,new Ls(this.serializer)).then(function(e){return a.simpleDb=e,a.updateClientMetadataAndTryBecomePrimary()}).then(function(){return a.attachVisibilityHandler(),a.attachWindowUnloadHook(),a.scheduleClientMetadataAndPrimaryLeaseRefreshes(),a.startRemoteDocumentCache()}).then(function(){return a.simpleDb.runTransaction("readonly",[zs.store],function(e){return is(e).next(function(n){var t=a.multiClientParams?a.multiClientParams.sequenceNumberSyncer:void 0;a.listenSequence=new Yd(n,t)})})}).then(function(){a._started=!0}).catch(function(e){return a.simpleDb&&a.simpleDb.close(),Promise.reject(e)})},l.prototype.startRemoteDocumentCache=function(){var n=this;return this.simpleDb.runTransaction("readonly",$s,function(e){return n.remoteDocumentCache.start(e)})},l.prototype.setPrimaryStateListener=function(a){var n=this;return this.primaryStateListener=function(t){return ja(n,void 0,void 0,function(){return Wa(this,function(){return this.started?[2,a(t)]:[2]})})},a(this.isPrimary)},l.prototype.setDatabaseDeletedListener=function(a){var n=this;this.simpleDb.setVersionChangeListener(function(o){return ja(n,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return null===o.newVersion?[4,a()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2];}})})})},l.prototype.setNetworkEnabled=function(n){var t=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.queue.enqueueAndForget(function(){return ja(t,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2];}})})}))},l.prototype.updateClientMetadataAndTryBecomePrimary=function(){var a=this;return this.simpleDb.runTransaction("readwrite",$s,function(o){return Rs(o).put(new Js(a.clientId,Date.now(),a.networkEnabled,a.inForeground,a.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(a.isPrimary)return a.verifyPrimaryLease(o).next(function(e){e||(a.isPrimary=!1,a.queue.enqueueAndForget(function(){return a.primaryStateListener(!1)}))})}).next(function(){return a.canActAsPrimary(o)}).next(function(n){var t=a.isPrimary;return a.isPrimary=n,t!==a.isPrimary&&a.queue.enqueueAndForget(function(){return a.primaryStateListener(a.isPrimary)}),t&&!a.isPrimary?a.releasePrimaryLeaseIfHeld(o):a.isPrimary?a.acquireOrExtendPrimaryLease(o):void 0})})},l.prototype.verifyPrimaryLease=function(n){var a=this;return Os(n).get(qs.key).next(function(e){return $a.resolve(a.isLocalClient(e))})},l.prototype.removeClientMetadata=function(e){return Rs(e).delete(this.clientId)},l.prototype.maybeGarbageCollectMultiClientState=function(){return ja(this,void 0,void 0,function(){var a=this,o,n;return Wa(this,function(e){switch(e.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(r){var i=l.getStore(r,Js.store);return i.loadAll().next(function(e){o=a.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===o.indexOf(e)})}).next(function(){return $a.forEach(n,function(e){return i.delete(e.clientId)})}).next(function(){if(0<(o=o.filter(function(e){return e.clientId!==a.clientId})).length){var n=o.map(function(e){return e.lastProcessedDocumentChangeId||0}),t=d.apply(Math,n);return a.remoteDocumentCache.removeDocumentChangesThroughChangeId(r,t)}})})]);case 1:e.sent(),n.forEach(function(e){a.window.localStorage.removeItem(a.zombiedClientLocalStorageKey(e.clientId))}),e.label=2;case 2:return[2];}})})},l.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Ba.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},l.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},l.prototype.canActAsPrimary=function(n){var a=this;return Os(n).get(qs.key).next(function(e){if(null!==e&&a.isWithinAge(e.leaseTimestampMs,5e3)&&!a.isClientZombied(e.ownerId)){if(a.isLocalClient(e)&&a.networkEnabled)return!0;if(!a.isLocalClient(e)){if(!e.allowTabSynchronization)throw new Lr(_r.FAILED_PRECONDITION,"Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.");return!1}}return a.networkEnabled&&a.inForeground||Rs(n).loadAll().next(function(e){return void 0===a.filterActiveClients(e,5e3).find(function(o){if(a.clientId!==o.clientId){var t=!a.networkEnabled&&o.networkEnabled,e=!a.inForeground&&o.inForeground,n=a.networkEnabled===o.networkEnabled;if(t||e&&n)return!0}return!1})})}).next(function(e){return a.isPrimary!==e&&vr("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},l.prototype.shutdown=function(){return ja(this,void 0,void 0,function(){var n=this;return Wa(this,function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[qs.store,Js.store],function(e){return n.releasePrimaryLeaseIfHeld(e).next(function(){return n.removeClientMetadata(e)})})];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2];}})})},l.prototype.filterActiveClients=function(a,o){var e=this;return a.filter(function(n){return e.isWithinAge(n.updateTimeMs,o)&&!e.isClientZombied(n.clientId)})},l.prototype.getActiveClients=function(){var n=this;return this.simpleDb.runTransaction("readonly",[Js.store],function(e){return Rs(e).loadAll().next(function(e){return n.filterActiveClients(e,18e5).map(function(e){return e.clientId})})})},l.clearPersistence=function(a){return ja(this,void 0,void 0,function(){var n;return Wa(this,function(e){switch(e.label){case 0:return l.isAvailable()?(n=a+l.MAIN_DATABASE,[4,cs.delete(n)]):[2,Promise.resolve()];case 1:return e.sent(),[2];}})})},Object.defineProperty(l.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),l.prototype.getMutationQueue=function(e){return Nr(this.started,"Cannot initialize MutationQueue before persistence is started."),Za.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},l.prototype.getQueryCache=function(){return Nr(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},l.prototype.getRemoteDocumentCache=function(){return Nr(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},l.prototype.getIndexManager=function(){return Nr(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},l.prototype.runTransaction=function(a,n,o){var r=this;return vr("IndexedDbPersistence","Starting transaction:",a),this.simpleDb.runTransaction("readonly"===n?"readonly":"readwrite",$s,function(i){return"readwrite-primary"===n?r.verifyPrimaryLease(i).next(function(e){if(!e)throw Dr("Failed to obtain primary lease for action '"+a+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new Lr(_r.FAILED_PRECONDITION,"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.");return o(new ll(i,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(i).next(function(){return e})}):r.verifyAllowTabSynchronization(i).next(function(){return o(new ll(i,r.listenSequence.next()))})})},l.prototype.verifyAllowTabSynchronization=function(n){var a=this;return Os(n).get(qs.key).next(function(e){if(null!==e&&a.isWithinAge(e.leaseTimestampMs,5e3)&&!a.isClientZombied(e.ownerId)&&!a.isLocalClient(e)&&!e.allowTabSynchronization)throw new Lr(_r.FAILED_PRECONDITION,"Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.")})},l.prototype.acquireOrExtendPrimaryLease=function(n){var t=new qs(this.clientId,this.allowTabSynchronization,Date.now());return Os(n).put(qs.key,t)},l.isAvailable=function(){return cs.isAvailable()},l.buildStoragePrefix=function(n){var t=n.databaseId.projectId;return n.databaseId.isDefaultDatabase||(t+="."+n.databaseId.database),"firestore/"+n.persistenceKey+"/"+t+"/"},l.prototype.releasePrimaryLeaseIfHeld=function(a){var o=this,e=Os(a);return e.get(qs.key).next(function(n){return o.isLocalClient(n)?(vr("IndexedDbPersistence","Releasing primary lease."),e.delete(qs.key)):$a.resolve()})},l.prototype.isWithinAge=function(a,t){var e=Date.now();return!(a<e-t)&&(!(e<a)||(Dr("Detected an update time that is in the future: "+a+" > "+e),!1))},l.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},l.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(Nr(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},l.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},l.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(Nr("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},l.prototype.isClientZombied=function(n){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(n));return vr("IndexedDbPersistence","Client '"+n+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return Dr("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},l.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),Date.now()+"")}catch(e){Dr("Failed to set zombie client id.",e)}},l.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},l.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},l.MAIN_DATABASE="main",l}(),cl=function(){function e(n,t){this.db=n,this.garbageCollector=new dl(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(n){return t.next(function(e){return n+e})})},e.prototype.orphanedDocmentCount=function(n){var t=0;return this.forEachOrphanedDocumentSequenceNumber(n,function(){t++}).next(function(){return t})},e.prototype.forEachTarget=function(n,t){return this.db.getQueryCache().forEachTarget(n,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,a){return this.forEachOrphanedDocument(e,function(n,t){return a(t)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(n,t){return Ms(n,t)},e.prototype.removeReference=function(n,t){return Ms(n,t)},e.prototype.removeTargets=function(a,t,e){return this.db.getQueryCache().removeTargets(a,t,e)},e.prototype.removeMutationReference=function(n,t){return Ms(n,t)},e.prototype.isPinned=function(a,t){return this.inMemoryPins.containsKey(t)?$a.resolve(!0):(o=t,s=!1,es(e=a).iterateSerial(function(n){return Xa(e,n,o).next(function(e){return e&&(s=!0),$a.resolve(!e)})}).next(function(){return s}));var e,o,s},e.prototype.removeOrphanedDocuments=function(d,r){var i=this,n=0,e=0,t=[];return this.forEachOrphanedDocument(d,function(a,o){if(o<=r){var s=i.isPinned(d,a).next(function(o){if(!o)return n++,i.removeOrphanedDocument(d,a).next(function(n){e+=n})});t.push(s)}}).next(function(){return $a.waitFor(t)}).next(function(){return i.db.getRemoteDocumentCache().updateSize(d,-e)}).next(function(){return n})},e.prototype.removeOrphanedDocument=function(a,t){var e=0,o=this.db.getRemoteDocumentCache(),i;return $a.waitFor([hs(a).delete((i=t,[0,Da(i.path)])),o.removeEntry(a,t).next(function(n){e+=n})]).next(function(){return e})},e.prototype.removeTarget=function(a,t){var e=t.copy({sequenceNumber:a.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(a,e)},e.prototype.updateLimboDocument=function(n,t){return Ms(n,t)},e.prototype.forEachOrphanedDocument=function(n,d){var t=hs(n),o=Yd.INVALID,l;return t.iterate({index:Ws.documentTargetsIndex},function(a,t){var e=a[0],n=(a[1],t.path),r=t.sequenceNumber;0===e?(o!==Yd.INVALID&&d(new Ai(Ya(l)),o),o=r,l=n):o=Yd.INVALID}).next(function(){o!==Yd.INVALID&&d(new Ai(Ya(l)),o)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}(),ul=function(){function e(a,t,e){this.remoteDocumentCache=a,this.mutationQueue=t,this.indexManager=e}return e.prototype.getDocument=function(a,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(a,e).next(function(o){return n.getDocumentInternal(a,e,o)})},e.prototype.getDocumentInternal=function(e,a,o){return this.remoteDocumentCache.getEntry(e,a).next(function(r){for(var i=0,s=o;i<s.length;i++)r=s[i].applyToLocalView(a,r);return r})},e.prototype.applyLocalMutationsToDocuments=function(n,t,a){var i=Wo();return t.forEach(function(o,t){for(var s=0,d=a;s<d.length;s++)t=d[s].applyToLocalView(o,t);i=i.insert(o,t)}),i},e.prototype.getDocuments=function(a,e){var o=this;return this.remoteDocumentCache.getEntries(a,e).next(function(e){return o.getLocalViewOfDocuments(a,e)})},e.prototype.getLocalViewOfDocuments=function(a,r){var i=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(a,r).next(function(o){var t=i.applyLocalMutationsToDocuments(a,r,o),s=jo();return t.forEach(function(n,t){t||(t=new Mi(n,bo.forDeletedDoc())),s=s.insert(n,t)}),s})},e.prototype.getDocumentsMatchingQuery=function(n,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(n,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(n,t):this.getDocumentsMatchingCollectionQuery(n,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(n,t){return this.getDocument(n,new Ai(t)).next(function(n){var t=zo();return n instanceof Ri&&(t=t.insert(n.key,n)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(s,n){var r=this;Nr(n.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=n.collectionGroup,o=zo();return this.indexManager.getCollectionParents(s,i).next(function(e){return $a.forEach(e,function(a){var t=n.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(s,t).next(function(e){e.forEach(function(n,t){o=o.insert(n,t)})})}).next(function(){return o})})},e.prototype.getDocumentsMatchingCollectionQuery=function(a,d){var e=this,n;return this.remoteDocumentCache.getDocumentsMatchingQuery(a,d).next(function(o){return n=o,e.mutationQueue.getAllMutationBatchesAffectingQuery(a,d)}).next(function(l){for(var t=0,p=l;t<p.length;t++)for(var h=p[t],r=0,m=h.mutations;r<m.length;r++){var o=m[r],a=o.key;if(d.path.isImmediateParentOf(a.path)){var s=n.get(a),u=o.applyToLocalView(s,s,h.localWriteTime);n=u instanceof Ri?n.insert(a,u):n.remove(a)}}}).next(function(){return n.forEach(function(a,t){d.matches(t)||(n=n.remove(a))}),n})},e}(),hl=function(){function e(){this.refsByKey=new To(ml.compareByKey),this.refsByTarget=new To(ml.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(a,t){var e=new ml(a,t);this.refsByKey=this.refsByKey.add(e),this.refsByTarget=this.refsByTarget.add(e)},e.prototype.addReferences=function(a,o){var e=this;a.forEach(function(n){return e.addReference(n,o)})},e.prototype.removeReference=function(n,t){this.removeRef(new ml(n,t))},e.prototype.removeReferences=function(a,o){var e=this;a.forEach(function(n){return e.removeReference(n,o)})},e.prototype.removeReferencesForId=function(a){var s=this,e=Ai.EMPTY,t=new ml(e,a),n=new ml(e,a+1),r=[];return this.refsByTarget.forEachInRange([t,n],function(e){s.removeRef(e),r.push(e.key)}),r},e.prototype.removeAllReferences=function(){var n=this;this.refsByKey.forEach(function(e){return n.removeRef(e)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(a){var t=Ai.EMPTY,e=new ml(t,a),n=new ml(t,a+1),o=Jo();return this.refsByTarget.forEachInRange([e,n],function(e){o=o.add(e.key)}),o},e.prototype.containsKey=function(a){var t=new ml(a,0),e=this.refsByKey.firstAfterOrEqual(t);return null!==e&&a.isEqual(e.key)},e}(),ml=function(){function e(n,t){this.key=n,this.targetOrBatchId=t}return e.compareByKey=function(n,t){return Ai.comparator(n.key,t.key)||ai(n.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(n,t){return ai(n.targetOrBatchId,t.targetOrBatchId)||Ai.comparator(n.key,t.key)},e}(),gl=function(){function s(n,t){this.persistence=n,this.localViewReferences=new hl,this.queryDataByTarget={},Nr(n.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=n.getMutationQueue(t),this.remoteDocuments=n.getRemoteDocumentCache(),this.queryCache=n.getQueryCache(),this.localDocuments=new ul(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return s.prototype.handleUserChange=function(n){var g=this;return this.persistence.runTransaction("Handle user change","readonly",function(y){var d;return g.mutationQueue.getAllMutationBatches(y).next(function(e){return d=e,g.mutationQueue=g.persistence.getMutationQueue(n),g.localDocuments=new ul(g.remoteDocuments,g.mutationQueue,g.persistence.getIndexManager()),g.mutationQueue.getAllMutationBatches(y)}).next(function(m){for(var b=[],e=[],t=Jo(),n=0,v=d,o;n<v.length;n++){o=v[n],b.push(o.batchId);for(var T=0,_=o.mutations,u;T<_.length;T++)u=_[T],t=t.add(u.key)}for(var E=0,k=m;E<k.length;E++){o=k[E],e.push(o.batchId);for(var l=0,C=o.mutations;l<C.length;l++)u=C[l],t=t.add(u.key)}return g.localDocuments.getDocuments(y,t).next(function(n){return{affectedDocuments:n,removedBatchIds:b,addedBatchIds:e}})})})},s.prototype.localWrite=function(d){var p=this,c=bi.now(),e=d.reduce(function(n,t){return n.add(t.key)},Jo());return this.persistence.runTransaction("Locally write mutations","readwrite",function(l){return p.localDocuments.getDocuments(l,e).next(function(u){for(var n=[],t=0,h=d;t<h.length;t++){var r=h[t],i=u.get(r.key);if(!r.isIdempotent){var o=r.fieldMask;if(o){var a=i instanceof Ri?o.applyTo(i.data):Ji.EMPTY;n.push(new Mo(r.key,a,o,Fd.exists(!0)))}}}return p.mutationQueue.addMutationBatch(l,c,n,d).next(function(n){var t=n.applyToLocalDocumentSet(u);return{batchId:n.batchId,changes:t}})})})},s.prototype.lookupMutationDocuments=function(a){var o=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return o.mutationQueue.lookupMutationKeys(n,a).next(function(e){return e?o.localDocuments.getDocuments(n,e):$a.resolve(null)})})},s.prototype.acknowledgeBatch=function(a){var o=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var t=a.batch.keys(),e=o.remoteDocuments.newChangeBuffer();return o.mutationQueue.acknowledgeBatch(r,a.batch,a.streamToken).next(function(){return o.applyWriteToRemoteDocuments(r,a,e)}).next(function(){return e.apply(r)}).next(function(){return o.mutationQueue.performConsistencyCheck(r)}).next(function(){return o.localDocuments.getDocuments(r,t)})})},s.prototype.rejectBatch=function(a){var o=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(r){var e;return o.mutationQueue.lookupMutationBatch(r,a).next(function(n){return Nr(null!==n,"Attempt to reject nonexistent batch!"),e=n.keys(),o.mutationQueue.removeMutationBatch(r,n)}).next(function(){return o.mutationQueue.performConsistencyCheck(r)}).next(function(){return o.localDocuments.getDocuments(r,e)})})},s.prototype.getLastStreamToken=function(){var n=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return n.mutationQueue.getLastStreamToken(e)})},s.prototype.setLastStreamToken=function(a){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,a)})},s.prototype.getLastRemoteSnapshotVersion=function(){var n=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return n.queryCache.getLastRemoteSnapshotVersion(e)})},s.prototype.applyRemoteEvent=function(d){var l=this,p=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(c){var o=[],a=Jo();qr(d.targetChanges,function(p,t){var e=l.queryDataByTarget[p];if(e){t.addedDocuments.forEach(function(e){a=a.add(e)}),t.modifiedDocuments.forEach(function(e){a=a.add(e)}),o.push(l.queryCache.removeMatchingKeys(c,t.removedDocuments,p).next(function(){return l.queryCache.addMatchingKeys(c,t.addedDocuments,p)}));var u=t.resumeToken;if(0<u.length){var r=e;e=e.copy({resumeToken:u,snapshotVersion:d.snapshotVersion}),l.queryDataByTarget[p]=e,s.shouldPersistQueryData(r,e,t)&&o.push(l.queryCache.updateQueryData(c,e))}}});var u=jo(),r=Jo();d.documentUpdates.forEach(function(e){r=r.add(e)}),o.push(p.getEntries(c,r).next(function(i){d.documentUpdates.forEach(function(r,t){var e=i.get(r);null==e||t.version.isEqual(bo.MIN)||a.has(t.key)&&!e.hasPendingWrites||0<=t.version.compareTo(e.version)?(p.addEntry(t),u=u.insert(r,t)):vr("LocalStore","Ignoring outdated watch update for ",r,". Current version:",e.version," Watch version:",t.version),d.resolvedLimboDocuments.has(r)&&o.push(l.persistence.referenceDelegate.updateLimboDocument(c,r))})}));var h=d.snapshotVersion;if(!h.isEqual(bo.MIN)){var e=l.queryCache.getLastRemoteSnapshotVersion(c).next(function(e){return Nr(0<=h.compareTo(e),"Watch stream reverted to previous snapshot?? "+h+" < "+e),l.queryCache.setTargetsMetadata(c,c.currentSequenceNumber,h)});o.push(e)}return $a.waitFor(o).next(function(){return p.apply(c)}).next(function(){return l.localDocuments.getLocalViewOfDocuments(c,u)})})},s.shouldPersistQueryData=function(a,t,e){return 0!==t.resumeToken.length&&(0===a.resumeToken.length||t.snapshotVersion.toMicroseconds()-a.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size)},s.prototype.notifyLocalViewChanges=function(a){var o=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return $a.forEach(a,function(e){return o.localViewReferences.addReferences(e.addedKeys,e.targetId),o.localViewReferences.removeReferences(e.removedKeys,e.targetId),$a.forEach(e.removedKeys,function(e){return o.persistence.referenceDelegate.removeReference(n,e)})})})},s.prototype.nextMutationBatch=function(a){var o=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===a&&(a=-1),o.mutationQueue.getNextMutationBatchAfterBatchId(e,a)})},s.prototype.readDocument=function(a){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,a)})},s.prototype.allocateQuery=function(a){var o=this;return this.persistence.runTransaction("Allocate query","readwrite",function(r){var e;return o.queryCache.getQueryData(r,a).next(function(n){return n?(e=n,$a.resolve()):o.queryCache.allocateTargetId(r).next(function(n){return e=new Bd(a,n,wo.Listen,r.currentSequenceNumber),o.queryCache.addQueryData(r,e)})}).next(function(){return Nr(!o.queryDataByTarget[e.targetId],"Tried to allocate an already allocated query: "+a),o.queryDataByTarget[e.targetId]=e})})},s.prototype.releaseQuery=function(d,o){var a=this,e=o?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",e,function(e){return a.queryCache.getQueryData(e,d).next(function(i){Nr(null!=i,"Tried to release nonexistent query: "+d);var t=i.targetId,s=a.queryDataByTarget[t],n=a.localViewReferences.removeReferencesForId(t);return delete a.queryDataByTarget[t],o?$a.resolve():$a.forEach(n,function(n){return a.persistence.referenceDelegate.removeReference(e,n)}).next(function(){return a.persistence.referenceDelegate.removeTarget(e,s)})})})},s.prototype.executeQuery=function(a){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,a)})},s.prototype.remoteDocumentKeys=function(a){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,a)})},s.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},s.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},s.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},s.prototype.applyWriteToRemoteDocuments=function(d,l,i){var t=this,o=l.batch,e=o.keys(),n=$a.resolve();return e.forEach(function(a){n=n.next(function(){return i.getEntry(d,a)}).next(function(r){var t=r,s=l.docVersions.get(a);Nr(null!==s,"ackVersions should contain every doc in the write."),(!t||0>t.version.compareTo(s))&&((t=o.applyToRemoteDocument(a,t,l))?i.addEntry(t):Nr(!r,"Mutation batch "+o+" applied to document "+r+" resulted in null"))})}),n.next(function(){return t.mutationQueue.removeMutationBatch(d,o)})},s.prototype.collectGarbage=function(a){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return a.collect(n,e.queryDataByTarget)})},s.prototype.getQueryForTarget=function(a){var e=this;return this.queryDataByTarget[a]?Promise.resolve(this.queryDataByTarget[a].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,a).next(function(e){return e?e.query:null})})},s.prototype.getNewDocumentChanges=function(){var n=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return n.remoteDocuments.getNewDocumentChanges(e)})},s.RESUME_TOKEN_MAX_AGE_MICROS=3e8,s}(),yl=function(){function e(n,t){this.indexManager=n,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=Or(),this.batchesByDocumentKey=new To(ml.compareByKey)}return e.prototype.checkEmpty=function(){return $a.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(a,t,e){var n=t.batchId,r=this.indexOfExistingBatchId(n,"acknowledged");Nr(0===r,"Can only acknowledge the first batch in the mutation queue");var i=this.mutationQueue[r];return Nr(n===i.batchId,"Queue ordering failure: expected batch "+n+", got batch "+i.batchId),this.lastStreamToken=e,$a.resolve()},e.prototype.getLastStreamToken=function(){return $a.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(n,t){return this.lastStreamToken=t,$a.resolve()},e.prototype.addMutationBatch=function(d,t,e,n){Nr(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;(this.nextBatchId++,0<this.mutationQueue.length)&&Nr(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new Qa(r,t,e,n);this.mutationQueue.push(i);for(var o=0,l=n,s;o<l.length;o++)s=l[o],this.batchesByDocumentKey=this.batchesByDocumentKey.add(new ml(s.key,r)),this.indexManager.addToCollectionParentIndex(d,s.key.path.popLast());return $a.resolve(i)},e.prototype.lookupMutationBatch=function(n,t){return $a.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(a,t){var e=this.findMutationBatch(t);return Nr(null!=e,"Failed to find local mutation batch."),$a.resolve(e.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(n,t){var e=this.indexOfBatchId(t+1),a=0>e?0:e;return $a.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)},e.prototype.getAllMutationBatches=function(){return $a.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(a,s){var n=this,t=new ml(s,0),e=new ml(s,cd),r=[];return this.batchesByDocumentKey.forEachInRange([t,e],function(a){Nr(s.isEqual(a.key),"Should only iterate over a single key's batches");var t=n.findMutationBatch(a.targetOrBatchId);Nr(null!==t,"Batches in the index must exist in the main table"),r.push(t)}),$a.resolve(r)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(n,t){var a=this,o=new To(ai);return t.forEach(function(r){var e=new ml(r,0),t=new ml(r,cd);a.batchesByDocumentKey.forEachInRange([e,t],function(e){Nr(r.isEqual(e.key),"For each key, should only iterate over a single key's batches"),o=o.add(e.targetOrBatchId)})}),$a.resolve(this.findMutationBatches(o))},e.prototype.getAllMutationBatchesAffectingQuery=function(s,t){Nr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var d=t.path,n=d.length+1,e=d;Ai.isDocumentKey(e)||(e=e.child(""));var r=new ml(new Ai(e),0),o=new To(ai);return this.batchesByDocumentKey.forEachWhile(function(a){var t=a.key.path;return!!d.isPrefixOf(t)&&(t.length===n&&(o=o.add(a.targetOrBatchId)),!0)},r),$a.resolve(this.findMutationBatches(o))},e.prototype.findMutationBatches=function(e){var a=this,n=[];return e.forEach(function(o){var t=a.findMutationBatch(o);null!==t&&n.push(t)}),n},e.prototype.removeMutationBatch=function(a,n){var r=this;Nr(0===this.indexOfExistingBatchId(n.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var i=this.batchesByDocumentKey;return $a.forEach(n.mutations,function(o){var t=new ml(o.key,n.batchId);return i=i.delete(t),r.referenceDelegate.removeMutationReference(a,o.key)}).next(function(){r.batchesByDocumentKey=i})},e.prototype.removeCachedMutationKeys=function(){},e.prototype.containsKey=function(a,t){var e=new ml(t,0),n=this.batchesByDocumentKey.firstAfterOrEqual(e);return $a.resolve(t.isEqual(n&&n.key))},e.prototype.performConsistencyCheck=function(){return 0===this.mutationQueue.length&&Nr(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),$a.resolve()},e.prototype.indexOfExistingBatchId=function(a,t){var e=this.indexOfBatchId(a);return Nr(0<=e&&e<this.mutationQueue.length,"Batches must exist to be "+t),e},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(a){var t=this.indexOfBatchId(a);if(0>t||t>=this.mutationQueue.length)return null;var e=this.mutationQueue[t];return Nr(e.batchId===a,"If found batch must match"),e},e}(),fl=function(){function e(e){this.persistence=e,this.queries=new vs(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=bo.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new hl,this.targetCount=0,this.targetIdGenerator=tl.forQueryCache()}return e.prototype.getTargetCount=function(){return $a.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,a){return this.queries.forEach(function(n,t){return a(t)}),$a.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(){return $a.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(){return $a.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,$a.resolve(t)},e.prototype.setTargetsMetadata=function(a,t,e){return e&&(this.lastRemoteSnapshotVersion=e),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),$a.resolve()},e.prototype.saveQueryData=function(n){this.queries.set(n.query,n);var t=n.targetId;t>this.highestTargetId&&(this.highestTargetId=t),n.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=n.sequenceNumber)},e.prototype.addQueryData=function(n,t){return Nr(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,$a.resolve()},e.prototype.updateQueryData=function(n,t){return Nr(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),$a.resolve()},e.prototype.removeQueryData=function(n,t){return Nr(0<this.targetCount,"Removing a target from an empty cache"),Nr(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,$a.resolve()},e.prototype.removeTargets=function(d,n,r){var i=this,o=0,l=[];return this.queries.forEach(function(a,t){t.sequenceNumber<=n&&!r[t.targetId]&&(i.queries.delete(a),l.push(i.removeMatchingKeysForTargetId(d,t.targetId)),o++)}),$a.waitFor(l).next(function(){return o})},e.prototype.getQueryCount=function(){return $a.resolve(this.targetCount)},e.prototype.getQueryData=function(a,t){var e=this.queries.get(t)||null;return $a.resolve(e)},e.prototype.getQueryDataForTarget=function(){return Ar("Not yet implemented.")},e.prototype.addMatchingKeys=function(a,e,t){this.references.addReferences(e,t);var n=this.persistence.referenceDelegate,o=[];return n&&e.forEach(function(e){o.push(n.addReference(a,e))}),$a.waitFor(o)},e.prototype.removeMatchingKeys=function(a,e,t){this.references.removeReferences(e,t);var n=this.persistence.referenceDelegate,o=[];return n&&e.forEach(function(e){o.push(n.removeReference(a,e))}),$a.waitFor(o)},e.prototype.removeMatchingKeysForTargetId=function(n,t){return this.references.removeReferencesForId(t),$a.resolve()},e.prototype.getMatchingKeysForTargetId=function(a,t){var e=this.references.referencesForId(t);return $a.resolve(e)},e.prototype.containsKey=function(n,t){return $a.resolve(this.references.containsKey(t))},e}(),bl=function(){function e(n,t){this.indexManager=n,this.sizer=t,this.docs=new _i(Ai.comparator),this.newDocumentChanges=Jo(),this.size=0}return e.prototype.addEntries=function(d,t,e){for(var n=[],r=0,l=t;r<l.length;r++){var o=l[r],a=o.maybeDocument.key;this.docs=this.docs.insert(a,o),this.newDocumentChanges=this.newDocumentChanges.add(a),n.push(this.indexManager.addToCollectionParentIndex(d,a.path.popLast()))}return this.size+=e,$a.waitFor(n)},e.prototype.removeEntry=function(a,t){var e=this.docs.get(t);return e?(this.docs=this.docs.remove(t),this.size-=e.size,$a.resolve(e.size)):$a.resolve(0)},e.prototype.getEntry=function(a,t){var e=this.docs.get(t);return $a.resolve(e?e.maybeDocument:null)},e.prototype.getSizedEntry=function(n,t){return $a.resolve(this.docs.get(t))},e.prototype.getEntries=function(a,t){var o=this,n=Wo();return t.forEach(function(a){var t=o.docs.get(a);n=n.insert(a,t?t.maybeDocument:null)}),$a.resolve(n)},e.prototype.getSizedEntries=function(a,t){var o=this,n=Wo(),s=new _i(Ai.comparator);return t.forEach(function(a){var t=o.docs.get(a);n=n.insert(a,t?t.maybeDocument:null),s=s.insert(a,t?t.size:0)}),$a.resolve({maybeDocuments:n,sizeMap:s})},e.prototype.getDocumentsMatchingQuery=function(d,t){Nr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var e=zo(),l=new Ai(t.path.child("")),r=this.docs.getIteratorFrom(l);r.hasNext();){var i=r.getNext(),o=i.key,a=i.value.maybeDocument;if(!t.path.isPrefixOf(o.path))break;a instanceof Ri&&t.matches(a)&&(e=e.insert(a.key,a))}return $a.resolve(e)},e.prototype.forEachDocumentKey=function(n,a){return $a.forEach(this.docs,function(e){return a(e)})},e.prototype.getNewDocumentChanges=function(){var a=this,o=jo();return this.newDocumentChanges.forEach(function(r){var t=a.docs.get(r),e=t?t.maybeDocument:new Mi(r,bo.forDeletedDoc());o=o.insert(r,e)}),this.newDocumentChanges=Jo(),$a.resolve(o)},e.prototype.newChangeBuffer=function(){return new vl(this.sizer,this)},e.prototype.getSize=function(){return $a.resolve(this.size)},e}(),vl=function(a){function e(o,t){var e=a.call(this)||this;return e.sizer=o,e.documentCache=t,e}return Pa(e,a),e.prototype.applyChanges=function(n){var s=this,t=this.assertChanges(),i=0,d=[];return t.forEach(function(a,t){var e=s.documentSizes.get(a);Nr(void 0!==e,"Attempting to change document "+a.toString()+" without having read it first");var n=s.sizer(t);i+=n-e,d.push({maybeDocument:t,size:n})}),this.documentCache.addEntries(n,d,i)},e.prototype.getFromCache=function(n,t){return this.documentCache.getSizedEntry(n,t)},e.prototype.getAllFromCache=function(n,t){return this.documentCache.getSizedEntries(n,t)},e}(Ts),Tl=function(){function a(a,t){var e=this;this.clientId=a,this.mutationQueues={},this.listenSequence=new Yd(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new fl(this),this.indexManager=new As,this.remoteDocumentCache=new bl(this.indexManager,function(n){return e.referenceDelegate.documentSize(n)})}return a.createLruPersistence=function(o,r,e){return new a(o,function(n){return new kl(n,new al(r),e)})},a.createEagerPersistence=function(e){return new a(e,function(e){return new El(e)})},a.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(a.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),a.prototype.getActiveClients=function(){return ja(this,void 0,void 0,function(){return Wa(this,function(){return[2,[this.clientId]]})})},a.prototype.setPrimaryStateListener=function(e){return e(!0)},a.prototype.setDatabaseDeletedListener=function(){},a.prototype.setNetworkEnabled=function(){},a.prototype.getIndexManager=function(){return this.indexManager},a.prototype.getMutationQueue=function(n){var t=this.mutationQueues[n.toKey()];return t||(t=new yl(this.indexManager,this.referenceDelegate),this.mutationQueues[n.toKey()]=t),t},a.prototype.getQueryCache=function(){return this.queryCache},a.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},a.prototype.runTransaction=function(a,t,e){var n=this;vr("MemoryPersistence","Starting transaction:",a);var o=new _l(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),e(o).next(function(e){return n.referenceDelegate.onTransactionCommitted(o).next(function(){return e})}).toPromise()},a.prototype.mutationQueuesContainKey=function(a,e){return $a.or((n=this.mutationQueues,o=[],Br(n,function(n,t){return o.push(t)}),o).map(function(n){return function(){return n.containsKey(a,e)}}));var n,o},a}(),_l=function(e){this.currentSequenceNumber=e},El=function(){function e(e){this.persistence=e}return e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(n,t){return this.orphanedDocuments.delete(t),$a.resolve()},e.prototype.removeReference=function(n,t){return this.orphanedDocuments.add(t),$a.resolve()},e.prototype.removeMutationReference=function(n,t){return this.orphanedDocuments.add(t),$a.resolve()},e.prototype.removeTarget=function(a,t){var e=this,n=this.persistence.getQueryCache();return n.getMatchingKeysForTargetId(a,t.targetId).next(function(n){n.forEach(function(n){return e.orphanedDocuments.add(n)})}).next(function(){return n.removeQueryData(a,t)})},e.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(a){var n=this,o=this.persistence.getRemoteDocumentCache();return $a.forEach(this.orphanedDocuments,function(r){return n.isReferenced(a,r).next(function(e){return e?$a.resolve():o.removeEntry(a,r).next(function(){})})})},e.prototype.updateLimboDocument=function(a,o){var e=this;return this.isReferenced(a,o).next(function(n){n?e.orphanedDocuments.delete(o):e.orphanedDocuments.add(o)})},e.prototype.documentSize=function(){return 0},e.prototype.isReferenced=function(a,t){var e=this;return $a.or([function(){return e.persistence.getQueryCache().containsKey(a,t)},function(){return e.persistence.mutationQueuesContainKey(a,t)},function(){return $a.resolve(e.inMemoryPins.containsKey(t))}])},e}(),kl=function(){function e(a,t,e){this.persistence=a,this.serializer=t,this.orphanedSequenceNumbers=new vs(function(e){return Da(e.path)}),this.garbageCollector=new dl(this,e)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(){return $a.resolve()},e.prototype.forEachTarget=function(n,t){return this.persistence.getQueryCache().forEachTarget(n,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(n){return t.next(function(e){return n+e})})},e.prototype.orphanedDocumentCount=function(n){var t=0;return this.forEachOrphanedDocumentSequenceNumber(n,function(){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(a,n){var o=this;return $a.forEach(this.orphanedSequenceNumbers,function(r,i){return o.isPinned(a,r,i).next(function(e){return e?$a.resolve():n(i)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(a,t,e){return this.persistence.getQueryCache().removeTargets(a,t,e)},e.prototype.removeOrphanedDocuments=function(a,n){var t=this,r=0,s=this.persistence.getRemoteDocumentCache();return s.forEachDocumentKey(a,function(o){return t.isPinned(a,o,n).next(function(e){return e?$a.resolve():(r++,s.removeEntry(a,o).next())})}).next(function(){return r})},e.prototype.removeMutationReference=function(n,t){return this.orphanedSequenceNumbers.set(t,n.currentSequenceNumber),$a.resolve()},e.prototype.removeTarget=function(a,t){var e=t.copy({sequenceNumber:a.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(a,e)},e.prototype.addReference=function(n,t){return this.orphanedSequenceNumbers.set(t,n.currentSequenceNumber),$a.resolve()},e.prototype.removeReference=function(n,t){return this.orphanedSequenceNumbers.set(t,n.currentSequenceNumber),$a.resolve()},e.prototype.updateLimboDocument=function(n,t){return this.orphanedSequenceNumbers.set(t,n.currentSequenceNumber),$a.resolve()},e.prototype.documentSize=function(a){var t=this.serializer.toDbRemoteDocument(a),n;if(t.document)n=t.document;else if(t.unknownDocument)n=t.unknownDocument;else{if(!t.noDocument)throw Ar("Unknown remote document type");n=t.noDocument}return JSON.stringify(n).length},e.prototype.isPinned=function(a,o,e){var n=this;return $a.or([function(){return n.persistence.mutationQueuesContainKey(a,o)},function(){return $a.resolve(n.inMemoryPins.containsKey(o))},function(){return n.persistence.getQueryCache().containsKey(a,o)},function(){var a=n.orphanedSequenceNumbers.get(o);return $a.resolve(void 0!==a&&e<a)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),Cl=function(){function e(a,t,e,n,o){this.queue=a,this.timerId=t,this.initialDelayMs=e,this.backoffFactor=n,this.maxDelayMs=o,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(a){var t=this;this.cancel();var e=Ra(this.currentBaseMs+this.jitterDelayMs()),n=Ma(0,Date.now()-this.lastAttemptTime),o=Ma(0,e-n);0<this.currentBaseMs&&vr("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+e+" ms, last attempt: "+n+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,o,function(){return t.lastAttemptTime=Date.now(),a()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),Sl,Il;(Il=Sl||(Sl={}))[Il.Initial=0]="Initial",Il[Il.Starting=1]="Starting",Il[Il.Open=2]="Open",Il[Il.Error=3]="Error",Il[Il.Backoff=4]="Backoff";var wl=function(){function e(a,t,e,n,r,i){this.queue=a,this.idleTimerId=e,this.connection=n,this.credentialsProvider=r,this.listener=i,this.state=Sl.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Cl(a,t,1e3,1.5,6e4)}return e.prototype.isStarted=function(){return this.state===Sl.Starting||this.state===Sl.Open||this.state===Sl.Backoff},e.prototype.isOpen=function(){return this.state===Sl.Open},e.prototype.start=function(){this.state===Sl.Error?this.performBackoff():(Nr(this.state===Sl.Initial,"Already started"),this.auth())},e.prototype.stop=function(){return ja(this,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Sl.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2];}})})},e.prototype.inhibitBackoff=function(){Nr(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Sl.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return ja(this,void 0,void 0,function(){return Wa(this,function(){return this.isOpen()?[2,this.close(Sl.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(a,e){return ja(this,void 0,void 0,function(){return Wa(this,function(n){switch(n.label){case 0:return Nr(this.isStarted(),"Only started streams should be closed."),Nr(a===Sl.Error||hi(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,a===Sl.Error?e&&e.code===_r.RESOURCE_EXHAUSTED?(Dr(e.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===_r.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken():this.backoff.reset(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=a,[4,this.listener.onClose(e)];case 1:return n.sent(),[2];}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var a=this;Nr(this.state===Sl.Initial,"Must be in initial state to auth"),this.state=Sl.Starting;var n=this.getCloseGuardedDispatcher(this.closeCount),o=this.closeCount;this.credentialsProvider.getToken().then(function(e){a.closeCount===o&&a.startStream(e)},function(o){n(function(){var e=new Lr(_r.UNKNOWN,"Fetching auth token failed: "+o.message);return a.handleStreamClose(e)})})},e.prototype.startStream=function(a){var o=this;Nr(this.state===Sl.Starting,"Trying to start stream in a non-starting state");var e=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(a),this.stream.onOpen(function(){e(function(){return Nr(o.state===Sl.Starting,"Expected stream to be in state Starting, but was "+o.state),o.state=Sl.Open,o.listener.onOpen()})}),this.stream.onClose(function(n){e(function(){return o.handleStreamClose(n)})}),this.stream.onMessage(function(n){e(function(){return o.onMessage(n)})})},e.prototype.performBackoff=function(){var e=this;Nr(this.state===Sl.Error,"Should only perform backoff when in Error state"),this.state=Sl.Backoff,this.backoff.backoffAndRun(function(){return ja(e,void 0,void 0,function(){return Wa(this,function(){return Nr(this.state===Sl.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Sl.Initial,this.start(),Nr(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return Nr(this.isStarted(),"Can't handle server close on non-started stream"),vr("PersistentStream","close with error: "+e),this.stream=null,this.close(Sl.Error,e)},e.prototype.getCloseGuardedDispatcher=function(a){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===a?n():(vr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),Dl=function(s){function e(a,t,e,n,r){var i=s.call(this,a,Ba.ListenStreamConnectionBackoff,Ba.ListenStreamIdle,t,e,r)||this;return i.serializer=n,i}return Pa(e,s),e.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},e.prototype.onMessage=function(a){this.backoff.reset();var t=this.serializer.fromWatchChange(a),e=this.serializer.versionFromListenResponse(a);return this.listener.onWatchChange(t,e)},e.prototype.watch=function(a){var t={database:this.serializer.encodedDatabaseId,addTarget:this.serializer.toTarget(a)},e=this.serializer.toListenRequestLabels(a);e&&(t.labels=e),this.sendRequest(t)},e.prototype.unwatch=function(n){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=n,this.sendRequest(t)},e}(wl),Al=function(s){function e(a,t,e,n,r){var i=s.call(this,a,Ba.WriteStreamConnectionBackoff,Ba.WriteStreamIdle,t,e,r)||this;return i.serializer=n,i.handshakeComplete_=!1,i}return Pa(e,s),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,s.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},e.prototype.onMessage=function(a){if(Nr(!!a.streamToken,"Got a write response without a stream token"),this.lastStreamToken=a.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(a.writeResults,a.commitTime),e=this.serializer.fromVersion(a.commitTime);return this.listener.onMutationResult(e,t)}return Nr(!a.writeResults||0===a.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){Nr(this.isOpen(),"Writing handshake requires an opened stream"),Nr(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},e.prototype.writeMutations=function(a){var o=this;Nr(this.isOpen(),"Writing mutations requires an opened stream"),Nr(this.handshakeComplete_,"Handshake must be complete before writing mutations"),Nr(0<this.lastStreamToken.length,"Trying to write mutation without a token");var e={streamToken:this.lastStreamToken,writes:a.map(function(e){return o.serializer.toMutation(e)})};this.sendRequest(e)},e}(wl),xl=function(){function e(a,t,e,n){this.queue=a,this.connection=t,this.credentials=e,this.serializer=n}return e.prototype.newPersistentWriteStream=function(e){return new Al(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Dl(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(a){var o=this,e={database:this.serializer.encodedDatabaseId,writes:a.map(function(e){return o.serializer.toMutation(e)})};return this.invokeRPC("Commit",e).then(function(e){return o.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(a){var o=this,e={database:this.serializer.encodedDatabaseId,documents:a.map(function(e){return o.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",e).then(function(e){var i=jo();e.forEach(function(n){var t=o.serializer.fromMaybeDocument(n);i=i.insert(t.key,t)});var s=[];return a.forEach(function(n){var t=i.get(n);Nr(!!t,"Missing entity in write response for "+n),s.push(t)}),s})},e.prototype.invokeRPC=function(a,e){var n=this;return this.credentials.getToken().then(function(o){return n.connection.invokeRPC(a,e,o)}).catch(function(e){throw e.code===_r.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(a,e){var n=this;return this.credentials.getToken().then(function(o){return n.connection.invokeStreamingRPC(a,e,o)}).catch(function(e){throw e.code===_r.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),Nl=function(){function e(e){this.datastore=e,this.readVersions=Yo(),this.mutations=[],this.committed=!1}return e.prototype.recordVersion=function(a){var t;if(a instanceof Ri)t=a.version;else{if(!(a instanceof Mi))throw Ar("Document in a transaction was a "+a.constructor.name);t=bo.forDeletedDoc()}var o=this.readVersions.get(a.key);if(!(null!==o))this.readVersions=this.readVersions.insert(a.key,t);else if(!t.isEqual(o))throw new Lr(_r.ABORTED,"Document version changed between two reads.")},e.prototype.lookup=function(n){var a=this;return this.committed?Promise.reject("Transaction has already completed."):0<this.mutations.length?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(n).then(function(e){return e.forEach(function(e){e instanceof Mi||e instanceof Ri?a.recordVersion(e):Ar("Document in a transaction was a "+e.constructor.name)}),e})},e.prototype.write=function(e){if(this.committed)throw new Lr(_r.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(e)},e.prototype.precondition=function(n){var t=this.readVersions.get(n);return t?Fd.updateTime(t):Fd.NONE},e.prototype.preconditionForUpdate=function(n){var t=this.readVersions.get(n);if(t&&t.isEqual(bo.forDeletedDoc()))throw new Lr(_r.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return t?Fd.updateTime(t):Fd.exists(!0)},e.prototype.set=function(n,t){this.write(t.toMutations(n,this.precondition(n)))},e.prototype.update=function(n,t){this.write(t.toMutations(n,this.preconditionForUpdate(n)))},e.prototype.delete=function(e){this.write([new _o(e,this.precondition(e))]),this.readVersions=this.readVersions.insert(e,bo.forDeletedDoc())},e.prototype.commit=function(){var n=this,a=this.readVersions;return this.mutations.forEach(function(e){a=a.remove(e.key)}),a.isEmpty()?this.datastore.commit(this.mutations).then(function(){n.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},e}(),Ll,Ol,Rl,Ml;(Ol=Ll||(Ll={}))[Ol.Unknown=0]="Unknown",Ol[Ol.Online=1]="Online",Ol[Ol.Offline=2]="Offline",(Ml=Rl||(Rl={}))[Ml.RemoteStore=0]="RemoteStore",Ml[Ml.SharedClientState=1]="SharedClientState";var Pl=function(){function e(n,t){this.asyncQueue=n,this.onlineStateHandler=t,this.state=Ll.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Ll.Unknown),Nr(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Ba.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,Nr(e.state===Ll.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Ll.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===Ll.Online?(this.setAndBroadcast(Ll.Unknown),Nr(0===this.watchStreamFailures,"watchStreamFailures must be 0"),Nr(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Ll.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Ll.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(n){var t="Could not reach Cloud Firestore backend. "+n+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(Dr(t),this.shouldWarnClientIsOffline=!1):vr("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}(),Bl=function(){function e(a,t,e,n,r){var i=this;this.localStore=a,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=r,this.connectivityMonitor.addCallback(function(){e.enqueueAndForget(function(){return ja(i,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(vr("RemoteStore","Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2];}})})})}),this.onlineStateTracker=new Pl(e,n),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return ja(this,void 0,void 0,function(){var n;return Wa(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(n=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return n.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Ll.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2];}})})},e.prototype.disableNetwork=function(){return ja(this,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Ll.Offline),[2];}})})},e.prototype.disableNetworkInternal=function(){return ja(this,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(vr("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2];}})})},e.prototype.shutdown=function(){return ja(this,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return vr("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Ll.Unknown),[2];}})})},e.prototype.listen=function(e){Nr(!Mr(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){Nr(Mr(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),Fr(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Ll.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){Nr(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new ya(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!Fr(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return ja(this,void 0,void 0,function(){var a=this;return Wa(this,function(){return qr(this.listenTargets,function(n,t){a.sendWatchRequest(t)}),[2]})})},e.prototype.onWatchStreamClose=function(t){return ja(this,void 0,void 0,function(){return Wa(this,function(){return void 0===t&&Nr(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(Ll.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(a,n){return ja(this,void 0,void 0,function(){var o;return Wa(this,function(e){switch(e.label){case 0:return this.onlineStateTracker.set(Ll.Online),a instanceof $d&&a.state===da.Removed&&a.cause?[2,this.handleTargetError(a)]:(a instanceof fa?this.watchChangeAggregator.handleDocumentChange(a):a instanceof pa?this.watchChangeAggregator.handleExistenceFilter(a):(Nr(a instanceof $d,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(a)),n.isEqual(bo.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return o=e.sent(),0<=n.compareTo(o)?[4,this.raiseWatchSnapshot(n)]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2];}})})},e.prototype.raiseWatchSnapshot=function(a){var o=this;Nr(!a.isEqual(bo.MIN),"Can't raise event for unknown SnapshotVersion");var e=this.watchChangeAggregator.createRemoteEvent(a);return qr(e.targetChanges,function(r,t){if(0<t.resumeToken.length){var e=o.listenTargets[r];e&&(o.listenTargets[r]=e.copy({resumeToken:t.resumeToken,snapshotVersion:a}))}}),e.targetMismatches.forEach(function(a){var t=o.listenTargets[a];if(t){o.listenTargets[a]=t.copy({resumeToken:Or()}),o.sendUnwatchRequest(a);var e=new Bd(t.query,a,wo.ExistenceFilterMismatch,t.sequenceNumber);o.sendWatchRequest(e)}}),this.syncEngine.applyRemoteEvent(e)},e.prototype.handleTargetError=function(e){var t=this;Nr(!!e.cause,"Handling target error without a cause");var n=e.cause,a=Promise.resolve();return e.targetIds.forEach(function(o){a=a.then(function(){return ja(t,void 0,void 0,function(){return Wa(this,function(){return Mr(this.listenTargets,o)?(delete this.listenTargets[o],this.watchChangeAggregator.removeTarget(o),[2,this.syncEngine.rejectListen(o,n)]):[2]})})})}),a},e.prototype.fillWritePipeline=function(){return ja(this,void 0,void 0,function(){var a,o;return Wa(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?(a=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(a)]):[3,4];case 1:return null===(o=e.sent())?(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]):[3,2];case 2:return this.addToWritePipeline(o),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2];}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&10>this.writePipeline.length},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){Nr(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},e.prototype.startWriteStream=function(){Nr(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return ja(this,void 0,void 0,function(){return Wa(this,function(){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var a=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var o=0,r=a.writePipeline,e;o<r.length;o++)e=r[o],a.writeStream.writeMutations(e.mutations)}).catch(Ns)},e.prototype.onMutationResult=function(a,t){var e=this;Nr(0<this.writePipeline.length,"Got result for empty write pipeline");var n=this.writePipeline.shift(),o=Ja.from(n,a,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(o).then(function(){return e.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(t){return ja(this,void 0,void 0,function(){var n=this;return Wa(this,function(){return void 0===t&&Nr(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&0<this.writePipeline.length?([2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){n.shouldStartWriteStream()&&n.startWriteStream()})]):[2]})})},e.prototype.handleHandshakeError=function(t){return ja(this,void 0,void 0,function(){return Wa(this,function(){return Vo(t.code)?(vr("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=Or(),[2,this.localStore.setLastStreamToken(Or()).catch(Ns)]):[2]})})},e.prototype.handleWriteError=function(t){return ja(this,void 0,void 0,function(){var e=this,a;return Wa(this,function(){return Vo(n=t.code)&&n!==_r.ABORTED?(a=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(a.batchId,t).then(function(){return e.fillWritePipeline()})]):[2];var n})})},e.prototype.createTransaction=function(){return new Nl(this.datastore)},e.prototype.restartNetwork=function(){return ja(this,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Ll.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2];}})})},e.prototype.handleCredentialChange=function(){return ja(this,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(vr("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2];}})})},e.prototype.applyPrimaryState=function(n){return ja(this,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return(this.isPrimary=n)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return n?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(Ll.Unknown),e.label=4;case 4:return[2];}})})},e}(),ql=function(){this.listeners=[]},Fl=function(){function e(e){this.syncEngine=e,this.queries=new vs(function(e){return e.canonicalId()}),this.onlineState=Ll.Unknown,this.syncEngine.subscribe(this)}return e.prototype.listen=function(a){var t=a.query,e=!1,o=this.queries.get(t);return o||(e=!0,o=new ql,this.queries.set(t,o)),o.listeners.push(a),a.applyOnlineStateChange(this.onlineState),o.viewSnap&&a.onViewSnapshot(o.viewSnap),e?this.syncEngine.listen(t).then(function(e){return o.targetId=e}):Promise.resolve(o.targetId)},e.prototype.unlisten=function(t){return ja(this,void 0,void 0,function(){var a,o,s,d;return Wa(this,function(){return a=t.query,o=!1,(s=this.queries.get(a))&&0<=(d=s.listeners.indexOf(t))&&(s.listeners.splice(d,1),o=0===s.listeners.length),o?(this.queries.delete(a),[2,this.syncEngine.unlisten(a)]):[2]})})},e.prototype.onWatchChange=function(d){for(var t=0,l=d;t<l.length;t++){var n=l[t],r=n.query,i=this.queries.get(r);if(i){for(var o=0,p=i.listeners;o<p.length;o++)p[o].onViewSnapshot(n);i.viewSnap=n}}},e.prototype.onWatchError=function(a,t){var e=this.queries.get(a);if(e)for(var n=0,o=e.listeners;n<o.length;n++)o[n].onError(t);this.queries.delete(a)},e.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(a,o){for(var e=0,i=o.listeners;e<i.length;e++)i[e].applyOnlineStateChange(t)})},e}(),Vl=function(){function e(a,t,e){this.query=a,this.queryObserver=t,this.raisedInitialEvent=!1,this.onlineState=Ll.Unknown,this.options=e||{}}return e.prototype.onViewSnapshot=function(a){if(Nr(0<a.docChanges.length||a.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var o=[],e=0,s=a.docChanges,r;e<s.length;e++)r=s[e],r.type!==aa.Metadata&&o.push(r);a=new ca(a.query,a.docs,a.oldDocs,o,a.mutatedKeys,a.fromCache,a.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(a)&&this.queryObserver.next(a):this.shouldRaiseInitialEvent(a,this.onlineState)&&this.raiseInitialEvent(a),this.snap=a},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},e.prototype.shouldRaiseInitialEvent=function(a,t){if(Nr(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!a.fromCache)return!0;var e=t!==Ll.Offline;return this.options.waitForSyncWhenOnline&&e?(Nr(a.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!a.docs.isEmpty()||t===Ll.Offline},e.prototype.shouldRaiseEvent=function(n){if(0<n.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==n.hasPendingWrites;return(n.syncStateChanged||t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){Nr(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Ul=function(){function d(a,t,e){this.targetId=a,this.addedKeys=t,this.removedKeys=e}return d.fromSnapshot=function(s,t){for(var e=Jo(),l=Jo(),p=0,c=t.docChanges,o;p<c.length;p++)switch(o=c[p],o.type){case aa.Added:e=e.add(o.doc.key);break;case aa.Removed:l=l.add(o.doc.key);}return new d(s,e,l)},d}(),jl=function(e){this.key=e},Wl=function(e){this.key=e},Hl=function(){function e(n,t){this.query=n,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Jo(),this.mutatedKeys=Jo(),this.documentSet=new ta(n.docComparator.bind(n))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(a,t){var d=this,s=t?t.changeSet:new Kd,u=t?t.documentSet:this.documentSet,c=t?t.mutatedKeys:this.mutatedKeys,m=u,g=!1,y=this.query.hasLimit()&&u.size===this.query.limit?u.last():null;if(a.inorderTraversal(function(l,t){var e=u.get(l),n=t instanceof Ri?t:null;n&&(Nr(l.isEqual(n.key),"Mismatching keys found in document changes: "+l+" != "+n.key),n=d.query.matches(n)?n:null);var p=!!e&&d.mutatedKeys.has(e.key),i=!!n&&(n.hasLocalMutations||d.mutatedKeys.has(n.key)&&n.hasCommittedMutations),o=!1;e&&n?e.data.isEqual(n.data)?p!==i&&(s.track({type:aa.Metadata,doc:n}),o=!0):d.shouldWaitForSyncedDocument(e,n)||(s.track({type:aa.Modified,doc:n}),o=!0,y&&0<d.query.docComparator(n,y)&&(g=!0)):!e&&n?(s.track({type:aa.Added,doc:n}),o=!0):e&&!n&&(s.track({type:aa.Removed,doc:e}),o=!0,y&&(g=!0)),o&&(c=n?(m=m.add(n),i?c.add(l):c.delete(l)):(m=m.delete(l),c.delete(l)))}),this.query.hasLimit())for(;m.size>this.query.limit;){var e=m.last();m=m.delete(e.key),c=c.delete(e.key),s.track({type:aa.Removed,doc:e})}return Nr(!g||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:m,changeSet:s,needsRefill:g,mutatedKeys:c}},e.prototype.shouldWaitForSyncedDocument=function(n,t){return n.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(d,t,e){var l=this;Nr(!d.needsRefill,"Cannot apply changes that need a refill");var n=this.documentSet;this.documentSet=d.documentSet,this.mutatedKeys=d.mutatedKeys;var o=d.changeSet.getChanges();o.sort(function(a,t){return e=a.type,o=t.type,(s=function(e){return e===aa.Added?1:e===aa.Modified||e===aa.Metadata?2:e===aa.Removed?0:Ar("Unknown ChangeType: "+e)})(e)-s(o)||l.query.docComparator(a.doc,t.doc);var e,o,s}),this.applyTargetChange(e);var r=t?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?Wd.Synced:Wd.Local,i=a!==this.syncState;return this.syncState=a,0!==o.length||i?{snapshot:new ca(this.query,d.documentSet,n,o,d.mutatedKeys,a===Wd.Local,i,!1),limboChanges:r}:{limboChanges:r}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Ll.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Kd,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},e.prototype.applyTargetChange=function(n){var a=this;n&&(n.addedDocuments.forEach(function(e){return a._syncedDocuments=a._syncedDocuments.add(e)}),n.modifiedDocuments.forEach(function(e){return Nr(a._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),n.removedDocuments.forEach(function(e){return a._syncedDocuments=a._syncedDocuments.delete(e)}),this.current=n.current)},e.prototype.updateLimboDocuments=function(){var a=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Jo(),this.documentSet.forEach(function(e){a.shouldBeInLimbo(e.key)&&(a.limboDocuments=a.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){a.limboDocuments.has(e)||n.push(new Wl(e))}),this.limboDocuments.forEach(function(a){e.has(a)||n.push(new jl(a))}),n},e.prototype.synchronizeWithPersistedState=function(a,t){this._syncedDocuments=t,this.limboDocuments=Jo();var e=this.computeDocChanges(a);return this.applyChanges(e,!0)},e.prototype.computeInitialSnapshot=function(){return ca.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Wd.Local)},e}(),Kl=function(a,t,e){this.query=a,this.targetId=t,this.view=e},zl=function(e){this.key=e},$l=function(){function e(a,t,e,n){this.localStore=a,this.remoteStore=t,this.sharedClientState=e,this.currentUser=n,this.syncEngineListener=null,this.queryViewsByQuery=new vs(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new _i(Ai.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new hl,this.mutationUserCallbacks={},this.limboTargetIdGenerator=tl.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Ll.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){Nr(null!==e,"SyncEngine listener cannot be null"),Nr(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(s){return ja(this,void 0,void 0,function(){var a,d,l,p,c;return Wa(this,function(e){switch(e.label){case 0:return this.assertSubscribed("listen()"),(l=this.queryViewsByQuery.get(s))?(a=l.targetId,this.sharedClientState.addLocalQueryTarget(a),d=l.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(s)];case 2:return p=e.sent(),c=this.sharedClientState.addLocalQueryTarget(p.targetId),a=p.targetId,[4,this.initializeViewAndComputeSnapshot(p,"current"===c)];case 3:d=e.sent(),this.isPrimary&&this.remoteStore.listen(p),e.label=4;case 4:return this.syncEngineListener.onWatchChange([d]),[2,a];}})})},e.prototype.initializeViewAndComputeSnapshot=function(d,s){var l=this,p=d.query;return this.localStore.executeQuery(p).then(function(c){return l.localStore.remoteDocumentKeys(d.targetId).then(function(a){var t=new Hl(p,a),e=t.computeDocChanges(c),n=la.createSynthesizedTargetChangeForCurrentChange(d.targetId,s&&l.onlineState!==Ll.Offline),r=t.applyChanges(e,!0===l.isPrimary,n);Nr(0===r.limboChanges.length,"View returned limbo docs before target ack from the server."),Nr(!!r.snapshot,"applyChanges for new view should always return a snapshot");var i=new Kl(p,d.targetId,t);return l.queryViewsByQuery.set(p,i),l.queryViewsByTarget[d.targetId]=i,r.snapshot})})},e.prototype.synchronizeViewAndComputeSnapshot=function(a){var e=this;return this.localStore.executeQuery(a.query).then(function(t){return e.localStore.remoteDocumentKeys(a.targetId).then(function(o){return ja(e,void 0,void 0,function(){var n;return Wa(this,function(){return n=a.view.synchronizeWithPersistedState(t,o),this.isPrimary&&this.updateTrackedLimbos(a.targetId,n.limboChanges),[2,n]})})})})},e.prototype.unlisten=function(a){return ja(this,void 0,void 0,function(){var t=this,n;return Wa(this,function(e){switch(e.label){case 0:return this.assertSubscribed("unlisten()"),Nr(!!(n=this.queryViewsByQuery.get(a)),"Trying to unlisten on query not found:"+a),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(n.targetId),this.sharedClientState.isActiveQueryTarget(n.targetId)?[3,2]:[4,this.localStore.releaseQuery(a,!1).then(function(){t.sharedClientState.clearQueryState(n.targetId),t.remoteStore.unlisten(n.targetId),t.removeAndCleanupQuery(n)}).catch(Ns)]):[3,3];case 1:e.sent(),e.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(n),[4,this.localStore.releaseQuery(a,!0)];case 4:e.sent(),e.label=5;case 5:return[2];}})})},e.prototype.write=function(a,o){var e=this;return this.assertSubscribed("write()"),this.localStore.localWrite(a).then(function(n){return e.sharedClientState.addPendingMutation(n.batchId),e.addMutationCallback(n.batchId,o),e.emitNewSnapsAndNotifyLocalStore(n.changes)}).then(function(){return e.remoteStore.fillWritePipeline()})},e.prototype.wrapUpdateFunctionError=function(e){return e},e.prototype.runTransaction=function(a,e){var o=this;void 0===e&&(e=5),Nr(0<=e,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=a(r);return!hi(e)&&e.catch&&e.then?e.catch(function(e){return Promise.reject(o.wrapUpdateFunctionError(e))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(e){return Promise.reject(o.wrapUpdateFunctionError(e))}}().then(function(n){return r.commit().then(function(){return n}).catch(function(n){return 0===e?Promise.reject(n):o.runTransaction(a,e-1)})})},e.prototype.applyRemoteEvent=function(n){var a=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(n).then(function(e){return Br(n.targetChanges,function(o,t){var e=a.limboResolutionsByTarget[o];e&&(Nr(1>=t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?e.receivedDocument=!0:0<t.modifiedDocuments.size?Nr(e.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(Nr(e.receivedDocument,"Received remove for limbo target document without add."),e.receivedDocument=!1))}),a.emitNewSnapsAndNotifyLocalStore(e,n)}).catch(Ns)},e.prototype.applyOnlineStateChange=function(a,e){if(this.isPrimary&&e===Rl.RemoteStore||!this.isPrimary&&e===Rl.SharedClientState){var o=[];this.queryViewsByQuery.forEach(function(r,t){var e=t.view.applyOnlineStateChange(a);Nr(0===e.limboChanges.length,"OnlineState should not affect limbo documents."),e.snapshot&&o.push(e.snapshot)}),this.syncEngineListener.onOnlineStateChange(a),this.syncEngineListener.onWatchChange(o),this.onlineState=a,this.isPrimary&&this.sharedClientState.setOnlineState(a)}},e.prototype.rejectListen=function(d,l){return ja(this,void 0,void 0,function(){var t=this,s,p,c,u,h,m;return Wa(this,function(e){switch(e.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(d,"rejected",l),s=this.limboResolutionsByTarget[d],(p=s&&s.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(p),delete this.limboResolutionsByTarget[d],c=(c=new _i(Ai.comparator)).insert(p,new Mi(p,bo.forDeletedDoc())),u=Jo().add(p),h=new ha(bo.MIN,{},new To(ai),c,u),[2,this.applyRemoteEvent(h)]):[3,1];case 1:return Nr(!!(m=this.queryViewsByTarget[d]),"Unknown targetId: "+d),[4,this.localStore.releaseQuery(m.query,!1).then(function(){return t.removeAndCleanupQuery(m)}).catch(Ns)];case 2:e.sent(),this.syncEngineListener.onWatchError(m.query,l),e.label=3;case 3:return[2];}})})},e.prototype.applyBatchState=function(a,n,o){return ja(this,void 0,void 0,function(){var r;return Wa(this,function(e){switch(e.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(a)];case 1:return null===(r=e.sent())?(vr("SyncEngine","Cannot apply mutation batch with id: "+a),[2]):"pending"===n?[4,this.remoteStore.fillWritePipeline()]:[3,3];case 2:return e.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(this.processUserCallback(a,o||null),this.localStore.removeCachedMutationBatchMetadata(a)):Ar("Unknown batchState: "+n),e.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return e.sent(),[2];}})})},e.prototype.applySuccessfulWrite=function(a){var o=this;this.assertSubscribed("applySuccessfulWrite()");var e=a.batch.batchId;return this.processUserCallback(e,null),this.localStore.acknowledgeBatch(a).then(function(n){return o.sharedClientState.updateMutationState(e,"acknowledged"),o.emitNewSnapsAndNotifyLocalStore(n)}).catch(Ns)},e.prototype.rejectFailedWrite=function(a,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(a,e),this.localStore.rejectBatch(a).then(function(o){return n.sharedClientState.updateMutationState(a,"rejected",e),n.emitNewSnapsAndNotifyLocalStore(o)}).catch(Ns)},e.prototype.addMutationCallback=function(a,t){var e=this.mutationUserCallbacks[this.currentUser.toKey()];e||(e=new _i(ai)),e=e.insert(a,t),this.mutationUserCallbacks[this.currentUser.toKey()]=e},e.prototype.processUserCallback=function(a,t){var e=this.mutationUserCallbacks[this.currentUser.toKey()];if(e){var o=e.get(a);o&&(Nr(a===e.minKey(),"Mutation callbacks processed out-of-order?"),t?o.reject(t):o.resolve(),e=e.remove(a)),this.mutationUserCallbacks[this.currentUser.toKey()]=e}},e.prototype.removeAndCleanupQuery=function(a){var o=this;if(this.sharedClientState.removeLocalQueryTarget(a.targetId),this.queryViewsByQuery.delete(a.query),delete this.queryViewsByTarget[a.targetId],this.isPrimary){var e=this.limboDocumentRefs.referencesForId(a.targetId);this.limboDocumentRefs.removeReferencesForId(a.targetId),e.forEach(function(e){o.limboDocumentRefs.containsKey(e)||o.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(n){var t=this.limboTargetsByKey.get(n);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(n),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(a,t){for(var e=0,o=t,r;e<o.length;e++)r=o[e],r instanceof jl?(this.limboDocumentRefs.addReference(r.key,a),this.trackLimboChange(r)):r instanceof Wl?(vr("SyncEngine","Document no longer in limbo: "+r.key),this.limboDocumentRefs.removeReference(r.key,a),this.limboDocumentRefs.containsKey(r.key)||this.removeLimboTarget(r.key)):Ar("Unknown limbo change: "+JSON.stringify(r))},e.prototype.trackLimboChange=function(a){var t=a.key;if(!this.limboTargetsByKey.get(t)){vr("SyncEngine","New document in limbo: "+t);var e=this.limboTargetIdGenerator.next(),n=ro.atPath(t.path);this.limboResolutionsByTarget[e]=new zl(t),this.remoteStore.listen(new Bd(n,e,wo.LimboResolution,Yd.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,e)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(t,d){return ja(this,void 0,void 0,function(){var l=this,s,p,n;return Wa(this,function(e){switch(e.label){case 0:return s=[],p=[],n=[],this.queryViewsByQuery.forEach(function(e,a){n.push(Promise.resolve().then(function(){var n=a.view.computeDocChanges(t);return n.needsRefill?l.localStore.executeQuery(a.query).then(function(e){return a.view.computeDocChanges(e,n)}):n}).then(function(o){var t=d&&d.targetChanges[a.targetId],e=a.view.applyChanges(o,!0===l.isPrimary,t);if(l.updateTrackedLimbos(a.targetId,e.limboChanges),e.snapshot){l.isPrimary&&l.sharedClientState.updateQueryState(a.targetId,e.snapshot.fromCache?"not-current":"current"),s.push(e.snapshot);var n=Ul.fromSnapshot(a.targetId,e.snapshot);p.push(n)}}))}),[4,Promise.all(n)];case 1:return e.sent(),this.syncEngineListener.onWatchChange(s),[4,this.localStore.notifyLocalViewChanges(p)];case 2:return e.sent(),[2];}})})},e.prototype.assertSubscribed=function(e){Nr(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(a){return ja(this,void 0,void 0,function(){var o,r;return Wa(this,function(e){switch(e.label){case 0:return o=!this.currentUser.isEqual(a),this.currentUser=a,o?[4,this.localStore.handleUserChange(a)]:[3,3];case 1:return r=e.sent(),this.sharedClientState.handleUserChange(a,r.removedBatchIds,r.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(r.affectedDocuments)];case 2:e.sent(),e.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return e.sent(),[2];}})})},e.prototype.applyPrimaryState=function(d){return ja(this,void 0,void 0,function(){var l=this,p,c,u,h,m,g,y;return Wa(this,function(e){switch(e.label){case 0:return!0!==d||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return e.sent(),p=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(p.toArray())];case 2:for(c=e.sent(),u=0,h=c;u<h.length;u++)m=h[u],this.remoteStore.listen(m);return[3,7];case 3:return!1!==d||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,g=[],y=Promise.resolve(),qr(this.queryViewsByTarget,function(n,t){l.sharedClientState.isLocalQueryTarget(n)?g.push(n):y=y.then(function(){return l.unlisten(t.query)}),l.remoteStore.unlisten(t.targetId)}),[4,y]);case 4:return e.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(g)];case 5:return e.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:e.sent(),e.label=7;case 7:return[2];}})})},e.prototype.resetLimboDocuments=function(){var n=this;qr(this.limboResolutionsByTarget,function(e){n.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new _i(Ai.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(d){for(var t=this,e=Promise.resolve(),l=[],a=[],s=function(s){e=e.then(function(){return ja(t,void 0,void 0,function(){var o,d,p,c;return Wa(this,function(e){switch(e.label){case 0:return(d=this.queryViewsByTarget[s])?[4,this.localStore.releaseQuery(d.query,!0)]:[3,4];case 1:return e.sent(),[4,this.localStore.allocateQuery(d.query)];case 2:return o=e.sent(),[4,this.synchronizeViewAndComputeSnapshot(d)];case 3:return(p=e.sent()).snapshot&&a.push(p.snapshot),[3,8];case 4:return Nr(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(s)];case 5:return Nr(!!(c=e.sent()),"Query data for target "+s+" not found"),[4,this.localStore.allocateQuery(c)];case 6:return o=e.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 7:e.sent(),e.label=8;case 8:return l.push(o),[2];}})})})},r=0,p=d;r<p.length;r++)s(p[r]);return e.then(function(){return t.syncEngineListener.onWatchChange(a),l})},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(a,r,o){return ja(this,void 0,void 0,function(){var t=this,n;return Wa(this,function(e){switch(e.label){case 0:if(this.isPrimary)return vr("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[a])return[3,5];return"current"===r||"not-current"===r?[3,1]:"rejected"===r?[3,2]:[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(o){return ja(t,void 0,void 0,function(){var n;return Wa(this,function(e){switch(e.label){case 0:return n=ha.createSynthesizedRemoteEventForCurrentChange(a,"current"===r),[4,this.emitNewSnapsAndNotifyLocalStore(o,n)];case 1:return e.sent(),[2];}})})},function(a){return ja(t,void 0,void 0,function(){var o;return Wa(this,function(n){switch(n.label){case 0:return(t=a).code!==_r.DATA_LOSS||t.message!=="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views."?[3,2]:(o=[],qr(this.queryViewsByTarget,function(e){return o.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)]);case 1:return n.sent(),[3,3];case 2:throw a;case 3:return[2];}var t})})})];case 2:return n=this.queryViewsByTarget[a],this.removeAndCleanupQuery(n),[4,this.localStore.releaseQuery(n.query,!0)];case 3:return e.sent(),this.syncEngineListener.onWatchError(n.query,o),[3,5];case 4:Ar("Unexpected target state: "+r),e.label=5;case 5:return[2];}})})},e.prototype.applyActiveTargetsChange=function(d,l){return ja(this,void 0,void 0,function(){var t=this,p,h,m,g,y,f,b,v,T;return Wa(this,function(e){switch(e.label){case 0:if(!this.isPrimary)return[2];p=0,h=d,e.label=1;case 1:return p<h.length?(T=h[p],Nr(!this.queryViewsByTarget[T],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(T)]):[3,6];case 2:return Nr(!!(m=e.sent()),"Query data for active target "+T+" not found"),[4,this.localStore.allocateQuery(m)];case 3:return g=e.sent(),[4,this.initializeViewAndComputeSnapshot(g,!1)];case 4:e.sent(),this.remoteStore.listen(g),e.label=5;case 5:return p++,[3,1];case 6:y=function(a){var e;return Wa(this,function(n){switch(n.label){case 0:return(e=f.queryViewsByTarget[a])?[4,f.localStore.releaseQuery(e.query,!1).then(function(){t.remoteStore.unlisten(a),t.removeAndCleanupQuery(e)}).catch(Ns)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2];}})},f=this,b=0,v=l,e.label=7;case 7:return b<v.length?(T=v[b],[5,y(T)]):[3,10];case 8:e.sent(),e.label=9;case 9:return b++,[3,7];case 10:return[2];}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(n){var t=this.limboResolutionsByTarget[n];return t&&t.receivedDocument?Jo().add(t.key):this.queryViewsByTarget[n]?this.queryViewsByTarget[n].view.syncedDocuments:Jo()},e}(),Ql=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Gl=function(){function s(a,t,e,n){this.user=a,this.batchId=t,this.state=e,Nr(void 0!==(this.error=n)==("rejected"===e),"MutationMetadata must contain an error iff state is 'rejected'")}return s.fromWebStorageEntry=function(a,t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["pending","acknowledged","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),d;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(d=new Lr(n.error.code,n.error.message)),r?new s(a,t,n.state,d):(Dr("SharedClientState","Failed to parse mutation state for ID '"+t+"': "+e),null)},s.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},s}(),Xl=function(){function a(a,t,e){this.targetId=a,this.state=t,Nr(void 0!==(this.error=e)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return a.fromWebStorageEntry=function(o,t){var e=JSON.parse(t),n="object"==typeof e&&-1!==["not-current","current","rejected"].indexOf(e.state)&&(void 0===e.error||"object"==typeof e.error),s;return n&&e.error&&(n="string"==typeof e.error.message&&"string"==typeof e.error.code)&&(s=new Lr(e.error.code,e.error.message)),n?new a(o,e.state,s):(Dr("SharedClientState","Failed to parse target state for ID '"+o+"': "+t),null)},a.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},a}(),Yl=function(){function s(n,t){this.clientId=n,this.activeTargetIds=t}return s.fromWebStorageEntry=function(a,t){for(var e=JSON.parse(t),n="object"==typeof e&&e.activeTargetIds instanceof Array,d=Zo(),l=0;n&&l<e.activeTargetIds.length;++l)n=io(e.activeTargetIds[l]),d=d.add(e.activeTargetIds[l]);return n?new s(a,d):(Dr("SharedClientState","Failed to parse client data for instance '"+a+"': "+t),null)},s}(),Jl=function(){function a(n,t){this.clientId=n,this.onlineState=t}return a.fromWebStorageEntry=function(n){var t=JSON.parse(n);return"object"==typeof t&&void 0!==Ll[t.onlineState]&&"string"==typeof t.clientId?new a(t.clientId,Ll[t.onlineState]):(Dr("SharedClientState","Failed to parse online state: "+n),null)},a}(),Zl=function(){function e(){this.activeTargetIds=Zo()}return e.prototype.addQueryTarget=function(e){Nr(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),ep=function(){function s(a,t,e,n,r){if(this.queue=a,this.platform=t,this.persistenceKey=e,this.localClientId=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!s.isAvailable(this.platform))throw new Lr(_r.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var i=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=r,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+e,this.activeClients[this.localClientId]=new Zl,this.clientStateKeyRe=new RegExp("^firestore_clients_"+i+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+i+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+i+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+e,this.platform.window.addEventListener("storage",this.storageListener)}return s.isAvailable=function(e){return e.window&&null!=e.window.localStorage},s.prototype.start=function(){return ja(this,void 0,void 0,function(){var t=this,d,p,m,g,y,f,b,v,T,_,E;return Wa(this,function(e){switch(e.label){case 0:return Nr(!this.started,"WebStorageSharedClientState already started"),Nr(null!==this.syncEngine,"syncEngine property must be set before calling start()"),Nr(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(d=e.sent(),p=0,m=d;p<m.length;p++)(g=m[p])!==this.localClientId&&(y=this.getItem(this.toWebStorageClientStateKey(g)))&&(f=Yl.fromWebStorageEntry(g,y))&&(this.activeClients[f.clientId]=f);for(this.persistClientState(),(b=this.storage.getItem(this.onlineStateKey))&&(v=this.fromWebStorageOnlineState(b))&&this.handleOnlineStateEvent(v),T=0,_=this.earlyEvents;T<_.length;T++)E=_[T],this.handleWebStorageEvent(E);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return t.shutdown()}),this.started=!0,[2];}})})},s.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},s.prototype.getAllActiveQueryTargets=function(){var a=Zo();return Br(this.activeClients,function(n,t){a=a.unionWith(t.activeTargetIds)}),a},s.prototype.isActiveQueryTarget=function(n){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(n))return!0;return!1},s.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},s.prototype.updateMutationState=function(a,t,e){this.persistMutationState(a,t,e),this.removeMutationState(a)},s.prototype.addLocalQueryTarget=function(a){var t="not-current";if(this.isActiveQueryTarget(a)){var o=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(a));if(o){var n=Xl.fromWebStorageEntry(a,o);n&&(t=n.state)}}return this.localClientState.addQueryTarget(a),this.persistClientState(),t},s.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},s.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},s.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},s.prototype.updateQueryState=function(a,t,e){this.persistQueryTargetState(a,t,e)},s.prototype.handleUserChange=function(a,t,e){var n=this;t.forEach(function(e){n.removeMutationState(e)}),this.currentUser=a,e.forEach(function(e){n.addPendingMutation(e)})},s.prototype.setOnlineState=function(e){this.persistOnlineState(e)},s.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},s.prototype.getItem=function(n){var t=this.storage.getItem(n);return vr("SharedClientState","READ",n,t),t},s.prototype.setItem=function(n,t){vr("SharedClientState","SET",n,t),this.storage.setItem(n,t)},s.prototype.removeItem=function(e){vr("SharedClientState","REMOVE",e),this.storage.removeItem(e)},s.prototype.handleWebStorageEvent=function(d){var e=this;if(d.storageArea===this.storage){if(vr("SharedClientState","EVENT",d.key,d.newValue),d.key===this.localClientStorageKey)return void Dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return ja(e,void 0,void 0,function(){var t,s,l,p,c,u;return Wa(this,function(){if(!this.started)return this.earlyEvents.push(d),[2];if(null===d.key)return[2];if(this.clientStateKeyRe.test(d.key)){if(null==d.newValue)return s=this.fromWebStorageClientStateKey(d.key),[2,this.handleClientStateEvent(s,null)];if(t=this.fromWebStorageClientState(d.key,d.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(d.key)){if(null!==d.newValue&&(l=this.fromWebStorageMutationMetadata(d.key,d.newValue)))return[2,this.handleMutationBatchEvent(l)];}else if(this.queryTargetKeyRe.test(d.key)){if(null!==d.newValue&&(p=this.fromWebStorageQueryTargetMetadata(d.key,d.newValue)))return[2,this.handleQueryTargetEvent(p)];}else if(d.key!==this.onlineStateKey)d.key===this.sequenceNumberKey&&(Nr(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(u=function(a){var t=Yd.INVALID;if(null!=a)try{var o=JSON.parse(a);Nr("number"==typeof o,"Found non-numeric sequence number"),t=o}catch(e){Dr("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(d.newValue))!==Yd.INVALID&&this.sequenceNumberHandler(u));else if(null!==d.newValue&&(c=this.fromWebStorageOnlineState(d.newValue)))return[2,this.handleOnlineStateEvent(c)];return[2]})})})}},Object.defineProperty(s.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),s.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},s.prototype.persistMutationState=function(a,t,e){var n=new Gl(this.currentUser,a,t,e),o=this.toWebStorageMutationBatchKey(a);this.setItem(o,n.toWebStorageJSON())},s.prototype.removeMutationState=function(n){var t=this.toWebStorageMutationBatchKey(n);this.removeItem(t)},s.prototype.persistOnlineState=function(n){var t={clientId:this.localClientId,onlineState:Ll[n]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},s.prototype.persistQueryTargetState=function(a,t,e){var n=this.toWebStorageQueryTargetMetadataKey(a),o=new Xl(a,t,e);this.setItem(n,o.toWebStorageJSON())},s.prototype.toWebStorageClientStateKey=function(e){return Nr(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+this.persistenceKey+"_"+e},s.prototype.toWebStorageQueryTargetMetadataKey=function(e){return"firestore_targets_"+this.persistenceKey+"_"+e},s.prototype.toWebStorageMutationBatchKey=function(n){var t="firestore_mutations_"+this.persistenceKey+"_"+n;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},s.prototype.fromWebStorageClientStateKey=function(n){var t=this.clientStateKeyRe.exec(n);return t?t[1]:null},s.prototype.fromWebStorageClientState=function(a,t){var e=this.fromWebStorageClientStateKey(a);return Nr(null!==e,"Cannot parse client state key '"+a+"'"),Yl.fromWebStorageEntry(e,t)},s.prototype.fromWebStorageMutationMetadata=function(a,t){var e=this.mutationBatchKeyRe.exec(a);Nr(null!==e,"Cannot parse mutation batch key '"+a+"'");var n=+e[1],o=void 0===e[2]?null:e[2];return Gl.fromWebStorageEntry(new Ql(o),n,t)},s.prototype.fromWebStorageQueryTargetMetadata=function(a,t){var e=this.queryTargetKeyRe.exec(a);Nr(null!==e,"Cannot parse query target key '"+a+"'");var n=+e[1];return Xl.fromWebStorageEntry(n,t)},s.prototype.fromWebStorageOnlineState=function(e){return Jl.fromWebStorageEntry(e)},s.prototype.handleMutationBatchEvent=function(t){return ja(this,void 0,void 0,function(){return Wa(this,function(){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]:(vr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},s.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},s.prototype.handleClientStateEvent=function(s,t){var d=this,n=this.getAllActiveQueryTargets();t?this.activeClients[s]=t:delete this.activeClients[s];var r=this.getAllActiveQueryTargets(),i=[],o=[];return r.forEach(function(t){return ja(d,void 0,void 0,function(){return Wa(this,function(){return n.has(t)||i.push(t),[2]})})}),n.forEach(function(t){return ja(d,void 0,void 0,function(){return Wa(this,function(){return r.has(t)||o.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(i,o)},s.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},s}(),tp=function(){function e(){this.localState=new Zl,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(){},e.prototype.updateMutationState=function(){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(n,t){this.queryState[n]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Zl,Promise.resolve()},e.prototype.handleUserChange=function(){},e.prototype.setOnlineState=function(){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(){},e}(),np=function(){function e(n,t){this.cacheSizeBytes=n,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return il.withCacheSize(this.cacheSizeBytes)},e}(),ap=function(){},op=function(){function e(a,t,e,n){this.platform=a,this.databaseInfo=t,this.credentials=e,this.asyncQueue=n,this.clientId=xr.newId(),this._clientShutdown=!1}return e.prototype.start=function(a){var s=this;this.verifyNotShutdown();var t=new Va,n=new Va,r=!1;return this.credentials.setChangeListener(function(o){r?s.asyncQueue.enqueueAndForget(function(){return s.handleCredentialChange(o)}):(r=!0,s.initializePersistence(a,n,o).then(function(e){return s.initializeRest(o,e)}).then(t.resolve,t.reject))}),this.asyncQueue.enqueueAndForget(function(){return t.promise}),n.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(a,o,e){var n=this;return a instanceof np?this.startIndexedDbPersistence(e,a).then(function(e){return o.resolve(),e}).catch(function(e){if(o.reject(e),!n.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),n.startMemoryPersistence()}):(o.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof Lr?e.code===_r.FAILED_PRECONDITION||e.code===_r.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},e.prototype.verifyNotShutdown=function(){if(this._clientShutdown)throw new Lr(_r.FAILED_PRECONDITION,"The client has already been shutdown.")},e.prototype.startIndexedDbPersistence=function(s,r){var e=this,i=pl.buildStoragePrefix(this.databaseInfo),o=new Ia(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return ja(e,void 0,void 0,function(){var a,d;return Wa(this,function(e){switch(e.label){case 0:if(r.synchronizeTabs&&!ep.isAvailable(this.platform))throw new Lr(_r.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return d=r.lruParams(),r.synchronizeTabs?(this.sharedClientState=new ep(this.asyncQueue,this.platform,i,this.clientId,s),[4,pl.createMultiClientIndexedDbPersistence(i,this.clientId,this.platform,this.asyncQueue,o,d,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return a=e.sent(),[3,4];case 2:return this.sharedClientState=new tp,[4,pl.createIndexedDbPersistence(i,this.clientId,this.platform,this.asyncQueue,o,d)];case 3:a=e.sent(),e.label=4;case 4:return[2,(this.persistence=a).referenceDelegate.garbageCollector];}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=Tl.createEagerPersistence(this.clientId),this.sharedClientState=new tp,Promise.resolve(null)},e.prototype.initializeRest=function(d,l){var e=this;return vr("FirestoreClient","Initializing. user=",d.uid),this.platform.loadConnection(this.databaseInfo).then(function(p){return ja(e,void 0,void 0,function(){var s=this,a,c,u,h,m;return Wa(this,function(e){switch(e.label){case 0:return this.localStore=new gl(this.persistence,d),l&&(this.lruScheduler=new sl(l,this.asyncQueue,this.localStore)),a=this.platform.newConnectivityMonitor(),c=this.platform.newSerializer(this.databaseInfo.databaseId),u=new xl(this.asyncQueue,p,this.credentials,c),h=function(e){return s.syncEngine.applyOnlineStateChange(e,Rl.RemoteStore)},m=function(e){return s.syncEngine.applyOnlineStateChange(e,Rl.SharedClientState)},this.remoteStore=new Bl(this.localStore,u,this.asyncQueue,h,a),this.syncEngine=new $l(this.localStore,this.remoteStore,this.sharedClientState,d),this.sharedClientState.onlineStateHandler=m,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Fl(this.syncEngine),[4,this.sharedClientState.start()];case 1:return e.sent(),[4,this.remoteStore.start()];case 2:return e.sent(),[4,this.persistence.setPrimaryStateListener(function(n){return ja(s,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(n)];case 1:return e.sent(),this.lruScheduler&&(n&&!this.lruScheduler.started?this.lruScheduler.start():n||this.lruScheduler.stop()),[2];}})})})];case 3:return e.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return ja(s,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return[4,this.shutdown()];case 1:return e.sent(),[2];}})})})];case 4:return e.sent(),[2];}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),vr("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.shutdown=function(){var e=this;return this.asyncQueue.enqueue(function(){return ja(e,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return this._clientShutdown?[3,4]:(this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()]);case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:e.sent(),this.credentials.removeChangeListener(),this._clientShutdown=!0,e.label=4;case 4:return[2];}})})})},e.prototype.listen=function(a,t,e){var n=this;this.verifyNotShutdown();var o=new Vl(a,t,e);return this.asyncQueue.enqueueAndForget(function(){return n.eventMgr.listen(o)}),o},e.prototype.unlisten=function(n){var t=this;this.verifyNotShutdown(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(n)})},e.prototype.getDocumentFromLocalCache=function(n){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(n)}).then(function(e){if(e instanceof Ri)return e;if(e instanceof Mi)return null;throw new Lr(_r.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(a){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(a)}).then(function(o){var t=Jo(),e=new Hl(a,t),n=e.computeDocChanges(o);return e.applyChanges(n,!1).snapshot})},e.prototype.write=function(a){var t=this;this.verifyNotShutdown();var e=new Va;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(a,e)}),e.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},Object.defineProperty(e.prototype,"clientShutdown",{get:function(){return this._clientShutdown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(n){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return ja(t,void 0,void 0,function(){return Wa(this,function(){return[2]})})}).then(function(){return t.syncEngine.runTransaction(n)})},e}(),rp=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(a,t){var e=this;this.muted||setTimeout(function(){e.muted||a(t)},0)},e}(),ip=function(){function n(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];!function(a,t,e,n){if(!(t instanceof Array)||t.length<n)throw new Lr(_r.INVALID_ARGUMENT,"Function "+a+"() requires its "+e+" argument to be an array with at least "+oi(n,"element")+".")}("FieldPath",a,"fieldNames",1);for(var o=0;o<a.length;++o)if(Wr("FieldPath","string",o,a[o]),0===a[o].length)throw new Lr(_r.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ni(a)}return n.documentId=function(){return n._DOCUMENT_ID},n.prototype.isEqual=function(e){if(!(e instanceof n))throw ti("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},n._DOCUMENT_ID=new n(Ni.keyField().canonicalString()),n}(),sp=/[~\*\/\[\]]/,dp=function(n,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+n}},lp=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){Nr(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(Ql.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){Nr(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),pp=function(){function e(n){var t=this;this.app=n,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var a=this;Nr(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(a.tokenCounter!==e)throw new Lr(_r.ABORTED,"getToken aborted due to token change.");return n?(Nr("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new dp(n.accessToken,a.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){Nr(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){Nr(null!=this.tokenListener,"removeChangeListener() called twice"),Nr(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return Nr(null===e||"string"==typeof e,"Received invalid UID: "+e),new Ql(e)},e}(),cp=function(){function e(n,t){this.gapi=n,this.sessionIndex=t,this.type="FirstParty",this.user=Ql.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var n={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(n.Authorization=t),n},enumerable:!0,configurable:!0}),e}(),up=function(){function e(n,t){this.gapi=n,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new cp(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Ql.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}(),hp=function(){function e(e){this._methodName=e}return e.delete=function(){return Vr("FieldValue.delete",arguments),mp.instance},e.serverTimestamp=function(){return Vr("FieldValue.serverTimestamp",arguments),gp.instance},e.arrayUnion=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return jr("FieldValue.arrayUnion",arguments,1),new yp(n)},e.arrayRemove=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return jr("FieldValue.arrayRemove",arguments,1),new fp(n)},e.increment=function(e){return Wr("FieldValue.increment","number",1,e),Ur("FieldValue.increment",arguments,1),new bp(e)},e.prototype.isEqual=function(e){return this===e},e}(),mp=function(n){function t(){return n.call(this,"FieldValue.delete")||this}return Pa(t,n),t.instance=new t,t}(hp),gp=function(n){function t(){return n.call(this,"FieldValue.serverTimestamp")||this}return Pa(t,n),t.instance=new t,t}(hp),yp=function(a){function e(n){var t=a.call(this,"FieldValue.arrayUnion")||this;return t._elements=n,t}return Pa(e,a),e}(hp),fp=function(a){function e(n){var t=a.call(this,"FieldValue.arrayRemove")||this;return t._elements=n,t}return Pa(e,a),e}(hp),bp=function(a){function e(n){var t=a.call(this,"FieldValue.increment")||this;return t._operand=n,t}return Pa(e,a),e}(hp),vp=Rr(hp,"Use FieldValue.<field>() instead."),Tp=/^__.*__$/,_p=function(){function e(a,t,e){this.data=a,this.fieldMask=t,this.fieldTransforms=e}return e.prototype.toMutations=function(a,t){var e=[];return null===this.fieldMask?e.push(new Ro(a,this.data,t)):e.push(new Mo(a,this.data,this.fieldMask,t)),0<this.fieldTransforms.length&&e.push(new Oo(a,this.fieldTransforms)),e},e}(),Ep=function(){function e(a,t,e){this.data=a,this.fieldMask=t,this.fieldTransforms=e}return e.prototype.toMutations=function(a,t){var e=[new Mo(a,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&e.push(new Oo(a,this.fieldTransforms)),e},e}(),kp,Cp;(Cp=kp||(kp={}))[Cp.Set=0]="Set",Cp[Cp.Update=1]="Update",Cp[Cp.MergeSet=2]="MergeSet",Cp[Cp.Argument=3]="Argument";var Sp=function(){function a(a,t,e,n,r,i){this.dataSource=a,this.methodName=t,this.path=e,this.arrayElement=n,void 0===r&&this.validatePath(),this.arrayElement=void 0!==n&&n,this.fieldTransforms=r||[],this.fieldMask=i||[]}return a.prototype.childContextForField=function(o){var t=null==this.path?null:this.path.child(o),e=new a(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return e.validatePathSegment(o),e},a.prototype.childContextForFieldPath=function(o){var t=null==this.path?null:this.path.child(o),e=new a(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return e.validatePath(),e},a.prototype.childContextForArray=function(){return new a(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},a.prototype.createError=function(n){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Lr(_r.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+n+t)},a.prototype.contains=function(n){return void 0!==this.fieldMask.find(function(e){return n.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return n.isPrefixOf(e.field)})},a.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},a.prototype.validatePathSegment=function(e){if(ed(this.dataSource)&&Tp.test(e))throw this.createError("Document fields cannot begin and end with __")},a}(),Ip=function(n,t){this.databaseId=n,this.key=t},wp=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(a,t){var e=new Sp(kp.Set,a,Ni.EMPTY_PATH);nd("Data must be an object, but it was:",e,t);var n=this.parseData(t,e);return new _p(n,null,e.fieldTransforms)},e.prototype.parseMergeData=function(d,t,e){var n=new Sp(kp.MergeSet,d,Ni.EMPTY_PATH);nd("Data must be an object, but it was:",n,t);var r=this.parseData(t,n),a,p;if(e){for(var m=new To(Ni.comparator),g=0,y=e;g<y.length;g++){var c=y[g],h=void 0;if(c instanceof ip)h=c._internalPath;else{if("string"!=typeof c)throw Ar("Expected stringOrFieldPath to be a string or a FieldPath");h=od(d,c)}if(!n.contains(h))throw new Lr(_r.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");m=m.add(h)}a=Co.fromSet(m),p=n.fieldTransforms.filter(function(e){return a.covers(e.field)})}else a=Co.fromArray(n.fieldMask),p=n.fieldTransforms;return new _p(r,a,p)},e.prototype.parseUpdateData=function(d,n){var o=this,a=new Sp(kp.Update,d,Ni.EMPTY_PATH);nd("Data must be an object, but it was:",a,n);var s=new To(Ni.comparator),t=Ji.EMPTY;Br(n,function(l,p){var c=od(d,l),n=a.childContextForFieldPath(c);if((p=o.runPreConverter(p,n))instanceof mp)s=s.add(c);else{var r=o.parseData(p,n);null!=r&&(s=s.add(c),t=t.set(c,r))}});var r=Co.fromSet(s);return new Ep(t,r,a.fieldTransforms)},e.prototype.parseUpdateVarargs=function(m,t,e,n){var r=new Sp(kp.Update,m,Ni.EMPTY_PATH),i=[ad(m,t)],o=[e];if(0!=n.length%2)throw new Lr(_r.INVALID_ARGUMENT,"Function "+m+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<n.length;a+=2)i.push(ad(m,n[a])),o.push(n[a+1]);var g=new To(Ni.comparator),y=Ji.EMPTY;for(a=0;a<i.length;++a){var b=i[a],h=r.childContextForFieldPath(b),l=this.runPreConverter(o[a],h);if(l instanceof mp)g=g.add(b);else{var f=this.parseData(l,h);null!=f&&(g=g.add(b),y=y.set(b,f))}}var p=Co.fromSet(g);return new Ep(y,p,r.fieldTransforms)},e.prototype.parseQueryValue=function(a,t){var e=new Sp(kp.Argument,a,Ni.EMPTY_PATH),n=this.parseData(t,e);return Nr(null!=n,"Parsed data should not be null."),Nr(0===e.fieldTransforms.length,"Field transforms should have been disallowed."),n},e.prototype.runPreConverter=function(a,o){try{return this.preConverter(a)}catch(n){var e=rd(n);throw o.createError(e)}},e.prototype.parseData=function(n,a){if(td(n=this.runPreConverter(n,a)))return nd("Unsupported field value:",a,n),this.parseObject(n,a);if(n instanceof hp)return this.parseSentinelFieldValue(n,a),null;if(a.path&&a.fieldMask.push(a.path),n instanceof Array){if(a.arrayElement)throw a.createError("Nested arrays are not supported");return this.parseArray(n,a)}return this.parseScalarValue(n,a)},e.prototype.parseObject=function(e,a){var r=this,i=new _i(ai);return Fr(e)?a.path&&0<a.path.length&&a.fieldMask.push(a.path):Br(e,function(o,t){var e=r.parseData(t,a.childContextForField(o));null!=e&&(i=i.insert(o,e))}),new Ji(i)},e.prototype.parseArray=function(d,t){for(var e=[],n=0,l=0,p=d;l<p.length;l++){var o=p[l],a=this.parseData(o,t.childContextForArray(n));null==a&&(a=Vi.INSTANCE),e.push(a),n++}return new $i(e)},e.prototype.parseSentinelFieldValue=function(s,t){if(!ed(t.dataSource))throw t.createError(s._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(s._methodName+"() is not currently supported inside arrays");if(s instanceof mp){if(t.dataSource!==kp.MergeSet)throw t.dataSource===kp.Update?(Nr(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(s instanceof gp)t.fieldTransforms.push(new Do(t.path,Po.instance));else if(s instanceof yp){var e=this.parseArrayTransformElements(s._methodName,s._elements),d=new Lo(e);t.fieldTransforms.push(new Do(t.path,d))}else if(s instanceof fp){e=this.parseArrayTransformElements(s._methodName,s._elements);var r=new xo(e);t.fieldTransforms.push(new Do(t.path,r))}else if(s instanceof bp){var i=this.parseQueryValue("FieldValue.increment",s._operand),o=new qo(i);t.fieldTransforms.push(new Do(t.path,o))}else Ar("Unknown FieldValue type: "+s)},e.prototype.parseScalarValue=function(n,t){if(null===n)return Vi.INSTANCE;if("number"==typeof n)return io(n)?new Qi(n):new ji(n);if("boolean"==typeof n)return Bi.of(n);if("string"==typeof n)return new Gi(n);if(n instanceof Date)return new Wi(bi.fromDate(n));if(n instanceof bi)return new Wi(new bi(n.seconds,1e3*Ra(n.nanoseconds/1e3)));if(n instanceof vi)return new Xi(n);if(n instanceof si)return new Hi(n);if(n instanceof Ip)return new Yi(n.databaseId,n.key);throw t.createError("Unsupported field value: "+Jr(n))},e.prototype.parseArrayTransformElements=function(a,e){var o=this;return e.map(function(r,t){var e=new Sp(kp.Argument,a,Ni.EMPTY_PATH);return o.parseData(r,e.childContextForArray(t))})},e}(),Dp=il.COLLECTION_DISABLED,Ap=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Lr(_r.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Hr("settings","non-empty string","host",e.host),this.host=e.host,Qr("settings","boolean","ssl",e.ssl),this.ssl=Pr(e.ssl,!0);if(ei("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),Qr("settings","object","credentials",e.credentials),this.credentials=e.credentials,Qr("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?Dr("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&Dr("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=Pr(e.timestampsInSnapshots,!0),Qr("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=il.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Dp&&e.cacheSizeBytes<il.MINIMUM_CACHE_SIZE_BYTES)throw new Lr(_r.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+il.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}Qr("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),xp=function(){},Np=function(){function e(a){var t=this;this._queue=new Ua,this.INTERNAL={delete:function(){return ja(t,void 0,void 0,function(){return Wa(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.shutdown()];case 1:return e.sent(),[2];}})})}};var o=new xp;if("object"==typeof a.options){var n=a;o.firebaseApp=n,o.databaseId=e.databaseIdFromApp(n),o.persistenceKey=o.firebaseApp.name,o.credentials=new pp(n)}else{var r=a;if(!r.projectId)throw new Lr(_r.INVALID_ARGUMENT,"Must provide projectId");o.databaseId=new Ei(r.projectId,r.database),o.persistenceKey="[DEFAULT]",o.credentials=new lp}o.settings=new Ap({}),this._config=o,this._databaseId=o.databaseId}return e.prototype.settings=function(n){if(Ur("Firestore.settings",arguments,1),Wr("Firestore.settings","object",1,n),Mr(n,"persistence"))throw new Lr(_r.INVALID_ARGUMENT,"\"persistence\" is now specified with a separate call to firestore.enablePersistence().");var t=new Ap(n);if(this._firestoreClient&&!this._config.settings.isEqual(t))throw new Lr(_r.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._config.settings=t).credentials&&(this._config.credentials=function(n){if(!n)return new lp;switch(n.type){case"gapi":var t=n.client;return Nr("object"==typeof t&&null!==t&&t.auth&&t.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface"),new up(t,n.sessionIndex||"0");case"provider":return n.client;default:throw new Lr(_r.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type");}}(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(n){if(this._firestoreClient)throw new Lr(_r.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return n&&(void 0!==n.experimentalTabSynchronization&&Dr("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=Pr(void 0===n.synchronizeTabs?n.experimentalTabSynchronization:n.synchronizeTabs,!1)),this.configureClient(new np(this._config.settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,a=pl.buildStoragePrefix(this.makeDatabaseInfo()),n=new Va;return this._queue.enqueueAndForget(function(){return ja(e,void 0,void 0,function(){var o;return Wa(this,function(e){switch(e.label){case 0:if(e.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientShutdown)throw new Lr(_r.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,pl.clearPersistence(a)];case 1:return e.sent(),n.resolve(),[3,3];case 2:return o=e.sent(),n.reject(o),[3,3];case 3:return[2];}})})}),n.promise},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new ap),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new wi(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl,this._config.settings.forceLongPolling)},e.prototype.configureClient=function(n){var a=this;Nr(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),Nr(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._dataConverter=new wp(function(o){if(o instanceof Rp){var t=a._config.databaseId,e=o.firestore._config.databaseId;if(!e.isEqual(t))throw new Lr(_r.INVALID_ARGUMENT,"Document reference is for database "+e.projectId+"/"+e.database+" but should be for database "+t.projectId+"/"+t.database);return new Ip(a._config.databaseId,o._key)}return o}),this._firestoreClient=new op(Nd.getPlatform(),t,this._config.credentials,this._queue),this._firestoreClient.start(n)},e.databaseIdFromApp=function(a){var t=a.options;if(!Mr(t,"projectId"))throw new Lr(_r.INVALID_ARGUMENT,"\"projectId\" not provided in firebase.initializeApp.");var e=t.projectId;if(!e||"string"!=typeof e)throw new Lr(_r.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Ei(e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new Lr(_r.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return Ur("Firestore.collection",arguments,1),Wr("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Vp(Ci.fromString(e),this)},e.prototype.doc=function(e){return Ur("Firestore.doc",arguments,1),Wr("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Rp.forPath(Ci.fromString(e),this)},e.prototype.collectionGroup=function(e){if(Ur("Firestore.collectionGroup",arguments,1),Wr("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new Lr(_r.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new qp(new ro(Ci.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(a){var e=this;return Ur("Firestore.runTransaction",arguments,1),Wr("Firestore.runTransaction","function",1,a),this.ensureClientConfigured().transaction(function(n){return a(new Lp(e,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new Op(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(ur()){case Cr.DEBUG:return"debug";case Cr.ERROR:return"error";case Cr.SILENT:return"silent";default:return Ar("Unknown log level: "+ur());}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(Ur("Firestore.setLogLevel",arguments,1),Wr("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":hr(Cr.DEBUG);break;case"error":hr(Cr.ERROR);break;case"silent":hr(Cr.SILENT);break;default:throw new Lr(_r.INVALID_ARGUMENT,"Invalid log level: "+e);}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},e}(),Lp=function(){function e(n,t){this._firestore=n,this._transaction=t}return e.prototype.get=function(e){var a=this;Ur("Transaction.get",arguments,1);var n=ld("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(o){if(!o||1!==o.length)return Ar("Mismatch in docs returned from document lookup.");var t=o[0];if(t instanceof Mi)return new Pp(a._firestore,n._key,null,!1,!1);if(t instanceof Ri)return new Pp(a._firestore,n._key,t,!1,!1);throw Ar("BatchGetDocumentsRequest returned unexpected document type: "+t.constructor.name)})},e.prototype.set=function(a,t,e){Kr("Transaction.set",arguments,2,3);var o=ld("Transaction.set",a,this._firestore),r=(e=id("Transaction.set",e)).merge||e.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,e.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(o._key,r),this},e.prototype.update=function(s,t,e){for(var n=[],o=3,d,l;o<arguments.length;o++)n[o-3]=arguments[o];return l="string"==typeof t||t instanceof ip?(jr("Transaction.update",arguments,3),d=ld("Transaction.update",s,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,e,n)):(Ur("Transaction.update",arguments,2),d=ld("Transaction.update",s,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(d._key,l),this},e.prototype.delete=function(n){Ur("Transaction.delete",arguments,1);var t=ld("Transaction.delete",n,this._firestore);return this._transaction.delete(t._key),this},e}(),Op=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(a,t,e){Kr("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var o=ld("WriteBatch.set",a,this._firestore),r=(e=id("WriteBatch.set",e)).merge||e.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,e.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(r.toMutations(o._key,Fd.NONE)),this},e.prototype.update=function(s,t,e){for(var n=[],o=3,d,l;o<arguments.length;o++)n[o-3]=arguments[o];return this.verifyNotCommitted(),l="string"==typeof t||t instanceof ip?(jr("WriteBatch.update",arguments,3),d=ld("WriteBatch.update",s,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,e,n)):(Ur("WriteBatch.update",arguments,2),d=ld("WriteBatch.update",s,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(l.toMutations(d._key,Fd.exists(!0))),this},e.prototype.delete=function(n){Ur("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=ld("WriteBatch.delete",n,this._firestore);return this._mutations=this._mutations.concat(new _o(t._key,Fd.NONE)),this},e.prototype.commit=function(){return ja(this,void 0,void 0,function(){return Wa(this,function(){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new Lr(_r.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Rp=function(){function a(n,t){this._key=n,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return a.forPath=function(n,t){if(0!=n.length%2)throw new Lr(_r.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+n.canonicalString()+" has "+n.length);return new a(new Ai(n),t)},Object.defineProperty(a.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"parent",{get:function(){return new Vp(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),a.prototype.collection=function(n){if(Ur("DocumentReference.collection",arguments,1),Wr("DocumentReference.collection","non-empty string",1,n),!n)throw new Lr(_r.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=Ci.fromString(n);return new Vp(this._key.path.child(t),this.firestore)},a.prototype.isEqual=function(e){if(!(e instanceof a))throw ti("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},a.prototype.set=function(a,t){Kr("DocumentReference.set",arguments,1,2);var o=(t=id("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",a,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",a);return this._firestoreClient.write(o.toMutations(this._key,Fd.NONE))},a.prototype.update=function(a,t){for(var e=[],o=2,r;o<arguments.length;o++)e[o-2]=arguments[o];return r="string"==typeof a||a instanceof ip?(jr("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",a,t,e)):(Ur("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",a)),this._firestoreClient.write(r.toMutations(this._key,Fd.exists(!0)))},a.prototype.delete=function(){return Ur("DocumentReference.delete",arguments,0),this._firestoreClient.write([new _o(this._key,Fd.NONE)])},a.prototype.onSnapshot=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];Kr("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},d=0,l;"object"!=typeof a[d]||Xs(a[d])||(ei("DocumentReference.onSnapshot",s=a[d],["includeMetadataChanges"]),Qr("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),d++);var p={includeMetadataChanges:s.includeMetadataChanges};return l=Xs(a[d])?a[d]:(Wr("DocumentReference.onSnapshot","function",d,a[d]),zr("DocumentReference.onSnapshot","function",d+1,a[d+1]),zr("DocumentReference.onSnapshot","function",d+2,a[d+2]),{next:a[d],error:a[d+1],complete:a[d+2]}),this.onSnapshotInternal(p,l)},a.prototype.onSnapshotInternal=function(a,s){var n=this,t=function(e){console.error("Uncaught Error in onSnapshot:",e)};s.error&&(t=s.error.bind(s));var r=new rp({next:function(a){if(s.next){Nr(1>=a.docs.size,"Too many documents returned on a document query");var t=a.docs.get(n._key);s.next(new Pp(n.firestore,n._key,t,a.fromCache,a.hasPendingWrites))}},error:t}),i=this._firestoreClient.listen(ro.atPath(this._key.path),r,a);return function(){r.mute(),n._firestoreClient.unlisten(i)}},a.prototype.get=function(a){var n=this;return Kr("DocumentReference.get",arguments,0,1),dd("DocumentReference.get",a),new Promise(function(o,e){a&&"cache"===a.source?n.firestore.ensureClientConfigured().getDocumentFromLocalCache(n._key).then(function(e){o(new Pp(n.firestore,n._key,e,!0,e instanceof Ri&&e.hasLocalMutations))},e):n.getViaSnapshotListener(o,e,a)})},a.prototype.getViaSnapshotListener=function(a,e,n){var o=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(r){o(),!r.exists&&r.metadata.fromCache?e(new Lr(_r.UNAVAILABLE,"Failed to get document because the client is offline.")):r.exists&&r.metadata.fromCache&&n&&"server"===n.source?e(new Lr(_r.UNAVAILABLE,"Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to \"server\" to retrieve the cached document.)")):a(r)},error:e})},a}(),Mp=function(){function e(n,t){this.hasPendingWrites=n,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Pp=function(){function n(a,t,e,n,o){this._firestore=a,this._key=t,this._document=e,this._fromCache=n,this._hasPendingWrites=o}return n.prototype.data=function(e){return Kr("DocumentSnapshot.data",arguments,0,1),e=sd("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,Md.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},n.prototype.get=function(a,t){if(Kr("DocumentSnapshot.get",arguments,1,2),t=sd("DocumentSnapshot.get",t),this._document){var o=this._document.data.field(ad("DocumentSnapshot.get",a));if(void 0!==o)return this.convertValue(o,Md.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(n.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ref",{get:function(){return new Rp(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return new Mp(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(e){if(!(e instanceof n))throw ti("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},n.prototype.convertObject=function(e,a){var n=this,o={};return e.forEach(function(r,t){o[r]=n.convertValue(t,a)}),o},n.prototype.convertValue=function(a,t){if(a instanceof Ji)return this.convertObject(a,t);if(a instanceof $i)return this.convertArray(a,t);if(a instanceof Yi){var e=a.value(t),n=this._firestore.ensureClientConfigured().databaseId();return a.databaseId.isEqual(n)||Dr("Document "+this._key.path+" contains a document reference within a different database ("+a.databaseId.projectId+"/"+a.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),new Rp(e,this._firestore)}return a.value(t)},n.prototype.convertArray=function(a,o){var e=this;return a.internalValue.map(function(n){return e.convertValue(n,o)})},n}(),Bp=function(a){function e(o,t,e,n,r){return a.call(this,o,t,e,n,r)||this}return Pa(e,a),e.prototype.data=function(n){var t=a.prototype.data.call(this,n);return Nr("object"==typeof t,"Document in a QueryDocumentSnapshot should exist"),t},e}(Pp),qp=function(){function s(n,t){this._query=n,this.firestore=t}return s.prototype.where=function(d,t,e){Ur("Query.where",arguments,3),Zr("Query.where",3,e);var n;!function(a,t,e,n){if(!t.some(function(e){return e===n}))throw new Lr(_r.INVALID_ARGUMENT,"Invalid value "+Jr(n)+" provided to function "+a+"() for its "+ni(e)+" argument. Acceptable values: "+t.join(", "))}("Query.where",["<","<=","==",">=",">","array-contains"],2,t);var l=ad("Query.where",d),i=co.fromString(t);if(l.isKeyField()){if(i===co.ARRAY_CONTAINS)throw new Lr(_r.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof e){if(""===e)throw new Lr(_r.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new Lr(_r.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection by FieldPath.documentId(), the value provided must be a plain document ID, but '"+e+"' contains a slash.");var o=this._query.path.child(Ci.fromString(e));if(!Ai.isDocumentKey(o))throw new Lr(_r.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+o+"' is not because it has an odd number of segments ("+o.length+").");n=new Yi(this.firestore._databaseId,new Ai(o))}else{if(!(e instanceof Rp))throw new Lr(_r.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+Jr(e)+".");n=new Yi(this.firestore._databaseId,e._key)}}else n=this.firestore._dataConverter.parseQueryValue("Query.where",e);var a=uo.create(l,i,n);return this.validateNewFilter(a),new s(this._query.addFilter(a),this.firestore)},s.prototype.orderBy=function(a,t){var e;if(Kr("Query.orderBy",arguments,1,2),zr("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)e=po.ASCENDING;else{if("desc"!==t)throw new Lr(_r.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");e=po.DESCENDING}if(null!==this._query.startAt)throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var o=ad("Query.orderBy",a),r=new yo(o,e);return this.validateNewOrderBy(r),new s(this._query.addOrderBy(r),this.firestore)},s.prototype.limit=function(e){if(Ur("Query.limit",arguments,1),Wr("Query.limit","number",1,e),0>=e)throw new Lr(_r.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new s(this._query.withLimit(e),this.firestore)},s.prototype.startAt=function(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];jr("Query.startAt",arguments,1);var o=this.boundFromDocOrFields("Query.startAt",a,t,!0);return new s(this._query.withStartAt(o),this.firestore)},s.prototype.startAfter=function(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];jr("Query.startAfter",arguments,1);var o=this.boundFromDocOrFields("Query.startAfter",a,t,!1);return new s(this._query.withStartAt(o),this.firestore)},s.prototype.endBefore=function(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];jr("Query.endBefore",arguments,1);var o=this.boundFromDocOrFields("Query.endBefore",a,t,!0);return new s(this._query.withEndAt(o),this.firestore)},s.prototype.endAt=function(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];jr("Query.endAt",arguments,1);var o=this.boundFromDocOrFields("Query.endAt",a,t,!1);return new s(this._query.withEndAt(o),this.firestore)},s.prototype.isEqual=function(e){if(!(e instanceof s))throw ti("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},s.prototype.boundFromDocOrFields=function(a,t,e,n){if(Zr(a,1,t),t instanceof Pp){if(0<e.length)throw new Lr(_r.INVALID_ARGUMENT,"Too many arguments provided to "+a+"().");var r=t;if(!r.exists)throw new Lr(_r.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+a+"().");return this.boundFromDocument(a,r._document,n)}var i=[t].concat(e);return this.boundFromFields(a,i,n)},s.prototype.boundFromDocument=function(d,t,e){for(var n=[],r=0,l=this._query.orderBy,o;r<l.length;r++)if(o=l[r],o.field.isKeyField())n.push(new Yi(this.firestore._databaseId,t.key));else{var p=t.field(o.field);if(p instanceof zi)throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field \""+o.field+"\" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)");if(void 0===p){var s=o.field.canonicalString();throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+s+"' (used as the orderBy) does not exist.")}n.push(p)}return new mo(n,e)},s.prototype.boundFromFields=function(d,t,e){var n=this._query.explicitOrderBy;if(t.length>n.length)throw new Lr(_r.INVALID_ARGUMENT,"Too many arguments provided to "+d+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var r=[],i=0,l;i<t.length;i++)if(l=t[i],n[i].field.isKeyField()){if("string"!=typeof l)throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+d+"(), but got a "+typeof l);if(!this._query.isCollectionGroupQuery()&&-1!==l.indexOf("/"))throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+d+"() must be a plain document ID, but '"+l+"' contains a slash.");var p=this._query.path.child(Ci.fromString(l));if(!Ai.isDocumentKey(p))throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+d+"() must result in a valid document path, but '"+p+"' is not because it contains an odd number of segments.");var s=new Ai(p);r.push(new Yi(this.firestore._databaseId,s))}else{var u=this.firestore._dataConverter.parseQueryValue(d,l);r.push(u)}return new mo(r,e)},s.prototype.onSnapshot=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];Kr("Query.onSnapshot",arguments,1,4);var o={},s=0,d;return"object"!=typeof a[s]||Xs(a[s])||(ei("Query.onSnapshot",o=a[s],["includeMetadataChanges"]),Qr("Query.onSnapshot","boolean","includeMetadataChanges",o.includeMetadataChanges),s++),d=Xs(a[s])?a[s]:(Wr("Query.onSnapshot","function",s,a[s]),zr("Query.onSnapshot","function",s+1,a[s+1]),zr("Query.onSnapshot","function",s+2,a[s+2]),{next:a[s],error:a[s+1],complete:a[s+2]}),this.onSnapshotInternal(o,d)},s.prototype.onSnapshotInternal=function(s,d){var e=this,t=function(e){console.error("Uncaught Error in onSnapshot:",e)};d.error&&(t=d.error.bind(d));var n=new rp({next:function(n){d.next&&d.next(new Fp(e.firestore,e._query,n))},error:t}),i=this.firestore.ensureClientConfigured(),o=i.listen(this._query,n,s);return function(){n.mute(),i.unlisten(o)}},s.prototype.get=function(a){var n=this;return Kr("Query.get",arguments,0,1),dd("Query.get",a),new Promise(function(o,e){a&&"cache"===a.source?n.firestore.ensureClientConfigured().getDocumentsFromLocalCache(n._query).then(function(e){o(new Fp(n.firestore,n._query,e))},e):n.getViaSnapshotListener(o,e,a)})},s.prototype.getViaSnapshotListener=function(a,e,n){var o=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(r){o(),r.metadata.fromCache&&n&&"server"===n.source?e(new Lr(_r.UNAVAILABLE,"Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to \"server\" to retrieve the cached documents.)")):a(r)},error:e})},s.prototype.validateNewFilter=function(a){if(a instanceof ho)if(a.isInequality()){var t=this._query.getInequalityFilterField();if(null!==t&&!t.isEqual(a.field))throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+t.toString()+"' and '"+a.field.toString()+"'");var e=this._query.getFirstOrderByField();null!==e&&this.validateOrderByAndInequalityMatch(a.field,e)}else if(a.op===co.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},s.prototype.validateNewOrderBy=function(n){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,n.field)}},s.prototype.validateOrderByAndInequalityMatch=function(n,t){if(!t.isEqual(n))throw new Lr(_r.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+n.toString()+"' and so you must also use '"+n.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},s}(),Fp=function(){function n(a,t,e){this._firestore=a,this._originalQuery=t,this._snapshot=e,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Mp(e.hasPendingWrites,e.fromCache)}return Object.defineProperty(n.prototype,"docs",{get:function(){var n=[];return this.forEach(function(e){return n.push(e)}),n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),n.prototype.forEach=function(a,e){var n=this;Kr("QuerySnapshot.forEach",arguments,1,2),Wr("QuerySnapshot.forEach","function",1,a),this._snapshot.docs.forEach(function(o){a.call(e,n.convertToDocumentImpl(o))})},Object.defineProperty(n.prototype,"query",{get:function(){return new qp(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),n.prototype.docChanges=function(n){n&&(ei("QuerySnapshot.docChanges",n,["includeMetadataChanges"]),Qr("QuerySnapshot.docChanges","boolean","includeMetadataChanges",n.includeMetadataChanges));var t=n&&n.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Lr(_r.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i,d){{if(d.oldDocs.isEmpty()){var o=0,l;return d.docChanges.map(function(n){var t=new Bp(s,n.doc.key,n.doc,d.fromCache,d.mutatedKeys.has(n.doc.key));return Nr(n.type===aa.Added,"Invalid event type for first snapshot"),Nr(!l||0>d.query.docComparator(l,n.doc),"Got added events in wrong order"),l=n.doc,{type:"added",doc:t,oldIndex:-1,newIndex:o++}})}var p=d.oldDocs;return d.docChanges.filter(function(e){return i||e.type!==aa.Metadata}).map(function(a){var t=new Bp(s,a.doc.key,a.doc,d.fromCache,d.mutatedKeys.has(a.doc.key)),e=-1,o=-1;return a.type!==aa.Added&&(Nr(0<=(e=p.indexOf(a.doc.key)),"Index for document not found"),p=p.delete(a.doc.key)),a.type!==aa.Removed&&(p=p.add(a.doc),o=p.indexOf(a.doc.key)),{type:function(e){return e===aa.Added?"added":e===aa.Modified||e===aa.Metadata?"modified":e===aa.Removed?"removed":Ar("Unknown change type: "+e)}(a.type),doc:t,oldIndex:e,newIndex:o}})}}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},n.prototype.isEqual=function(e){if(!(e instanceof n))throw ti("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},n.prototype.convertToDocumentImpl=function(e){return new Bp(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},n}();["length","forEach","map"].concat("undefined"==typeof Symbol?[]:[Symbol.iterator]).forEach(function(e){try{Object.defineProperty(Fp.prototype.docChanges,e,{get:function(){return function(){throw new Lr(_r.INVALID_ARGUMENT,"QuerySnapshot.docChanges has been changed from a property into a method, so usages like \"querySnapshot.docChanges\" should become \"querySnapshot.docChanges()\"")}()}})}catch(e){}});var Vp=function(a){function e(o,t){var e=a.call(this,ro.atPath(o),t)||this;if(1!=o.length%2)throw new Lr(_r.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+o.canonicalString()+" has "+o.length);return e}return Pa(e,a),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Rp(new Ai(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(n){if(Kr("CollectionReference.doc",arguments,0,1),0===arguments.length&&(n=xr.newId()),Wr("CollectionReference.doc","non-empty string",1,n),""===n)throw new Lr(_r.INVALID_ARGUMENT,"Document path must be a non-empty string");var a=Ci.fromString(n);return Rp.forPath(this._query.path.child(a),this.firestore)},e.prototype.add=function(n){Ur("CollectionReference.add",arguments,1),Wr("CollectionReference.add","object",1,n);var t=this.doc();return t.set(n).then(function(){return t})},e}(qp),Up=Rr(Np,"Use firebase.firestore() instead."),jp=Rr(Lp,"Use firebase.firestore().runTransaction() instead."),Wp=Rr(Op,"Use firebase.firestore().batch() instead."),Hp=Rr(Rp,"Use firebase.firestore().doc() instead."),Kp=Rr(Pp),zp=Rr(Bp),$p=Rr(qp),Qp=Rr(Fp),Gp=Rr(Vp,"Use firebase.firestore().collection() instead."),Xp={Firestore:Up,GeoPoint:vi,Timestamp:bi,Blob:gi,Transaction:jp,WriteBatch:Wp,DocumentReference:Hp,DocumentSnapshot:Kp,Query:$p,QueryDocumentSnapshot:zp,QuerySnapshot:Qp,CollectionReference:Gp,FieldPath:ip,FieldValue:vp,setLogLevel:Np.setLogLevel,CACHE_SIZE_UNLIMITED:Dp};pd(ka)}).apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-firestore - be sure to load firebase-app.js first.")}}),!function(n,a){"object"==typeof exports&&"undefined"!=typeof module?a(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],a):a((n=n||self).firebase)}(this,function(m){"use strict";try{(function(){function D(a,e){function t(){this.constructor=a}R(a,e),a.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}function A(d,i,o,s){return new(o||(o=Promise))(function(a,l){function e(n){try{t(s.next(n))}catch(t){l(t)}}function n(n){try{t(s.throw(n))}catch(t){l(t)}}function t(r){r.done?a(r.value):new o(function(t){t(r.value)}).then(e,n)}t((s=s.apply(d,i||[])).next())})}function b(d,n){function r(a){return function(t){return function(a){if(p)throw new TypeError("Generator is already executing.");for(;l;)try{if(p=1,c&&(u=2&a[0]?c.return:a[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,a[1])).done)return u;switch(c=0,u&&(a=[2&a[0],u.value]),a[0]){case 0:case 1:u=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,c=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(u=0<(u=l.trys).length&&u[u.length-1])&&(6===a[0]||2===a[0])){l=0;continue}if(3===a[0]&&(!u||a[1]>u[0]&&a[1]<u[3])){l.label=a[1];break}if(6===a[0]&&l.label<u[1]){l.label=u[1],u=a;break}if(u&&l.label<u[2]){l.label=u[2],l.ops.push(a);break}u[2]&&l.ops.pop(),l.trys.pop();continue;}a=n.call(d,l)}catch(t){a=[6,t],c=0}finally{p=u=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,t])}}var l={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},p,c,u,t;return t={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t}function i(a,e){var d="function"==typeof Symbol&&a[Symbol.iterator];if(!d)return a;var l=d.call(a),i=[],s,p;try{for(;(void 0===e||0<e--)&&!(s=l.next()).done;)i.push(s.value)}catch(t){p={error:t}}finally{try{s&&!s.done&&(d=l.return)&&d.call(l)}finally{if(p)throw p.error}}return i}function v(o,e){var t=new a(o,e);return t.subscribe.bind(t)}function x(){}function L(a,e){if(null==a||null==e)return!1;if(a===e)return!0;if(a.byteLength!==e.byteLength)return!1;for(var t=new DataView(a),n=new DataView(e),r=0;r<a.byteLength;r++)if(t.getUint8(r)!==n.getUint8(r))return!1;return!0}function n(n){var e=new Uint8Array(n);return btoa(String.fromCharCode.apply(String,function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(i(arguments[a]));return n}(e)))}function T(t){return n(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function o(a){for(var e=(a+"=".repeat((4-a.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function u(){var e=indexedDB.open("undefined");e.onerror=function(){},e.onsuccess=function(){!function(a){if(a.objectStoreNames.contains("fcm_token_object_Store")){var t=a.transaction("fcm_token_object_Store").objectStore("fcm_token_object_Store"),n=new z,r=t.openCursor();r.onerror=function(t){console.warn("Unable to cleanup old IDB.",t)},r.onsuccess=function(){var o=r.result;if(o){var e=o.value;n.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet),o.continue()}else a.close(),indexedDB.deleteDatabase("undefined")}}}(e.result)}}function k(t){if(t.fcmToken&&("string"!=typeof t.fcmToken||0===t.fcmToken.length))throw g.create("bad-token");if(t.swScope&&("string"!=typeof t.swScope||0===t.swScope.length))throw g.create("bad-scope");if(t.vapidKey&&(!(t.vapidKey instanceof Uint8Array)||65!==t.vapidKey.length))throw g.create("bad-vapid-key");if(t.endpoint&&("string"!=typeof t.endpoint||0===t.endpoint.length))throw g.create("bad-subscription");if(t.auth&&!(t.auth instanceof ArrayBuffer))throw g.create("bad-subscription");if(t.p256dh&&!(t.p256dh instanceof ArrayBuffer))throw g.create("bad-subscription");if(t.fcmSenderId&&("string"!=typeof t.fcmSenderId||0===t.fcmSenderId.length))throw g.create("bad-sender-id");if(t.fcmPushSet&&("string"!=typeof t.fcmPushSet||0===t.fcmPushSet.length))throw g.create("bad-push-set")}function S(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function I(a,e){var t;return(t={})[w.TYPE_OF_MSG]=a,t[w.DATA]=e,t}function N(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}m=m&&m.hasOwnProperty("default")?m.default:m;var R=function(n,e){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(n,e)},P=function(){return(P=Object.assign||function(a){for(var e=1,i=arguments.length,r;e<i;e++)for(var s in r=arguments[e])Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s]);return a}).apply(this,arguments)},B=function(a){function r(o,e){var t=a.call(this,e)||this;return t.code=o,t.name="FirebaseError",Object.setPrototypeOf(t,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(t,l.prototype.create),t}return D(r,a),r}(Error),l=function(){function t(a,e,t){this.service=a,this.serviceName=e,this.errors=t}return t.prototype.create=function(l){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var p=e[0]||{},o=this.service+"/"+l,i=this.errors[l],s=i?(g=p,i.replace(q,function(a,e){var t=g[e];return null==t?"<"+e+"?>":t.toString()})):"Error",a=this.serviceName+": "+s+" ("+o+").",c=new B(o,a),u=0,m=Object.keys(p),g,y;u<m.length;u++)y=m[u],"_"!==y.slice(-1)&&(y in c&&console.warn("Overwriting FirebaseError base field \""+y+"\" can cause unexpected behavior."),c[y]=p[y]);return c},t}(),q=/\{\$([^}]+)}/g,a=function(){function t(a,e){var t=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){a(t)}).catch(function(n){t.error(n)})}return t.prototype.next=function(n){this.forEachObserver(function(t){t.next(n)})},t.prototype.error=function(n){this.forEachObserver(function(t){t.error(n)}),this.close(n)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(a,e,t){var n=this,o;if(void 0===a&&void 0===e&&void 0===t)throw new Error("Missing Observer.");void 0===(o=function(a,e){if("object"!=typeof a||null===a)return!1;for(var t=0,i=e,r;t<i.length;t++)if(r=i[t],r in a&&"function"==typeof a[r])return!0;return!1}(a,["next","error","complete"])?a:{next:a,error:e,complete:t}).next&&(o.next=x),void 0===o.error&&(o.error=x),void 0===o.complete&&(o.complete=x);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{n.finalError?o.error(n.finalError):o.complete()}catch(t){}}),this.observers.push(o),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(n){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,n)},t.prototype.sendOne=function(a,e){var t=this;this.task.then(function(){if(void 0!==t.observers&&void 0!==t.observers[a])try{e(t.observers[a])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(n){var e=this;this.finalized||(this.finalized=!0,void 0!==n&&(this.finalError=n),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),p=((c={})["only-available-in-window"]="This method is available in a Window context.",c["only-available-in-sw"]="This method is available in a service worker context.",c["should-be-overriden"]="This method should be overriden by extended classes.",c["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",c["permission-default"]="The required permissions were not granted and dismissed instead.",c["permission-blocked"]="The required permissions were not granted and blocked instead.",c["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",c["notifications-blocked"]="Notifications have been blocked.",c["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",c["sw-registration-expected"]="A service worker registration was the expected input.",c["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",c["invalid-saved-token"]="Unable to access details of the saved token.",c["sw-reg-redundant"]="The service worker being used for push was made redundant.",c["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",c["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",c["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",c["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",c["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",c["token-update-no-token"]="FCM returned no token when updating the user to push.",c["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",c["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",c["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",c["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",c["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",c["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",c["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",c["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",c["failed-to-delete-token"]="Unable to delete the currently saved token.",c["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",c["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",c["bad-scope"]="The service worker scope must be a string with at least one character.",c["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",c["bad-subscription"]="The subscription must be a valid PushSubscription.",c["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",c["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",c["failed-delete-vapid-key"]="The VAPID key could not be deleted.",c["invalid-public-vapid-key"]="The public VAPID key must be a string.",c["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",c["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",c),g=new l("messaging","Messaging",p),y=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),c,w,F,W,H;(F=w||(w={})).TYPE_OF_MSG="firebase-messaging-msg-type",F.DATA="firebase-messaging-msg-data",(H=W||(W={})).PUSH_MSG_RECEIVED="push-msg-received",H.NOTIFICATION_CLICKED="notification-clicked";var z=function(){function t(){}return t.prototype.getToken=function(l,d,p){return A(this,void 0,void 0,function(){var h,m,f,v,_,E,k,C,S;return b(this,function(t){switch(t.label){case 0:h=T(d.getKey("p256dh")),m=T(d.getKey("auth")),f="authorized_entity="+l+"&endpoint="+d.endpoint+"&encryption_key="+h+"&encryption_auth="+m,L(p.buffer,y.buffer)||(v=T(p),f+="&application_pub_key="+v),(_=new Headers).append("Content-Type","application/x-www-form-urlencoded"),E={method:"POST",headers:_,body:f},t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch("https://fcm.googleapis.com/fcm/connect/subscribe",E)];case 2:return[4,t.sent().json()];case 3:return k=t.sent(),[3,5];case 4:throw C=t.sent(),g.create("token-subscribe-failed",{errorInfo:C});case 5:if(k.error)throw S=k.error.message,g.create("token-subscribe-failed",{errorInfo:S});if(!k.token)throw g.create("token-subscribe-no-token");if(!k.pushSet)throw g.create("token-subscribe-no-push-set");return[2,{token:k.token,pushSet:k.pushSet}];}})})},t.prototype.updateToken=function(m,d,f,h,l){return A(this,void 0,void 0,function(){var p,v,_,E,k,C,S,I,w;return b(this,function(t){switch(t.label){case 0:p=T(h.getKey("p256dh")),v=T(h.getKey("auth")),_="push_set="+f+"&token="+d+"&authorized_entity="+m+"&endpoint="+h.endpoint+"&encryption_key="+p+"&encryption_auth="+v,L(l.buffer,y.buffer)||(E=T(l),_+="&application_pub_key="+E),(k=new Headers).append("Content-Type","application/x-www-form-urlencoded"),C={method:"POST",headers:k,body:_},t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch("https://fcm.googleapis.com/fcm/connect/subscribe",C)];case 2:return[4,t.sent().json()];case 3:return S=t.sent(),[3,5];case 4:throw I=t.sent(),g.create("token-update-failed",{errorInfo:I});case 5:if(S.error)throw w=S.error.message,g.create("token-update-failed",{errorInfo:w});if(!S.token)throw g.create("token-update-no-token");return[2,S.token];}})})},t.prototype.deleteToken=function(d,a,l){return A(this,void 0,void 0,function(){var p,c,u,h,m,y;return b(this,function(t){switch(t.label){case 0:p="authorized_entity="+d+"&token="+a+"&pushSet="+l,(c=new Headers).append("Content-Type","application/x-www-form-urlencoded"),u={method:"POST",headers:c,body:p},t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch("https://fcm.googleapis.com/fcm/connect/unsubscribe",u)];case 2:return[4,t.sent().json()];case 3:if((h=t.sent()).error)throw m=h.error.message,g.create("token-unsubscribe-failed",{errorInfo:m});return[3,5];case 4:throw y=t.sent(),g.create("token-unsubscribe-failed",{errorInfo:y});case 5:return[2];}})})},t}(),_=function(){function t(){this.dbPromise=null}return t.prototype.get=function(n){return this.createTransaction(function(t){return t.get(n)})},t.prototype.getIndex=function(a,t){return this.createTransaction(function(n){return n.index(a).get(t)})},t.prototype.put=function(n){return this.createTransaction(function(t){return t.put(n)},"readwrite")},t.prototype.delete=function(n){return this.createTransaction(function(t){return t.delete(n)},"readwrite")},t.prototype.closeDatabase=function(){return A(this,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:t.sent().close(),this.dbPromise=null,t.label=2;case 2:return[2];}})})},t.prototype.createTransaction=function(d,s){return void 0===s&&(s="readonly"),A(this,void 0,void 0,function(){var a,l,p,c;return b(this,function(t){switch(t.label){case 0:return[4,this.getDb()];case 1:return a=t.sent(),l=a.transaction(this.objectStoreName,s),p=l.objectStore(this.objectStoreName),[4,(o=d(p),new Promise(function(n,e){o.onsuccess=function(){n(o.result)},o.onerror=function(){e(o.error)}}))];case 2:return c=t.sent(),[2,new Promise(function(n,e){l.oncomplete=function(){n(c)},l.onerror=function(){e(l.error)}})];}var o})})},t.prototype.getDb=function(){var a=this;return this.dbPromise||(this.dbPromise=new Promise(function(o,e){var t=indexedDB.open(a.dbName,a.dbVersion);t.onsuccess=function(){o(t.result)},t.onerror=function(){a.dbPromise=null,e(t.error)},t.onupgradeneeded=function(n){return a.onDbUpgrade(t,n)}})),this.dbPromise},t}(),C=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.dbName="fcm_token_details_db",t.dbVersion=3,t.objectStoreName="fcm_token_object_Store",t}return D(t,n),t.prototype.onDbUpgrade=function(a,e){var t=a.result;switch(e.oldVersion){case 0:(n=t.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),n.createIndex("fcmToken","fcmToken",{unique:!0});case 1:u();case 2:var i=(n=a.transaction.objectStore(this.objectStoreName)).openCursor(),n;i.onsuccess=function(){var a=i.result;if(a){var e=a.value,t=P({},e);e.createTime||(t.createTime=Date.now()),"string"==typeof e.vapidKey&&(t.vapidKey=o(e.vapidKey)),"string"==typeof e.auth&&(t.auth=o(e.auth).buffer),"string"==typeof e.auth&&(t.p256dh=o(e.p256dh).buffer),a.update(t),a.continue()}};}},t.prototype.getTokenDetailsFromToken=function(e){return A(this,void 0,void 0,function(){return b(this,function(){if(!e)throw g.create("bad-token");return k({fcmToken:e}),[2,this.getIndex("fcmToken",e)]})})},t.prototype.getTokenDetailsFromSWScope=function(e){return A(this,void 0,void 0,function(){return b(this,function(){if(!e)throw g.create("bad-scope");return k({swScope:e}),[2,this.get(e)]})})},t.prototype.saveTokenDetails=function(e){return A(this,void 0,void 0,function(){return b(this,function(){if(!e.swScope)throw g.create("bad-scope");if(!e.vapidKey)throw g.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw g.create("bad-subscription");if(!e.fcmSenderId)throw g.create("bad-sender-id");if(!e.fcmToken)throw g.create("bad-token");if(!e.fcmPushSet)throw g.create("bad-push-set");return k(e),[2,this.put(e)]})})},t.prototype.deleteToken=function(a){return A(this,void 0,void 0,function(){var n;return b(this,function(t){switch(t.label){case 0:return"string"!=typeof a||0===a.length?[2,Promise.reject(g.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(a)];case 1:if(!(n=t.sent()))throw g.create("delete-token-not-found");return[4,this.delete(n.swScope)];case 2:return t.sent(),[2,n];}})})},t}(_),O=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return D(t,n),t.prototype.onDbUpgrade=function(t){t.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(a){return A(this,void 0,void 0,function(){var n;return b(this,function(t){switch(t.label){case 0:if("string"!=typeof a||0===a.length)throw g.create("bad-scope");return[4,this.get(a)];case 1:return[2,(n=t.sent())?n.vapidKey:void 0];}})})},t.prototype.saveVapidDetails=function(e,n){return A(this,void 0,void 0,function(){var a;return b(this,function(){if("string"!=typeof e||0===e.length)throw g.create("bad-scope");if(null===n||65!==n.length)throw g.create("bad-vapid-key");return a={swScope:e,vapidKey:n},[2,this.put(a)]})})},t.prototype.deleteVapidDetails=function(a){return A(this,void 0,void 0,function(){var n;return b(this,function(t){switch(t.label){case 0:return[4,this.getVapidFromSWScope(a)];case 1:if(!(n=t.sent()))throw g.create("delete-scope-not-found");return[4,this.delete(a)];case 2:return t.sent(),[2,n];}})})},t}(_),E=function(){function t(n){var e=this;if(!n.options.messagingSenderId||"string"!=typeof n.options.messagingSenderId)throw g.create("bad-sender-id");this.messagingSenderId=n.options.messagingSenderId,this.tokenDetailsModel=new C,this.vapidDetailsModel=new O,this.iidModel=new z,this.app=n,this.INTERNAL={delete:function(){return e.delete()}}}return t.prototype.getToken=function(){return A(this,void 0,void 0,function(){var a,s,d,l,p;return b(this,function(t){switch(t.label){case 0:if("denied"===(a=this.getNotificationPermission_()))throw g.create("notifications-blocked");return"granted"===a?[4,this.getSWRegistration_()]:[2,null];case 1:return s=t.sent(),[4,this.getPublicVapidKey_()];case 2:return d=t.sent(),[4,this.getPushSubscription(s,d)];case 3:return l=t.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(s.scope)];case 4:return(p=t.sent())?[2,this.manageExistingToken(s,l,d,p)]:[2,this.getNewToken(s,l,d)];}})})},t.prototype.manageExistingToken=function(a,t,n,r){return A(this,void 0,void 0,function(){return b(this,function(o){switch(o.label){case 0:return function(a,e,t){if(!t.vapidKey||!L(e.buffer,t.vapidKey.buffer))return!1;var n=a.endpoint===t.endpoint,r=L(a.getKey("auth"),t.auth),o=L(a.getKey("p256dh"),t.p256dh);return n&&r&&o}(t,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(a,t,n,r)]:[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return o.sent(),[2,this.getNewToken(a,t,n)];}})})},t.prototype.updateToken=function(d,o,i,s){return A(this,void 0,void 0,function(){var a,l,p;return b(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,s.fcmToken,s.fcmPushSet,o,i)];case 1:return a=t.sent(),l={swScope:d.scope,vapidKey:i,fcmSenderId:this.messagingSenderId,fcmToken:a,fcmPushSet:s.fcmPushSet,createTime:Date.now(),endpoint:o.endpoint,auth:o.getKey("auth"),p256dh:o.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(l)];case 2:return t.sent(),[4,this.vapidDetailsModel.saveVapidDetails(d.scope,i)];case 3:return t.sent(),[2,a];case 4:return p=t.sent(),[4,this.deleteToken(s.fcmToken)];case 5:throw t.sent(),p;case 6:return[2];}})})},t.prototype.getNewToken=function(a,r,o){return A(this,void 0,void 0,function(){var i,s;return b(this,function(t){switch(t.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,r,o)];case 1:return i=t.sent(),s={swScope:a.scope,vapidKey:o,fcmSenderId:this.messagingSenderId,fcmToken:i.token,fcmPushSet:i.pushSet,createTime:Date.now(),endpoint:r.endpoint,auth:r.getKey("auth"),p256dh:r.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(s)];case 2:return t.sent(),[4,this.vapidDetailsModel.saveVapidDetails(a.scope,o)];case 3:return t.sent(),[2,i.token];}})})},t.prototype.deleteToken=function(a){return A(this,void 0,void 0,function(){var o,r;return b(this,function(t){switch(t.label){case 0:return[4,this.deleteTokenFromDB(a)];case 1:return t.sent(),[4,this.getSWRegistration_()];case 2:return(o=t.sent())?[4,o.pushManager.getSubscription()]:[3,4];case 3:if(r=t.sent())return[2,r.unsubscribe()];t.label=4;case 4:return[2,!0];}})})},t.prototype.deleteTokenFromDB=function(a){return A(this,void 0,void 0,function(){var n;return b(this,function(t){switch(t.label){case 0:return[4,this.tokenDetailsModel.deleteToken(a)];case 1:return n=t.sent(),[4,this.iidModel.deleteToken(n.fcmSenderId,n.fcmToken,n.fcmPushSet)];case 2:return t.sent(),[2];}})})},t.prototype.getPushSubscription=function(a,t){return a.pushManager.getSubscription().then(function(n){return n||a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})})},t.prototype.requestPermission=function(){throw g.create("only-available-in-window")},t.prototype.useServiceWorker=function(){throw g.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(){throw g.create("only-available-in-window")},t.prototype.onMessage=function(){throw g.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw g.create("only-available-in-window")},t.prototype.setBackgroundMessageHandler=function(){throw g.create("only-available-in-sw")},t.prototype.delete=function(){return A(this,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return t.sent(),[2];}})})},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},t.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},t.prototype.getIidModel=function(){return this.iidModel},t}(),K=function(a){function t(n){var o=a.call(this,n)||this;return o.bgMessageHandler=null,self.addEventListener("push",function(t){o.onPush(t)}),self.addEventListener("pushsubscriptionchange",function(t){o.onSubChange(t)}),self.addEventListener("notificationclick",function(t){o.onNotificationClick(t)}),o}return D(t,a),t.prototype.onPush=function(t){t.waitUntil(this.onPush_(t))},t.prototype.onSubChange=function(t){t.waitUntil(this.onSubChange_(t))},t.prototype.onNotificationClick=function(t){t.waitUntil(this.onNotificationClick_(t))},t.prototype.onPush_=function(d){return A(this,void 0,void 0,function(){var a,l,p,c,u,h;return b(this,function(t){switch(t.label){case 0:if(!d.data)return[2];try{a=d.data.json()}catch(t){return[2]}return[4,this.hasVisibleClients_()];case 1:return t.sent()?[2,this.sendMessageToWindowClients_(a)]:(l=this.getNotificationData_(a))?(p=l.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return c=t.sent(),u=l.actions,h=Notification.maxActions,u&&h&&u.length>h&&console.warn("This browser only supports "+h+" actions.The remaining actions will not be displayed."),[2,c.showNotification(p,l)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(a)]:[3,5];case 4:return t.sent(),[2];case 5:return[2];}})})},t.prototype.onSubChange_=function(){return A(this,void 0,void 0,function(){var a,i,s,d;return b(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return a=t.sent(),[3,3];case 2:throw i=t.sent(),g.create("unable-to-resubscribe",{errorInfo:i});case 3:return t.trys.push([3,5,,8]),[4,a.pushManager.getSubscription()];case 4:return t.sent(),[3,8];case 5:return s=t.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(a.scope)];case 6:if(!(d=t.sent()))throw s;return[4,this.deleteToken(d.fcmToken)];case 7:throw t.sent(),s;case 8:return[2];}})})},t.prototype.onNotificationClick_=function(a){return A(this,void 0,void 0,function(){var i,s,d,l;return b(this,function(t){switch(t.label){case 0:return a.notification&&a.notification.data&&a.notification.data.FCM_MSG?a.action?[2]:(a.stopImmediatePropagation(),a.notification.close(),(i=a.notification.data.FCM_MSG).notification&&(s=i.fcmOptions&&i.fcmOptions.link||i.notification.click_action)?[4,this.getWindowClient_(s)]:[2]):[2];case 1:return(d=t.sent())?[3,3]:[4,self.clients.openWindow(s)];case 2:return d=t.sent(),[3,5];case 3:return[4,d.focus()];case 4:d=t.sent(),t.label=5;case 5:return d?(delete i.notification,delete i.fcmOptions,l=I(W.NOTIFICATION_CLICKED,i),[2,this.attemptToMessageClient_(d,l)]):[2];}})})},t.prototype.getNotificationData_=function(a){var e;if(a&&"object"==typeof a.notification){var o=P({},a.notification);return o.data=P({},a.notification.data,((e={}).FCM_MSG=a,e)),o}},t.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw g.create("bg-handler-function-expected");this.bgMessageHandler=t},t.prototype.getWindowClient_=function(a){return A(this,void 0,void 0,function(){var i,s,d,l;return b(this,function(t){switch(t.label){case 0:return i=new URL(a,self.location.href).href,[4,S()];case 1:for(s=t.sent(),d=null,l=0;l<s.length;l++)if(new URL(s[l].url,self.location.href).href===i){d=s[l];break}return[2,d];}})})},t.prototype.attemptToMessageClient_=function(e,t){return A(this,void 0,void 0,function(){return b(this,function(){if(!e)throw g.create("no-window-client-to-msg");return e.postMessage(t),[2]})})},t.prototype.hasVisibleClients_=function(){return A(this,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return[4,S()];case 1:return[2,t.sent().some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})];}})})},t.prototype.sendMessageToWindowClients_=function(a){return A(this,void 0,void 0,function(){var o=this,r,i;return b(this,function(t){switch(t.label){case 0:return[4,S()];case 1:return r=t.sent(),i=I(W.PUSH_MSG_RECEIVED,a),[4,Promise.all(r.map(function(t){return o.attemptToMessageClient_(t,i)}))];case 2:return t.sent(),[2];}})})},t.prototype.getSWRegistration_=function(){return A(this,void 0,void 0,function(){return b(this,function(){return[2,self.registration]})})},t.prototype.getPublicVapidKey_=function(){return A(this,void 0,void 0,function(){var a,o;return b(this,function(t){switch(t.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(a=t.sent()))throw g.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(a.scope)];case 2:return null==(o=t.sent())?[2,y]:[2,o];}})})},t}(E),V=function(a){function t(n){var o=a.call(this,n)||this;return o.registrationToUse=null,o.publicVapidKeyToUse=null,o.manifestCheckPromise=null,o.messageObserver=null,o.tokenRefreshObserver=null,o.onMessageInternal=v(function(t){o.messageObserver=t}),o.onTokenRefreshInternal=v(function(t){o.tokenRefreshObserver=t}),o.setupSWMessageListener_(),o}return D(t,a),t.prototype.getToken=function(){return A(this,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=function(){return A(this,void 0,void 0,function(){var a,o;return b(this,function(t){switch(t.label){case 0:if(!(a=document.querySelector("link[rel=\"manifest\"]")))return[2];t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch(a.href)];case 2:return[4,t.sent().json()];case 3:return o=t.sent(),[3,5];case 4:return t.sent(),[2];case 5:if(!o||!o.gcm_sender_id)return[2];if("103953800507"!==o.gcm_sender_id)throw g.create("incorrect-gcm-sender-id");return[2];}})})}()),[4,this.manifestCheckPromise];case 1:return t.sent(),[2,a.prototype.getToken.call(this)];}})})},t.prototype.requestPermission=function(){return A(this,void 0,void 0,function(){var n;return b(this,function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(n=t.sent()))return[2];throw"denied"===n?g.create("permission-blocked"):g.create("permission-default");}})})},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw g.create("sw-registration-expected");if(null!=this.registrationToUse)throw g.create("use-sw-before-get-token");this.registrationToUse=t},t.prototype.usePublicVapidKey=function(n){if("string"!=typeof n)throw g.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw g.create("use-public-key-before-get-token");var e=o(n);if(65!==e.length)throw g.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=e},t.prototype.onMessage=function(a,e,t){return"function"==typeof a?this.onMessageInternal(a,e,t):this.onMessageInternal(a)},t.prototype.onTokenRefresh=function(a,e,t){return"function"==typeof a?this.onTokenRefreshInternal(a,e,t):this.onTokenRefreshInternal(a)},t.prototype.waitForRegistrationToActivate_=function(a){var r=a.installing||a.waiting||a.active;return new Promise(function(o,e){if(!r)e(g.create("no-sw-in-reg"));else if(!("activated"!==r.state))o(a);else if("redundant"!==r.state){var t=function(){if("activated"===r.state)o(a);else{if("redundant"!==r.state)return;e(g.create("sw-reg-redundant"))}r.removeEventListener("statechange",t)};r.addEventListener("statechange",t)}else e(g.create("sw-reg-redundant"))})},t.prototype.getSWRegistration_=function(){var n=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){throw g.create("failed-serviceworker-registration",{browserErrorMessage:t.message})}).then(function(t){return n.waitForRegistrationToActivate_(t).then(function(){return(n.registrationToUse=t).update(),t})}))},t.prototype.getPublicVapidKey_=function(){return A(this,void 0,void 0,function(){return b(this,function(){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,y]})})},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",function(a){if(a.data&&a.data[w.TYPE_OF_MSG]){var o=a.data;switch(o[w.TYPE_OF_MSG]){case W.PUSH_MSG_RECEIVED:case W.NOTIFICATION_CLICKED:var t=o[w.DATA];e.messageObserver&&e.messageObserver.next(t);}}},!1)},t}(E),j;j={isSupported:N},m.INTERNAL.registerService("messaging",function(t){if(!N())throw g.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new K(t):new V(t)},j)}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-messaging - be sure to load firebase-app.js first.")}}),!function(n,a){"object"==typeof exports&&"undefined"!=typeof module?a(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],a):a((n=n||self).firebase)}(this,function(T){"use strict";var d=Math.floor;try{(function(){function E(d,i,a,l){return new(a||(a=Promise))(function(s,p){function t(n){try{e(l.next(n))}catch(e){p(e)}}function n(n){try{e(l.throw(n))}catch(e){p(e)}}function e(o){o.done?s(o.value):new a(function(e){e(o.value)}).then(t,n)}e((l=l.apply(d,i||[])).next())})}function l(d,n){function r(a){return function(e){return function(a){if(p)throw new TypeError("Generator is already executing.");for(;l;)try{if(p=1,c&&(u=2&a[0]?c.return:a[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,a[1])).done)return u;switch(c=0,u&&(a=[2&a[0],u.value]),a[0]){case 0:case 1:u=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,c=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(u=0<(u=l.trys).length&&u[u.length-1])&&(6===a[0]||2===a[0])){l=0;continue}if(3===a[0]&&(!u||a[1]>u[0]&&a[1]<u[3])){l.label=a[1];break}if(6===a[0]&&l.label<u[1]){l.label=u[1],u=a;break}if(u&&l.label<u[2]){l.label=u[2],l.ops.push(a);break}u[2]&&l.ops.pop(),l.trys.pop();continue;}a=n.call(d,l)}catch(e){a=[6,e],c=0}finally{p=u=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,e])}}var l={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},p,c,u,e;return e={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e}function p(s,t){var d="function"==typeof Symbol&&s[Symbol.iterator];if(!d)return s;var l=d.call(s),i=[],a,p;try{for(;(void 0===t||0<t--)&&!(a=l.next()).done;)i.push(a.value)}catch(e){p={error:e}}finally{try{a&&!a.done&&(d=l.return)&&d.call(l)}finally{if(p)throw p.error}}return i}function S(a){return new Promise(function(n,t){a.onsuccess=function(){n(a.result)},a.onerror=function(){t(a.error)}})}function s(a,n,r){var e=new Promise(function(i,t){S(o=a[n].apply(a,r)).then(i,t)}),o;return e.request=o,e}function n(a,o,t){t.forEach(function(n){Object.defineProperty(a.prototype,n,{get:function(){return this[o][n]},set:function(e){this[o][n]=e}})})}function t(a,e,n,o){o.forEach(function(o){o in n.prototype&&(a.prototype[o]=function(){return s(this[e],o,arguments)})})}function e(a,e,n,o){o.forEach(function(o){o in n.prototype&&(a.prototype[o]=function(){return this[e][o].apply(this[e],arguments)})})}function o(a,o,t,e){e.forEach(function(r){r in t.prototype&&(a.prototype[r]=function(){return n=this[o],(a=s(n,r,arguments)).then(function(e){if(e)return new c(e,a.request)});var n,a})})}function r(e){this._index=e}function c(n,t){this._cursor=n,this._request=t}function u(e){this._store=e}function m(a){this._tx=a,this.complete=new Promise(function(n,t){a.oncomplete=function(){n()},a.onerror=function(){t(a.error)},a.onabort=function(){t(a.error)}})}function g(a,t,e){this._db=a,this.oldVersion=t,this.transaction=new m(e)}function y(e){this._db=e}function b(e){return e instanceof Ee&&e.code.includes("request-failed")}function v(a){if(!a||!a.options)throw k.create("missing-app-config-values");var t=a.name,e=a.options,n=e.projectId,r=e.apiKey,o=e.appId;if(!(t&&n&&r&&o))throw k.create("missing-app-config-values");return{appName:t,projectId:n,apiKey:r,appId:o}}function I(n){var t=n.projectId;return"https://firebaseinstallations.googleapis.com/v1/projects/"+t+"/installations"}function w(n){return{token:n.token,requestStatus:2,expiresIn:(t=n.expiresIn,+t.replace("s","000")),creationTime:Date.now()};var t}function N(a,r){return E(this,void 0,void 0,function(){var o,i;return l(this,function(e){switch(e.label){case 0:return[4,r.json()];case 1:return o=e.sent(),i=o.error,[2,k.create("request-failed",{requestName:a,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})];}})})}function O(n){var t=n.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function D(a,t){var e=t.refreshToken,n=O(a);return n.append("Authorization","FIS_v2 "+e),n}function R(a){return E(this,void 0,void 0,function(){var n;return l(this,function(e){switch(e.label){case 0:return[4,a()];case 1:return 500<=(n=e.sent()).status&&600>n.status?[2,a()]:[2,n];}})})}function P(n){return new Promise(function(e){setTimeout(e,n)})}function C(n){var t=n instanceof Uint8Array?n:new Uint8Array(n);return btoa(String.fromCharCode.apply(String,function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(p(arguments[a]));return n}(t))).replace(/\+/g,"-").replace(/\//g,"_")}function B(){var e=new Uint8Array(17);return crypto.getRandomValues(e),e[0]=112+e[0]%16,C(e).substr(0,22)}function q(a,o){return E(this,void 0,void 0,function(){var i,s,d;return l(this,function(e){switch(e.label){case 0:return i=j(a),[4,A];case 1:return s=e.sent(),(d=s.transaction("firebase-installations-store","readwrite")).objectStore("firebase-installations-store").put(o,i),[4,d.complete];case 2:return e.sent(),[2,o];}})})}function V(a){return E(this,void 0,void 0,function(){var o,i,s;return l(this,function(e){switch(e.label){case 0:return o=j(a),[4,A];case 1:return i=e.sent(),(s=i.transaction("firebase-installations-store","readwrite")).objectStore("firebase-installations-store").delete(o),[2,s.complete];}})})}function U(d,s){return E(this,void 0,void 0,function(){var p,c,u,h,m,g;return l(this,function(e){switch(e.label){case 0:return p=j(d),[4,A];case 1:return c=e.sent(),u=c.transaction("firebase-installations-store","readwrite"),[4,(h=u.objectStore("firebase-installations-store")).get(p)];case 2:return m=e.sent(),(g=s(m))===m?[2,g]:(void 0===g?h.delete(p):h.put(g,p),[4,u.complete]);case 3:return e.sent(),[2,g];}})})}function j(e){return e.appName+"!"+e.appId}function z(a){return E(this,void 0,void 0,function(){var o,n;return l(this,function(e){switch(e.label){case 0:return n={},[4,U(a,function(r){var t=function(n){var t=n||{fid:B(),registrationStatus:0};return G(t)?{fid:t.fid,registrationStatus:0}:t}(r),e=function(a,t){{if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(a){return E(this,void 0,void 0,function(){var n;return l(this,function(e){switch(e.label){case 0:return[4,Q(a)];case 1:n=e.sent(),e.label=2;case 2:return 1===n.registrationStatus?[4,P(100)]:[3,5];case 3:return e.sent(),[4,Q(a)];case 4:return n=e.sent(),[3,2];case 5:if(0===n.registrationStatus)throw k.create("create-installation-failed");return[2];}})})}(a)}:{installationEntry:t};if(!navigator.onLine){var e=Promise.reject(k.create("app-offline"));return{installationEntry:t,registrationPromise:e}}var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(a,r){return E(this,void 0,void 0,function(){var o,i;return l(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,function(d,e){var s=e.fid;return E(this,void 0,void 0,function(){var p,c,u,h,m,g;return l(this,function(e){switch(e.label){case 0:return p=I(d),c=O(d),u={fid:s,authVersion:"FIS_v2",appId:d.appId,sdkVersion:"w:0.1.6"},h={method:"POST",headers:c,body:JSON.stringify(u)},[4,R(function(){return fetch(p,h)})];case 1:return(m=e.sent()).ok?[4,m.json()]:[3,3];case 2:return g=e.sent(),[2,{fid:s,registrationStatus:2,refreshToken:g.refreshToken,authToken:w(g.authToken)}];case 3:return[4,N("Create Installation",m)];case 4:throw e.sent();}})})}(a,r)];case 1:return o=e.sent(),[4,q(a,o)];case 2:return e.sent(),[3,8];case 3:return b(i=e.sent())&&409===i.serverCode?[4,V(a)]:[3,5];case 4:return e.sent(),[3,7];case 5:return[4,q(a,{fid:r.fid,registrationStatus:0})];case 6:e.sent(),e.label=7;case 7:throw i;case 8:return[2];}})})}(a,n);return{installationEntry:n,registrationPromise:r}}}(a,t);return o=e.registrationPromise,e.installationEntry})];case 1:return[2,(n.installationEntry=e.sent(),n.registrationPromise=o,n)];}})})}function Q(e){return U(e,function(e){if(!e)throw k.create("installation-not-found");return G(e)?{fid:e.fid,registrationStatus:0}:e})}function G(e){return 1===e.registrationStatus&&e.registrationTime+10000<Date.now()}function X(d,p){return E(this,void 0,void 0,function(){var u,h,m,g,y,f;return l(this,function(a){switch(a.label){case 0:return t=d,o=p.fid,u=I(t)+"/"+o+"/authTokens:generate",h=D(d,p),m={installation:{sdkVersion:"w:0.1.6"}},g={method:"POST",headers:h,body:JSON.stringify(m)},[4,R(function(){return fetch(u,g)})];case 1:return(y=a.sent()).ok?[4,y.json()]:[3,3];case 2:return f=a.sent(),[2,w(f)];case 3:return[4,N("Generate Auth Token",y)];case 4:throw a.sent();}var t,o})})}function Y(a){return E(this,void 0,void 0,function(){var n;return l(this,function(e){switch(e.label){case 0:return[4,function(a){return E(this,void 0,void 0,function(){var o,i,s;return l(this,function(e){switch(e.label){case 0:return[4,z(a)];case 1:return o=e.sent(),i=o.installationEntry,(s=o.registrationPromise)?[4,s]:[3,3];case 2:return e.sent(),[3,4];case 3:if(2!==i.registrationStatus)throw k.create("create-installation-failed");e.label=4;case 4:return[2];}})})}(n=v(a))];case 1:return e.sent(),[2,function(o){return E(this,void 0,void 0,function(){var r,a,i;return l(this,function(e){switch(e.label){case 0:return[4,U(o,function(d){if(!Z(d))throw k.create("not-registered");var t=d.authToken,a,p,c,u,h;if(2!==(c=t).requestStatus||(u=c,(h=Date.now())<u.creationTime||u.creationTime+u.expiresIn<h+3600000)){if(1===t.requestStatus)return r=function(a){return E(this,void 0,void 0,function(){var o,r;return l(this,function(e){switch(e.label){case 0:return[4,J(a)];case 1:o=e.sent(),e.label=2;case 2:return 1===o.authToken.requestStatus?[4,P(100)]:[3,5];case 3:return e.sent(),[4,J(a)];case 4:return o=e.sent(),[3,2];case 5:if(0===(r=o.authToken).requestStatus)throw k.create("generate-token-failed");return[2,r];}})})}(o),d;if(!navigator.onLine)throw k.create("app-offline");var m=(a=d,p={requestStatus:1,requestTime:Date.now()},_e({},a,{authToken:p}));return r=function(a,o){return E(this,void 0,void 0,function(){var i,s,d;return l(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,X(a,o)];case 1:return i=e.sent(),d=_e({},o,{authToken:i}),[4,q(a,d)];case 2:return e.sent(),[2,i];case 3:return b(s=e.sent())&&(401===s.serverCode||404===s.serverCode)?[4,V(a)]:[3,5];case 4:return e.sent(),[3,7];case 5:return d=_e({},o,{authToken:{requestStatus:0}}),[4,q(a,d)];case 6:e.sent(),e.label=7;case 7:throw s;case 8:return[2];}})})}(o,m),m}return d})];case 1:return a=e.sent(),r?[4,r]:[3,3];case 2:return i=e.sent(),[3,4];case 3:i=a.authToken,e.label=4;case 4:return[2,i.token];}})})}(n)];}})})}function J(e){return U(e,function(a){if(!Z(a))throw k.create("not-registered");var t=a.authToken,n;return 1===(n=t).requestStatus&&n.requestTime+10000<Date.now()?_e({},a,{authToken:{requestStatus:0}}):a})}function Z(e){return void 0!==e&&2===e.registrationStatus}function ne(d,s){return E(this,void 0,void 0,function(){var p,c,u,h;return l(this,function(a){switch(a.label){case 0:return t=d,o=s.fid,p=I(t)+"/"+o,c=D(d,s),u={method:"DELETE",headers:c},[4,R(function(){return fetch(p,u)})];case 1:return(h=a.sent()).ok?[3,3]:[4,N("Delete Installation",h)];case 2:throw a.sent();case 3:return[2];}var t,o})})}function ae(){return Ve}function oe(){switch(Re.getInstance().document.visibilityState){case"visible":return Ue.VISIBLE;case"hidden":return Ue.HIDDEN;case"prerender":return Ue.PRERENDER;default:return Ue.UNKNOWN;}}function re(a){var t=function(){var a=Re.getInstance().localStorage,t=a.getItem("@firebase/performance/configexpire");if(t&&(r=t,+r>Date.now())){var e=a.getItem("@firebase/performance/config"),r;if(e)try{var i=JSON.parse(e);return i}catch(e){}}}(),i,n;return t?(ie(t),Promise.resolve()):(i=a,(n=Me.getInstance().firebaseAppInstance.installations().getToken(),n.then(function(){}),n).then(function(a){var t=Me.getInstance().getProjectId(),e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+t+"/namespaces/fireperf:fetch?key="+Me.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+a},body:JSON.stringify({app_instance_id:i,app_instance_id_token:a,app_id:Me.getInstance().getAppId(),app_version:"0.2.7",sdk_version:"0.0.1"})});return fetch(n).then(function(e){if(e.ok)return e.json();throw Oe.create("RC response not ok")})}).catch(function(){We.info(Ke)})).then(function(e){return ie(e)}).then(function(e){return function(n){if(n){var t=Re.getInstance().localStorage;t.setItem("@firebase/performance/config",JSON.stringify(n)),t.setItem("@firebase/performance/configexpire",Date.now()+1e3*(60*(60*Me.getInstance().configTimeToLive))+"")}}(e)},function(){})}function ie(a){if(!a)return a;var t=Me.getInstance(),e=a.entries||{};return t.loggingEnabled=void 0===e.fpr_enabled?He.loggingEnabled:"true"===e.fpr_enabled+"",e.fpr_log_source&&(t.logSource=+e.fpr_log_source),e.fpr_log_endpoint_url&&(t.logEndPointUrl=e.fpr_log_endpoint_url),void 0!==e.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=+e.fpr_vc_network_request_sampling_rate),void 0!==e.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=+e.fpr_vc_trace_sampling_rate),t.logTraceAfterSampling=se(t.tracesSamplingRate),t.logNetworkAfterSampling=se(t.networkRequestsSamplingRate),a}function se(e){return Math.random()<=e}function de(){var a;return ze=2,Ge=Ge||(a=Re.getInstance().document,new Promise(function(n){if(a&&"complete"!==a.readyState){var t=function(){"complete"===a.readyState&&(a.removeEventListener("readystatechange",t),n())};a.addEventListener("readystatechange",t)}else n()})).then(function(){return(e=Me.getInstance().firebaseAppInstance.installations().getId()).then(function(e){Ve=e}),e;var e}).then(function(e){return re(e)}).then(function(){return le()},function(){return le()})}function le(){ze=3}function pe(e){return function(){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];!function(e){if(!e.eventTime||!e.message)throw Oe.create("invalid cc log");Qe=Qe.concat([e])}({message:e.apply(void 0,t),eventTime:Date.now()})}}function ce(){if(Xe)return Xe;var e=pe(me);return(Xe=new Ne("@firebase/performance/cc")).logHandler=e,Xe}function ue(n){var t=Me.getInstance();!t.instrumentationEnabled&&n.isAuto||(t.dataCollectionEnabled||n.isAuto)&&(n.isAuto&&oe()!==Ue.VISIBLE||t.loggingEnabled&&t.logTraceAfterSampling&&(3==ze?he(n):de().then(function(){return he(n)},function(){return he(n)})))}function he(e){ae()&&setTimeout(function(){return ce().log(e,1)},0)}function me(a,t){return 0===t?(i={url:(e=a).url,http_method:1,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},s={application_info:ge(),network_request_metric:i},JSON.stringify(s)):function(a){var t={name:a.name,is_auto:a.isAuto,client_start_time_us:a.startTimeUs,duration_us:a.durationUs};0!==Object.keys(a.counters).length&&(t.counters=ye(a.counters));var e=a.getAttributes();0!==Object.keys(e).length&&(t.custom_attributes=ye(e));var n={application_info:ge(),trace_metric:t};return JSON.stringify(n)}(a);var e,i,s}function ge(){return{google_app_id:Me.getInstance().getAppId(),app_instance_id:ae(),web_app_info:{sdk_version:"0.2.7",page_url:Re.getInstance().getUrl(),service_worker_status:(e=Re.getInstance().navigator,"serviceWorker"in e?e.serviceWorker.controller?2:3:1),visibility_state:oe(),effective_connection_type:function(){var e=Re.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0;}}()},application_process_state:0};var e}function ye(n){return Object.keys(n).map(function(e){return{key:e,value:n[e]}})}function fe(l){var t=l;if(t&&void 0!==t.responseStart){var e=Re.getInstance().getTimeOrigin(),o=d(1e3*(t.startTime+e)),i=t.responseStart?d(1e3*(t.responseStart-t.startTime)):void 0,a=d(1e3*(t.responseEnd-t.startTime)),s={url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:o,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:a},p,c;p=s,(c=Me.getInstance()).instrumentationEnabled&&p.url!==c.logEndPointUrl.split("?")[0]&&c.loggingEnabled&&c.logNetworkAfterSampling&&setTimeout(function(){return ce().log(p,0)},0)}}function be(){ae()&&(setTimeout(function(){return function(){var a=Re.getInstance(),o=a.getEntriesByType("navigation"),e=a.getEntriesByType("paint");if(a.onFirstInputDelay){var n=setTimeout(function(){Ye.createOobTrace(o,e),n=void 0},5000);a.onFirstInputDelay(function(a){n&&(clearTimeout(n),Ye.createOobTrace(o,e,a))})}else Ye.createOobTrace(o,e)}()},0),setTimeout(function(){return function(){for(var a=Re.getInstance(),t=a.getEntriesByType("resource"),e=0,i=t,r;e<i.length;e++)r=i[e],fe(r);a.setupObserver("resource",fe)}()},0),setTimeout(function(){return function(){for(var a=Re.getInstance(),t=a.getEntriesByType("measure"),e=0,i=t,r;e<i.length;e++)r=i[e],ve(r);a.setupObserver("measure",ve)}()},0))}function ve(n){var t=n.name;t.substring(0,"FB-PERF-TRACE-MEASURE".length)!=="FB-PERF-TRACE-MEASURE"&&Ye.createUserTimingTrace(t)}T=T&&T.hasOwnProperty("default")?T.default:T;var Te=function(n,t){return(Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(a,t){for(var e in t)t.hasOwnProperty(e)&&(a[e]=t[e])})(n,t)},_e=function(){return(_e=Object.assign||function(a){for(var t=1,i=arguments.length,r;t<i;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=r[s]);return a}).apply(this,arguments)},Ee=function(a){function r(o,t){var e=a.call(this,t)||this;return e.code=o,e.name="FirebaseError",Object.setPrototypeOf(e,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,h.prototype.create),e}return function(a,t){function e(){this.constructor=a}Te(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}(r,a),r}(Error),h=function(){function e(a,t,e){this.service=a,this.serviceName=t,this.errors=e}return e.prototype.create=function(d){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var h=t[0]||{},o=this.service+"/"+d,i=this.errors[d],a=i?(l=h,i.replace(ke,function(a,t){var e=l[t];return null==e?"<"+t+"?>":e.toString()})):"Error",s=this.serviceName+": "+a+" ("+o+").",c=new Ee(o,s),u=0,m=Object.keys(h),l,g;u<m.length;u++)g=m[u],"_"!==g.slice(-1)&&(g in c&&console.warn("Overwriting FirebaseError base field \""+g+"\" can cause unexpected behavior."),c[g]=h[g]);return c},e}(),ke=/\{\$([^}]+)}/g;n(r,"_index",["name","keyPath","multiEntry","unique"]),t(r,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),o(r,"_index",IDBIndex,["openCursor","openKeyCursor"]),n(c,"_cursor",["direction","key","primaryKey","value"]),t(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(a){a in IDBCursor.prototype&&(c.prototype[a]=function(){var n=this,e=arguments;return Promise.resolve().then(function(){return n._cursor[a].apply(n._cursor,e),S(n._request).then(function(e){if(e)return new c(e,n._request)})})})}),u.prototype.createIndex=function(){return new r(this._store.createIndex.apply(this._store,arguments))},u.prototype.index=function(){return new r(this._store.index.apply(this._store,arguments))},n(u,"_store",["name","keyPath","indexNames","autoIncrement"]),t(u,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),o(u,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),e(u,"_store",IDBObjectStore,["deleteIndex"]),m.prototype.objectStore=function(){return new u(this._tx.objectStore.apply(this._tx,arguments))},n(m,"_tx",["objectStoreNames","mode"]),e(m,"_tx",IDBTransaction,["abort"]),g.prototype.createObjectStore=function(){return new u(this._db.createObjectStore.apply(this._db,arguments))},n(g,"_db",["name","version","objectStoreNames"]),e(g,"_db",IDBDatabase,["deleteObjectStore","close"]),y.prototype.transaction=function(){return new m(this._db.transaction.apply(this._db,arguments))},n(y,"_db",["name","version","objectStoreNames"]),e(y,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(a){[u,r].forEach(function(e){a in e.prototype&&(e.prototype[a.replace("open","iterate")]=function(){var i=(o=arguments,Array.prototype.slice.call(o)),e=i[i.length-1],n=this._store||this._index,r=n[a].apply(n,i.slice(0,-1)),o;r.onsuccess=function(){e(r.result)}})})}),[r,u].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(a,i){var t=this,n=[];return new Promise(function(o){t.iterateCursor(a,function(e){e?(n.push(e.value),void 0===i||n.length!=i?e.continue():o(n)):o(n)})})})});var a=((W={})["missing-app-config-values"]="Missing App configuration values.",W["create-installation-failed"]="Could not register Firebase Installation.",W["generate-token-failed"]="Could not generate Auth Token.",W["not-registered"]="Firebase Installation is not registered.",W["installation-not-found"]="Firebase Installation not found.",W["request-failed"]="{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"",W["app-offline"]="Could not process request. Application offline.",W["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",W),k=new h("installations","Installations",a),A=(Ce=function(e){switch(e.oldVersion){case 0:e.createObjectStore("firebase-installations-store");}},Se=s(indexedDB,"open",["firebase-installations-database",1]),(Ie=Se.request)&&(Ie.onupgradeneeded=function(e){Ce&&Ce(new g(Ie.result,e.oldVersion,Ie.transaction))}),Se.then(function(e){return new y(e)})),W,Ce,Se,Ie,we,De;T.INTERNAL.registerService("installations",function(e){return v(e),{app:e,getId:function(){return function(a){return E(this,void 0,void 0,function(){var o,i,s;return l(this,function(e){switch(e.label){case 0:return[4,z(v(a))];case 1:return o=e.sent(),i=o.installationEntry,(s=o.registrationPromise)&&s.catch(function(){}),[2,i.fid];}})})}(e)},getToken:function(){return Y(e)},delete:function(){return function(a){return E(this,void 0,void 0,function(){var o,r;return l(this,function(e){switch(e.label){case 0:return[4,U(o=v(a),function(e){if(!e||0!==e.registrationStatus)return e})];case 1:if(!(r=e.sent()))return[3,6];if(1!==r.registrationStatus)return[3,2];throw k.create("delete-pending-registration");case 2:if(2!==r.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw k.create("app-offline");case 3:return[4,ne(o,r)];case 4:return e.sent(),[4,V(o)];case 5:e.sent(),e.label=6;case 6:return[2];}})})}(e)}}}),(De=we||(we={}))[De.DEBUG=0]="DEBUG",De[De.VERBOSE=1]="VERBOSE",De[De.INFO=2]="INFO",De[De.WARN=3]="WARN",De[De.ERROR=4]="ERROR",De[De.SILENT=5]="SILENT";var Ae=we.INFO,xe=function(a,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];if(!(t<a.logLevel)){var i=new Date().toISOString();switch(t){case we.DEBUG:case we.VERBOSE:console.log.apply(console,["["+i+"]  "+a.name+":"].concat(e));break;case we.INFO:console.info.apply(console,["["+i+"]  "+a.name+":"].concat(e));break;case we.WARN:console.warn.apply(console,["["+i+"]  "+a.name+":"].concat(e));break;case we.ERROR:console.error.apply(console,["["+i+"]  "+a.name+":"].concat(e));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");}}},Ne=function(){function e(e){this.name=e,this._logLevel=Ae,this._logHandler=xe}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in we))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,we.DEBUG].concat(n))},e.prototype.log=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,we.VERBOSE].concat(n))},e.prototype.info=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,we.INFO].concat(n))},e.prototype.warn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,we.WARN].concat(n))},e.prototype.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,we.ERROR].concat(n))},e}(),Le=((Pe={})["trace started"]="Trace {$traceName} was started before.",Pe["trace stopped"]="Trace {$traceName} is not running.",Pe["no window"]="Window is not available.",Pe["no app id"]="App id is not available.",Pe["no project id"]="Project id is not available.",Pe["no api key"]="Api key is not available.",Pe["invalid cc log"]="Attempted to queue invalid cc event",Pe["FB not default"]="Performance can only start when Firebase app instance is the default one.",Pe["RC response not ok"]="RC response is not ok",Pe),Oe=new h("performance","Performance",Le),Re=function(){function e(e){if(!e)throw Oe.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.localStorage=e.localStorage,e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(a,t,e){this.performance&&this.performance.measure&&this.performance.measure(a,t,e)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.setupObserver=function(e,a){this.PerformanceObserver&&new this.PerformanceObserver(function(o){for(var t=0,i=o.getEntries(),n;t<i.length;t++)n=i[t],a(n)}).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===Be&&(Be=new e(qe)),Be},e}(),Me=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw Oe.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw Oe.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw Oe.create("no api key");return e},e.getInstance=function(){return void 0===Fe&&(Fe=new e),Fe},e}(),Pe,Be,qe,Fe,Ve,Ue,je;(je=Ue||(Ue={}))[je.UNKNOWN=0]="UNKNOWN",je[je.VISIBLE=1]="VISIBLE",je[je.HIDDEN=2]="HIDDEN",je[je.PRERENDER=3]="PRERENDER",je[je.UNLOADED=4]="UNLOADED";var We=new Ne("Performance");We.logLevel=we.INFO;var He={loggingEnabled:!0},Ke="Could not fetch config, will use default configs",ze=1,$e=3,Qe=[],Ge,Xe;!function a(e){setTimeout(function(){if(0!=$e){if(!Qe.length)return a(10000);var o=Qe.slice();Qe=[];var t=o.map(function(e){return{source_extension_json:e.message,event_time_ms:e.eventTime+""}}),e={request_time_ms:Date.now()+"",client_info:{client_type:1,js_client_info:{}},log_source:Me.getInstance().logSource,log_event:t};fetch(Me.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(e)}).then(function(e){return e.ok||We.info("Call to Firebase backend failed."),e.json()}).then(function(o){var t=+o.next_request_wait_millis,e=isNaN(t)?10000:Math.max(10000,t);$e=3,a(e)}).catch(function(){Qe=o.concat(Qe),$e--,We.info("Tries left: "+$e+"."),a(10000)})}},e)}(5500);var Ye=function(){function l(a,t,o){void 0===t&&(t=!1),this.name=a,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=Re.getInstance(),this.randomId=d(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=o||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,o&&this.calculateTraceMetrics())}return l.prototype.start=function(){if(1!==this.state)throw Oe.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},l.prototype.stop=function(){if(2!==this.state)throw Oe.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ue(this)},l.prototype.record=function(a,t,e){if(this.durationUs=d(1e3*t),this.startTimeUs=d(1e3*a),e&&e.attributes&&(this.customAttributes=_e({},e.attributes)),e&&e.metrics)for(var n=0,s=Object.keys(e.metrics),o;n<s.length;n++)o=s[n],isNaN(+e.metrics[o])||(this.counters[o]=+d(e.metrics[o]));ue(this)},l.prototype.incrementMetric=function(n,t){void 0===t&&(t=1),void 0===this.counters[n]&&(this.counters[n]=0),this.counters[n]+=t},l.prototype.putMetric=function(n,t){this.counters[n]=t},l.prototype.getMetric=function(e){return this.counters[e]||0},l.prototype.putAttribute=function(n,t){this.customAttributes[n]=t},l.prototype.getAttribute=function(e){return this.customAttributes[e]},l.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},l.prototype.getAttributes=function(){return _e({},this.customAttributes)},l.prototype.setStartTime=function(e){this.startTimeUs=e},l.prototype.setDuration=function(e){this.durationUs=e},l.prototype.calculateTraceMetrics=function(){var n=this.api.getEntriesByName(this.traceMeasure),t=n&&n[0];t&&(this.durationUs=d(1e3*t.duration),this.startTimeUs=d(1e3*(t.startTime+this.api.getTimeOrigin())))},l.createOobTrace=function(p,t,e){var n=Re.getInstance().getUrl();if(n){var r=new l("_wt_"+n,!0),o=d(1e3*Re.getInstance().getTimeOrigin());if(r.setStartTime(o),p&&p[0]&&(r.setDuration(d(1e3*p[0].duration)),r.incrementMetric("domInteractive",d(1e3*p[0].domInteractive)),r.incrementMetric("domContentLoadedEventEnd",d(1e3*p[0].domContentLoadedEventEnd)),r.incrementMetric("loadEventEnd",d(1e3*p[0].loadEventEnd))),t){var i=t.find(function(e){return"first-paint"===e.name});i&&i.startTime&&r.incrementMetric("_fp",d(1e3*i.startTime));var a=t.find(function(e){return"first-contentful-paint"===e.name});a&&a.startTime&&r.incrementMetric("_fcp",d(1e3*a.startTime)),e&&r.incrementMetric("_fid",d(1e3*e))}ue(r)}},l.createUserTimingTrace=function(e){ue(new l(e,!1,e))},l}(),Je=function(){function e(e){this.app=e,de().then(be,be)}return e.prototype.trace=function(e){return new Ye(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return Me.getInstance().instrumentationEnabled},set:function(e){Me.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return Me.getInstance().dataCollectionEnabled},set:function(e){Me.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),e}(),ee;window&&fetch&&Promise?(ee=window,qe=ee,T.INTERNAL.registerService("performance",function(e){if("[DEFAULT]"!==e.name)throw Oe.create("FB not default");return Me.getInstance().firebaseAppInstance=e,new Je(e)},{})):We.info("Firebase Performance cannot start if browser does not support fetch and Promise.")}).apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-performance - be sure to load firebase-app.js first.")}}),"undefined"==typeof firebase)throw new Error("hosting/init-error: Firebase SDK not detected. You must include it before /__/firebase/init.js");firebase.initializeApp({apiKey:"AIzaSyCoRj25llKfW8RDuNHe5kRCN-ogwCgYOJI",databaseURL:"https://textos-da-ju.firebaseio.com",storageBucket:"textos-da-ju.appspot.com",authDomain:"textos-da-ju.web.app",messagingSenderId:"886437033630",projectId:"textos-da-ju",appId:"1:886437033630:web:1ae8bddbce232d02"}),!function(n,a){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=n.document?a(n,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return a(t)}:a(n)}("undefined"==typeof window?this:window,function(Kt,f){"use strict";var qt=Math.ceil,zt=String.fromCharCode,en=Math.max;function C(a,e,t){var s=(t=t||nn).createElement("script"),o,d;if(s.text=a,e)for(o in n)(d=e[o]||e.getAttribute&&e.getAttribute(o))&&s.setAttribute(o,d);t.head.appendChild(s).parentNode.removeChild(s)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?r[i.call(t)]||"object":typeof t}function w(a){var e=!!a&&"length"in a&&a.length,t=b(a);return!y(a)&&!m(a)&&("array"===t||0===e||"number"==typeof e&&0<e&&e-1 in a)}function d(n,e){return n.nodeName&&n.nodeName.toLowerCase()===e.toLowerCase()}function A(t,a,n){return y(a)?rn.grep(t,function(o,e){return!!a.call(o,e,o)!==n}):a.nodeType?rn.grep(t,function(t){return t===a!==n}):"string"==typeof a?rn.filter(a,t,n):rn.grep(t,function(t){return-1<u.call(a,t)!==n})}function j(n,a){for(;(n=n[a])&&1!==n.nodeType;);return n}function P(t){return t}function Zt(t){throw t}function I(a,e,t,n){var o;try{a&&y(o=a.promise)?o.call(a).done(e).fail(t):a&&y(o=a.then)?o.call(a,e,t):e.apply(void 0,[a].slice(n))}catch(n){t.apply(void 0,[n])}}function e(){nn.removeEventListener("DOMContentLoaded",e),Kt.removeEventListener("load",e),rn.ready()}function B(n,e){return e.toUpperCase()}function W(t){return t.replace(_,"ms-").replace(F,B)}function V(){this.expando=rn.expando+V.uid++}function X(a,e,t){var o,s;if(void 0===t&&1===a.nodeType)if(o="data-"+e.replace(K,"-$&").toLowerCase(),"string"==typeof(t=a.getAttribute(o))){try{t="true"===(s=t)||"false"!==s&&("null"===s?null:s===+s+""?+s:Q.test(s)?JSON.parse(s):s)}catch(t){}z.set(a,e,t)}else t=void 0;return t}function Y(d,e,t,p){var r=20,h=p?function(){return p.cur()}:function(){return rn.css(d,e,"")},s=h(),m=t&&t[3]||(rn.cssNumber[e]?"":"px"),g=d.nodeType&&(rn.cssNumber[e]||"px"!==m&&+s)&&J.exec(rn.css(d,e)),y,f;if(g&&g[3]!==m){for(s/=2,m=m||g[3],g=+s||1;r--;)rn.style(d,e,g+m),0>=(1-f)*(1-(f=h()/s||.5))&&(r=0),g/=f;g*=2,rn.style(d,e,g+m),t=t||[]}return t&&(g=+g||+s||0,y=t[1]?g+(t[1]+1)*t[2]:+t[2],p&&(p.unit=m,p.start=g,p.end=y)),y}function ee(d,e){for(var t=[],l=0,p=d.length,h,m,g,y,f,b,v;l<p;l++)(m=d[l]).style&&(h=m.style.display,e?("none"===h&&(t[l]=H.get(m,"display")||null,t[l]||(m.style.display="")),""===m.style.display&&ae(m)&&(t[l]=(v=f=y=void 0,f=(g=m).ownerDocument,b=g.nodeName,(v=se[b])||(y=f.body.appendChild(f.createElement(b)),v=rn.css(y,"display"),y.parentNode.removeChild(y),"none"===v&&(v="block"),se[b]=v)))):"none"!==h&&(t[l]="none",H.set(m,"display",h)));for(l=0;l<p;l++)null!=t[l]&&(d[l].style.display=t[l]);return d}function le(a,e){var t;return t="undefined"==typeof a.getElementsByTagName?"undefined"==typeof a.querySelectorAll?[]:a.querySelectorAll(e||"*"):a.getElementsByTagName(e||"*"),void 0===e||e&&d(a,e)?rn.merge([a],t):t}function fe(a,e){for(var t=0,o=a.length;t<o;t++)H.set(a[t],"globalEval",!e||H.get(e[t],"globalEval"))}function ye(m,e,t,n,r){for(var i=e.createDocumentFragment(),g=[],p=0,y=m.length,h,f,v,T,_,E;p<y;p++)if((h=m[p])||0===h)if("object"===b(h))rn.merge(g,h.nodeType?[h]:h);else if(he.test(h)){for(f=f||i.appendChild(e.createElement("div")),v=(pe.exec(h)||["",""])[1].toLowerCase(),T=ue[v]||ue._default,f.innerHTML=T[1]+rn.htmlPrefilter(h)+T[2],E=T[0];E--;)f=f.lastChild;rn.merge(g,f.childNodes),(f=i.firstChild).textContent=""}else g.push(e.createTextNode(h));for(i.textContent="",p=0;h=g[p++];)if(n&&-1<rn.inArray(h,n))r&&r.push(h);else if(_=ne(h),f=le(i.appendChild(h),"script"),_&&fe(f),t)for(E=0;h=f[E++];)de.test(h.type||"")&&t.push(h);return i}function ve(){return!0}function ke(){return!1}function Se(n,e){return n===function(){try{return nn.activeElement}catch(t){}}()==("focus"===e)}function we(d,e,t,l,p,c){var o,u;if("object"==typeof e){for(u in"string"!=typeof t&&(l=l||t,t=void 0),e)we(d,u,t,l,e[u],c);return d}if(null==l&&null==p?(p=t,l=t=void 0):null==p&&("string"==typeof t?(p=l,l=void 0):(p=l,l=t,t=void 0)),!1===p)p=ke;else if(!p)return d;return 1===c&&(o=p,(p=function(t){return rn().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=rn.guid++)),d.each(function(){rn.event.add(this,e,p,l,t)})}function Ae(t,a,i){i?(H.set(t,a,!1),rn.event.add(t,a,{namespace:!1,handler:function(o){var e=H.get(this,a),s,d;if(!(1&o.isTrigger&&this[a]))e.length&&(H.set(this,a,{value:rn.event.trigger(rn.extend(e[0],rn.Event.prototype),e.slice(1),this)}),o.stopImmediatePropagation());else if(e.length)(rn.event.special[a]||{}).delegateType&&o.stopPropagation();else if(e=an.call(arguments),H.set(this,a,e),s=i(this,a),this[a](),e!==(d=H.get(this,a))||s?H.set(this,a,!1):d={},e!==d)return o.stopImmediatePropagation(),o.preventDefault(),d.value}})):void 0===H.get(t,a)&&rn.event.add(t,a,ve)}function De(n,e){return d(n,"table")&&d(11===e.nodeType?e.firstChild:e,"tr")&&rn(n).children("tbody")[0]||n}function Ne(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Oe(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Re(d,e){var t,p,c,h,m,g,y,f;if(1===e.nodeType){if(H.hasData(d)&&(h=H.access(d),m=H.set(e,h),f=h.events))for(c in delete m.handle,m.events={},f)for(t=0,p=f[c].length;t<p;t++)rn.event.add(e,c,f[c][t]);z.hasData(d)&&(g=z.access(d),y=rn.extend({},g),z.set(e,y))}}function Me(p,n,m,i){n=on.apply([],n);var o=0,g=p.length,f=n[0],d=y(f),h,b,T,_,E,k;if(d||1<g&&"string"==typeof f&&!v.checkClone&&qe.test(f))return p.each(function(a){var e=p.eq(a);d&&(n[0]=f.call(this,a,e.html())),Me(e,n,m,i)});if(g&&(b=(h=ye(n,p[0].ownerDocument,!1,p,i)).firstChild,1===h.childNodes.length&&(h=b),b||i)){for(_=(T=rn.map(le(h,"script"),Ne)).length;o<g;o++)E=h,o!=g-1&&(E=rn.clone(E,!0,!0),_&&rn.merge(T,le(E,"script"))),m.call(p[o],E,o);if(_)for(k=T[T.length-1].ownerDocument,rn.map(T,Oe),o=0;o<_;o++)E=T[o],de.test(E.type||"")&&!H.access(E,"globalEval")&&rn.contains(k,E)&&(E.src&&"module"!==(E.type||"").toLowerCase()?rn._evalUrl&&!E.noModule&&rn._evalUrl(E.src,{nonce:E.nonce||E.getAttribute("nonce")}):C(E.textContent.replace(Le,""),E,k))}return p}function Ie(a,e,t){for(var n=e?rn.filter(e,a):a,i=0,s;null!=(s=n[i]);i++)t||1!==s.nodeType||rn.cleanData(le(s)),s.parentNode&&(t&&ne(s)&&fe(le(s,"script")),s.parentNode.removeChild(s));return a}function Pe(d,e,t){var l=d.style,s,p,c,u;return(t=t||$e(d))&&(""!==(u=t.getPropertyValue(e)||t[e])||ne(d)||(u=rn.style(d,e)),!v.pixelBoxStyles()&&He.test(u)&&Fe.test(e)&&(s=l.width,p=l.minWidth,c=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=t.width,l.width=s,l.minWidth=p,l.maxWidth=c)),void 0===u?u:u+""}function _e(n,e){return{get:function(){return n()?void delete this.get:(this.get=e).apply(this,arguments)}}}function We(n){var e=rn.cssProps[n]||Xe[n];return e||(n in Ue?n:Xe[n]=function(a){for(var o=a[0].toUpperCase()+a.slice(1),t=Be.length;t--;)if((a=Be[t]+o)in Ue)return a}(n)||n)}function ze(a,e,t){var n=J.exec(e);return n?en(0,n[2]-(t||0))+(n[3]||"px"):e}function Ge(d,e,t,n,r,i){var o="width"===e?1:0,l=0,p=0;if(t===(n?"border":"content"))return 0;for(;4>o;o+=2)"margin"===t&&(p+=rn.css(d,t+Z[o],!0,r)),n?("content"===t&&(p-=rn.css(d,"padding"+Z[o],!0,r)),"margin"!==t&&(p-=rn.css(d,"border"+Z[o]+"Width",!0,r))):(p+=rn.css(d,"padding"+Z[o],!0,r),"padding"===t?l+=rn.css(d,"border"+Z[o]+"Width",!0,r):p+=rn.css(d,"border"+Z[o]+"Width",!0,r));return!n&&0<=i&&(p+=en(0,qt(d["offset"+e[0].toUpperCase()+e.slice(1)]-i-p-l-.5))||0),p}function Ze(d,e,t){var n=$e(d),r=(!v.boxSizingReliable()||t)&&"border-box"===rn.css(d,"boxSizing",!1,n),l=r,p=Pe(d,e,n),c="offset"+e[0].toUpperCase()+e.slice(1);if(He.test(p)){if(!t)return p;p="auto"}return(!v.boxSizingReliable()&&r||"auto"===p||!parseFloat(p)&&"inline"===rn.css(d,"display",!1,n))&&d.getClientRects().length&&(r="border-box"===rn.css(d,"boxSizing",!1,n),(l=c in d)&&(p=d[c])),(p=parseFloat(p)||0)+Ge(d,e,t||(r?"border":"content"),l,n,p)+"px"}function et(a,e,t,n,o){return new et.prototype.init(a,e,t,n,o)}function tt(){dn&&(!1===nn.hidden&&Kt.requestAnimationFrame?Kt.requestAnimationFrame(tt):Kt.setTimeout(tt,rn.fx.interval),rn.fx.tick())}function nt(){return Kt.setTimeout(function(){ut=void 0}),ut=Date.now()}function lt(a,e){var o=0,s={height:a},i;for(e=e?1:0;4>o;o+=2-e)s["margin"+(i=Z[o])]=s["padding"+i]=a;return e&&(s.opacity=s.width=a),s}function ct(s,e,t){for(var n=(pt.tweeners[e]||[]).concat(pt.tweeners["*"]),i=0,d=n.length,a;i<d;i++)if(a=n[i].call(t,e,s))return a}function pt(d,o,e){var t=0,p=pt.prefilters.length,h=rn.Deferred().always(function(){delete i.elem}),i=function(){if(u)return!1;for(var a=ut||nt(),e=en(0,s.startTime+s.duration-a),t=1-(e/s.duration||0),n=0,o=s.tweens.length;n<o;n++)s.tweens[n].run(t);return h.notifyWith(d,[s,t,e]),1>t&&o?e:(o||h.notifyWith(d,[s,1,0]),h.resolveWith(d,[s]),!1)},s=h.promise({elem:d,props:rn.extend({},o),opts:rn.extend(!0,{specialEasing:{},easing:rn.easing._default},e),originalProperties:o,originalOptions:e,startTime:ut||nt(),duration:e.duration,tweens:[],createTween:function(a,e){var t=rn.Tween(d,s.opts,a,e,s.opts.specialEasing[a]||s.opts.easing);return s.tweens.push(t),t},stop:function(a){var e=0,o=a?s.tweens.length:0;if(u)return this;for(u=!0;e<o;e++)s.tweens[e].run(1);return a?(h.notifyWith(d,[s,1,0]),h.resolveWith(d,[s,a])):h.rejectWith(d,[s,a]),this}}),l=s.props,c,u;for(!function(s,e){var t,d,l,p,c;for(t in s)if(l=e[d=W(t)],p=s[t],Array.isArray(p)&&(l=p[1],p=s[t]=p[0]),t!==d&&(s[d]=p,delete s[t]),(c=rn.cssHooks[d])&&("expand"in c))for(t in p=c.expand(p),delete s[d],p)(t in s)||(s[t]=p[t],e[t]=l);else e[d]=l}(l,s.opts.specialEasing);t<p;t++)if(c=pt.prefilters[t].call(s,d,l,s.opts))return y(c.stop)&&(rn._queueHooks(s.elem,s.opts.queue).stop=c.stop.bind(c)),c;return rn.map(l,ct,s),y(s.opts.start)&&s.opts.start.call(d,s),s.progress(s.opts.progress).done(s.opts.done,s.opts.complete).fail(s.opts.fail).always(s.opts.always),rn.fx.timer(rn.extend(i,{elem:d,anim:s,queue:s.opts.queue})),s}function dt(t){return(t.match(N)||[]).join(" ")}function mt(t){return t.getAttribute&&t.getAttribute("class")||""}function ft(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(N)||[]}function bt(a,n,o,r){if(Array.isArray(n))rn.each(n,function(n,e){o||St.test(a)?r(a,e):bt(a+"["+("object"==typeof e&&null!=e?n:"")+"]",e,o,r)});else if(o||"object"!==b(n))r(a,n);else for(var e in n)bt(a+"["+e+"]",n[e],o,r)}function xt(e){return function(a,o){"string"!=typeof a&&(o=a,a="*");var s=0,d=a.toLowerCase().match(N)||[],i;if(y(o))for(;i=d[s++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(o)):(e[i]=e[i]||[]).push(o)}}function Bt(n,r,i,o){function a(t){var l;return d[t]=!0,rn.each(n[t]||[],function(p,e){var t=e(r,i,o);return"string"!=typeof t||s||d[t]?s?!(l=t):void 0:(r.dataTypes.unshift(t),a(t),!1)}),l}var d={},s=n===It;return a(r.dataTypes[0])||!d["*"]&&a("*")}function _t(a,e){var t=rn.ajaxSettings.flatOptions||{},o,i;for(o in e)void 0!==e[o]&&((t[o]?a:i||(i={}))[o]=e[o]);return i&&rn.extend(!0,a,i),a}var tn=[],nn=Kt.document,E=Object.getPrototypeOf,an=tn.slice,on=tn.concat,s=tn.push,u=tn.indexOf,r={},i=r.toString,g=r.hasOwnProperty,o=g.toString,a=o.call(Object),v={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},m=function(t){return null!=t&&t===t.window},n={type:!0,src:!0,nonce:!0,noModule:!0},rn=function(n,e){return new rn.fn.init(n,e)},t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;rn.fn=rn.prototype={jquery:"3.4.1",constructor:rn,length:0,toArray:function(){return an.call(this)},get:function(t){return null==t?an.call(this):0>t?this[t+this.length]:this[t]},pushStack:function(n){var e=rn.merge(this.constructor(),n);return e.prevObject=this,e},each:function(t){return rn.each(this,t)},map:function(a){return this.pushStack(rn.map(this,function(n,e){return a.call(n,e,n)}))},slice:function(){return this.pushStack(an.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var e=this.length,t=+a+(0>a?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:tn.sort,splice:tn.splice},rn.extend=rn.fn.extend=function(){var d=arguments[0]||{},p=1,c=arguments.length,u=!1,h,m,g,f,b,v;for("boolean"==typeof d&&(u=d,d=arguments[p]||{},p++),"object"==typeof d||y(d)||(d={}),p===c&&(d=this,p--);p<c;p++)if(null!=(h=arguments[p]))for(m in h)f=h[m],"__proto__"!==m&&d!==f&&(u&&f&&(rn.isPlainObject(f)||(b=Array.isArray(f)))?(g=d[m],v=b&&!Array.isArray(g)?[]:b||rn.isPlainObject(g)?g:{},b=!1,d[m]=rn.extend(u,v,f)):void 0!==f&&(d[m]=f));return d},rn.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(r){var e,s;return r&&"[object Object]"===i.call(r)&&(!(e=E(r))||"function"==typeof(s=g.call(e,"constructor")&&e.constructor)&&o.call(s)===a)},isEmptyObject:function(n){for(var e in n)return!1;return!0},globalEval:function(n,e){C(n,{nonce:e&&e.nonce})},each:function(a,e){var t=0,o;if(w(a))for(o=a.length;t<o&&!1!==e.call(a[t],t,a[t]);t++);else for(t in a)if(!1===e.call(a[t],t,a[t]))break;return a},trim:function(n){return null==n?"":(n+"").replace(t,"")},makeArray:function(a,e){var t=e||[];return null!=a&&(w(Object(a))?rn.merge(t,"string"==typeof a?[a]:a):s.call(t,a)),t},inArray:function(a,e,t){return null==e?-1:u.call(e,a,t)},merge:function(a,e){for(var t=+e.length,n=0,o=a.length;n<t;n++)a[o++]=e[n];return a.length=o,a},grep:function(a,e,t){for(var n=[],r=0,s=a.length;r<s;r++)!e(a[r],r)!==!t&&n.push(a[r]);return n},map:function(s,e,t){var n=0,d=[],a,l;if(w(s))for(a=s.length;n<a;n++)null!=(l=e(s[n],n,t))&&d.push(l);else for(n in s)null!=(l=e(s[n],n,t))&&d.push(l);return on.apply([],d)},guid:1,support:v}),"function"==typeof Symbol&&(rn.fn[Symbol.iterator]=tn[Symbol.iterator]),rn.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","Symbol"],function(n,e){r["[object "+e+"]"]=e.toLowerCase()});var l=function(I){function R(d,t,h,m){var r=t&&t.ownerDocument,g=t?t.nodeType:9,p,y,b,v,T,_,E;if(h=h||[],"string"!=typeof d||!d||1!==g&&9!==g&&11!==g)return h;if(!m&&((t?t.ownerDocument||t:k)!==Fe&&qe(t),t=t||Fe,Ue)){if(11!==g&&(T=K.exec(d)))if(!(p=T[1])){if(T[2])return L.apply(h,t.getElementsByTagName(d)),h;if((p=T[3])&&De.getElementsByClassName&&t.getElementsByClassName)return L.apply(h,t.getElementsByClassName(p)),h}else if(9===g){if(!(b=t.getElementById(p)))return h;if(b.id===p)return h.push(b),h}else if(r&&(b=r.getElementById(p))&&Ke(t,b)&&b.id===p)return h.push(b),h;if(De.qsa&&!x[d+" "]&&(!je||!je.test(d))&&(1!==g||"object"!==t.nodeName.toLowerCase())){if(E=d,r=t,1===g&&z.test(d)){for((v=t.getAttribute("id"))?v=v.replace(ne,re):t.setAttribute("id",v=Ee),y=(_=Le(d)).length;y--;)_[y]="#"+v+" "+me(_[y]);E=_.join(","),r=Z.test(d)&&ge(t.parentNode)||t}try{return L.apply(h,r.querySelectorAll(E)),h}catch(t){x(d,!0)}finally{v===Ee&&t.removeAttribute("id")}}}return Re(d.replace(F,"$1"),t,h,m)}function n(){var a=[];return function o(e,t){return a.push(e+" ")>Ae.cacheLength&&delete o[a.shift()],o[e+" "]=t}}function W(t){return t[Ee]=!0,t}function se(n){var e=Fe.createElement("fieldset");try{return!!n(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function le(a,e){for(var t=a.split("|"),n=t.length;n--;)Ae.attrHandle[t[n]]=e}function ce(a,e){var t=e&&a,o=t&&1===a.nodeType&&1===e.nodeType&&a.sourceIndex-e.sourceIndex;if(o)return o;if(t)for(;t=t.nextSibling;)if(t===e)return-1;return a?1:-1}function pe(n){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===n}}function de(a){return function(n){var e=n.nodeName.toLowerCase();return("input"===e||"button"===e)&&n.type===a}}function ue(n){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===n:t.disabled===n:t.isDisabled===n||t.isDisabled!==!n&&oe(t)===n:t.disabled===n:"label"in t&&t.disabled===n}}function he(s){return W(function(a){return a=+a,W(function(o,e){for(var t=s([],o.length,a),r=t.length,d;r--;)o[d=t[r]]&&(o[d]=!(e[d]=o[d]))})})}function ge(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function ye(){}function me(a){for(var e=0,o=a.length,n="";e<o;e++)n+=a[e].value;return n}function fe(o,n,e){var s=n.dir,d=n.next,l=d||s,c=e&&"parentNode"===l,u=m++;return n.first?function(a,r,t){for(;a=a[s];)if(1===a.nodeType||c)return o(a,r,t);return!1}:function(p,h,t){var n=[ke,u],a,m,g;if(t){for(;p=p[s];)if((1===p.nodeType||c)&&o(p,h,t))return!0;}else for(;p=p[s];)if(1===p.nodeType||c)if(m=(g=p[Ee]||(p[Ee]={}))[p.uniqueID]||(g[p.uniqueID]={}),d&&d===p.nodeName.toLowerCase())p=p[s]||p;else{if((a=m[l])&&a[0]===ke&&a[1]===u)return n[2]=a[2];if((m[l]=n)[2]=o(p,h,t))return!0}return!1}}function be(a){return 1<a.length?function(o,e,t){for(var n=a.length;n--;)if(!a[n](o,e,t))return!1;return!0}:a[0]}function ve(d,e,t,n,r){for(var i=[],a=0,l=d.length,p;a<l;a++)(p=d[a])&&(t&&!t(p,n,r)||(i.push(p),null!=e&&e.push(a)));return i}function Te(m,d,h,g,b,t){return g&&!g[Ee]&&(g=Te(g)),b&&!b[Ee]&&(b=Te(b,t)),W(function(y,e,t,n){var r=[],s=[],u=e.length,l=y||function(a,e,t){for(var n=0,o=e.length;n<o;n++)R(a,e[n],t);return t}(d||"*",t.nodeType?[t]:t,[]),c=m&&(y||!d)?ve(l,r,m,t,n):l,f=h?b||(y?m:u||g)?[]:e:c,v,T,_;if(h&&h(c,f,t,n),g)for(v=ve(f,s),g(v,[],t,n),T=v.length;T--;)(_=v[T])&&(f[s[T]]=!(c[s[T]]=_));if(!y)f=ve(f===e?f.splice(u,f.length):f),b?b(null,e,f,n):L.apply(e,f);else if(b||m){if(b){for(v=[],T=f.length;T--;)(_=f[T])&&v.push(c[T]=_);b(null,f=[],v,n)}for(T=f.length;T--;)(_=f[T])&&-1<(v=b?O(y,_):r[T])&&(y[v]=!(e[v]=_))}})}function _e(d){for(var p=d.length,h=Ae.relative[d[0].type],o=h||Ae.relative[" "],a=h?1:0,m=fe(function(t){return t===l},o,!0),u=fe(function(t){return-1<O(l,t)},o,!0),r=[function(a,e,t){var n=!h&&(t||e!==Me)||((l=e).nodeType?m(a,e,t):u(a,e,t));return l=null,n}],l,g,y;a<p;a++)if(g=Ae.relative[d[a].type])r=[fe(be(r),g)];else{if((g=Ae.filter[d[a].type].apply(null,d[a].matches))[Ee]){for(y=++a;y<p&&!Ae.relative[d[y].type];y++);return Te(1<a&&be(r),1<a&&me(d.slice(0,a-1).concat({value:" "===d[a-2].type?"*":""})).replace(F,"$1"),g,a<y&&_e(d.slice(a,y)),y<p&&_e(d=d.slice(y)),y<p&&me(d))}r.push(g)}return be(r)}var Ee="sizzle"+1*new Date,k=I.document,ke=0,m=0,Ce=n(),p=n(),Se=n(),x=n(),A=function(n,e){return n===e&&(Be=!0),0},N={}.hasOwnProperty,j=[],Ie=j.pop,q=j.push,L=j.push,we=j.slice,O=function(a,e){for(var t=0,o=a.length;t<o;t++)if(a[t]===e)return t;return-1},P=/[\x20\t\r\n\f]+/g,F=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,B=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,_=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,z=/[\x20\t\r\n\f]|>/,U=/:((?:\\.|[\w-]|[^\0-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\0-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\0-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,X=/^(?:\\.|[\w-]|[^\0-\xa0])+$/,V={ID:/^#((?:\\.|[\w-]|[^\0-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\0-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\0-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\0-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\0-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\0-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\0-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\0-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},G=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,ee=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,te=function(a,e,t){var n="0x"+e-65536;return n!=n||t?e:0>n?zt(n+65536):zt(55296|n>>10,56320|1023&n)},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(n,e){return e?"\0"===n?"\uFFFD":n.slice(0,-1)+"\\"+n.charCodeAt(n.length-1).toString(16)+" ":"\\"+n},ie=function(){qe()},oe=fe(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"}),ae,De,Ae,xe,Ne,Le,Oe,Re,Me,Pe,Be,qe,Fe,Ve,Ue,je,We,He,Ke;try{L.apply(j=we.call(k.childNodes),k.childNodes),j[k.childNodes.length].nodeType}catch(t){L={apply:j.length?function(n,e){q.apply(n,we.call(e))}:function(a,e){for(var t=a.length,o=0;a[t++]=e[o++];);a.length=t-1}}}for(ae in De=R.support={},Ne=R.isXML=function(a){var e=a.namespaceURI,t=(a.ownerDocument||a).documentElement;return!G.test(e||t&&t.nodeName||"HTML")},qe=R.setDocument=function(a){var e=a?a.ownerDocument||a:k,o,r;return e!==Fe&&9===e.nodeType&&e.documentElement&&(Ve=(Fe=e).documentElement,Ue=!Ne(Fe),k!==Fe&&(r=Fe.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ie,!1):r.attachEvent&&r.attachEvent("onunload",ie)),De.attributes=se(function(t){return t.className="i",!t.getAttribute("className")}),De.getElementsByTagName=se(function(t){return t.appendChild(Fe.createComment("")),!t.getElementsByTagName("*").length}),De.getElementsByClassName=J.test(Fe.getElementsByClassName),De.getById=se(function(t){return Ve.appendChild(t).id=Ee,!Fe.getElementsByName||!Fe.getElementsByName(Ee).length}),De.getById?(Ae.filter.ID=function(n){var a=n.replace(ee,te);return function(t){return t.getAttribute("id")===a}},Ae.find.ID=function(a,e){if("undefined"!=typeof e.getElementById&&Ue){var t=e.getElementById(a);return t?[t]:[]}}):(Ae.filter.ID=function(t){var a=t.replace(ee,te);return function(n){var e="undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id");return e&&e.value===a}},Ae.find.ID=function(a,e){if("undefined"!=typeof e.getElementById&&Ue){var t=e.getElementById(a),s,d,l;if(t){if((s=t.getAttributeNode("id"))&&s.value===a)return[t];for(l=e.getElementsByName(a),d=0;t=l[d++];)if((s=t.getAttributeNode("id"))&&s.value===a)return[t]}return[]}}),Ae.find.TAG=De.getElementsByTagName?function(n,e){return"undefined"==typeof e.getElementsByTagName?De.qsa?e.querySelectorAll(n):void 0:e.getElementsByTagName(n)}:function(a,e){var t=[],r=0,s=e.getElementsByTagName(a),o;if("*"===a){for(;o=s[r++];)1===o.nodeType&&t.push(o);return t}return s},Ae.find.CLASS=De.getElementsByClassName&&function(n,e){if("undefined"!=typeof e.getElementsByClassName&&Ue)return e.getElementsByClassName(n)},We=[],je=[],(De.qsa=J.test(Fe.querySelectorAll))&&(se(function(t){Ve.appendChild(t).innerHTML="<a id='"+Ee+"'></a><select id='"+Ee+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&je.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||je.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),t.querySelectorAll("[id~="+Ee+"-]").length||je.push("~="),t.querySelectorAll(":checked").length||je.push(":checked"),t.querySelectorAll("a#"+Ee+"+*").length||je.push(".#.+[+~]")}),se(function(n){n.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=Fe.createElement("input");e.setAttribute("type","hidden"),n.appendChild(e).setAttribute("name","D"),n.querySelectorAll("[name=d]").length&&je.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==n.querySelectorAll(":enabled").length&&je.push(":enabled",":disabled"),Ve.appendChild(n).disabled=!0,2!==n.querySelectorAll(":disabled").length&&je.push(":enabled",":disabled"),n.querySelectorAll("*,:x"),je.push(",.*:")})),(De.matchesSelector=J.test(He=Ve.matches||Ve.webkitMatchesSelector||Ve.mozMatchesSelector||Ve.oMatchesSelector||Ve.msMatchesSelector))&&se(function(t){De.disconnectedMatch=He.call(t,"*"),He.call(t,"[s!='']:x"),We.push("!=",":((?:\\\\.|[\\w-]|[^\0-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\0-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\0-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),je=je.length&&new RegExp(je.join("|")),We=We.length&&new RegExp(We.join("|")),o=J.test(Ve.compareDocumentPosition),Ke=o||J.test(Ve.contains)?function(a,e){var t=9===a.nodeType?a.documentElement:a,n=e&&e.parentNode;return a===n||n&&1===n.nodeType&&(t.contains?t.contains(n):a.compareDocumentPosition&&16&a.compareDocumentPosition(n))}:function(n,e){if(e)for(;e=e.parentNode;)if(e===n)return!0;return!1},A=o?function(a,e){if(a===e)return Be=!0,0;var t=!a.compareDocumentPosition-!e.compareDocumentPosition;return t||(1&(t=(a.ownerDocument||a)===(e.ownerDocument||e)?a.compareDocumentPosition(e):1)||!De.sortDetached&&e.compareDocumentPosition(a)===t?a===Fe||a.ownerDocument===k&&Ke(k,a)?-1:e===Fe||e.ownerDocument===k&&Ke(k,e)?1:Pe?O(Pe,a)-O(Pe,e):0:4&t?-1:1)}:function(d,e){if(d===e)return Be=!0,0;var t=0,l=d.parentNode,i=e.parentNode,o=[d],a=[e],s;if(!l||!i)return d===Fe?-1:e===Fe?1:l?-1:i?1:Pe?O(Pe,d)-O(Pe,e):0;if(l===i)return ce(d,e);for(s=d;s=s.parentNode;)o.unshift(s);for(s=e;s=s.parentNode;)a.unshift(s);for(;o[t]===a[t];)t++;return t?ce(o[t],a[t]):o[t]===k?-1:a[t]===k?1:0}),Fe},R.matches=function(n,e){return R(n,null,null,e)},R.matchesSelector=function(a,e){if((a.ownerDocument||a)!==Fe&&qe(a),De.matchesSelector&&Ue&&!x[e+" "]&&(!We||!We.test(e))&&(!je||!je.test(e)))try{var t=He.call(a,e);if(t||De.disconnectedMatch||a.document&&11!==a.document.nodeType)return t}catch(t){x(e,!0)}return 0<R(e,Fe,null,[a]).length},R.contains=function(n,e){return(n.ownerDocument||n)!==Fe&&qe(n),Ke(n,e)},R.attr=function(a,e){(a.ownerDocument||a)!==Fe&&qe(a);var t=Ae.attrHandle[e.toLowerCase()],n=t&&N.call(Ae.attrHandle,e.toLowerCase())?t(a,e,!Ue):void 0;return void 0===n?De.attributes||!Ue?a.getAttribute(e):(n=a.getAttributeNode(e))&&n.specified?n.value:null:n},R.escape=function(t){return(t+"").replace(ne,re)},R.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},R.uniqueSort=function(a){var e=[],n=0,o=0,s;if(Be=!De.detectDuplicates,Pe=!De.sortStable&&a.slice(0),a.sort(A),Be){for(;s=a[o++];)s===a[o]&&(n=e.push(o));for(;n--;)a.splice(e[n],1)}return Pe=null,a},xe=R.getText=function(a){var o="",s=0,d=a.nodeType,i;if(!d)for(;i=a[s++];)o+=xe(i);else if(1===d||9===d||11===d){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)o+=xe(a)}else if(3===d||4===d)return a.nodeValue;return o},(Ae=R.selectors={cacheLength:50,createPseudo:W,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ee,te),t[3]=(t[3]||t[4]||t[5]||"").replace(ee,te),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||R.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&R.error(t[0]),t},PSEUDO:function(a){var e=!a[6]&&a[2],n;return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":e&&U.test(e)&&(n=Le(e,!0))&&(n=e.indexOf(")",e.length-n)-e.length)&&(a[0]=a[0].slice(0,n),a[2]=e.slice(0,n)),a.slice(0,3))}},filter:{TAG:function(n){var a=n.replace(ee,te).toLowerCase();return"*"===n?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===a}},CLASS:function(n){var a=Ce[n+" "];return a||(a=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+n+"("+"[\\x20\\t\\r\\n\\f]"+"|$)"))&&Ce(n,function(t){return a.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(a,n,o){return function(r){var e=R.attr(r,a);return null==e?"!="===n:!n||(e+="","="===n?e===o:"!="===n?e!==o:"^="===n?o&&0===e.indexOf(o):"*="===n?o&&-1<e.indexOf(o):"$="===n?o&&e.slice(-o.length)===o:"~="===n?-1<(" "+e.replace(P," ")+" ").indexOf(o):"|="==n&&(e===o||e.slice(0,o.length+1)===o+"-"))}},CHILD:function(n,a,e,t,h){var g="nth"!==n.slice(0,3),y="last"!==n.slice(-4),m="of-type"===a;return 1===t&&0===h?function(t){return!!t.parentNode}:function(b,e,v){var T=g==y?"previousSibling":"nextSibling",_=b.parentNode,c=m&&b.nodeName.toLowerCase(),f=!v&&!m,p=!1,E,k,C,S,I,w;if(_){if(g){for(;T;){for(S=b;S=S[T];)if(m?S.nodeName.toLowerCase()===c:1===S.nodeType)return!1;w=T="only"===n&&!w&&"nextSibling"}return!0}if(w=[y?_.firstChild:_.lastChild],y&&f){for(p=(I=(E=(k=(C=(S=_)[Ee]||(S[Ee]={}))[S.uniqueID]||(C[S.uniqueID]={}))[n]||[])[0]===ke&&E[1])&&E[2],S=I&&_.childNodes[I];S=++I&&S&&S[T]||(p=I=0)||w.pop();)if(1===S.nodeType&&++p&&S===b){k[n]=[ke,I,p];break}}else if(f&&(p=I=(E=(k=(C=(S=b)[Ee]||(S[Ee]={}))[S.uniqueID]||(C[S.uniqueID]={}))[n]||[])[0]===ke&&E[1]),!1===p)for(;(S=++I&&S&&S[T]||(p=I=0)||w.pop())&&!((m?S.nodeName.toLowerCase()===c:1===S.nodeType)&&++p&&(f&&((k=(C=S[Ee]||(S[Ee]={}))[S.uniqueID]||(C[S.uniqueID]={}))[n]=[ke,p]),S===b)););return(p-=h)==t||0==p%t&&0<=p/t}}},PSEUDO:function(n,s){var o=Ae.pseudos[n]||Ae.setFilters[n.toLowerCase()]||R.error("unsupported pseudo: "+n),a;return o[Ee]?o(s):1<o.length?(a=[n,n,"",s],Ae.setFilters.hasOwnProperty(n.toLowerCase())?W(function(a,e){for(var t=o(a,s),r=t.length,d;r--;)a[d=O(a,t[r])]=!(e[d]=t[r])}):function(t){return o(t,0,a)}):o}},pseudos:{not:W(function(t){var a=[],o=[],d=Oe(t.replace(F,"$1"));return d[Ee]?W(function(s,e,t,n){for(var r=d(s,null,n,[]),o=s.length,l;o--;)(l=r[o])&&(s[o]=!(e[o]=l))}):function(r,e,t){return a[0]=r,d(a,null,t,o),a[0]=null,!o.pop()}}),has:W(function(n){return function(t){return 0<R(n,t).length}}),contains:W(function(n){return n=n.replace(ee,te),function(t){return-1<(t.textContent||xe(t)).indexOf(n)}}),lang:W(function(a){return X.test(a||"")||R.error("unsupported lang: "+a),a=a.replace(ee,te).toLowerCase(),function(n){var o;do if(o=Ue?n.lang:n.getAttribute("xml:lang")||n.getAttribute("lang"))return(o=o.toLowerCase())===a||0===o.indexOf(a+"-");while((n=n.parentNode)&&1===n.nodeType);return!1}}),target:function(n){var e=I.location&&I.location.hash;return e&&e.slice(1)===n.id},root:function(t){return t===Ve},focus:function(t){return t===Fe.activeElement&&(!Fe.hasFocus||Fe.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ue(!1),disabled:ue(!0),checked:function(n){var e=n.nodeName.toLowerCase();return"input"===e&&!!n.checked||"option"===e&&!!n.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(6>t.nodeType)return!1;return!0},parent:function(t){return!Ae.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return Y.test(t.nodeName)},button:function(n){var e=n.nodeName.toLowerCase();return"input"===e&&"button"===n.type||"button"===e},text:function(n){var e;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(e=n.getAttribute("type"))||"text"===e.toLowerCase())},first:he(function(){return[0]}),last:he(function(n,e){return[e-1]}),eq:he(function(a,e,t){return[0>t?t+e:t]}),even:he(function(a,e){for(var t=0;t<e;t+=2)a.push(t);return a}),odd:he(function(a,e){for(var t=1;t<e;t+=2)a.push(t);return a}),lt:he(function(a,e,t){for(var n=0>t?t+e:e<t?e:t;0<=--n;)a.push(n);return a}),gt:he(function(a,e,t){for(var n=0>t?t+e:t;++n<e;)a.push(n);return a})}}).pseudos.nth=Ae.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Ae.pseudos[ae]=pe(ae);for(ae in{submit:!0,reset:!0})Ae.pseudos[ae]=de(ae);return ye.prototype=Ae.filters=Ae.pseudos,Ae.setFilters=new ye,Le=R.tokenize=function(d,e){var t=p[d+" "],l,c,h,m,g,y,f;if(t)return e?0:t.slice(0);for(g=d,y=[],f=Ae.preFilter;g;){for(m in l&&!(c=B.exec(g))||(c&&(g=g.slice(c[0].length)||g),y.push(h=[])),l=!1,(c=_.exec(g))&&(l=c.shift(),h.push({value:l,type:c[0].replace(F," ")}),g=g.slice(l.length)),Ae.filter)(c=V[m].exec(g))&&(!f[m]||(c=f[m](c)))&&(l=c.shift(),h.push({value:l,type:m,matches:c}),g=g.slice(l.length));if(!l)break}return e?g.length:g?R.error(d):p(d,y).slice(0)},Oe=R.compile=function(s,e){var d=[],i=[],o=Se[s+" "],l,p,h,b,T,c;if(!o){for(e||(e=Le(s)),l=e.length;l--;)(o=_e(e[l]))[Ee]?d.push(o):i.push(o);(o=Se(s,(p=i,b=0<(h=d).length,T=0<p.length,c=function(m,e,t,y,r){var i=0,v="0",_=m&&[],c=[],E=Me,k=m||T&&Ae.find.TAG("*",r),d=ke+=null==E?1:Math.random()||.1,C=k.length,g,S,I;for(r&&(Me=e===Fe||e||r);v!==C&&null!=(g=k[v]);v++){if(T&&g){for(S=0,e||g.ownerDocument===Fe||(qe(g),t=!Ue);I=p[S++];)if(I(g,e||Fe,t)){y.push(g);break}r&&(ke=d)}b&&((g=!I&&g)&&i--,m&&_.push(g))}if(i+=v,b&&v!==i){for(S=0;I=h[S++];)I(_,c,e,t);if(m){if(0<i)for(;v--;)_[v]||c[v]||(c[v]=Ie.call(y));c=ve(c)}L.apply(y,c),r&&!m&&0<c.length&&1<i+h.length&&R.uniqueSort(y)}return r&&(ke=d,Me=E),_},b?W(c):c))).selector=s}return o},Re=R.select=function(d,p,h,m){var g="function"==typeof d&&d,l=!m&&Le(d=g.selector||d),c,y,f,b,v;if(h=h||[],1===l.length){if(2<(y=l[0]=l[0].slice(0)).length&&"ID"===(f=y[0]).type&&9===p.nodeType&&Ue&&Ae.relative[y[1].type]){if(!(p=(Ae.find.ID(f.matches[0].replace(ee,te),p)||[])[0]))return h;g&&(p=p.parentNode),d=d.slice(y.shift().value.length)}for(c=V.needsContext.test(d)?0:y.length;c--&&!(f=y[c],Ae.relative[b=f.type]);)if((v=Ae.find[b])&&(m=v(f.matches[0].replace(ee,te),Z.test(y[0].type)&&ge(p.parentNode)||p))){if(y.splice(c,1),!(d=m.length&&me(y)))return L.apply(h,m),h;break}}return(g||Oe(d,l))(m,p,!Ue,h,!p||Z.test(d)&&ge(p.parentNode)||p),h},De.sortStable=Ee.split("").sort(A).join("")===Ee,De.detectDuplicates=!!Be,qe(),De.sortDetached=se(function(t){return 1&t.compareDocumentPosition(Fe.createElement("fieldset"))}),se(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||le("type|href|height|width",function(a,e,t){if(!t)return a.getAttribute(e,"type"===e.toLowerCase()?1:2)}),De.attributes&&se(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||le("value",function(a,e,t){if(!t&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),se(function(t){return null==t.getAttribute("disabled")})||le("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,e,t){var n;if(!t)return!0===a[e]?e.toLowerCase():(n=a.getAttributeNode(e))&&n.specified?n.value:null}),R}(Kt);rn.find=l,rn.expr=l.selectors,rn.expr[":"]=rn.expr.pseudos,rn.uniqueSort=rn.unique=l.uniqueSort,rn.text=l.getText,rn.isXMLDoc=l.isXML,rn.contains=l.contains,rn.escapeSelector=l.escape;var p=function(a,o,t){for(var n=[];(a=a[o])&&9!==a.nodeType;)if(1===a.nodeType){if(void 0!==t&&rn(a).is(t))break;n.push(a)}return n},c=function(a,o){for(var t=[];a;a=a.nextSibling)1===a.nodeType&&a!==o&&t.push(a);return t},h=rn.expr.match.needsContext,T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;rn.filter=function(a,o,t){var n=o[0];return t&&(a=":not("+a+")"),1===o.length&&1===n.nodeType?rn.find.matchesSelector(n,a)?[n]:[]:rn.find.matches(a,rn.grep(o,function(t){return 1===t.nodeType}))},rn.fn.extend({find:function(a){var e=this.length,o=this,r,i;if("string"!=typeof a)return this.pushStack(rn(a).filter(function(){for(r=0;r<e;r++)if(rn.contains(o[r],this))return!0}));for(i=this.pushStack([]),r=0;r<e;r++)rn.find(a,o[r],i);return 1<e?rn.uniqueSort(i):i},filter:function(t){return this.pushStack(A(this,t||[],!1))},not:function(t){return this.pushStack(A(this,t||[],!0))},is:function(t){return!!A(this,"string"==typeof t&&h.test(t)?rn(t):t||[],!1).length}});var k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,S;(rn.fn.init=function(a,e,o){var s,d;if(!a)return this;if(o=o||S,"string"==typeof a){if(!(s="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:k.exec(a))||!s[1]&&e)return!e||e.jquery?(e||o).find(a):this.constructor(e).find(a);if(s[1]){if(e=e instanceof rn?e[0]:e,rn.merge(this,rn.parseHTML(s[1],e&&e.nodeType?e.ownerDocument||e:nn,!0)),T.test(s[1])&&rn.isPlainObject(e))for(s in e)y(this[s])?this[s](e[s]):this.attr(s,e[s]);return this}return(d=nn.getElementById(s[2]))&&(this[0]=d,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):y(a)?void 0===o.ready?a(rn):o.ready(a):rn.makeArray(a,this)}).prototype=rn.fn,S=rn(nn);var D=/^(?:parents|prev(?:Until|All))/,x={children:!0,contents:!0,next:!0,prev:!0};rn.fn.extend({has:function(a){var o=rn(a,this),t=o.length;return this.filter(function(){for(var n=0;n<t;n++)if(rn.contains(this,o[n]))return!0})},closest:function(s,e){var t=0,d=this.length,i=[],o="string"!=typeof s&&rn(s),a;if(!h.test(s))for(;t<d;t++)for(a=this[t];a&&a!==e;a=a.parentNode)if(11>a.nodeType&&(o?-1<o.index(a):1===a.nodeType&&rn.find.matchesSelector(a,s))){i.push(a);break}return this.pushStack(1<i.length?rn.uniqueSort(i):i)},index:function(t){return t?"string"==typeof t?u.call(rn(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,e){return this.pushStack(rn.uniqueSort(rn.merge(this.get(),rn(n,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),rn.each({parent:function(n){var e=n.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return p(t,"parentNode")},parentsUntil:function(a,e,t){return p(a,"parentNode",t)},next:function(t){return j(t,"nextSibling")},prev:function(t){return j(t,"previousSibling")},nextAll:function(t){return p(t,"nextSibling")},prevAll:function(t){return p(t,"previousSibling")},nextUntil:function(a,e,t){return p(a,"nextSibling",t)},prevUntil:function(a,e,t){return p(a,"previousSibling",t)},siblings:function(t){return c((t.parentNode||{}).firstChild,t)},children:function(t){return c(t.firstChild)},contents:function(t){return"undefined"==typeof t.contentDocument?(d(t,"template")&&(t=t.content||t),rn.merge([],t.childNodes)):t.contentDocument}},function(a,o){rn.fn[a]=function(r,e){var i=rn.map(this,o,r);return"Until"!==a.slice(-5)&&(e=r),e&&"string"==typeof e&&(i=rn.filter(e,i)),1<this.length&&(x[a]||rn.uniqueSort(i),D.test(a)&&i.reverse()),this.pushStack(i)}});var N=/[^\x20\t\r\n\f]+/g;rn.Callbacks=function(d){var p,h;d="string"==typeof d?(p=d,h={},rn.each(p.match(N)||[],function(n,e){h[e]=!0}),h):rn.extend({},d);var m=[],g=[],v=-1,T=function(){for(k=k||d.once,E=f=!0;g.length;v=-1)for(_=g.shift();++v<m.length;)!1===m[v].apply(_[0],_[1])&&d.stopOnFalse&&(v=m.length,_=!1);d.memory||(_=!1),f=!1,k&&(m=_?[]:"")},c={add:function(){return m&&(_&&!f&&(v=m.length-1,g.push(_)),function a(t){rn.each(t,function(n,e){y(e)?d.unique&&c.has(e)||m.push(e):e&&e.length&&"string"!==b(e)&&a(e)})}(arguments),_&&!f&&T()),this},remove:function(){return rn.each(arguments,function(a,e){for(var t;-1<(t=rn.inArray(e,m,t));)m.splice(t,1),t<=v&&v--}),this},has:function(t){return t?-1<rn.inArray(t,m):0<m.length},empty:function(){return m&&(m=[]),this},disable:function(){return k=g=[],m=_="",this},disabled:function(){return!m},lock:function(){return k=g=[],_||f||(m=_=""),this},locked:function(){return!!k},fireWith:function(n,e){return k||(e=[n,(e=e||[]).slice?e.slice():e],g.push(e),f||T()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!E}},f,_,E,k;return c},rn.extend({Deferred:function(t){var d=[["notify","progress",rn.Callbacks("memory"),rn.Callbacks("memory"),2],["resolve","done",rn.Callbacks("once memory"),rn.Callbacks("once memory"),0,"resolved"],["reject","fail",rn.Callbacks("once memory"),rn.Callbacks("once memory"),1,"rejected"]],e="pending",o={state:function(){return e},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var o=arguments;return rn.Deferred(function(i){rn.each(d,function(r,s){var t=y(o[s[4]])&&o[s[4]];a[s[1]](function(){var n=t&&t.apply(this,arguments);n&&y(n.promise)?n.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[s[0]+"With"](this,t?[n]:arguments)})}),o=null}).promise()},then:function(a,t,n){function i(d,p,o,a){return function(){var s=this,c=arguments,u=function(){var n,r;if(!(d<l)){if((n=o.apply(s,c))===p.promise())throw new TypeError("Thenable self-resolution");r=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(r)?a?r.call(n,i(l,p,P,a),i(l,p,Zt,a)):(l++,r.call(n,i(l,p,P,a),i(l,p,Zt,a),i(l,p,P,p.notifyWith))):(o!==P&&(s=void 0,c=[n]),(a||p.resolveWith)(s,c))}},h=a?u:function(){try{u()}catch(t){rn.Deferred.exceptionHook&&rn.Deferred.exceptionHook(t,h.stackTrace),l<=d+1&&(o!==Zt&&(s=void 0,c=[t]),p.rejectWith(s,c))}};d?h():(rn.Deferred.getStackHook&&(h.stackTrace=rn.Deferred.getStackHook()),Kt.setTimeout(h))}}var l=0;return rn.Deferred(function(o){d[0][3].add(i(0,o,y(n)?n:P,o.notifyWith)),d[1][3].add(i(0,o,y(a)?a:P)),d[2][3].add(i(0,o,y(t)?t:Zt))}).promise()},promise:function(t){return null==t?o:rn.extend(t,o)}},a={};return rn.each(d,function(i,s){var t=s[2],n=s[5];o[s[1]]=t.add,n&&t.add(function(){e=n},d[3-i][2].disable,d[3-i][3].disable,d[0][2].lock,d[0][3].lock),t.add(s[3].fire),a[s[0]]=function(){return a[s[0]+"With"](this===a?void 0:this,arguments),this},a[s[0]+"With"]=t.fireWith}),o.promise(a),t&&t.call(a,a),a},when:function(s){var d=arguments.length,e=d,l=Array(e),r=an.call(arguments),i=rn.Deferred(),o=function(n){return function(t){l[n]=this,r[n]=1<arguments.length?an.call(arguments):t,--d||i.resolveWith(l,r)}};if(1>=d&&(I(s,i.done(o(e)).resolve,i.reject,!d),"pending"===i.state()||y(r[e]&&r[e].then)))return i.then();for(;e--;)I(r[e],o(e),i.reject);return i.promise()}});var L=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;rn.Deferred.exceptionHook=function(n,e){Kt.console&&Kt.console.warn&&n&&L.test(n.name)&&Kt.console.warn("jQuery.Deferred exception: "+n.message,n.stack,e)},rn.readyException=function(t){Kt.setTimeout(function(){throw t})};var O=rn.Deferred();rn.fn.ready=function(t){return O.then(t)["catch"](function(t){rn.readyException(t)}),this},rn.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--rn.readyWait:rn.isReady)||(rn.isReady=!0)!==t&&0<--rn.readyWait||O.resolveWith(nn,[rn])}}),rn.ready.then=O.then,"complete"!==nn.readyState&&("loading"===nn.readyState||nn.documentElement.doScroll)?(nn.addEventListener("DOMContentLoaded",e),Kt.addEventListener("load",e)):Kt.setTimeout(rn.ready);var R=function(d,e,p,n,r,c,o){var h=0,m=d.length,u=null==p;if("object"===b(p))for(h in r=!0,p)R(d,e,h,p[h],!0,c,o);else if(void 0!==n&&(r=!0,y(n)||(o=!0),u&&(o?(e.call(d,n),e=null):(u=e,e=function(a,e,t){return u.call(rn(a),t)})),e))for(;h<m;h++)e(d[h],p,o?n:n.call(d[h],h,e(d[h],p)));return r?d:u?e.call(d):m?e(d[0],p):c},_=/^-ms-/,F=/-([a-z])/g,U=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};V.uid=1,V.prototype={cache:function(n){var e=n[this.expando];return e||(e={},U(n)&&(n.nodeType?n[this.expando]=e:Object.defineProperty(n,this.expando,{value:e,configurable:!0}))),e},set:function(a,e,t){var n=this.cache(a),o;if("string"==typeof e)n[W(e)]=t;else for(o in e)n[W(o)]=e[o];return n},get:function(n,e){return void 0===e?this.cache(n):n[this.expando]&&n[this.expando][W(e)]},access:function(a,e,t){return void 0===e||e&&"string"==typeof e&&void 0===t?this.get(a,e):(this.set(a,e,t),void 0===t?e:t)},remove:function(a,e){var o=a[this.expando],r;if(void 0!==o){if(void 0!==e)for(r=(e=Array.isArray(e)?e.map(W):((e=W(e))in o)?[e]:e.match(N)||[]).length;r--;)delete o[e[r]];(void 0===e||rn.isEmptyObject(o))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(n){var e=n[this.expando];return void 0!==e&&!rn.isEmptyObject(e)}};var H=new V,z=new V,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;rn.extend({hasData:function(t){return z.hasData(t)||H.hasData(t)},data:function(a,e,t){return z.access(a,e,t)},removeData:function(n,e){z.remove(n,e)},_data:function(a,e,t){return H.access(a,e,t)},_removeData:function(n,e){H.remove(n,e)}}),rn.fn.extend({data:function(s,n){var d=this[0],e=d&&d.attributes,a,o,l;if(void 0===s){if(this.length&&(l=z.get(d),1===d.nodeType&&!H.get(d,"hasDataAttrs"))){for(a=e.length;a--;)e[a]&&0===(o=e[a].name).indexOf("data-")&&(o=W(o.slice(5)),X(d,o,l[o]));H.set(d,"hasDataAttrs",!0)}return l}return"object"==typeof s?this.each(function(){z.set(this,s)}):R(this,function(n){var e;return d&&void 0===n?void 0===(e=z.get(d,s))?void 0===(e=X(d,s))?void 0:e:e:void this.each(function(){z.set(this,s,n)})},null,n,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){z.remove(this,t)})}}),rn.extend({queue:function(a,e,o){var n;if(a)return e=(e||"fx")+"queue",n=H.get(a,e),o&&(!n||Array.isArray(o)?n=H.access(a,e,rn.makeArray(o)):n.push(o)),n||[]},dequeue:function(a,e){e=e||"fx";var s=rn.queue(a,e),n=s.length,d=s.shift(),l=rn._queueHooks(a,e);"inprogress"===d&&(d=s.shift(),n--),d&&("fx"===e&&s.unshift("inprogress"),delete l.stop,d.call(a,function(){rn.dequeue(a,e)},l)),!n&&l&&l.empty.fire()},_queueHooks:function(a,e){var t=e+"queueHooks";return H.get(a,t)||H.access(a,t,{empty:rn.Callbacks("once memory").add(function(){H.remove(a,[e+"queue",t])})})}}),rn.fn.extend({queue:function(a,o){var r=2;return"string"!=typeof a&&(o=a,a="fx",r--),arguments.length<r?rn.queue(this[0],a):void 0===o?this:this.each(function(){var t=rn.queue(this,a,o);rn._queueHooks(this,a),"fx"===a&&"inprogress"!==t[0]&&rn.dequeue(this,a)})},dequeue:function(t){return this.each(function(){rn.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(d,l){var p=1,c=rn.Deferred(),i=this,o=this.length,u=function(){--p||c.resolveWith(i,[i])},s;for("string"!=typeof d&&(l=d,d=void 0),d=d||"fx";o--;)(s=H.get(i[o],d+"queueHooks"))&&s.empty&&(p++,s.empty.add(u));return u(),c.promise(l)}});var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,J=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),Z=["Top","Right","Bottom","Left"],te=nn.documentElement,ne=function(t){return rn.contains(t.ownerDocument,t)},re={composed:!0};te.getRootNode&&(ne=function(t){return rn.contains(t.ownerDocument,t)||t.getRootNode(re)===t.ownerDocument});var ae=function(n,a){return"none"===(n=a||n).style.display||""===n.style.display&&ne(n)&&"none"===rn.css(n,"display")},ie=function(s,e,t,n){var r={},a,d;for(d in e)r[d]=s.style[d],s.style[d]=e[d];for(d in a=t.apply(s,n||[]),e)s.style[d]=r[d];return a},se={};rn.fn.extend({show:function(){return ee(this,!0)},hide:function(){return ee(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ae(this)?rn(this).show():rn(this).hide()})}});var ce=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,de=/^$|^module$|\/(?:java|ecma)script/i,ue={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td;var he=/<|&#?\w+;/,ge,be;ge=nn.createDocumentFragment().appendChild(nn.createElement("div")),(be=nn.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),ge.appendChild(be),v.checkClone=ge.cloneNode(!0).cloneNode(!0).lastChild.checked,ge.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ge.cloneNode(!0).lastChild.defaultValue;var sn=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;rn.event={global:{},add:function(m,t,y,b,r){var T=H.get(m),v,_,E,k,C,S,I,w,D,A,x;if(T)for(y.handler&&(y=(v=y).handler,r=v.selector),r&&rn.find.matchesSelector(te,r),y.guid||(y.guid=rn.guid++),(k=T.events)||(k=T.events={}),(_=T.handle)||(_=T.handle=function(t){return"undefined"!=typeof rn&&rn.event.triggered!==t.type?rn.event.dispatch.apply(m,arguments):void 0}),C=(t=(t||"").match(N)||[""]).length;C--;)D=x=(E=Ce.exec(t[C])||[])[1],A=(E[2]||"").split(".").sort(),D&&(I=rn.event.special[D]||{},D=(r?I.delegateType:I.bindType)||D,I=rn.event.special[D]||{},S=rn.extend({type:D,origType:x,data:b,handler:y,guid:y.guid,selector:r,needsContext:r&&rn.expr.match.needsContext.test(r),namespace:A.join(".")},v),(w=k[D])||((w=k[D]=[]).delegateCount=0,I.setup&&!1!==I.setup.call(m,b,A,_)||m.addEventListener&&m.addEventListener(D,_)),I.add&&(I.add.call(m,S),S.handler.guid||(S.handler.guid=y.guid)),r?w.splice(w.delegateCount++,0,S):w.push(S),rn.event.global[D]=!0)},remove:function(m,e,y,n,r){var i=H.hasData(m)&&H.get(m),b,v,T,_,E,k,C,S,I,w,D;if(i&&(_=i.events)){for(E=(e=(e||"").match(N)||[""]).length;E--;)if(I=D=(T=Ce.exec(e[E])||[])[1],w=(T[2]||"").split(".").sort(),I){for(C=rn.event.special[I]||{},S=_[I=(n?C.delegateType:C.bindType)||I]||[],T=T[2]&&new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"),v=b=S.length;b--;)k=S[b],!r&&D!==k.origType||y&&y.guid!==k.guid||T&&!T.test(k.namespace)||n&&n!==k.selector&&("**"!==n||!k.selector)||(S.splice(b,1),k.selector&&S.delegateCount--,C.remove&&C.remove.call(m,k));v&&!S.length&&(C.teardown&&!1!==C.teardown.call(m,w,i.handle)||rn.removeEvent(m,I,i.handle),delete _[I])}else for(I in _)rn.event.remove(m,I+e[E],y,n,!0);rn.isEmptyObject(_)&&H.remove(m,"handle events")}},dispatch:function(d){var e=rn.event.fix(d),s=Array(arguments.length),p=(H.get(this,"events")||{})[e.type]||[],l=rn.event.special[e.type]||{},c,u,h,m,g,y;for(s[0]=e,c=1;c<arguments.length;c++)s[c]=arguments[c];if(e.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(y=rn.event.handlers.call(this,e,p),c=0;(m=y[c++])&&!e.isPropagationStopped();)for(e.currentTarget=m.elem,u=0;(g=m.handlers[u++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!1!==g.namespace&&!e.rnamespace.test(g.namespace)||(e.handleObj=g,e.data=g.data,void 0!==(h=((rn.event.special[g.origType]||{}).handle||g.handler).apply(m.elem,s))&&!1===(e.result=h)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(d,e){var t=[],s=e.delegateCount,p=d.target,c,u,h,m,g;if(s&&p.nodeType&&!("click"===d.type&&1<=d.button))for(;p!==this;p=p.parentNode||this)if(1===p.nodeType&&("click"!==d.type||!0!==p.disabled)){for(m=[],g={},c=0;c<s;c++)void 0===g[h=(u=e[c]).selector+" "]&&(g[h]=u.needsContext?-1<rn(h,this).index(p):rn.find(h,this,null,[p]).length),g[h]&&m.push(u);m.length&&t.push({elem:p,handlers:m})}return p=this,s<e.length&&t.push({elem:p,handlers:e.slice(s)}),t},addProp:function(n,t){Object.defineProperty(rn.Event.prototype,n,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[n]},set:function(t){Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[rn.expando]?t:new rn.Event(t)},special:{load:{noBubble:!0},click:{setup:function(n){var e=this||n;return ce.test(e.type)&&e.click&&d(e,"input")&&Ae(e,"click",ve),!1},trigger:function(n){var e=this||n;return ce.test(e.type)&&e.click&&d(e,"input")&&Ae(e,"click"),!0},_default:function(n){var e=n.target;return ce.test(e.type)&&e.click&&d(e,"input")&&H.get(e,"click")||d(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},rn.removeEvent=function(a,e,t){a.removeEventListener&&a.removeEventListener(e,t)},rn.Event=function(n,e){return this instanceof rn.Event?void(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&!1===n.returnValue?ve:ke,this.target=n.target&&3===n.target.nodeType?n.target.parentNode:n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget):this.type=n,e&&rn.extend(this,e),this.timeStamp=n&&n.timeStamp||Date.now(),this[rn.expando]=!0):new rn.Event(n,e)},rn.Event.prototype={constructor:rn.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=ve,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=ve,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=ve,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},rn.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(n){var e=n.button;return null==n.which&&sn.test(n.type)?null==n.charCode?n.keyCode:n.charCode:!n.which&&void 0!==e&&Te.test(n.type)?1&e?1:2&e?3:4&e?2:0:n.which}},rn.event.addProp),rn.each({focus:"focusin",blur:"focusout"},function(n,e){rn.event.special[n]={setup:function(){return Ae(this,n,Se),!1},trigger:function(){return Ae(this,n),!0},delegateType:e}}),rn.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,a){rn.event.special[t]={delegateType:a,bindType:a,handle:function(o){var e=o.relatedTarget,n=o.handleObj,r;return e&&(e===this||rn.contains(this,e))||(o.type=n.origType,r=n.handler.apply(this,arguments),o.type=a),r}}}),rn.fn.extend({on:function(a,e,t,n){return we(this,a,e,t,n)},one:function(a,e,t,n){return we(this,a,e,t,n,1)},off:function(a,e,o){var s,d;if(a&&a.preventDefault&&a.handleObj)return s=a.handleObj,rn(a.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof a){for(d in a)this.off(d,e,a[d]);return this}return!1!==e&&"function"!=typeof e||(o=e,e=void 0),!1===o&&(o=ke),this.each(function(){rn.event.remove(this,a,o,e)})}});var Ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,je=/<script|<style|<link/i,qe=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;rn.extend({htmlPrefilter:function(t){return t.replace(Ee,"<$1></$2>")},clone:function(d,e,t){var n=d.cloneNode(!0),p=ne(d),c,h,m,g,y,f,b;if(!(v.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||rn.isXMLDoc(d)))for(g=le(n),c=0,h=(m=le(d)).length;c<h;c++)y=m[c],f=g[c],"input"===(b=f.nodeName.toLowerCase())&&ce.test(y.type)?f.checked=y.checked:"input"!==b&&"textarea"!==b||(f.defaultValue=y.defaultValue);if(e)if(t)for(m=m||le(d),g=g||le(n),c=0,h=m.length;c<h;c++)Re(m[c],g[c]);else Re(d,n);return 0<(g=le(n,"script")).length&&fe(g,!p&&le(d,"script")),n},cleanData:function(a){for(var e=rn.event.special,i=0,s,d,l;void 0!==(d=a[i]);i++)if(U(d)){if(s=d[H.expando]){if(s.events)for(l in s.events)e[l]?rn.event.remove(d,l):rn.removeEvent(d,l,s.handle);d[H.expando]=void 0}d[z.expando]&&(d[z.expando]=void 0)}}}),rn.fn.extend({detach:function(t){return Ie(this,t,!0)},remove:function(t){return Ie(this,t)},text:function(t){return R(this,function(t){return void 0===t?rn.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Me(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||De(this,t).appendChild(t)})},prepend:function(){return Me(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=De(this,n);e.insertBefore(n,e.firstChild)}})},before:function(){return Me(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Me(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var n=0,a;null!=(a=this[n]);n++)1===a.nodeType&&(rn.cleanData(le(a,!1)),a.textContent="");return this},clone:function(n,a){return n=null!=n&&n,a=null==a?n:a,this.map(function(){return rn.clone(this,n,a)})},html:function(t){return R(this,function(a){var o=this[0]||{},i=0,s=this.length;if(void 0===a&&1===o.nodeType)return o.innerHTML;if("string"==typeof a&&!je.test(a)&&!ue[(pe.exec(a)||["",""])[1].toLowerCase()]){a=rn.htmlPrefilter(a);try{for(;i<s;i++)1===(o=this[i]||{}).nodeType&&(rn.cleanData(le(o,!1)),o.innerHTML=a);o=0}catch(t){}}o&&this.empty().append(a)},null,t,arguments.length)},replaceWith:function(){var a=[];return Me(this,arguments,function(n){var e=this.parentNode;0>rn.inArray(this,a)&&(rn.cleanData(le(this)),e&&e.replaceChild(n,this))},a)}}),rn.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,d){rn.fn[t]=function(a){for(var e=[],n=rn(a),r=n.length-1,i=0,l;i<=r;i++)l=i===r?this:this.clone(!0),rn(n[i])[d](l),s.apply(e,l.get());return this.pushStack(e)}});var He=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),$e=function(n){var e=n.ownerDocument.defaultView;return e&&e.opener||(e=Kt),e.getComputedStyle(n)},Fe=new RegExp(Z.join("|"),"i");!function(){function d(){if(s){t.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",s.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",te.appendChild(t).appendChild(s);var n=Kt.getComputedStyle(s);p="1%"!==n.top,g=12===l(n.marginLeft),s.style.right="60%",m=36===l(n.right),c=36===l(n.width),s.style.position="absolute",h=12===l(s.offsetWidth/3),te.removeChild(t),s=null}}function l(t){return Math.round(parseFloat(t))}var t=nn.createElement("div"),s=nn.createElement("div"),p,c,h,m,g;s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===s.style.backgroundClip,rn.extend(v,{boxSizingReliable:function(){return d(),c},pixelBoxStyles:function(){return d(),m},pixelPosition:function(){return d(),p},reliableMarginLeft:function(){return d(),g},scrollboxSize:function(){return d(),h}}))}();var Be=["Webkit","Moz","ms"],Ue=nn.createElement("div").style,Xe={},Ve=/^(none|table(?!-c[ea]).+)/,Ye=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};rn.extend({cssHooks:{opacity:{get:function(a,e){if(e){var t=Pe(a,"opacity");return""===t?"1":t}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(d,e,p,c){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var r=W(e),s=Ye.test(e),u=d.style,l,h,m;if(s||(e=We(r)),m=rn.cssHooks[e]||rn.cssHooks[r],void 0===p)return m&&"get"in m&&void 0!==(l=m.get(d,!1,c))?l:u[e];"string"==(h=typeof p)&&(l=J.exec(p))&&l[1]&&(p=Y(d,e,l),h="number"),null!=p&&p==p&&("number"!==h||s||(p+=l&&l[3]||(rn.cssNumber[r]?"":"px")),v.clearCloneStyle||""!==p||0!==e.indexOf("background")||(u[e]="inherit"),m&&"set"in m&&void 0===(p=m.set(d,p,c))||(s?u.setProperty(e,p):u[e]=p))}},css:function(d,e,l,n){var r=W(e),s,p,c;return Ye.test(e)||(e=We(r)),(c=rn.cssHooks[e]||rn.cssHooks[r])&&"get"in c&&(s=c.get(d,!0,l)),void 0===s&&(s=Pe(d,e,n)),"normal"===s&&e in Je&&(s=Je[e]),""===l||l?(p=parseFloat(s),!0===l||isFinite(p)?p||0:s):s}}),rn.each(["height","width"],function(t,d){rn.cssHooks[d]={get:function(a,e,t){if(e)return!Ve.test(rn.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?Ze(a,d,t):ie(a,Qe,function(){return Ze(a,d,t)})},set:function(l,e,p){var n=$e(l),i=!v.scrollboxSize()&&"absolute"===n.position,o=(i||p)&&"border-box"===rn.css(l,"boxSizing",!1,n),a=p?Ge(l,d,p,o,n):0,c;return o&&i&&(a-=qt(l["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(n[d])-Ge(l,d,"border",!1,n)-.5)),a&&(c=J.exec(e))&&"px"!==(c[3]||"px")&&(l.style[d]=e,e=rn.css(l,d)),ze(0,e,a)}}}),rn.cssHooks.marginLeft=_e(v.reliableMarginLeft,function(n,e){if(e)return(parseFloat(Pe(n,"marginLeft"))||n.getBoundingClientRect().left-ie(n,{marginLeft:0},function(){return n.getBoundingClientRect().left}))+"px"}),rn.each({margin:"",padding:"",border:"Width"},function(a,i){rn.cssHooks[a+i]={expand:function(o){for(var e=0,s={},n="string"==typeof o?o.split(" "):[o];4>e;e++)s[a+Z[e]+i]=n[e]||n[e-2]||n[0];return s}},"margin"!==a&&(rn.cssHooks[a+i].set=ze)}),rn.fn.extend({css:function(n,e){return R(this,function(s,e,t){var n={},o=0,d,l;if(Array.isArray(e)){for(d=$e(s),l=e.length;o<l;o++)n[e[o]]=rn.css(s,e[o],!1,d);return n}return void 0===t?rn.css(s,e):rn.style(s,e,t)},n,e,1<arguments.length)}}),((rn.Tween=et).prototype={constructor:et,init:function(a,e,t,n,r,i){this.elem=a,this.prop=t,this.easing=r||rn.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=i||(rn.cssNumber[t]?"":"px")},cur:function(){var t=et.propHooks[this.prop];return t&&t.get?t.get(this):et.propHooks._default.get(this)},run:function(a){var e=et.propHooks[this.prop],n;return this.pos=this.options.duration?n=rn.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):n=a,this.now=(this.end-this.start)*n+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),e&&e.set?e.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(n){var e;return 1!==n.elem.nodeType||null!=n.elem[n.prop]&&null==n.elem.style[n.prop]?n.elem[n.prop]:(e=rn.css(n.elem,n.prop,""))&&"auto"!==e?e:0},set:function(t){rn.fx.step[t.prop]?rn.fx.step[t.prop](t):1===t.elem.nodeType&&(rn.cssHooks[t.prop]||null!=t.elem.style[We(t.prop)])?rn.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}}).scrollTop=et.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},rn.easing={linear:function(t){return t},swing:function(t){return .5-Math.cos(t*Math.PI)/2},_default:"swing"},rn.fx=et.prototype.init,rn.fx.step={};var Ke=/^(?:toggle|show|hide)$/,st=/queueHooks$/,ut,dn,ln,pn;rn.Animation=rn.extend(pt,{tweeners:{"*":[function(a,e){var t=this.createTween(a,e);return Y(t.elem,a,J.exec(e),t),t}]},tweener:function(a,o){y(a)?(o=a,a=["*"]):a=a.match(N);for(var s=0,d=a.length,i;s<d;s++)i=a[s],pt.tweeners[i]=pt.tweeners[i]||[],pt.tweeners[i].unshift(o)},prefilters:[function(m,e,t){var n="width"in e||"height"in e,y=this,p={},d=m.style,h=m.nodeType&&ae(m),f=H.get(m,"fxshow"),b,T,_,E,k,C,S,I;for(b in t.queue||(null==(E=rn._queueHooks(m,"fx")).unqueued&&(E.unqueued=0,k=E.empty.fire,E.empty.fire=function(){E.unqueued||k()}),E.unqueued++,y.always(function(){y.always(function(){E.unqueued--,rn.queue(m,"fx").length||E.empty.fire()})})),e)if(T=e[b],Ke.test(T)){if(delete e[b],_=_||"toggle"===T,T===(h?"hide":"show")){if("show"!==T||!f||void 0===f[b])continue;h=!0}p[b]=f&&f[b]||rn.style(m,b)}if((C=!rn.isEmptyObject(e))||!rn.isEmptyObject(p))for(b in n&&1===m.nodeType&&(t.overflow=[d.overflow,d.overflowX,d.overflowY],null==(S=f&&f.display)&&(S=H.get(m,"display")),"none"===(I=rn.css(m,"display"))&&(S?I=S:(ee([m],!0),S=m.style.display||S,I=rn.css(m,"display"),ee([m]))),("inline"===I||"inline-block"===I&&null!=S)&&"none"===rn.css(m,"float")&&(C||(y.done(function(){d.display=S}),null==S&&(I=d.display,S="none"===I?"":I)),d.display="inline-block")),t.overflow&&(d.overflow="hidden",y.always(function(){d.overflow=t.overflow[0],d.overflowX=t.overflow[1],d.overflowY=t.overflow[2]})),C=!1,p)C||(f?"hidden"in f&&(h=f.hidden):f=H.access(m,"fxshow",{display:S}),_&&(f.hidden=!h),h&&ee([m],!0),y.done(function(){for(b in h||ee([m]),H.remove(m,"fxshow"),p)rn.style(m,b,p[b])})),C=ct(h?f[b]:0,b,y),b in f||(f[b]=C.start,h&&(C.end=C.start,C.start=0))}],prefilter:function(n,e){e?pt.prefilters.unshift(n):pt.prefilters.push(n)}}),rn.speed=function(a,e,t){var n=a&&"object"==typeof a?rn.extend({},a):{complete:t||!t&&e||y(a)&&a,duration:a,easing:t&&e||e&&!y(e)&&e};return rn.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in rn.fx.speeds?n.duration=rn.fx.speeds[n.duration]:n.duration=rn.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&rn.dequeue(this,n.queue)},n},rn.fn.extend({fadeTo:function(a,e,t,n){return this.filter(ae).css("opacity",0).show().end().animate({opacity:e},a,t,n)},animate:function(s,t,e,n){var r=rn.isEmptyObject(s),i=rn.speed(t,e,n),o=function(){var t=pt(this,rn.extend({},s),i);(r||H.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(s,t,d){var l=function(n){var e=n.stop;delete n.stop,e(d)};return"string"!=typeof s&&(d=t,t=s,s=void 0),t&&!1!==s&&this.queue(s||"fx",[]),this.each(function(){var a=!0,o=null!=s&&s+"queueHooks",i=rn.timers,n=H.get(this);if(o)n[o]&&n[o].stop&&l(n[o]);else for(o in n)n[o]&&n[o].stop&&st.test(o)&&l(n[o]);for(o=i.length;o--;)i[o].elem!==this||null!=s&&i[o].queue!==s||(i[o].anim.stop(d),a=!1,i.splice(o,1));!a&&d||rn.dequeue(this,s)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var a=H.get(this),t=a[s+"queue"],n=a[s+"queueHooks"],r=rn.timers,i=t?t.length:0,o;for(a.finish=!0,rn.queue(this,s,[]),n&&n.stop&&n.stop.call(this,!0),o=r.length;o--;)r[o].elem===this&&r[o].queue===s&&(r[o].anim.stop(!0),r.splice(o,1));for(o=0;o<i;o++)t[o]&&t[o].finish&&t[o].finish.call(this);delete a.finish})}}),rn.each(["toggle","show","hide"],function(t,a){var o=rn.fn[a];rn.fn[a]=function(r,e,t){return null==r||"boolean"==typeof r?o.apply(this,arguments):this.animate(lt(a,!0),r,e,t)}}),rn.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,a){rn.fn[t]=function(o,e,t){return this.animate(a,o,e,t)}}),rn.timers=[],rn.fx.tick=function(){var a=0,o=rn.timers,n;for(ut=Date.now();a<o.length;a++)(n=o[a])()||o[a]!==n||o.splice(a--,1);o.length||rn.fx.stop(),ut=void 0},rn.fx.timer=function(t){rn.timers.push(t),rn.fx.start()},rn.fx.interval=13,rn.fx.start=function(){dn||(dn=!0,tt())},rn.fx.stop=function(){dn=null},rn.fx.speeds={slow:600,fast:200,_default:400},rn.fn.delay=function(a,t){return a=rn.fx&&rn.fx.speeds[a]||a,t=t||"fx",this.queue(t,function(o,e){var t=Kt.setTimeout(o,a);e.stop=function(){Kt.clearTimeout(t)}})},ln=nn.createElement("input"),pn=nn.createElement("select").appendChild(nn.createElement("option")),ln.type="checkbox",v.checkOn=""!==ln.value,v.optSelected=pn.selected,(ln=nn.createElement("input")).value="t",ln.type="radio",v.radioValue="t"===ln.value;var cn=rn.expr.attrHandle,gt;rn.fn.extend({attr:function(n,e){return R(this,rn.attr,n,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){rn.removeAttr(this,t)})}}),rn.extend({attr:function(a,e,t){var n=a.nodeType,o,s;if(3!==n&&8!==n&&2!==n)return"undefined"==typeof a.getAttribute?rn.prop(a,e,t):(1===n&&rn.isXMLDoc(a)||(s=rn.attrHooks[e.toLowerCase()]||(rn.expr.match.bool.test(e)?gt:void 0)),void 0===t?s&&"get"in s&&null!==(o=s.get(a,e))?o:null==(o=rn.find.attr(a,e))?void 0:o:null===t?void rn.removeAttr(a,e):s&&"set"in s&&void 0!==(o=s.set(a,t,e))?o:(a.setAttribute(e,t+""),t))},attrHooks:{type:{set:function(a,e){if(!v.radioValue&&"radio"===e&&d(a,"input")){var t=a.value;return a.setAttribute("type",e),t&&(a.value=t),e}}}},removeAttr:function(a,e){var t=0,o=e&&e.match(N),i;if(o&&1===a.nodeType)for(;i=o[t++];)a.removeAttribute(i)}}),gt={set:function(a,e,t){return!1===e?rn.removeAttr(a,t):a.setAttribute(t,t),t}},rn.each(rn.expr.match.bool.source.match(/\w+/g),function(n,e){var s=cn[e]||rn.find.attr;cn[e]=function(a,e,t){var n=e.toLowerCase(),o,d;return t||(d=cn[n],cn[n]=o,o=null==s(a,e,t)?null:n,cn[n]=d),o}});var un=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;rn.fn.extend({prop:function(n,e){return R(this,rn.prop,n,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[rn.propFix[t]||t]})}}),rn.extend({prop:function(a,e,s){var n=a.nodeType,o,d;if(3!==n&&8!==n&&2!==n)return 1===n&&rn.isXMLDoc(a)||(e=rn.propFix[e]||e,d=rn.propHooks[e]),void 0===s?d&&"get"in d&&null!==(o=d.get(a,e))?o:a[e]:d&&"set"in d&&void 0!==(o=d.set(a,s,e))?o:a[e]=s},propHooks:{tabIndex:{get:function(n){var e=rn.find.attr(n,"tabindex");return e?parseInt(e,10):un.test(n.nodeName)||vt.test(n.nodeName)&&n.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(rn.propHooks.selected={get:function(n){var e=n.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(n){var e=n.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),rn.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rn.propFix[this.toLowerCase()]=this}),rn.fn.extend({addClass:function(d){var t=0,l,p,c,h,m,g,f;if(y(d))return this.each(function(t){rn(this).addClass(d.call(this,t,mt(this)))});if((l=ft(d)).length)for(;p=this[t++];)if(h=mt(p),c=1===p.nodeType&&" "+dt(h)+" "){for(g=0;m=l[g++];)0>c.indexOf(" "+m+" ")&&(c+=m+" ");h!==(f=dt(c))&&p.setAttribute("class",f)}return this},removeClass:function(d){var t=0,l,p,c,h,m,g,f;if(y(d))return this.each(function(t){rn(this).removeClass(d.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((l=ft(d)).length)for(;p=this[t++];)if(h=mt(p),c=1===p.nodeType&&" "+dt(h)+" "){for(g=0;m=l[g++];)for(;-1<c.indexOf(" "+m+" ");)c=c.replace(" "+m+" "," ");h!==(f=dt(c))&&p.setAttribute("class",f)}return this},toggleClass:function(s,n){var i=typeof s,o="string"==i||Array.isArray(s);return"boolean"==typeof n&&o?n?this.addClass(s):this.removeClass(s):y(s)?this.each(function(t){rn(this).toggleClass(s.call(this,t,mt(this),n),n)}):this.each(function(){var a,d,l,p;if(o)for(d=0,l=rn(this),p=ft(s);a=p[d++];)l.hasClass(a)?l.removeClass(a):l.addClass(a);else void 0!==s&&"boolean"!=i||((a=mt(this))&&H.set(this,"__className__",a),this.setAttribute&&this.setAttribute("class",a||!1===s?"":H.get(this,"__className__")||""))})},hasClass:function(a){var e=0,o,i;for(o=" "+a+" ";i=this[e++];)if(1===i.nodeType&&-1<(" "+dt(mt(i))+" ").indexOf(o))return!0;return!1}});var yt=/\r/g;rn.fn.extend({val:function(a){var n=this[0],o,t,s;return arguments.length?(s=y(a),this.each(function(n){var e;1===this.nodeType&&(null==(e=s?a.call(this,n,rn(this).val()):a)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=rn.map(e,function(t){return null==t?"":t+""})),(o=rn.valHooks[this.type]||rn.valHooks[this.nodeName.toLowerCase()])&&"set"in o&&void 0!==o.set(this,e,"value")||(this.value=e))})):n?(o=rn.valHooks[n.type]||rn.valHooks[n.nodeName.toLowerCase()])&&"get"in o&&void 0!==(t=o.get(n,"value"))?t:"string"==typeof(t=n.value)?t.replace(yt,""):null==t?"":t:void 0}}),rn.extend({valHooks:{option:{get:function(n){var e=rn.find.attr(n,"value");return null==e?dt(rn.text(n)):e}},select:{get:function(l){var e=l.options,i=l.selectedIndex,o="select-one"===l.type,a=o?null:[],s=o?i+1:e.length,p,c,u;for(u=0>i?s:o?i:0;u<s;u++)if(((c=e[u]).selected||u===i)&&!c.disabled&&(!c.parentNode.disabled||!d(c.parentNode,"optgroup"))){if(p=rn(c).val(),o)return p;a.push(p)}return a},set:function(s,e){for(var t=s.options,i=rn.makeArray(e),o=t.length,d,l;o--;)((l=t[o]).selected=-1<rn.inArray(rn.valHooks.option.get(l),i))&&(d=!0);return d||(s.selectedIndex=-1),i}}}}),rn.each(["radio","checkbox"],function(){rn.valHooks[this]={set:function(n,e){if(Array.isArray(e))return n.checked=-1<rn.inArray(rn(n).val(),e)}},v.checkOn||(rn.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in Kt;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(t){t.stopPropagation()};rn.extend(rn.event,{trigger:function(b,v,T,_){var r=[T||nn],p=g.call(b,"type")?b.type:b,E=g.call(b,"namespace")?b.namespace.split("."):[],k,C,S,I,w,D,A,x;if(C=x=S=T=T||nn,3!==T.nodeType&&8!==T.nodeType&&!wt.test(p+rn.event.triggered)&&(-1<p.indexOf(".")&&(p=(E=p.split(".")).shift(),E.sort()),w=0>p.indexOf(":")&&"on"+p,(b=b[rn.expando]?b:new rn.Event(p,"object"==typeof b&&b)).isTrigger=_?2:3,b.namespace=E.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+E.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=T),v=null==v?[b]:rn.makeArray(v,[b]),A=rn.event.special[p]||{},_||!A.trigger||!1!==A.trigger.apply(T,v))){if(!_&&!A.noBubble&&!m(T)){for(I=A.delegateType||p,wt.test(I+p)||(C=C.parentNode);C;C=C.parentNode)r.push(C),S=C;S===(T.ownerDocument||nn)&&r.push(S.defaultView||S.parentWindow||Kt)}for(k=0;(C=r[k++])&&!b.isPropagationStopped();)x=C,b.type=1<k?I:A.bindType||p,(D=(H.get(C,"events")||{})[b.type]&&H.get(C,"handle"))&&D.apply(C,v),(D=w&&C[w])&&D.apply&&U(C)&&(b.result=D.apply(C,v),!1===b.result&&b.preventDefault());return b.type=p,_||b.isDefaultPrevented()||A._default&&!1!==A._default.apply(r.pop(),v)||!U(T)||w&&y(T[p])&&!m(T)&&((S=T[w])&&(T[w]=null),rn.event.triggered=p,b.isPropagationStopped()&&x.addEventListener(p,Tt),T[p](),b.isPropagationStopped()&&x.removeEventListener(p,Tt),rn.event.triggered=void 0,S&&(T[w]=S)),b.result}},simulate:function(a,e,t){var n=rn.extend(new rn.Event,t,{type:a,isSimulated:!0});rn.event.trigger(n,null,e)}}),rn.fn.extend({trigger:function(n,e){return this.each(function(){rn.event.trigger(n,e,this)})},triggerHandler:function(a,e){var t=this[0];if(t)return rn.event.trigger(a,e,t,!0)}}),v.focusin||rn.each({focus:"focusin",blur:"focusout"},function(a,n){var o=function(t){rn.event.simulate(n,t.target,rn.event.fix(t))};rn.event.special[n]={setup:function(){var r=this.ownerDocument||this,e=H.access(r,n);e||r.addEventListener(a,o,!0),H.access(r,n,(e||0)+1)},teardown:function(){var r=this.ownerDocument||this,e=H.access(r,n)-1;e?H.access(r,n,e):(r.removeEventListener(a,o,!0),H.remove(r,n))}}});var Ct=Kt.location,Et=Date.now(),hn=/\?/;rn.parseXML=function(n){var e;if(!n||"string"!=typeof n)return null;try{e=new Kt.DOMParser().parseFromString(n,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||rn.error("Invalid XML: "+n),e};var St=/\[\]$/,Nt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;rn.param=function(a,e){var o=[],t=function(a,e){var t=y(e)?e():e;o[o.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==t?"":t)},r;if(null==a)return"";if(Array.isArray(a)||a.jquery&&!rn.isPlainObject(a))rn.each(a,function(){t(this.name,this.value)});else for(r in a)bt(r,a[r],e,t);return o.join("&")},rn.fn.extend({serialize:function(){return rn.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=rn.prop(this,"elements");return t?rn.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!rn(this).is(":disabled")&&Dt.test(this.nodeName)&&!At.test(t)&&(this.checked||!ce.test(t))}).map(function(a,o){var e=rn(this).val();return null==e?null:Array.isArray(e)?rn.map(e,function(t){return{name:o.name,value:t.replace(Nt,"\r\n")}}):{name:o.name,value:e.replace(Nt,"\r\n")}}).get()}});var jt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Rt=/^\/\//,Mt={},It={},Wt="*/".concat("*"),$t=nn.createElement("a");$t.href=Ct.href,rn.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":rn.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,e){return e?_t(_t(n,rn.ajaxSettings),e):_t(rn.ajaxSettings,n)},ajaxPrefilter:xt(Mt),ajaxTransport:xt(It),ajax:function(_,E){function k(d,p,t,n){var r=p,c,h,g,f,_;R||(R=!0,L&&Kt.clearTimeout(L),T=void 0,A=n||"",I.readyState=0<d?4:0,c=200<=d&&300>d||304===d,t&&(f=function(d,e,t){for(var n=d.contents,s=d.dataTypes,l,p,c,u;"*"===s[0];)s.shift(),void 0===l&&(l=d.mimeType||e.getResponseHeader("Content-Type"));if(l)for(p in n)if(n[p]&&n[p].test(l)){s.unshift(p);break}if(s[0]in t)c=s[0];else{for(p in t){if(!s[0]||d.converters[p+" "+s[0]]){c=p;break}u||(u=p)}c=c||u}return c?(c!==s[0]&&s.unshift(c),t[c]):void 0}(C,I,t)),f=function(d,e,p,n){var r={},l=d.dataTypes.slice(),c,h,m,g,y;if(l[1])for(m in d.converters)r[m.toLowerCase()]=d.converters[m];for(h=l.shift();h;)if(d.responseFields[h]&&(p[d.responseFields[h]]=e),!y&&n&&d.dataFilter&&(e=d.dataFilter(e,d.dataType)),y=h,h=l.shift())if("*"===h)h=y;else if("*"!==y&&y!==h){if(!(m=r[y+" "+h]||r["* "+h]))for(c in r)if((g=c.split(" "))[1]===h&&(m=r[y+" "+g[0]]||r["* "+g[0]])){!0===m?m=r[c]:!0!==r[c]&&(h=g[0],l.unshift(g[1]));break}if(!0!==m)if(m&&d.throws)e=m(e);else try{e=m(e)}catch(t){return{state:"parsererror",error:m?t:"No conversion from "+y+" to "+h}}}return{state:"success",data:e}}(C,f,I,c),c?(C.ifModified&&((_=I.getResponseHeader("Last-Modified"))&&(rn.lastModified[D]=_),(_=I.getResponseHeader("etag"))&&(rn.etag[D]=_)),204===d||"HEAD"===C.type?r="nocontent":304===d?r="notmodified":(r=f.state,h=f.data,c=!(g=f.error))):(g=r,!d&&r||(r="error",0>d&&(d=0))),I.status=d,I.statusText=(p||r)+"",c?m.resolveWith(v,[h,r,I]):m.rejectWith(v,[I,r,g]),I.statusCode(b),b=void 0,P&&y.trigger(c?"ajaxSuccess":"ajaxError",[I,C,c?h:g]),S.fireWith(v,[I,r]),P&&(y.trigger("ajaxComplete",[I,C]),--rn.active||rn.event.trigger("ajaxStop")))}"object"==typeof _&&(E=_,_=void 0),E=E||{};var C=rn.ajaxSetup({},E),v=C.context||C,y=C.context&&(v.nodeType||v.jquery)?rn(v):rn.event,m=rn.Deferred(),S=rn.Callbacks("once memory"),b=C.statusCode||{},l={},a={},s="canceled",I={readyState:0,getResponseHeader:function(n){var e;if(R){if(!x)for(x={};e=Ot.exec(A);)x[e[1].toLowerCase()+" "]=(x[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=x[n.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return R?A:null},setRequestHeader:function(n,o){return null==R&&(n=a[n.toLowerCase()]=a[n.toLowerCase()]||n,l[n]=o),this},overrideMimeType:function(t){return null==R&&(C.mimeType=t),this},statusCode:function(n){if(n)if(R)I.always(n[I.status]);else for(var e in n)b[e]=[b[e],n[e]];return this},abort:function(n){var e=n||s;return T&&T.abort(e),k(0,e),this}},T,D,A,x,L,O,R,P,B,q;if(m.promise(I),C.url=((_||C.url||Ct.href)+"").replace(Rt,Ct.protocol+"//"),C.type=E.method||E.type||C.method||C.type,C.dataTypes=(C.dataType||"*").toLowerCase().match(N)||[""],null==C.crossDomain){O=nn.createElement("a");try{O.href=C.url,O.href=O.href,C.crossDomain=$t.protocol+"//"+$t.host!=O.protocol+"//"+O.host}catch(t){C.crossDomain=!0}}if(C.data&&C.processData&&"string"!=typeof C.data&&(C.data=rn.param(C.data,C.traditional)),Bt(Mt,C,E,I),R)return I;for(B in(P=rn.event&&C.global)&&0==rn.active++&&rn.event.trigger("ajaxStart"),C.type=C.type.toUpperCase(),C.hasContent=!Pt.test(C.type),D=C.url.replace(Lt,""),C.hasContent?C.data&&C.processData&&0===(C.contentType||"").indexOf("application/x-www-form-urlencoded")&&(C.data=C.data.replace(jt,"+")):(q=C.url.slice(D.length),C.data&&(C.processData||"string"==typeof C.data)&&(D+=(hn.test(D)?"&":"?")+C.data,delete C.data),!1===C.cache&&(D=D.replace(Ht,"$1"),q=(hn.test(D)?"&":"?")+"_="+Et++ +q),C.url=D+q),C.ifModified&&(rn.lastModified[D]&&I.setRequestHeader("If-Modified-Since",rn.lastModified[D]),rn.etag[D]&&I.setRequestHeader("If-None-Match",rn.etag[D])),(C.data&&C.hasContent&&!1!==C.contentType||E.contentType)&&I.setRequestHeader("Content-Type",C.contentType),I.setRequestHeader("Accept",C.dataTypes[0]&&C.accepts[C.dataTypes[0]]?C.accepts[C.dataTypes[0]]+("*"===C.dataTypes[0]?"":", */*; q=0.01"):C.accepts["*"]),C.headers)I.setRequestHeader(B,C.headers[B]);if(C.beforeSend&&(!1===C.beforeSend.call(v,I,C)||R))return I.abort();if(s="abort",S.add(C.complete),I.done(C.success),I.fail(C.error),T=Bt(It,C,E,I)){if(I.readyState=1,P&&y.trigger("ajaxSend",[I,C]),R)return I;C.async&&0<C.timeout&&(L=Kt.setTimeout(function(){I.abort("timeout")},C.timeout));try{R=!1,T.send(l,k)}catch(t){if(R)throw t;k(-1,t)}}else k(-1,"No Transport");return I},getJSON:function(a,e,t){return rn.get(a,e,t,"json")},getScript:function(n,e){return rn.get(n,void 0,e,"script")}}),rn.each(["get","post"],function(t,a){rn[a]=function(o,e,i,s){return y(e)&&(s=s||i,i=e,e=void 0),rn.ajax(rn.extend({url:o,type:a,dataType:s,data:e,success:i},rn.isPlainObject(o)&&o))}}),rn._evalUrl=function(n,a){return rn.ajax({url:n,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){rn.globalEval(t,a)}})},rn.fn.extend({wrapAll:function(n){var a;return this[0]&&(y(n)&&(n=n.call(this[0])),a=rn(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&a.insertBefore(this[0]),a.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(a){return y(a)?this.each(function(t){rn(this).wrapInner(a.call(this,t))}):this.each(function(){var n=rn(this),e=n.contents();e.length?e.wrapAll(a):n.append(a)})},wrap:function(a){var t=y(a);return this.each(function(n){rn(this).wrapAll(t?a.call(this,n):a)})},unwrap:function(t){return this.parent(t).not("body").each(function(){rn(this).replaceWith(this.childNodes)}),this}}),rn.expr.pseudos.hidden=function(t){return!rn.expr.pseudos.visible(t)},rn.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},rn.ajaxSettings.xhr=function(){try{return new Kt.XMLHttpRequest}catch(t){}};var Ft={0:200,1223:204},Ut=rn.ajaxSettings.xhr();v.cors=!!Ut&&"withCredentials"in Ut,v.ajax=Ut=!!Ut,rn.ajaxTransport(function(s){var i,d;if(v.cors||Ut&&!s.crossDomain)return{send:function(a,o){var t=s.xhr(),e;if(t.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(e in s.xhrFields)t[e]=s.xhrFields[e];for(e in s.mimeType&&t.overrideMimeType&&t.overrideMimeType(s.mimeType),s.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)t.setRequestHeader(e,a[e]);i=function(n){return function(){i&&(i=d=t.onload=t.onerror=t.onabort=t.ontimeout=t.onreadystatechange=null,"abort"===n?t.abort():"error"===n?"number"==typeof t.status?o(t.status,t.statusText):o(0,"error"):o(Ft[t.status]||t.status,t.statusText,"text"!==(t.responseType||"text")||"string"!=typeof t.responseText?{binary:t.response}:{text:t.responseText},t.getAllResponseHeaders()))}},t.onload=i(),d=t.onerror=t.ontimeout=i("error"),void 0===t.onabort?t.onreadystatechange=function(){4===t.readyState&&Kt.setTimeout(function(){i&&d()})}:t.onabort=d,i=i("abort");try{t.send(s.hasContent&&s.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}}),rn.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),rn.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return rn.globalEval(t),t}}}),rn.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),rn.ajaxTransport("script",function(a){var n,o;if(a.crossDomain||a.scriptAttrs)return{send:function(r,i){n=rn("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",o=function(t){n.remove(),o=null,t&&i("error"===t.type?404:200,t.type)}),nn.head.appendChild(n[0])},abort:function(){o&&o()}}});var mn=[],Gt=/(=)\?(?=&|$)|\?\?/,Yt;rn.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=mn.pop()||rn.expando+"_"+Et++;return this[t]=!0,t}}),rn.ajaxPrefilter("json jsonp",function(s,e,t){var n=!1!==s.jsonp&&(Gt.test(s.url)?"url":"string"==typeof s.data&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(s.data)&&"data"),a,d,l;if(n||"jsonp"===s.dataTypes[0])return a=s.jsonpCallback=y(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,n?s[n]=s[n].replace(Gt,"$1"+a):!1!==s.jsonp&&(s.url+=(hn.test(s.url)?"&":"?")+s.jsonp+"="+a),s.converters["script json"]=function(){return l||rn.error(a+" was not called"),l[0]},s.dataTypes[0]="json",d=Kt[a],Kt[a]=function(){l=arguments},t.always(function(){void 0===d?rn(Kt).removeProp(a):Kt[a]=d,s[a]&&(s.jsonpCallback=e.jsonpCallback,mn.push(a)),l&&y(d)&&d(l[0]),l=d=void 0}),"script"}),v.createHTMLDocument=((Yt=nn.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Yt.childNodes.length),rn.parseHTML=function(a,e,s){return"string"==typeof a?("boolean"==typeof e&&(s=e,e=!1),e||(v.createHTMLDocument?((d=(e=nn.implementation.createHTMLDocument("")).createElement("base")).href=nn.location.href,e.head.appendChild(d)):e=nn),p=!s&&[],(l=T.exec(a))?[e.createElement(l[1])]:(l=ye([a],e,p),p&&p.length&&rn(p).remove(),rn.merge([],l.childNodes))):[];var d,l,p},rn.fn.load=function(d,l,p){var c=this,a=d.indexOf(" "),s,u,h;return-1<a&&(s=dt(d.slice(a)),d=d.slice(0,a)),y(l)?(p=l,l=void 0):l&&"object"==typeof l&&(u="POST"),0<c.length&&rn.ajax({url:d,type:u||"GET",dataType:"html",data:l}).done(function(t){h=arguments,c.html(s?rn("<div>").append(rn.parseHTML(t)).find(s):t)}).always(p&&function(n,e){c.each(function(){p.apply(this,h||[n.responseText,e,n])})}),this},rn.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,a){rn.fn[a]=function(t){return this.on(a,t)}}),rn.expr.pseudos.animated=function(n){return rn.grep(rn.timers,function(t){return n===t.elem}).length},rn.offset={setOffset:function(d,e,p){var n=rn.css(d,"position"),l=rn(d),c={},h,m,g,f,b,v;"static"===n&&(d.style.position="relative"),b=l.offset(),g=rn.css(d,"top"),v=rn.css(d,"left"),("absolute"===n||"fixed"===n)&&-1<(g+v).indexOf("auto")?(f=(h=l.position()).top,m=h.left):(f=parseFloat(g)||0,m=parseFloat(v)||0),y(e)&&(e=e.call(d,p,rn.extend({},b))),null!=e.top&&(c.top=e.top-b.top+f),null!=e.left&&(c.left=e.left-b.left+m),"using"in e?e.using.call(d,c):l.css(c)}},rn.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(t){rn.offset.setOffset(this,a,t)});var t=this[0],o,r;return t?t.getClientRects().length?(o=t.getBoundingClientRect(),r=t.ownerDocument.defaultView,{top:o.top+r.pageYOffset,left:o.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var a=this[0],o={top:0,left:0},r,s,d;if("fixed"===rn.css(a,"position"))s=a.getBoundingClientRect();else{for(s=this.offset(),d=a.ownerDocument,r=a.offsetParent||d.documentElement;r&&(r===d.body||r===d.documentElement)&&"static"===rn.css(r,"position");)r=r.parentNode;r&&r!==a&&1===r.nodeType&&((o=rn(r).offset()).top+=rn.css(r,"borderTopWidth",!0),o.left+=rn.css(r,"borderLeftWidth",!0))}return{top:s.top-o.top-rn.css(a,"marginTop",!0),left:s.left-o.left-rn.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===rn.css(t,"position");)t=t.offsetParent;return t||te})}}),rn.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,a){var i="pageYOffset"===a;rn.fn[n]=function(t){return R(this,function(o,e,t){var n;return(m(o)?n=o:9===o.nodeType&&(n=o.defaultView),void 0===t)?n?n[a]:o[e]:void(n?n.scrollTo(i?n.pageXOffset:t,i?t:n.pageYOffset):o[e]=t)},n,t,arguments.length)}}),rn.each(["top","left"],function(t,a){rn.cssHooks[a]=_e(v.pixelPosition,function(n,e){if(e)return e=Pe(n,a),He.test(e)?rn(n).position()[a]+"px":e})}),rn.each({Height:"height",Width:"width"},function(d,a){rn.each({padding:"inner"+d,content:a,"":"outer"+d},function(s,l){rn.fn[l]=function(o,e){var t=arguments.length&&(s||"boolean"!=typeof o),p=s||(!0===o||!0===e?"margin":"border");return R(this,function(a,e,t){var n;return m(a)?0===l.indexOf("outer")?a["inner"+d]:a.document.documentElement["client"+d]:9===a.nodeType?(n=a.documentElement,en(a.body["scroll"+d],n["scroll"+d],a.body["offset"+d],n["offset"+d],n["client"+d])):void 0===t?rn.css(a,e,p):rn.style(a,e,t,p)},a,t?o:void 0,t)}})}),rn.each(["blur","focus","focusin","focusout","resize","scroll","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","contextmenu"],function(t,a){rn.fn[a]=function(n,e){return 0<arguments.length?this.on(a,null,n,e):this.trigger(a)}}),rn.fn.extend({hover:function(n,e){return this.mouseenter(n).mouseleave(e||n)}}),rn.fn.extend({bind:function(a,e,t){return this.on(a,null,e,t)},unbind:function(n,e){return this.off(n,null,e)},delegate:function(a,e,t,n){return this.on(e,a,t,n)},undelegate:function(a,e,t){return 1===arguments.length?this.off(a,"**"):this.off(e,a||"**",t)}}),rn.proxy=function(a,o){var s,d,l;if("string"==typeof o&&(s=a[o],o=a,a=s),y(a))return d=an.call(arguments,2),(l=function(){return a.apply(o||this,d.concat(an.call(arguments)))}).guid=a.guid=a.guid||rn.guid++,l},rn.holdReady=function(t){t?rn.readyWait++:rn.ready(!0)},rn.isArray=Array.isArray,rn.parseJSON=JSON.parse,rn.nodeName=d,rn.isFunction=y,rn.isWindow=m,rn.camelCase=W,rn.type=b,rn.now=Date.now,rn.isNumeric=function(n){var e=rn.type(n);return("number"===e||"string"===e)&&!isNaN(n-parseFloat(n))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return rn});var gn=Kt.jQuery,Qt=Kt.$;return rn.noConflict=function(t){return Kt.$===rn&&(Kt.$=Qt),t&&Kt.jQuery===rn&&(Kt.jQuery=gn),rn},f||(Kt.jQuery=Kt.$=rn),rn});/*!
 * Materialize v1.0.0 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */var _get=function r(t,d,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,d);if(void 0===n){var s=Object.getPrototypeOf(t);return null===s?void 0:r(s,d,i)}if("value"in n)return n.value;var o=n.get;return void 0===o?void 0:o.call(i)},_createClass=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(n,t,e){return t&&a(n.prototype,t),e&&a(n,e),n}}();function _possibleConstructorReturn(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:n}function _inherits(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}window.cash=function(){function U(n,t){t=t||V;var a=s.test(n)?t.getElementsByClassName(n.slice(1)):c.test(n)?t.getElementsByTagName(n):t.querySelectorAll(n);return a}function v(n){if(!u){var t=(u=V.implementation.createHTMLDocument(null)).createElement("base");t.href=V.location.href,u.head.appendChild(t)}return u.body.innerHTML=n,u.body.childNodes}function f(e){"loading"===V.readyState?V.addEventListener("DOMContentLoaded",e):e()}function m(a,t){if(!a)return this;if(a.cash&&a!==o)return a;var e=a,r=0,p;if(h(a))e=d.test(a)?V.getElementById(a.slice(1)):l.test(a)?v(a):U(a,t);else if(Y(a))return f(a),this;if(!e)return this;if(e.nodeType||e===o)this[0]=e,this.length=1;else for(p=this.length=e.length;r<p;r++)this[r]=e[r];return this}function g(n,t){return new m(n,t)}function _(a,t){for(var e=a.length,o=0;o<e&&!1!==t.call(a[o],a[o],o,a);o++);}function k(n,t){var e=n&&(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector);return!!e&&e.call(n,t)}function b(n){return h(n)?k:n.cash?function(e){return n.is(e)}:function(n,t){return n===t}}function w(e){return g(G.call(e).filter(function(n,t,e){return e.indexOf(n)===t}))}function C(n){return n[e]=n[e]||{}}function K(n,t,e){return C(n)[t]=e}function O(n,t){var e=C(n);return void 0===e[t]&&(e[t]=n.dataset?n.dataset[t]:g(n).attr("data-"+t)),e[t]}function x(e){return h(e)&&e.match(y)}function T(n,t){return n.classList?n.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(n.className)}function Q(n,t,e){n.classList?n.classList.add(t):e.indexOf(" "+t+" ")&&(n.className+=" "+t)}function B(n,t){n.classList?n.classList.remove(t):n.className=n.className.replace(t,"")}function D(n,t){return parseInt(o.getComputedStyle(n[0],null)[t],10)||0}function F(a,e,r){var t=O(a,"_cashEvents"),i=t&&t[e],s;i&&(r?(a.removeEventListener(e,r),0<=(s=i.indexOf(r))&&i.splice(s,1)):(_(i,function(n){a.removeEventListener(e,n)}),i=[]))}function q(n,t){return"&"+encodeURIComponent(n)+"="+encodeURIComponent(t).replace(/%20/g,"+")}function N(a){var t=a.type,o,r,s;if(!t)return null;switch(t.toLowerCase()){case"select-one":return 0<=(s=(r=a).selectedIndex)?r.options[s].value:null;case"select-multiple":return o=[],_(a.options,function(e){e.selected&&o.push(e.value)}),o.length?o:null;case"radio":case"checkbox":return a.checked?a.value:null;default:return a.value?a.value:null;}}function z(a,o,r){var e=h(o);e||!o.length?_(a,e?function(e){return e.insertAdjacentHTML(r?"afterbegin":"beforeend",o)}:function(n,t){return function(a,t,e){if(e){var o=a.childNodes[0];a.insertBefore(t,o)}else a.appendChild(t)}(n,0===t?o:o.cloneNode(!0),r)}):_(o,function(e){return z(a,e,r)})}var V=document,o=window,a=Array.prototype,G=a.slice,t=a.filter,n=a.push,r=function(){},Y=function(e){return typeof e==typeof r&&e.call},h=function(e){return"string"==typeof e},d=/^#[\w-]*$/,s=/^\.[\w-]*$/,l=/<.+>/,c=/^\w+$/,p=g.fn=g.prototype=m.prototype={cash:!0,length:0,push:n,splice:a.splice,map:a.map,init:m},u;Object.defineProperty(p,"constructor",{value:g}),g.parseHTML=v,g.noop=r,g.isFunction=Y,g.isString=h,g.extend=p.extend=function(a){a=a||{};var o=G.call(arguments),e=o.length,r=1;for(1===o.length&&(a=this,r=0);r<e;r++)if(o[r])for(var i in o[r])o[r].hasOwnProperty(i)&&(a[i]=o[r][i]);return a},g.extend({merge:function(a,t){for(var e=+t.length,o=a.length,r=0;r<e;o++,r++)a[o]=t[r];return a.length=o,a},each:_,matches:k,unique:w,isArray:Array.isArray,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}});var e=g.uid="_cash"+Date.now();p.extend({data:function(n,e){if(h(n))return void 0===e?O(this[0],n):this.each(function(a){return K(a,n,e)});for(var a in n)this.data(a,n[a]);return this},removeData:function(a){return this.each(function(o){return r=a,void((s=C(t=o))?delete s[r]:t.dataset?delete t.dataset[r]:g(t).removeAttr("data-"+name));var t,r,s})}});var y=/\S+/g;p.extend({addClass:function(e){var t=x(e);return t?this.each(function(n){var e=" "+n.className+" ";_(t,function(a){Q(n,a,e)})}):this},attr:function(n,e){if(n){if(h(n))return void 0===e?this[0]?this[0].getAttribute?this[0].getAttribute(n):this[0][n]:void 0:this.each(function(a){a.setAttribute?a.setAttribute(n,e):a[n]=e});for(var a in n)this.attr(a,n[a]);return this}},hasClass:function(n){var a=!1,o=x(n);return o&&o.length&&this.each(function(e){return!(a=T(e,o[0]))}),a},prop:function(n,e){if(h(n))return void 0===e?this[0][n]:this.each(function(a){a[n]=e});for(var a in n)this.prop(a,n[a]);return this},removeAttr:function(n){return this.each(function(e){e.removeAttribute?e.removeAttribute(n):delete e[n]})},removeClass:function(e){if(!arguments.length)return this.attr("class","");var t=x(e);return t?this.each(function(n){_(t,function(e){B(n,e)})}):this},removeProp:function(n){return this.each(function(e){delete e[n]})},toggleClass:function(a,t){if(void 0!==t)return this[t?"addClass":"removeClass"](a);var o=x(a);return o?this.each(function(n){var e=" "+n.className+" ";_(o,function(a){T(n,a)?B(n,a):Q(n,a,e)})}):this}}),p.extend({add:function(n,t){return w(g.merge(this,g(n,t)))},each:function(e){return _(this,e),this},eq:function(e){return g(this.get(e))},filter:function(n){if(!n)return this;var e=Y(n)?n:b(n);return g(t.call(this,function(a){return e(a,n)}))},first:function(){return this.eq(0)},get:function(e){return void 0===e?G.call(this):0>e?this[e+this.length]:this[e]},index:function(n){var t=n?g(n)[0]:this[0],e=n?this:g(t).parent().children();return G.call(e).indexOf(t)},last:function(){return this.eq(-1)}});var E=(ee=/(?:^\w|[A-Z]|\b\w)/g,te=/[\s-_]+/g,function(e){return e.replace(ee,function(n,t){return n[0===t?"toLowerCase":"toUpperCase"]()}).replace(te,"")}),L=(j={},W=document,J=W.createElement("div"),Z=J.style,function(n){if(n=E(n),j[n])return j[n];var a=n.charAt(0).toUpperCase()+n.slice(1),t=(n+" "+["webkit","moz","ms","o"].join(a+" ")+a).split(" ");return _(t,function(e){if(e in Z)return j[e]=n=j[n]=e,!1}),j[n]}),j,W,J,Z,ee,te;g.prefixedProp=L,g.camelCase=E,p.extend({css:function(n,a){if(h(n))return n=L(n),1<arguments.length?this.each(function(e){return e.style[n]=a}):o.getComputedStyle(this[0])[n];for(var r in n)this.css(r,n[r]);return this}}),_(["Width","Height"],function(n){var e=n.toLowerCase();p[e]=function(){return this[0].getBoundingClientRect()[e]},p["inner"+n]=function(){return this[0]["client"+n]},p["outer"+n]=function(e){return this[0]["offset"+n]+(e?D(this,"margin"+("Width"===n?"Left":"Top"))+D(this,"margin"+("Width"===n?"Right":"Bottom")):0)}}),p.extend({off:function(n,e){return this.each(function(a){return F(a,n,e)})},on:function(d,a,p,c){var o;if(!h(d)){for(var e in d)this.on(e,a,d[e]);return this}return Y(a)&&(p=a,a=null),"ready"===d?(f(p),this):(a&&(o=p,p=function(n){for(var t=n.target;!k(t,a);){if(t===this||null===t)return t=!1;t=t.parentNode}t&&o.call(t,n)}),this.each(function(a){var t=p,r,l,u,h;c&&(t=function(){p.apply(this,arguments),F(a,d,t)}),l=d,u=t,(h=O(r=a,"_cashEvents")||K(r,"_cashEvents",{}))[l]=h[l]||[],h[l].push(u),r.addEventListener(l,u)}))},one:function(n,t,e){return this.on(n,t,e,!0)},ready:f,trigger:function(n,t){if(document.createEvent){var e=document.createEvent("HTMLEvents");return e.initEvent(n,!0,!1),e=this.extend(e,t),this.each(function(n){return n.dispatchEvent(e)})}}}),p.extend({serialize:function(){var a="";return _(this[0].elements||this,function(o){if(!o.disabled&&"FIELDSET"!==o.tagName){var r=o.name;switch(o.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var e=N(o);null!==e&&_(e,function(e){a+=q(r,e)});break;default:var t=N(o);null!==t&&(a+=q(r,t));}}}),a.substr(1)},val:function(n){return void 0===n?N(this[0]):this.each(function(e){return e.value=n})}}),p.extend({after:function(e){return g(e).insertAfter(this),this},append:function(e){return z(this,e),this},appendTo:function(e){return z(g(e),this),this},before:function(e){return g(e).insertBefore(this),this},clone:function(){return g(this.map(function(e){return e.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(n){if(void 0===n)return this[0].innerHTML;var a=n.nodeType?n[0].outerHTML:n;return this.each(function(e){return e.innerHTML=a})},insertAfter:function(e){var a=this;return g(e).each(function(o,r){var e=o.parentNode,i=o.nextSibling;a.each(function(n){e.insertBefore(0===r?n:n.cloneNode(!0),i)})}),this},insertBefore:function(e){var t=this;return g(e).each(function(a,e){var o=a.parentNode;t.each(function(n){o.insertBefore(0===e?n:n.cloneNode(!0),a)})}),this},prepend:function(e){return z(this,e,!0),this},prependTo:function(e){return z(g(e),this,!0),this},remove:function(){return this.each(function(e){if(e.parentNode)return e.parentNode.removeChild(e)})},text:function(n){return void 0===n?this[0].textContent:this.each(function(e){return e.textContent=n})}});var ne=V.documentElement;return p.extend({position:function(){var e=this[0];return{left:e.offsetLeft,top:e.offsetTop}},offset:function(){var e=this[0].getBoundingClientRect();return{top:e.top+o.pageYOffset-ne.clientTop,left:e.left+o.pageXOffset-ne.clientLeft}},offsetParent:function(){return g(this[0].offsetParent)}}),p.extend({children:function(a){var e=[];return this.each(function(a){n.apply(e,a.children)}),e=w(e),a?e.filter(function(e){return k(e,a)}):e},closest:function(e){return!e||1>this.length?g():this.is(e)?this.filter(e):this.parent().closest(e)},is:function(a){if(!a)return!1;var e=!1,o=b(a);return this.each(function(n){return!(e=o(n,a))}),e},find:function(a){if(!a||a.nodeType)return g(a&&this.has(a).length?a:null);var e=[];return this.each(function(o){n.apply(e,U(a,o))}),w(e)},has:function(n){var e=h(n)?function(e){return 0!==U(n,e).length}:function(e){return e.contains(n)};return this.filter(e)},next:function(){return g(this[0].nextElementSibling)},not:function(n){if(!n)return this;var e=b(n);return this.filter(function(a){return!e(a,n)})},parent:function(){var n=[];return this.each(function(e){e&&e.parentNode&&n.push(e.parentNode)}),w(n)},parents:function(a){var e=[],n;return this.each(function(o){for(n=o;n&&n.parentNode&&n!==V.body.parentNode;)n=n.parentNode,(!a||a&&k(n,a))&&e.push(n)}),w(e)},prev:function(){return g(this[0].previousElementSibling)},siblings:function(n){var t=this.parent().children(n),e=this[0];return t.filter(function(n){return n!==e})}}),g}();var Component=function(){function a(o,t){_classCallCheck(this,a),t instanceof Element||console.error(Error(t+" is not an HTML Element"));var e=o.getInstance(t);e&&e.destroy(),this.el=t,this.$el=cash(t)}return _createClass(a,null,[{key:"init",value:function(a,t,e){var r=null;if(t instanceof Element)r=new a(t,e);else if(t&&(t.jquery||t.cash||t instanceof NodeList)){for(var i=[],s=0;s<t.length;s++)i.push(new a(t[s],e));r=i}return r}}]),a}();!function(e){e.Package?M={}:e.M={},M.jQueryLoaded=!!e.jQuery}(window),"function"==typeof define&&define.amd?define("M",[],function(){return M}):"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=M),exports.default=M),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var docHandleKeydown=function(e){M.keyDown=!0,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!0)},docHandleKeyup=function(e){M.keyDown=!1,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!1)},docHandleFocus=function(){M.keyDown&&document.body.classList.add("keyboard-focused")},docHandleBlur=function(){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",docHandleKeydown,!0),document.addEventListener("keyup",docHandleKeyup,!0),document.addEventListener("focus",docHandleFocus,!0),document.addEventListener("blur",docHandleBlur,!0),M.initializeJqueryWrapper=function(a,n,r){jQuery.fn[n]=function(o){if(a.prototype[o]){var e=Array.prototype.slice.call(arguments,1);if("get"===o.slice(0,3)){var i=this.first()[0][r];return i[o].apply(i,e)}return this.each(function(){var n=this[r];n[o].apply(n,e)})}return"object"!=typeof o&&o?void jQuery.error("Method "+o+" does not exist on jQuery."+n):(a.init(this,o),this)}},M.AutoInit=function(a){var t=a||document.body,e={Autocomplete:t.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:t.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:t.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:t.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:t.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:t.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:t.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:t.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:t.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:t.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:t.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:t.querySelectorAll("select:not(.no-autoinit)"),Sidenav:t.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:t.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:t.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:t.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:t.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:t.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var o in e)M[o].init(e[o])},M.objectSelectorString=function(e){return((e.prop("tagName")||"")+(e.attr("id")||"")+(e.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),M.escapeHash=function(e){return e.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(a){var t=$(a),e=t.add(t.parents()),o=!1;return e.each(function(){if("fixed"===$(this).css("position"))return!(o=!0)}),o},M.checkWithinContainer=function(d,t,e){var i={top:!1,right:!1,bottom:!1,left:!1},n=d.getBoundingClientRect(),s=d===document.body?Math.max(n.bottom,window.innerHeight):n.bottom,o=d.scrollLeft,a=d.scrollTop,r=t.left-o,l=t.top-a;return(r<n.left+e||r<e)&&(i.left=!0),(r+t.width>n.right-e||r+t.width>window.innerWidth-e)&&(i.right=!0),(l<n.top+e||l<e)&&(i.top=!0),(l+t.height>s-e||l+t.height>window.innerHeight-e)&&(i.bottom=!0),i},M.checkPossibleAlignments=function(m,t,e,i){var n=Math.min,g={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},s="visible"===getComputedStyle(t).overflow,o=t.getBoundingClientRect(),a=n(o.height,window.innerHeight),r=n(o.width,window.innerWidth),l=m.getBoundingClientRect(),h=t.scrollLeft,d=t.scrollTop,u=e.left-h,c=e.top-d,p=e.top+l.height-d;return g.spaceOnRight=s?window.innerWidth-(l.left+e.width):r-(u+e.width),0>g.spaceOnRight&&(g.left=!1),g.spaceOnLeft=s?l.right-e.width:u-e.width+l.width,0>g.spaceOnLeft&&(g.right=!1),g.spaceOnBottom=s?window.innerHeight-(l.top+e.height+i):a-(c+e.height+i),0>g.spaceOnBottom&&(g.top=!1),g.spaceOnTop=s?l.bottom-(e.height+i):p-(e.height-i),0>g.spaceOnTop&&(g.bottom=!1),g},M.getOverflowParent=function(e){return null==e?null:e===document.body||"visible"!==getComputedStyle(e).overflow?e:M.getOverflowParent(e.parentElement)},M.getIdFromTrigger=function(n){var t=n.getAttribute("data-target");return t||(t=(t=n.getAttribute("href"))?t.slice(1):""),t},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};var getTime=Date.now||function(){return new Date().getTime()};M.throttle=function(p,i,n){var c=null,u=0,m,g,y;n||(n={});var f=function(){u=!1===n.leading?0:getTime(),c=null,y=p.apply(m,g),m=g=null};return function(){var a=getTime();u||!1!==n.leading||(u=a);var t=i-(a-u);return m=this,g=arguments,0>=t?(clearTimeout(c),c=null,u=a,y=p.apply(m,g),m=g=null):c||!1===n.trailing||(c=setTimeout(f,t)),y}};var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(n,t,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");n!=Array.prototype&&n!=Object.prototype&&(n[t]=e.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(n){var t=0;return $jscomp.iteratorPrototype(function(){return t<n.length?{done:!1,value:n[t++]}:{done:!0}})},$jscomp.iteratorPrototype=function(e){return $jscomp.initSymbolIterator(),(e={next:e})[$jscomp.global.Symbol.iterator]=function(){return this},e},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(a,o){$jscomp.initSymbolIterator(),a instanceof String&&(a+="");var r=0,i={next:function(){if(r<a.length){var e=r++;return{value:o(e,a[e]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},$jscomp.polyfill=function(a,o,r,d){if(o){for(r=$jscomp.global,a=a.split("."),d=0;d<a.length-1;d++){var l=a[d];l in r||(r[l]={}),r=r[l]}(o=o(d=r[a=a[a.length-1]]))!=d&&null!=o&&$jscomp.defineProperty(r,a,{configurable:!0,writable:!0,value:o})}},$jscomp.polyfill("Array.prototype.keys",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");var $jscomp$this=this;M.anime=function(){var w=Math.PI,O=Math.min,F=Math.pow,V=Math.max;function N(e){if(!T.col(e))try{return document.querySelectorAll(e)}catch(e){}}function P(r,t){for(var e=r.length,i=2<=arguments.length?t:void 0,n=[],s=0;s<e;s++)if(s in r){var d=r[s];t.call(i,d,s,r)&&n.push(d)}return n}function b(e){return e.reduce(function(n,t){return n.concat(T.arr(t)?b(t):t)},[])}function d(e){return T.arr(e)?e:(T.str(e)&&(e=N(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function o(n,a){return n.some(function(e){return e===a})}function a(n){var t={},a;for(a in n)t[a]=n[a];return t}function q(o,t){var e=a(o),n;for(n in o)e[n]=t.hasOwnProperty(n)?t[n]:o[n];return e}function u(o,t){var e=a(o),n;for(n in t)e[n]=T.und(o[n])?t[n]:o[n];return e}function c(e){if(e=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e))return e[2]}function r(n,t){return T.fnc(n)?n(t.target,t.id,t.total):n}function s(n,t){if(t in n.style)return getComputedStyle(n).getPropertyValue(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function l(a,t){return T.dom(a)&&o(n,t)?"transform":T.dom(a)&&(a.getAttribute(t)||T.svg(a)&&a[t])?"attribute":T.dom(a)&&"transform"!==t&&s(a,t)?"css":null==a[t]?void 0:"object"}function p(n,t){switch(l(n,t)){case"transform":return function(d,l){var i=-1<(p=l).indexOf("translate")||"perspective"===p?"px":-1<p.indexOf("rotate")||-1<p.indexOf("skew")?"deg":void 0,i=-1<l.indexOf("scale")?1:0+i,p;if(!(d=d.style.transform))return i;for(var c=[],u=[],o=[],a=/(\w+)\((.+?)\)/g;c=a.exec(d);)u.push(c[1]),o.push(c[2]);return(d=P(o,function(n,t){return u[t]===l})).length?d[0]:i}(n,t);case"css":return s(n,t);case"attribute":return n.getAttribute(t);}return n[t]||0}function h(a,o){var r=/^(\*=|\+=|-=)/.exec(a);if(!r)return a;var i=c(a)||0;switch(o=parseFloat(o),a=parseFloat(a.replace(r[0],"")),r[0][0]){case"+":return o+a+i;case"-":return o-a+i;case"*":return o*a+i;}}function f(n,t){return Math.sqrt(F(t.x-n.x,2)+F(t.y-n.y,2))}function m(a){a=a.points;for(var o=0,r=0,d,l;r<a.numberOfItems;r++)l=a.getItem(r),0<r&&(o+=f(d,l)),d=l;return o}function v(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return 2*w*n.getAttribute("r");case"rect":return 2*n.getAttribute("width")+2*n.getAttribute("height");case"line":return f({x:n.getAttribute("x1"),y:n.getAttribute("y1")},{x:n.getAttribute("x2"),y:n.getAttribute("y2")});case"polyline":return m(n);case"polygon":var t=n.points;return m(n)+f(t.getItem(t.numberOfItems-1),t.getItem(0));}}function e(a,e){function r(n){return n=void 0===n?0:n,a.el.getPointAtLength(1<=e+n?e+n:0)}var t=r(),n=r(-1),i=r(1);switch(a.property){case"x":return t.x;case"y":return t.y;case"angle":return 180*Math.atan2(i.y-n.y,i.x-n.x)/w;}}function g(a,t){var e=/-?\d*\.?\d+/g,n;if(!(n=T.pth(a)?a.totalLength:a,T.col(n)))o=(o=c(n))?n.substr(0,n.length-o.length):n,n=t&&!/\s/g.test(n)?o+t:o;else if(T.rgb(n)){var o=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=o?"rgba("+o[1]+",1)":n}else n=T.hex(n)?function(n){n=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,t,e,o){return t+t+e+e+o+o});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);n=parseInt(a[1],16);var o=parseInt(a[2],16),a=parseInt(a[3],16);return"rgba("+n+","+o+","+a+",1)"}(n):T.hsl(n)?function(r){function d(n,t,e){return 0>e&&(e+=1),1<e&&--e,e<1/6?n+6*(t-n)*e:.5>e?t:e<2/3?n+6*((t-n)*(2/3-e)):n}var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(r)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(r);r=parseInt(e[1])/360;var l=parseInt(e[2])/100,p=parseInt(e[3])/100,e=e[4]||1;if(0==l)p=l=r=p;else{var c=.5>p?p*(1+l):p+l-p*l,o=2*p-c,p=d(o,c,r+1/3),l=d(o,c,r);r=d(o,c,r-1/3)}return"rgba("+255*p+","+255*l+","+255*r+","+e+")"}(n):void 0;return{original:n+="",numbers:n.match(e)?n.match(e).map(Number):[0],strings:T.str(a)||t?n.split(e):[]}}function _(e){return P(e=e?b(T.arr(e)?e.map(d):d(e)):[],function(n,t,e){return e.indexOf(n)===t})}function i(o,r){var i=a(r);if(T.arr(o)){var e=o.length;2!==e||T.obj(o[0])?T.fnc(r.duration)||(i.duration=r.duration/e):o={value:o}}return d(o).map(function(n,a){return a=a?0:r.delay,n=T.obj(n)&&!T.pth(n)?n:{value:n},T.und(n.delay)&&(n.delay=a),n}).map(function(e){return u(e,i)})}function y(d,o){var a;return d.tweens.map(function(l){var u=(l=function(a,o){var e={},t;for(t in a){var n=r(a[t],o);T.arr(n)&&1===(n=n.map(function(e){return r(e,o)})).length&&(n=n[0]),e[t]=n}return e.duration=parseFloat(e.duration),e.delay=parseFloat(e.delay),e}(l,o)).value,e=p(o.target,d.name),m=a?a.to.original:e,m=T.arr(u)?u[0]:m,y=h(T.arr(u)?u[1]:u,m),e=c(y)||c(m)||c(e);return l.from=g(m,e),l.to=g(y,e),l.start=a?a.end:d.offset,l.end=l.start+l.delay+l.duration,l.easing=function(e){return T.arr(e)?B.apply(this,e):D[e]}(l.easing),l.elasticity=(1e3-O(V(l.elasticity,1),999))/1e3,l.isPath=T.pth(u),l.isColor=T.col(l.from.original),l.isColor&&(l.round=1),a=l})}function E(a,e,t,o){var n="delay"===a;return e.length?(n?O:V).apply(Math,e.map(function(e){return e[a]})):n?o.delay:t.offset+o.delay+o.duration}function C(d){var p=q(U,d),o=q(L,d),a=(m=d.targets,(g=_(m)).map(function(n,t){return{target:n,id:t,total:g.length}})),r=[],c=u(p,o),h,m,g,f;for(h in d)c.hasOwnProperty(h)||"targets"===h||r.push({name:h,offset:c.offset,tweens:i(d[h],o)});return f=r,d=P(b(a.map(function(a){return f.map(function(n){var o=l(a.target,n.name);if(o){var e=y(n,a);n={type:o,property:n.name,animatable:a,tweens:e,duration:e[e.length-1].end,delay:e[0].delay}}else n=void 0;return n})})),function(e){return!T.und(e)}),u(p,{children:[],animatables:a,animations:d,duration:E("duration",d,p,o),delay:E("delay",d,p,o)})}function k(n){function b(){return window.Promise&&new Promise(function(e){return T=e})}function d(e){return w.reversed?w.duration-e:e}function u(m){for(var g=0,y={},i=w.animations,b=i.length;g<b;){var T=i[g],o=T.animatable,a=T.tweens,_=a.length-1,E=a[_];_&&(E=P(a,function(e){return m<e.end})[0]||E);for(var a=O(V(m-E.start-E.delay,0),E.duration)/E.duration,k=isNaN(a)?1:E.easing(a,E.elasticity),a=E.to.strings,C=E.round,_=[],I=void 0,I=E.to.numbers.length,D=0;D<I;D++){var A=void 0,A=E.to.numbers[D],x=E.from.numbers[D],A=E.isPath?e(E.value,k*A):x+k*(A-x);C&&(E.isColor&&2<D||(A=Math.round(A*C)/C)),_.push(A)}if(E=a.length)for(I=a[0],k=0;k<E;k++)C=a[k+1],D=_[k],isNaN(D)||(I=C?I+(D+C):I+(D+" "));else I=_[0];S[T.type](o.target,T.property,I,y,o.id),T.currentValue=I,g++}if(g=Object.keys(y).length)for(i=0;i<g;i++)j||(j=s(document.body,"transform")?"transform":"-webkit-transform"),w.animatables[i].target.style[j]=y[i].join(" ");w.currentTime=m,w.progress=100*(m/w.duration)}function c(e){w[e]&&w[e](w)}function p(){w.remaining&&!0!==w.remaining&&w.remaining--}function a(m){var t=w.duration,e=w.offset,i=e+w.delay,n=w.currentTime,s=w.reversed,o=d(m);if(w.children.length){var a=w.children,r=a.length;if(o>=w.currentTime)for(var g=0;g<r;g++)a[g].seek(o);else for(;r--;)a[r].seek(o)}(i<=o||!t)&&(w.began||(w.began=!0,c("begin")),c("run")),e<o&&o<t?u(o):(o<=e&&0!==n&&(u(0),s&&p()),(t<=o&&n!==t||!t)&&(u(t),s||p())),c("update"),t<=m&&(w.remaining?(x=D,"alternate"===w.direction&&(w.reversed=!w.reversed)):(w.pause(),w.completed||(w.completed=!0,c("complete"),"Promise"in window&&(T(),E=b()))),v=0)}n=void 0===n?{}:n;var v=0,T=null,E=b(),w=C(n),D,x;return w.reset=function(){var n=w.direction,a=w.loop;for(w.currentTime=0,w.progress=0,w.paused=!0,w.began=!1,w.completed=!1,w.reversed="reverse"===n,w.remaining="alternate"===n&&1===a?2:a,u(0),n=w.children.length;n--;)w.children[n].reset()},w.tick=function(e){D=e,x||(x=D),a((v+D-x)*k.speed)},w.seek=function(e){a(d(e))},w.pause=function(){var e=I.indexOf(w);-1<e&&I.splice(e,1),w.paused=!0},w.play=function(){w.paused&&(w.paused=!1,x=0,v=d(w.currentTime),I.push(w),A||t())},w.reverse=function(){w.reversed=!w.reversed,x=0,v=d(w.currentTime)},w.restart=function(){w.pause(),w.reset(),w.play()},w.finished=E,w.reset(),w.autoplay&&w.play(),w}var U={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},L={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},n=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skewX","skewY","perspective"],T={arr:function(e){return Array.isArray(e)},obj:function(e){return-1<Object.prototype.toString.call(e).indexOf("Object")},pth:function(e){return T.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},dom:function(e){return e.nodeType||T.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return /^rgb/.test(e)},hsl:function(e){return /^hsl/.test(e)},col:function(e){return T.hex(e)||T.rgb(e)||T.hsl(e)}},B=function(){function p(n,t,e){return(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n}return function(c,a,r,l){if(0<=c&&1>=c&&0<=r&&1>=r){var u=new Float32Array(11);if(c!==a||r!==l)for(var e=0;11>e;++e)u[e]=p(.1*e,c,r);return function(d){if(c===a&&r===l)return d;if(0===d)return 0;if(1===d)return 1;for(var h=0,m=1;10!==m&&u[m]<=d;++m)h+=.1;var m=h+.1*((d-u[--m])/(u[m+1]-u[m])),g=3*(1-3*r+3*c)*m*m+2*(3*r-6*c)*m+3*c;if(.001<=g){for(h=0;4>h&&0!=(g=3*(1-3*r+3*c)*m*m+2*(3*r-6*c)*m+3*c);++h)var y=p(m,c,r)-d,m=m-y/g;d=m}else if(0==g)d=m;else{for(var m=h,h=h+.1,f=0;0<(g=p(y=m+(h-m)/2,c,r)-d)?h=y:m=y,1e-7<Math.abs(g)&&10>++f;);d=y}return p(d,a,l)}}}}(),D=function(){function a(n,t){return 0===n||1===n?n:-F(2,10*(n-1))*Math.sin(2*(n-1-t/(2*w)*Math.asin(1))*w/t)}var r=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],n={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],a],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(n,t){return 1-a(1-n,t)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(n,t){return .5>n?a(2*n,t)/2:1-a(-2*n+2,t)/2}]},d={linear:B(.25,.25,.75,.75)},e={},i;for(i in n)e.type=i,n[e.type].forEach(function(n){return function(a,t){d["ease"+n.type+r[t]]=T.fnc(a)?a:B.apply($jscomp$this,a)}}(e)),e={type:e.type};return d}(),S={css:function(n,t,e){return n.style[t]=e},attribute:function(n,t,e){return n.setAttribute(t,e)},object:function(n,t,e){return n[t]=e},transform:function(a,t,e,o,n){o[n]||(o[n]=[]),o[n].push(t+"("+e+")")}},I=[],A=0,t=function(){function a(){A=requestAnimationFrame(e)}function e(n){var t=I.length;if(t){for(var e=0;e<t;)I[e]&&I[e].tick(n),e++;a()}else cancelAnimationFrame(A),A=0}return a}(),j;return k.version="2.2.0",k.speed=1,k.running=I,k.remove=function(a){a=_(a);for(var r=I.length;r--;)for(var d=I[r],i=d.animations,n=i.length;n--;)o(a,i[n].animatable.target)&&(i.splice(n,1),i.length||d.pause())},k.getValue=p,k.path=function(n,a){var e=T.str(n)?N(n)[0]:n;return function(n){return{el:e,property:n,totalLength:v(e)*((a||100)/100)}}},k.setDashoffset=function(n){var t=v(n);return n.setAttribute("stroke-dasharray",t),t},k.bezier=B,k.easings=D,k.timeline=function(a){var n=k(a);return n.pause(),n.duration=0,n.add=function(e){return n.children.forEach(function(e){e.began=!0,e.completed=!0}),d(e).forEach(function(o){var r=u(o,q(L,a||{}));r.targets=r.targets||a.targets,o=n.duration;var s=r.offset;r.autoplay=!1,r.direction=n.direction,r.offset=T.und(s)?o:h(s,o),n.began=!0,n.completed=!0,n.seek(r.offset),(r=k(r)).began=!0,r.completed=!0,r.duration>o&&(n.duration=r.duration),n.children.push(r)}),n.seek(0),n.reset(),n.autoplay&&n.restart(),n},n},k.random=function(n,t){return Math.floor(Math.random()*(t-n+1))+n},k}(),function(d,r){"use strict";var n={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},e=function(){function a(o,t){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,a,o,t));(e.el.M_Collapsible=e).options=d.extend({},a.defaults,t),e.$headers=e.$el.children("li").children(".collapsible-header"),e.$headers.attr("tabindex",0),e._setupEventHandlers();var r=e.$el.children("li.active").children(".collapsible-body");return e.options.accordion?r.first().css("display","block"):r.css("display","block"),e}return _inherits(a,Component),_createClass(a,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var n=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(e){e.addEventListener("keydown",n._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var n=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(e){e.removeEventListener("keydown",n._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(r){var t=d(r.target).closest(".collapsible-header");if(r.target&&t.length){var e=t.closest(".collapsible");if(e[0]===this.el){var i=t.closest("li"),n=e.children("li"),s=i[0].classList.contains("active"),o=n.index(i);s?this.close(o):this.open(o)}}}},{key:"_handleCollapsibleKeydown",value:function(e){13===e.keyCode&&this._handleCollapsibleClickBound(e)}},{key:"_animateIn",value:function(d){var t=this,e=this.$el.children("li").eq(d);if(e.length){var i=e.children(".collapsible-body");r.remove(i[0]),i.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var n=i.css("padding-top"),s=i.css("padding-bottom"),o=i[0].scrollHeight;i.css({paddingTop:0,paddingBottom:0}),r({targets:i[0],height:o,paddingTop:n,paddingBottom:s,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(){i.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),"function"==typeof t.options.onOpenEnd&&t.options.onOpenEnd.call(t,e[0])}})}}},{key:"_animateOut",value:function(a){var t=this,e=this.$el.children("li").eq(a);if(e.length){var o=e.children(".collapsible-body");r.remove(o[0]),o.css("overflow","hidden"),r({targets:o[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){o.css({height:"",overflow:"",padding:"",display:""}),"function"==typeof t.options.onCloseEnd&&t.options.onCloseEnd.call(t,e[0])}})}}},{key:"open",value:function(a){var o=this,t=this.$el.children("li").eq(a);if(t.length&&!t[0].classList.contains("active")){if("function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,t[0]),this.options.accordion){var r=this.$el.children("li");this.$el.children("li.active").each(function(n){var t=r.index(d(n));o.close(t)})}t[0].classList.add("active"),this._animateIn(a)}}},{key:"close",value:function(n){var t=this.$el.children("li").eq(n);t.length&&t[0].classList.contains("active")&&("function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,t[0]),t[0].classList.remove("active"),this._animateOut(n))}}],[{key:"init",value:function(n,t){return _get(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Collapsible}},{key:"defaults",get:function(){return n}}]),a}();M.Collapsible=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"collapsible","M_Collapsible")}(cash,M.anime),function(o,n){"use strict";var a={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},e=function(){function r(n,t){_classCallCheck(this,r);var e=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,n,t));return e.el.M_Dropdown=e,r._dropdowns.push(e),e.id=M.getIdFromTrigger(n),e.dropdownEl=document.getElementById(e.id),e.$dropdownEl=o(e.dropdownEl),e.options=o.extend({},r.defaults,t),e.isOpen=!1,e.isScrollable=!1,e.isTouchMoving=!1,e.focusedIndex=-1,e.filterQuery=[],e.options.container?o(e.options.container).append(e.dropdownEl):e.$el.after(e.dropdownEl),e._makeDropdownFocusable(),e._resetFilterQueryBound=e._resetFilterQuery.bind(e),e._handleDocumentClickBound=e._handleDocumentClick.bind(e),e._handleDocumentTouchmoveBound=e._handleDocumentTouchmove.bind(e),e._handleDropdownClickBound=e._handleDropdownClick.bind(e),e._handleDropdownKeydownBound=e._handleDropdownKeydown.bind(e),e._handleTriggerKeydownBound=e._handleTriggerKeydown.bind(e),e._setupEventHandlers(),e}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),r._dropdowns.splice(r._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(e){e.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(a){var t=a.toElement||a.relatedTarget,e=!!o(t).closest(".dropdown-content").length,r=!1,i=o(t).closest(".dropdown-trigger");i.length&&i[0].M_Dropdown&&i[0].M_Dropdown.isOpen&&(r=!0),r||e||this.close()}},{key:"_handleDocumentClick",value:function(n){var t=this,e=o(n.target);this.options.closeOnClick&&e.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){t.close()},0):!e.closest(".dropdown-trigger").length&&e.closest(".dropdown-content").length||setTimeout(function(){t.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(e){e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ENTER||this.isOpen||(e.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(e){o(e.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(n){if("function"==typeof this.options.onItemClick){var t=o(n.target).closest("li")[0];this.options.onItemClick.call(this,t)}}},{key:"_handleDropdownKeydown",value:function(d){if(d.which===M.keys.TAB)d.preventDefault(),this.close();else if(!(d.which!==M.keys.ARROW_DOWN&&d.which!==M.keys.ARROW_UP||!this.isOpen)){d.preventDefault();var t=d.which===M.keys.ARROW_DOWN?1:-1,n=this.focusedIndex,p=!1;do if(n+=t,this.dropdownEl.children[n]&&-1!==this.dropdownEl.children[n].tabIndex){p=!0;break}while(n<this.dropdownEl.children.length&&0<=n);p&&(this.focusedIndex=n,this._focusFocusedItem())}else if(d.which===M.keys.ENTER&&this.isOpen){var c=this.dropdownEl.children[this.focusedIndex],e=o(c).find("a, button").first();e.length?e[0].click():c&&c.click()}else d.which===M.keys.ESC&&this.isOpen&&(d.preventDefault(),this.close());var i=String.fromCharCode(d.which).toLowerCase();if(i&&-1===[9,13,27,38,40].indexOf(d.which)){this.filterQuery.push(i);var a=this.filterQuery.join(""),r=o(this.dropdownEl).find("li").filter(function(e){return 0===o(e).text().toLowerCase().indexOf(a)})[0];r&&(this.focusedIndex=o(r).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,o(this.dropdownEl).children().each(function(e){e.getAttribute("tabindex")||e.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){0<=this.focusedIndex&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var p=this.el.getBoundingClientRect(),t=this.dropdownEl.getBoundingClientRect(),e=t.height,c=t.width,m=p.left-t.left,g=p.top-t.top,y={left:m,top:g,height:e,width:c},a=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,r=M.checkPossibleAlignments(this.el,a,y,this.options.coverTrigger?0:p.height),l="top",f=this.options.alignment;if(g+=this.options.coverTrigger?0:p.height,this.isScrollable=!1,r.top||(r.bottom?l="bottom":(this.isScrollable=!0,r.spaceOnTop>r.spaceOnBottom?(l="bottom",e+=r.spaceOnTop,g-=r.spaceOnTop):e+=r.spaceOnBottom)),!r[f]){var b="left"===f?"right":"left";r[b]?f=b:r.spaceOnLeft>r.spaceOnRight?(f="right",c+=r.spaceOnLeft,m-=r.spaceOnLeft):(f="left",c+=r.spaceOnRight)}return"bottom"==l&&(g=g-t.height+(this.options.coverTrigger?p.height:0)),"right"===f&&(m=m-t.width+p.width),{x:m,y:g,verticalAlignment:l,horizontalAlignment:f,height:e,width:c}}},{key:"_animateIn",value:function(){var t=this;n.remove(this.dropdownEl),n({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(){t.options.autoFocus&&t.dropdownEl.focus(),"function"==typeof t.options.onOpenEnd&&t.options.onOpenEnd.call(t,t.el)}})}},{key:"_animateOut",value:function(){var t=this;n.remove(this.dropdownEl),n({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(){t._resetDropdownStyles(),"function"==typeof t.options.onCloseEnd&&t.options.onCloseEnd.call(t,t.el)}})}},{key:"_placeDropdown",value:function(){var n=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=n+"px";var t=this._getDropdownPosition();this.dropdownEl.style.left=t.x+"px",this.dropdownEl.style.top=t.y+"px",this.dropdownEl.style.height=t.height+"px",this.dropdownEl.style.width=t.width+"px",this.dropdownEl.style.transformOrigin=("left"===t.horizontalAlignment?"0":"100%")+" "+("top"===t.verticalAlignment?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(n,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Dropdown}},{key:"defaults",get:function(){return a}}]),r}();e._dropdowns=[],M.Dropdown=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"dropdown","M_Dropdown")}(cash,M.anime),function(a,o){"use strict";var n={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},e=function(){function r(n,t){_classCallCheck(this,r);var e=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,n,t));return(e.el.M_Modal=e).options=a.extend({},r.defaults,t),e.isOpen=!1,e.id=e.$el.attr("id"),e._openingTrigger=void 0,e.$overlay=a("<div class=\"modal-overlay\"></div>"),e.el.tabIndex=0,e._nthModalOpened=0,r._count++,e._setupEventHandlers(),e}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){r._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),1===r._count&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){0===r._count&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(o){var t=a(o.target).closest(".modal-trigger");if(t.length){var e=M.getIdFromTrigger(t[0]),r=document.getElementById(e).M_Modal;r&&r.open(t),o.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(e){a(e.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(e){27===e.keyCode&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(e){this.el.contains(e.target)||this._nthModalOpened!==r._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var n=this;a.extend(this.el.style,{display:"block",opacity:0}),a.extend(this.$overlay[0].style,{display:"block",opacity:0}),o({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var t={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){"function"==typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,n.el,n._openingTrigger)}};this.el.classList.contains("bottom-sheet")?a.extend(t,{bottom:0,opacity:1}):a.extend(t,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),o(t)}},{key:"_animateOut",value:function(){var n=this;o({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var t={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){n.el.style.display="none",n.$overlay.remove(),"function"==typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,n.el)}};this.el.classList.contains("bottom-sheet")?a.extend(t,{bottom:"-100%",opacity:0}):a.extend(t,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),o(t)}},{key:"open",value:function(e){if(!this.isOpen)return this.isOpen=!0,r._modalsOpen++,this._nthModalOpened=r._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*r._modalsOpen,this.el.style.zIndex=1e3+2*r._modalsOpen+1,this._openingTrigger=e?e[0]:void 0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),o.remove(this.el),o.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,r._modalsOpen--,this._nthModalOpened=0,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),0===r._modalsOpen&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),o.remove(this.el),o.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(n,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Modal}},{key:"defaults",get:function(){return n}}]),r}();e._modalsOpen=0,e._count=0,M.Modal=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"modal","M_Modal")}(cash,M.anime),function(r,o){"use strict";var n={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},e=function(){function a(n,t){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,a,n,t));return(e.el.M_Materialbox=e).options=r.extend({},a.defaults,t),e.overlayActive=!1,e.doneAnimating=!0,e.placeholder=r("<div></div>").addClass("material-placeholder"),e.originalWidth=0,e.originalHeight=0,e.originInlineStyles=e.$el.attr("style"),e.caption=e.el.getAttribute("data-caption")||"",e.$el.before(e.placeholder),e.placeholder.append(e.$el),e._setupEventHandlers(),e}return _inherits(a,Component),_createClass(a,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,r(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(){!1===this.doneAnimating||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(e){27===e.keyCode&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=r();for(var n=this.placeholder[0].parentNode,a;null!==n&&!r(n).is(document);)a=r(n),"visible"!==a.css("overflow")&&(a.css("overflow","visible"),this.ancestorsChanged=void 0===this.ancestorsChanged?a:this.ancestorsChanged.add(a)),n=n.parentNode}},{key:"_animateImageIn",value:function(){var n=this,t={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){n.doneAnimating=!0,"function"==typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,n.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),"none"!==this.maxWidth&&(t.maxWidth=this.newWidth),"none"!==this.maxHeight&&(t.maxHeight=this.newHeight),o(t)}},{key:"_animateImageOut",value:function(){var n=this,t={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){n.placeholder.css({height:"",width:"",position:"",top:"",left:""}),n.attrWidth&&n.$el.attr("width",n.attrWidth),n.attrHeight&&n.$el.attr("height",n.attrHeight),n.$el.removeAttr("style"),n.originInlineStyles&&n.$el.attr("style",n.originInlineStyles),n.$el.removeClass("active"),n.doneAnimating=!0,n.ancestorsChanged.length&&n.ancestorsChanged.css("overflow",""),"function"==typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,n.el)}};o(t)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var a=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=r("<div id=\"materialbox-overlay\"></div>").css({opacity:0}).one("click",function(){a.doneAnimating&&a.close()}),this.$el.before(this.$overlay);var t=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*t.left+"px",top:-1*t.top+"px"}),o.remove(this.el),o.remove(this.$overlay[0]),o({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),""!==this.caption&&(this.$photocaption&&o.remove(this.$photoCaption[0]),this.$photoCaption=r("<div class=\"materialbox-caption\"></div>"),this.$photoCaption.text(this.caption),r("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),o({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var e=0,d=this.originalWidth/this.windowWidth,n=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,n<d?(e=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*e):(e=this.originalWidth/this.originalHeight,this.newWidth=.9*this.windowHeight*e,this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var e=this;this._updateVars(),this.doneAnimating=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),o.remove(this.el),o.remove(this.$overlay[0]),""!==this.caption&&o.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),o({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.overlayActive=!1,e.$overlay.remove()}}),this._animateImageOut(),""!==this.caption&&o({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.$photoCaption.remove()}})}}],[{key:"init",value:function(n,t){return _get(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Materialbox}},{key:"defaults",get:function(){return n}}]),a}();M.Materialbox=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"materialbox","M_Materialbox")}(cash,M.anime),function(a){"use strict";var n={responsiveThreshold:0},e=function(){function o(n,t){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,o,n,t));return(e.el.M_Parallax=e).options=a.extend({},o.defaults,t),e._enabled=window.innerWidth>e.options.responsiveThreshold,e.$img=e.$el.find("img").first(),e.$img.each(function(){this.complete&&a(this).trigger("load")}),e._updateParallax(),e._setupEventHandlers(),e._setupStyles(),o._parallaxes.push(e),e}return _inherits(o,Component),_createClass(o,[{key:"destroy",value:function(){o._parallaxes.splice(o._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),0===o._parallaxes.length&&(o._handleScrollThrottled=M.throttle(o._handleScroll,5),window.addEventListener("scroll",o._handleScrollThrottled),o._handleWindowResizeThrottled=M.throttle(o._handleWindowResize,5),window.addEventListener("resize",o._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),0===o._parallaxes.length&&(window.removeEventListener("scroll",o._handleScrollThrottled),window.removeEventListener("resize",o._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var a=0<this.$el.height()?this.el.parentNode.offsetHeight:500,t=this.$img[0].offsetHeight-a,e=this.$el.offset().top+a,r=this.$el.offset().top,n=M.getDocumentScrollTop(),i=window.innerHeight;this._enabled?n<e&&r<n+i&&(this.$img[0].style.transform="translate3D(-50%, "+t*((n+i-r)/(a+i))+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(n,t){return _get(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Parallax}},{key:"_handleScroll",value:function(){for(var n=0,a;n<o._parallaxes.length;n++)a=o._parallaxes[n],a._updateParallax.call(a)}},{key:"_handleWindowResize",value:function(){for(var n=0,a;n<o._parallaxes.length;n++)a=o._parallaxes[n],a._enabled=window.innerWidth>a.options.responsiveThreshold}},{key:"defaults",get:function(){return n}}]),o}();e._parallaxes=[],M.Parallax=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"parallax","M_Parallax")}(cash),function(r,a){"use strict";var i=Math.max,s={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},e=function(){function o(n,t){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,o,n,t));return(e.el.M_Tabs=e).options=r.extend({},o.defaults,t),e.$tabLinks=e.$el.children("li.tab").children("a"),e.index=0,e._setupActiveTabLink(),e.options.swipeable?e._setupSwipeableTabs():e._setupNormalTabs(),e._setTabsAndTabWidth(),e._createIndicator(),e._setupEventHandlers(),e}return _inherits(o,Component),_createClass(o,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),0!==this.tabWidth&&0!==this.tabsWidth&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(a){var t=this,e=r(a.target).closest("li.tab"),d=r(a.target).closest("a");if(d.length&&d.parent().hasClass("tab"))if(e.hasClass("disabled"))a.preventDefault();else if(!d.attr("target")){this.$activeTabLink.removeClass("active");var n=this.$content;this.$activeTabLink=d,this.$content=r(M.escapeHash(d[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var s=this.index;this.index=i(this.$tabLinks.index(d),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){"function"==typeof t.options.onShow&&t.options.onShow.call(t,t.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),"function"==typeof this.options.onShow&&this.options.onShow.call(this,this.$content[0]),n.length&&!n.is(this.$content)&&(n[0].style.display="none",n.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(s),a.preventDefault()}}},{key:"_createIndicator",value:function(){var n=this,t=document.createElement("li");t.classList.add("indicator"),this.el.appendChild(t),this._indicator=t,setTimeout(function(){n._indicator.style.left=n._calcLeftPos(n.$activeTabLink)+"px",n._indicator.style.right=n._calcRightPos(n.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=r(this.$tabLinks.filter("[href=\""+location.hash+"\"]")),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=i(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=r(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var a=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var o=r();this.$tabLinks.each(function(n){var t=r(M.escapeHash(n.hash));t.addClass("carousel-item"),o=o.add(t)});var i=r("<div class=\"tabs-content carousel carousel-slider\"></div>");o.first().before(i),i.append(o),o[0].style.display="";var t=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(i[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(n){var t=a.index;a.index=r(n).index(),a.$activeTabLink.removeClass("active"),a.$activeTabLink=a.$tabLinks.eq(a.index),a.$activeTabLink.addClass("active"),a._animateIndicator(t),"function"==typeof a.options.onShow&&a.options.onShow.call(a,a.$content[0])}}),this._tabsCarousel.set(t)}},{key:"_teardownSwipeableTabs",value:function(){var e=this._tabsCarousel.$el;this._tabsCarousel.destroy(),e.after(e.children()),e.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(n){if(n.hash){var t=r(M.escapeHash(n.hash));t.length&&(t[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(n){if(n.hash){var t=r(M.escapeHash(n.hash));t.length&&(t[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=i(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(e){return Math.ceil(this.tabsWidth-e.position().left-e[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(e){return Math.floor(e.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(o){var t=0,r=0;0<=this.index-o?t=90:r=90;var s={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:t},right:{value:this._calcRightPos(this.$activeTabLink),delay:r},duration:this.options.duration,easing:"easeOutQuad"};a.remove(this._indicator),a(s)}},{key:"select",value:function(n){var t=this.$tabLinks.filter("[href=\"#"+n+"\"]");t.length&&t.trigger("click")}}],[{key:"init",value:function(n,t){return _get(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tabs}},{key:"defaults",get:function(){return s}}]),o}();M.Tabs=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"tabs","M_Tabs")}(cash,M.anime),function(p,n){"use strict";var e={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},a=function(){function a(n,t){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,a,n,t));return(e.el.M_Tooltip=e).options=p.extend({},a.defaults,t),e.isOpen=!1,e.isHovered=!1,e.isFocused=!1,e._appendTooltipEl(),e._setupEventHandlers(),e}return _inherits(a,Component),_createClass(a,[{key:"destroy",value:function(){p(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var n=document.createElement("div");n.classList.add("material-tooltip"),this.tooltipEl=n;var t=document.createElement("div");t.classList.add("tooltip-content"),t.innerHTML=this.options.html,n.appendChild(t),document.body.appendChild(n)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(e){this.isOpen||(e=void 0===e||void 0,this.isOpen=!0,this.options=p.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(e))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var e=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){e.isHovered||e.isFocused||e._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(n){var t=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){(t.isHovered||t.isFocused||n)&&t._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var d=this.el,e=this.tooltipEl,i=d.offsetHeight,n=d.offsetWidth,s=e.offsetHeight,o=e.offsetWidth,a=this.options.margin,r,c,u;this.xMovement=0,this.yMovement=0,c=d.getBoundingClientRect().top+M.getDocumentScrollTop(),u=d.getBoundingClientRect().left+M.getDocumentScrollLeft(),"top"===this.options.position?(c+=-s-a,u+=n/2-o/2,this.yMovement=-this.options.transitionMovement):"right"===this.options.position?(c+=i/2-s/2,u+=n+a,this.xMovement=this.options.transitionMovement):"left"===this.options.position?(c+=i/2-s/2,u+=-o-a,this.xMovement=-this.options.transitionMovement):(c+=i+a,u+=n/2-o/2,this.yMovement=this.options.transitionMovement),r=this._repositionWithinScreen(u,c,o,s),p(e).css({top:r.y+"px",left:r.x+"px"})}},{key:"_repositionWithinScreen",value:function(p,t,e,i){var n=M.getDocumentScrollLeft(),s=M.getDocumentScrollTop(),o=p-n,c=t-s,u={left:o,top:c,width:e,height:i},l=this.options.margin+this.options.transitionMovement,h=M.checkWithinContainer(document.body,u,l);return h.left?o=l:h.right&&(o-=o+e-window.innerWidth),h.top?c=l:h.bottom&&(c-=c+i-window.innerHeight),{x:o+n,y:c+s}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",n.remove(this.tooltipEl),n({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){n.remove(this.tooltipEl),n({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var n={},t=this.el.getAttribute("data-tooltip"),e=this.el.getAttribute("data-position");return t&&(n.html=t),e&&(n.position=e),n}}],[{key:"init",value:function(n,t){return _get(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tooltip}},{key:"defaults",get:function(){return e}}]),a}();M.Tooltip=a,M.jQueryLoaded&&M.initializeJqueryWrapper(a,"tooltip","M_Tooltip")}(cash,M.anime),function(a){"use strict";function y(n){var t="";for(var a in n)n.hasOwnProperty(a)&&(t+=a+":"+n[a]+";");return t}function o(n){var t=function(n){if(!1===d.allowEvent(n))return null;for(var t=null,a=n.target||n.srcElement;null!==a.parentNode;){if(!(a instanceof SVGElement)&&-1!==a.className.indexOf("waves-effect")){t=a;break}a=a.parentNode}return t}(n);null!==t&&(m.show(n,t),"ontouchstart"in a&&(t.addEventListener("touchend",m.hide,!1),t.addEventListener("touchcancel",m.hide,!1)),t.addEventListener("mouseup",m.hide,!1),t.addEventListener("mouseleave",m.hide,!1),t.addEventListener("dragend",m.hide,!1))}var n=n||{},r=document.querySelectorAll.bind(document),m={duration:750,show:function(g,t){if(2===g.button)return!1;var e=t||this,i=document.createElement("div");i.className="waves-ripple",e.appendChild(i);var n=(S={top:0,left:0},I=(v=e)&&v.ownerDocument,_=I.documentElement,void 0!==v.getBoundingClientRect&&(S=v.getBoundingClientRect()),E=null!==(C=k=I)&&C===C.window?k:9===k.nodeType&&k.defaultView,{top:S.top+E.pageYOffset-_.clientTop,left:S.left+E.pageXOffset-_.clientLeft}),u=g.pageY-n.top,b=g.pageX-n.left,T="scale("+10*(e.clientWidth/100)+")",v,_,E,k,C,S,I;"touches"in g&&(u=g.touches[0].pageY-n.top,b=g.touches[0].pageX-n.left),i.setAttribute("data-hold",Date.now()),i.setAttribute("data-scale",T),i.setAttribute("data-x",b),i.setAttribute("data-y",u);var w={top:u+"px",left:b+"px"};i.className+=" waves-notransition",i.setAttribute("style",y(w)),i.className=i.className.replace("waves-notransition",""),w["-webkit-transform"]=T,w["-moz-transform"]=T,w["-ms-transform"]=T,w["-o-transform"]=T,w.transform=T,w.opacity="1",w["-webkit-transition-duration"]=m.duration+"ms",w["-moz-transition-duration"]=m.duration+"ms",w["-o-transition-duration"]=m.duration+"ms",w["transition-duration"]=m.duration+"ms",w["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",w["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",w["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",w["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",i.setAttribute("style",y(w))},hide:function(l){d.touchup(l);var t=this,e=(t.clientWidth,null),p=t.getElementsByClassName("waves-ripple");if(!(0<p.length))return!1;var n=(e=p[p.length-1]).getAttribute("data-x"),s=e.getAttribute("data-y"),o=e.getAttribute("data-scale"),a=350-(Date.now()-+e.getAttribute("data-hold"));0>a&&(a=0),setTimeout(function(){var a={top:s+"px",left:n+"px",opacity:"0","-webkit-transition-duration":m.duration+"ms","-moz-transition-duration":m.duration+"ms","-o-transition-duration":m.duration+"ms","transition-duration":m.duration+"ms","-webkit-transform":o,"-moz-transform":o,"-ms-transform":o,"-o-transform":o,transform:o};e.setAttribute("style",y(a)),setTimeout(function(){try{t.removeChild(e)}catch(e){return!1}},m.duration)},a)},wrapInput:function(a){for(var t=0,r;t<a.length;t++)if(r=a[t],"input"===r.tagName.toLowerCase()){var d=r.parentNode;if("i"===d.tagName.toLowerCase()&&-1!==d.className.indexOf("waves-effect"))continue;var n=document.createElement("i");n.className=r.className+" waves-input-wrapper";var s=r.getAttribute("style");s||(s=""),n.setAttribute("style",s),r.className="waves-button-input",r.removeAttribute("style"),d.replaceChild(n,r),n.appendChild(r)}}},d={touches:0,allowEvent:function(n){var t=!0;return"touchstart"===n.type?d.touches+=1:"touchend"===n.type||"touchcancel"===n.type?setTimeout(function(){0<d.touches&&(d.touches-=1)},500):"mousedown"===n.type&&0<d.touches&&(t=!1),t},touchup:function(e){d.allowEvent(e)}};n.displayEffect=function(e){"duration"in(e=e||{})&&(m.duration=e.duration),m.wrapInput(r(".waves-effect")),"ontouchstart"in a&&document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("mousedown",o,!1)},n.attach=function(e){"input"===e.tagName.toLowerCase()&&(m.wrapInput([e]),e=e.parentNode),"ontouchstart"in a&&e.addEventListener("touchstart",o,!1),e.addEventListener("mousedown",o,!1)},a.Waves=n,document.addEventListener("DOMContentLoaded",function(){n.displayEffect()},!1)}(window),function(a,o){"use strict";var r=Math.abs,i={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},n=function(){function d(n){_classCallCheck(this,d),this.options=a.extend({},d.defaults,n),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,0===d._toasts.length&&d._createContainer(),d._toasts.push(this);var t=this._createToast();(t.M_Toast=this).el=t,this.$el=a(t),this._animateIn(),this._setTimer()}return _createClass(d,[{key:"_createToast",value:function(){var e=document.createElement("div");return e.classList.add("toast"),this.options.classes.length&&a(e).addClass(this.options.classes),("object"==typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"==typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"==typeof this.message.nodeName)?e.appendChild(this.message):this.message.jquery?a(e).append(this.message[0]):e.innerHTML=this.message,d._container.appendChild(e),e}},{key:"_animateIn",value:function(){o({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var e=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){e.panning||(e.timeRemaining-=20),0>=e.timeRemaining&&e.dismiss()},20))}},{key:"dismiss",value:function(){var n=this;window.clearInterval(this.counterInterval);var t=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+t+"px)",this.el.style.opacity=0),o({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){"function"==typeof n.options.completeCallback&&n.options.completeCallback(),n.$el.remove(),d._toasts.splice(d._toasts.indexOf(n),1),0===d._toasts.length&&d._removeContainer()}})}}],[{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Toast}},{key:"_createContainer",value:function(){var e=document.createElement("div");e.setAttribute("id","toast-container"),e.addEventListener("touchstart",d._onDragStart),e.addEventListener("touchmove",d._onDragMove),e.addEventListener("touchend",d._onDragEnd),e.addEventListener("mousedown",d._onDragStart),document.addEventListener("mousemove",d._onDragMove),document.addEventListener("mouseup",d._onDragEnd),document.body.appendChild(e),d._container=e}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",d._onDragMove),document.removeEventListener("mouseup",d._onDragEnd),a(d._container).remove(),d._container=null}},{key:"_onDragStart",value:function(n){if(n.target&&a(n.target).closest(".toast").length){var t=a(n.target).closest(".toast")[0].M_Toast;t.panning=!0,(d._draggedToast=t).el.classList.add("panning"),t.el.style.transition="",t.startingXPos=d._xPos(n),t.time=Date.now(),t.xPos=d._xPos(n)}}},{key:"_onDragMove",value:function(a){if(d._draggedToast){a.preventDefault();var t=d._draggedToast;t.deltaX=r(t.xPos-d._xPos(a)),t.xPos=d._xPos(a),t.velocityX=t.deltaX/(Date.now()-t.time),t.time=Date.now();var e=t.xPos-t.startingXPos,o=t.el.offsetWidth*t.options.activationPercent;t.el.style.transform="translateX("+e+"px)",t.el.style.opacity=1-r(e/o)}}},{key:"_onDragEnd",value:function(){if(d._draggedToast){var n=d._draggedToast;n.panning=!1,n.el.classList.remove("panning");var t=n.xPos-n.startingXPos,e=n.el.offsetWidth*n.options.activationPercent;r(t)>e||1<n.velocityX?(n.wasSwiped=!0,n.dismiss()):(n.el.style.transition="transform .2s, opacity .2s",n.el.style.transform="",n.el.style.opacity=""),d._draggedToast=null}}},{key:"_xPos",value:function(e){return e.targetTouches&&1<=e.targetTouches.length?e.targetTouches[0].clientX:e.clientX}},{key:"dismissAll",value:function(){for(var e in d._toasts)d._toasts[e].dismiss()}},{key:"defaults",get:function(){return i}}]),d}();n._toasts=[],n._container=null,n._draggedToast=null,M.Toast=n,M.toast=function(e){return new n(e)}}(cash,M.anime),function(a,n){"use strict";var o=Math.abs,r=Math.min,i={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},e=function(){function s(n,t){_classCallCheck(this,s);var e=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,n,t));return(e.el.M_Sidenav=e).id=e.$el.attr("id"),e.options=a.extend({},s.defaults,t),e.isOpen=!1,e.isFixed=e.el.classList.contains("sidenav-fixed"),e.isDragged=!1,e.lastWindowWidth=window.innerWidth,e.lastWindowHeight=window.innerHeight,e._createOverlay(),e._createDragTarget(),e._setupEventHandlers(),e._setupClasses(),e._setupFixed(),s._sidenavs.push(e),e}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var e=s._sidenavs.indexOf(this);0<=e&&s._sidenavs.splice(e,1)}},{key:"_createOverlay",value:function(){var e=document.createElement("div");this._closeBound=this.close.bind(this),e.classList.add("sidenav-overlay"),e.addEventListener("click",this._closeBound),document.body.appendChild(e),this._overlay=e}},{key:"_setupEventHandlers",value:function(){0===s._sidenavs.length&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){1===s._sidenavs.length&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(o){var t=a(o.target).closest(".sidenav-trigger");if(o.target&&t.length){var e=M.getIdFromTrigger(t[0]),r=document.getElementById(e).M_Sidenav;r&&r.open(t),o.preventDefault()}}},{key:"_startDrag",value:function(a){var t=a.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=t,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,n.remove(this.el),n.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(n){var t=n.targetTouches[0].clientX,e=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=o(this._xPos-t),this._xPos=t,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==e&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(a){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(a),this._dragMoveUpdate(a);var t=this._xPos-this._startingXpos,d=0<t?"right":"left";t=r(this._width,o(t)),this.options.edge===d&&(t=0);var i=t,l="translateX(-100%)";"right"===this.options.edge&&(l="translateX(100%)",i=-i),this.percentOpen=r(1,t/this._width),this.el.style.transform=l+" translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(.2<this.percentOpen?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(a){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(a),this._dragMoveUpdate(a);var t=this._xPos-this._startingXpos,s=0<t?"right":"left";t=r(this._width,o(t)),this.options.edge!==s&&(t=0);var i=-t;"right"===this.options.edge&&(i=-i),this.percentOpen=r(1,1-t/this._width),this.el.style.transform="translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(.8<this.percentOpen?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(e){a(e.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(992<window.innerWidth?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){"right"===this.options.edge&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&992<window.innerWidth}},{key:"_createDragTarget",value:function(){var e=document.createElement("div");e.classList.add("drag-target"),document.body.appendChild(e),this.dragTarget=e}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){!0!==this.isOpen&&(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(n.remove(this.el),n({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&1==this.percentOpen||this._animateIn()))}},{key:"close",value:function(){if(!1!==this.isOpen)if(this.isOpen=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var e="left"===this.options.edge?"-105%":"105%";this.el.style.transform="translateX("+e+")"}else this._enableBodyScrolling(),this.isDragged&&0==this.percentOpen?this._overlay.style.display="none":this._animateOut()}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var a=this,t="left"===this.options.edge?-1:1;this.isDragged&&(t="left"===this.options.edge?t+this.percentOpen:t-this.percentOpen),n.remove(this.el),n({targets:this.el,translateX:[100*t+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){"function"==typeof a.options.onOpenEnd&&a.options.onOpenEnd.call(a,a.el)}})}},{key:"_animateOverlayIn",value:function(){var e=0;this.isDragged?e=this.percentOpen:a(this._overlay).css({display:"block"}),n.remove(this._overlay),n({targets:this._overlay,opacity:[e,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var a=this,t="left"===this.options.edge?-1:1,e=0;this.isDragged&&(e="left"===this.options.edge?t+this.percentOpen:t-this.percentOpen),n.remove(this.el),n({targets:this.el,translateX:[100*e+"%",105*t+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){"function"==typeof a.options.onCloseEnd&&a.options.onCloseEnd.call(a,a.el)}})}},{key:"_animateOverlayOut",value:function(){var e=this;n.remove(this._overlay),n({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){a(e._overlay).css("display","none")}})}}],[{key:"init",value:function(n,t){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Sidenav}},{key:"defaults",get:function(){return i}}]),s}();e._sidenavs=[],M.Sidenav=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"sidenav","M_Sidenav")}(cash,M.anime),function(r,o){"use strict";var n={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(e){return"a[href=\"#"+e+"\"]"}},e=function(){function p(n,t){_classCallCheck(this,p);var e=_possibleConstructorReturn(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,p,n,t));return(e.el.M_ScrollSpy=e).options=r.extend({},p.defaults,t),p._elements.push(e),p._count++,p._increment++,e.tickId=-1,e.id=p._increment,e._setupEventHandlers(),e._handleWindowScroll(),e}return _inherits(p,Component),_createClass(p,[{key:"destroy",value:function(){p._elements.splice(p._elements.indexOf(this),1),p._elementsInView.splice(p._elementsInView.indexOf(this),1),p._visibleElements.splice(p._visibleElements.indexOf(this.$el),1),p._count--,this._removeEventHandlers(),r(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var e=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=e.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),1===p._count&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){0===p._count&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(a){for(var t=r(a.target),e=p._elements.length-1,d;0<=e;e--)if(d=p._elements[e],t.is("a[href=\"#"+d.$el.attr("id")+"\"]")){a.preventDefault();var l=d.$el.offset().top+1;o({targets:[document.documentElement,document.body],scrollTop:l-d.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}},{key:"_handleWindowScroll",value:function(){p._ticks++;for(var d=M.getDocumentScrollTop(),t=M.getDocumentScrollLeft(),e=t+window.innerWidth,i=d+window.innerHeight,n=p._findElements(d,e,i,t),s=0,c;s<n.length;s++)c=n[s],0>c.tickId&&c._enter(),c.tickId=p._ticks;for(var u=0;u<p._elementsInView.length;u++){var m=p._elementsInView[u],l=m.tickId;0<=l&&l!==p._ticks&&(m._exit(),m.tickId=-1)}p._elementsInView=n}},{key:"_enter",value:function(){(p._visibleElements=p._visibleElements.filter(function(e){return 0!=e.height()}))[0]?(r(this.options.getActiveElement(p._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),p._visibleElements[0][0].M_ScrollSpy&&this.id<p._visibleElements[0][0].M_ScrollSpy.id?p._visibleElements.unshift(this.$el):p._visibleElements.push(this.$el)):p._visibleElements.push(this.$el),r(this.options.getActiveElement(p._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var n=this;(p._visibleElements=p._visibleElements.filter(function(e){return 0!=e.height()}))[0]&&(r(this.options.getActiveElement(p._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),(p._visibleElements=p._visibleElements.filter(function(e){return e.attr("id")!=n.$el.attr("id")}))[0]&&r(this.options.getActiveElement(p._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(n,t){return _get(p.__proto__||Object.getPrototypeOf(p),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_ScrollSpy}},{key:"_findElements",value:function(c,t,e,i){for(var n=[],s=0;s<p._elements.length;s++){var m=p._elements[s],a=c+m.options.scrollOffset||200;if(0<m.$el.height()){var r=m.$el.offset().top,l=m.$el.offset().left,h=l+m.$el.width(),d=r+m.$el.height();t<l||h<i||e<r||d<a||n.push(m)}}return n}},{key:"defaults",get:function(){return n}}]),p}();e._elements=[],e._elementsInView=[],e._visibleElements=[],e._count=0,e._increment=0,e._ticks=0,M.ScrollSpy=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(o){"use strict";var n={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(n,t,e){return n.indexOf(e)-t.indexOf(e)}},e=function(){function a(n,t){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,a,n,t));return(e.el.M_Autocomplete=e).options=o.extend({},a.defaults,t),e.isOpen=!1,e.count=0,e.activeIndex=-1,e.oldVal,e.$inputField=e.$el.closest(".input-field"),e.$active=o(),e._mousedown=!1,e._setupDropdown(),e._setupEventHandlers(),e}return _inherits(a,Component),_createClass(a,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var n=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),o(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(e){n.selectOption(o(e))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(n){"keyup"===n.type&&(a._keydown=!1),this.count=0;var t=this.el.value.toLowerCase();13!==n.keyCode&&38!==n.keyCode&&40!==n.keyCode&&(this.oldVal===t||!M.tabPressed&&"focus"===n.type||this.open(),this.oldVal=t)}},{key:"_handleInputKeydown",value:function(r){a._keydown=!0;var t=r.keyCode,e=o(this.container).children("li").length,n;t===M.keys.ENTER&&0<=this.activeIndex?(n=o(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(n),r.preventDefault()):t!==M.keys.ARROW_UP&&t!==M.keys.ARROW_DOWN||(r.preventDefault(),t===M.keys.ARROW_UP&&0<this.activeIndex&&this.activeIndex--,t===M.keys.ARROW_DOWN&&this.activeIndex<e-1&&this.activeIndex++,this.$active.removeClass("active"),0<=this.activeIndex&&(this.$active=o(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(){this._mousedown=!1}},{key:"_highlight",value:function(d,t){var e=t.find("img"),i=t.text().toLowerCase().indexOf(""+d.toLowerCase()),n=i+d.length-1,s=t.text().slice(0,i),o=t.text().slice(i,n+1),a=t.text().slice(n+1);t.html("<span>"+s+"<span class='highlight'>"+o+"</span>"+a+"</span>"),e.length&&t.prepend(e)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){o(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(n){var t=n.text().trim();this.el.value=t,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),"function"==typeof this.options.onAutocomplete&&this.options.onAutocomplete.call(this,t)}},{key:"_renderDropdown",value:function(d,p){var i=this;this._resetAutocomplete();var t=[];for(var e in d)if(d.hasOwnProperty(e)&&-1!==e.toLowerCase().indexOf(p)){if(this.count>=this.options.limit)break;var n={data:d[e],key:e};t.push(n),this.count++}this.options.sortFunction&&t.sort(function(n,t){return i.options.sortFunction(n.key.toLowerCase(),t.key.toLowerCase(),p.toLowerCase())});for(var s=0;s<t.length;s++){var c=t[s],r=o("<li></li>");c.data?r.append("<img src=\""+c.data+"\" class=\"right circle\"><span>"+c.key+"</span>"):r.append("<span>"+c.key+"</span>"),o(this.container).append(r),this._highlight(p,r)}}},{key:"open",value:function(){var e=this.el.value.toLowerCase();this._resetAutocomplete(),e.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,e)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(n){var t=this.el.value.toLowerCase();this.options.data=n,this.isOpen&&this._renderDropdown(n,t)}}],[{key:"init",value:function(n,t){return _get(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Autocomplete}},{key:"defaults",get:function(){return n}}]),a}();e._keydown=!1,M.Autocomplete=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"autocomplete","M_Autocomplete")}(cash),function(p){M.updateTextFields=function(){p("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each(function(e){var t=p(this);0<e.value.length||p(e).is(":focus")||e.autofocus||null!==t.attr("placeholder")?t.siblings("label").addClass("active"):e.validity?t.siblings("label").toggleClass("active",!0===e.validity.badInput):t.siblings("label").removeClass("active")})},M.validate_field=function(a){var t=null!==a.attr("data-length"),e=parseInt(a.attr("data-length")),o=a[0].value.length;0!==o||!1!==a[0].validity.badInput||a.is(":required")?a.hasClass("validate")&&(a.is(":valid")&&t&&o<=e||a.is(":valid")&&!t?(a.removeClass("invalid"),a.addClass("valid")):(a.removeClass("valid"),a.addClass("invalid"))):a.hasClass("validate")&&(a.removeClass("valid"),a.removeClass("invalid"))},M.textareaAutoResize=function(d){if(d instanceof Element&&(d=p(d)),d.length){var c=p(".hiddendiv").first();c.length||(c=p("<div class=\"hiddendiv common\"></div>"),p("body").append(c));var u=d.css("font-family"),i=d.css("font-size"),n=d.css("line-height"),s=d.css("padding-top"),o=d.css("padding-right"),a=d.css("padding-bottom"),r=d.css("padding-left");i&&c.css("font-size",i),u&&c.css("font-family",u),n&&c.css("line-height",n),s&&c.css("padding-top",s),o&&c.css("padding-right",o),a&&c.css("padding-bottom",a),r&&c.css("padding-left",r),d.data("original-height")||d.data("original-height",d.height()),"off"===d.attr("wrap")&&c.css("overflow-wrap","normal").css("white-space","pre"),c.text(d[0].value+"\n");var l=c.html().replace(/\n/g,"<br>");c.html(l),0<d[0].offsetWidth&&0<d[0].offsetHeight?c.css("width",d.width()+"px"):c.css("width",window.innerWidth/2+"px"),d.data("original-height")<=c.innerHeight()?d.css("height",c.innerHeight()+"px"):d[0].value.length<d.data("previous-length")&&d.css("height",d.data("original-height")+"px"),d.data("previous-length",d[0].value.length)}else console.error("No textarea element found")},p(document).ready(function(){p(document).on("change","input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea",function(){0===this.value.length&&null===p(this).attr("placeholder")||p(this).siblings("label").addClass("active"),M.validate_field(p(this))}),p(document).ready(function(){M.updateTextFields()}),p(document).on("reset",function(n){var t=p(n.target);t.is("form")&&(t.find("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").removeClass("valid").removeClass("invalid"),t.find("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each(function(){this.value.length&&p(this).siblings("label").removeClass("active")}),setTimeout(function(){t.find("select").each(function(){this.M_FormSelect&&p(this).trigger("change")})},0))}),document.addEventListener("focus",function(e){p(e.target).is("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea")&&p(e.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(n){var t=p(n.target);if(t.is("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea")){var e=".prefix";0===t[0].value.length&&!0!==t[0].validity.badInput&&null===t.attr("placeholder")&&(e+=", label"),t.siblings(e).removeClass("active"),M.validate_field(t)}},!0),p(document).on("keyup","input[type=radio], input[type=checkbox]",function(e){if(e.which===M.keys.TAB)return p(this).addClass("tabbed"),void p(this).one("blur",function(){p(this).removeClass("tabbed")})});p(".materialize-textarea").each(function(){var e=p(this);e.data("original-height",e.height()),e.data("previous-length",this.value.length),M.textareaAutoResize(e)}),p(document).on("keyup",".materialize-textarea",function(){M.textareaAutoResize(p(this))}),p(document).on("keydown",".materialize-textarea",function(){M.textareaAutoResize(p(this))}),p(document).on("change",".file-field input[type=\"file\"]",function(){for(var a=p(this).closest(".file-field").find("input.file-path"),t=p(this)[0].files,e=[],o=0;o<t.length;o++)e.push(t[o].name);a[0].value=e.join(", "),a.trigger("change")})})}(cash),function(a,r){"use strict";var n={indicators:!0,height:400,duration:500,interval:6e3},e=function(){function o(n,t){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,o,n,t));return(e.el.M_Slider=e).options=a.extend({},o.defaults,t),e.$slider=e.$el.find(".slides"),e.$slides=e.$slider.children("li"),e.activeIndex=e.$slides.filter(function(e){return a(e).hasClass("active")}).first().index(),-1!=e.activeIndex&&(e.$active=e.$slides.eq(e.activeIndex)),e._setSliderHeight(),e.$slides.find(".caption").each(function(n){e._animateCaptionIn(n,0)}),e.$slides.find("img").each(function(e){a(e).attr("src")!=="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="&&(a(e).css("background-image","url(\""+a(e).attr("src")+"\")"),a(e).attr("src","data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="))}),e._setupIndicators(),e.$active?e.$active.css("display","block"):(e.$slides.first().addClass("active"),r({targets:e.$slides.first()[0],opacity:1,duration:e.options.duration,easing:"easeOutQuad"}),e.activeIndex=0,e.$active=e.$slides.eq(e.activeIndex),e.options.indicators&&e.$indicators.eq(e.activeIndex).addClass("active")),e.$active.find("img").each(function(){r({targets:e.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:e.options.duration,easing:"easeOutQuad"})}),e._setupEventHandlers(),e.start(),e}return _inherits(o,Component),_createClass(o,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var n=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(e){e.addEventListener("click",n._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var n=this;this.options.indicators&&this.$indicators.each(function(e){e.removeEventListener("click",n._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(n){var t=a(n.target).index();this.set(t)}},{key:"_handleInterval",value:function(){var e=this.$slider.find(".active").index();this.$slides.length===e+1?e=0:e+=1,this.set(e)}},{key:"_animateCaptionIn",value:function(n,t){var e={targets:n,opacity:0,duration:t,easing:"easeOutQuad"};a(n).hasClass("center-align")?e.translateY=-100:a(n).hasClass("right-align")?e.translateX=100:a(n).hasClass("left-align")&&(e.translateX=-100),r(e)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var e=this;this.options.indicators&&(this.$indicators=a("<ul class=\"indicators\"></ul>"),this.$slides.each(function(){var t=a("<li class=\"indicator-item\"></li>");e.$indicators.append(t[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(n){var a=this;if(n>=this.$slides.length?n=0:0>n&&(n=this.$slides.length-1),this.activeIndex!=n){this.$active=this.$slides.eq(this.activeIndex);var e=this.$active.find(".caption");this.$active.removeClass("active"),r({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){a.$slides.not(".active").each(function(e){r({targets:e,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(e[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(n).addClass("active")),r({targets:this.$slides.eq(n)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),r({targets:this.$slides.eq(n).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(n).addClass("active"),this.activeIndex=n,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var e=this.activeIndex+1;e>=this.$slides.length?e=0:0>e&&(e=this.$slides.length-1),this.set(e)}},{key:"prev",value:function(){var e=this.activeIndex-1;e>=this.$slides.length?e=0:0>e&&(e=this.$slides.length-1),this.set(e)}}],[{key:"init",value:function(n,t){return _get(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Slider}},{key:"defaults",get:function(){return n}}]),o}();M.Slider=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"slider","M_Slider")}(cash,M.anime),function(a,n){a(document).on("click",".card",function(o){if(a(this).children(".card-reveal").length){var r=a(o.target).closest(".card");void 0===r.data("initialOverflow")&&r.data("initialOverflow",void 0===r.css("overflow")?"":r.css("overflow"));var t=a(this).find(".card-reveal");a(o.target).is(a(".card-reveal .card-title"))||a(o.target).is(a(".card-reveal .card-title i"))?n({targets:t[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(n){var t=n.animatables[0].target;a(t).css({display:"none"}),r.css("overflow",r.data("initialOverflow"))}}):(a(o.target).is(a(".card .activator"))||a(o.target).is(a(".card .activator i")))&&(r.css("overflow","hidden"),t.css({display:"block"}),n({targets:t[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(d){"use strict";var n={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},e=function(){function p(n,t){_classCallCheck(this,p);var e=_possibleConstructorReturn(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,p,n,t));return(e.el.M_Chips=e).options=d.extend({},p.defaults,t),e.$el.addClass("chips input-field"),e.chipsData=[],e.$chips=d(),e._setupInput(),e.hasAutocomplete=0<Object.keys(e.options.autocompleteOptions).length,e.$input.attr("id")||e.$input.attr("id",M.guid()),e.options.data.length&&(e.chipsData=e.options.data,e._renderChips(e.chipsData)),e.hasAutocomplete&&e._setupAutocomplete(),e._setPlaceholder(),e._setupLabel(),e._setupEventHandlers(),e}return _inherits(p,Component),_createClass(p,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",p._handleChipsKeydown),document.addEventListener("keyup",p._handleChipsKeyup),this.el.addEventListener("blur",p._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",p._handleChipsKeydown),document.removeEventListener("keyup",p._handleChipsKeyup),this.el.removeEventListener("blur",p._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(a){var t=d(a.target).closest(".chip"),e=d(a.target).is(".close");if(t.length){var o=t.index();e?(this.deleteChip(o),this.$input[0].focus()):this.selectChip(o)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(e){if(p._keydown=!0,13===e.keyCode){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;e.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else(8===e.keyCode||37===e.keyCode)&&""===this.$input[0].value&&this.chipsData.length&&(e.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(a){if(a.tag){var t=document.createElement("div"),e=document.createElement("i");if(t.classList.add("chip"),t.textContent=a.tag,t.setAttribute("tabindex",0),d(e).addClass("material-icons close"),e.textContent="close",a.image){var o=document.createElement("img");o.setAttribute("src",a.image),t.insertBefore(o,t.firstChild)}return t.appendChild(e),t}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var n=0,a;n<this.chipsData.length;n++)a=this._renderChip(this.chipsData[n]),this.$el.append(a),this.$chips.add(a);this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var n=this;this.options.autocompleteOptions.onAutocomplete=function(e){n.addChip({tag:e}),n.$input[0].value="",n.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=d("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){void 0!==this.chipsData&&!this.chipsData.length&&this.options.placeholder?d(this.$input).prop("placeholder",this.options.placeholder):(void 0===this.chipsData||this.chipsData.length)&&this.options.secondaryPlaceholder&&d(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(n){if(n.hasOwnProperty("tag")&&""!==n.tag){for(var t=!1,a=0;a<this.chipsData.length;a++)if(this.chipsData[a].tag===n.tag){t=!0;break}return!t}return!1}},{key:"addChip",value:function(n){if(this._isValid(n)&&!(this.chipsData.length>=this.options.limit)){var t=this._renderChip(n);this.$chips.add(t),this.chipsData.push(n),d(this.$input).before(t),this._setPlaceholder(),"function"==typeof this.options.onChipAdd&&this.options.onChipAdd.call(this,this.$el,t)}}},{key:"deleteChip",value:function(n){var t=this.$chips.eq(n);this.$chips.eq(n).remove(),this.$chips=this.$chips.filter(function(e){return 0<=d(e).index()}),this.chipsData.splice(n,1),this._setPlaceholder(),"function"==typeof this.options.onChipDelete&&this.options.onChipDelete.call(this,this.$el,t[0])}},{key:"selectChip",value:function(n){var t=this.$chips.eq(n);(this._selectedChip=t)[0].focus(),"function"==typeof this.options.onChipSelect&&this.options.onChipSelect.call(this,this.$el,t[0])}}],[{key:"init",value:function(n,t){return _get(p.__proto__||Object.getPrototypeOf(p),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Chips}},{key:"_handleChipsKeydown",value:function(l){p._keydown=!0;var t=d(l.target).closest(".chips"),e=l.target&&t.length;if(!d(l.target).is("input, textarea")&&e){var i=t[0].M_Chips;if(8===l.keyCode||46===l.keyCode){l.preventDefault();var n=i.chipsData.length;if(i._selectedChip){var c=i._selectedChip.index();i.deleteChip(c),i._selectedChip=null,n=Math.max(c-1,0)}i.chipsData.length&&i.selectChip(n)}else if(37===l.keyCode){if(i._selectedChip){var o=i._selectedChip.index()-1;if(0>o)return;i.selectChip(o)}}else if(39===l.keyCode&&i._selectedChip){var a=i._selectedChip.index()+1;a>=i.chipsData.length?i.$input[0].focus():i.selectChip(a)}}}},{key:"_handleChipsKeyup",value:function(){p._keydown=!1}},{key:"_handleChipsBlur",value:function(e){p._keydown||(d(e.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return n}}]),p}();e._keydown=!1,M.Chips=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"chips","M_Chips"),d(document).ready(function(){d(document.body).on("click",".chip .close",function(){var e=d(this).closest(".chips");e.length&&e[0].M_Chips||d(this).closest(".chip").remove()})})}(cash),function(a){"use strict";var n={top:0,bottom:1/0,offset:0,onPositionChange:null},e=function(){function o(n,t){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,o,n,t));return(e.el.M_Pushpin=e).options=a.extend({},o.defaults,t),e.originalOffset=e.el.offsetTop,o._pushpins.push(e),e._setupEventHandlers(),e._updatePosition(),e}return _inherits(o,Component),_createClass(o,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var e=o._pushpins.indexOf(this);o._pushpins.splice(e,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",o._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",o._updateElements)}},{key:"_updatePosition",value:function(){var e=M.getDocumentScrollTop()+this.options.offset;this.options.top<=e&&this.options.bottom>=e&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pinned")),e<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-top")),e>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px","function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(n,t){return _get(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Pushpin}},{key:"_updateElements",value:function(){for(var e in o._pushpins)o._pushpins[e]._updatePosition()}},{key:"defaults",get:function(){return n}}]),o}();e._pushpins=[],M.Pushpin=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"pushpin","M_Pushpin")}(cash),function(d,n){"use strict";var a={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};d.fn.reverse=[].reverse;var e=function(){function o(n,t){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,o,n,t));return(e.el.M_FloatingActionButton=e).options=d.extend({},o.defaults,t),e.isOpen=!1,e.$anchor=e.$el.children("a").first(),e.$menu=e.$el.children("ul").first(),e.$floatingBtns=e.$el.find("ul .btn-floating"),e.$floatingBtnsReverse=e.$el.find("ul .btn-floating").reverse(),e.offsetY=0,e.offsetX=0,e.$el.addClass("direction-"+e.options.direction),"top"===e.options.direction?e.offsetY=40:"right"===e.options.direction?e.offsetX=-40:"bottom"===e.options.direction?e.offsetY=-40:e.offsetX=40,e._setupEventHandlers(),e}return _inherits(o,Component),_createClass(o,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(e){d(e.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var a=this;this.$el.addClass("active");var e=0;this.$floatingBtnsReverse.each(function(o){n({targets:o,opacity:1,scale:[.4,1],translateY:[a.offsetY,0],translateX:[a.offsetX,0],duration:275,delay:e,easing:"easeInOutQuad"}),e+=40})}},{key:"_animateOutFAB",value:function(){var a=this;this.$floatingBtnsReverse.each(function(e){n.remove(e),n({targets:e,opacity:0,scale:.4,translateY:a.offsetY,translateX:a.offsetX,duration:175,easing:"easeOutQuad",complete:function(){a.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var r=this,e=window.innerWidth,i=window.innerHeight,n=this.el.getBoundingClientRect(),s=d("<div class=\"fab-backdrop\"></div>"),o=this.$anchor.css("background-color"),a;this.$anchor.append(s),this.offsetX=n.left-e/2+n.width/2,this.offsetY=i-n.bottom,a=e/s[0].clientWidth,this.btnBottom=n.bottom,this.btnLeft=n.left,this.btnWidth=n.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),s.css({"background-color":o}),setTimeout(function(){r.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),r.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){r.$el.css({overflow:"hidden","background-color":o}),s.css({transform:"scale("+a+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),r.$menu.children("li").children("a").css({opacity:1}),r._handleDocumentClickBound=r._handleDocumentClick.bind(r),window.addEventListener("scroll",r._handleCloseBound,!0),document.body.addEventListener("click",r._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var a=this,t=window.innerWidth,e=window.innerHeight,o=this.$el.find(".fab-backdrop"),n=this.$anchor.css("background-color");this.offsetX=this.btnLeft-t/2+this.btnWidth/2,this.offsetY=e-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),o.css({transform:"scale(0)","background-color":n}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){o.remove(),a.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-a.offsetX+"px,0,0)"}),a.$anchor.css({overflow:"",transform:"translate3d(0,"+a.offsetY+"px,0)"}),setTimeout(function(){a.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),a.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(n,t){return _get(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FloatingActionButton}},{key:"defaults",get:function(){return a}}]),o}();M.FloatingActionButton=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(a){"use strict";var n=Math.abs,o={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"\u2039",nextMonth:"\u203A",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},e=function(){function S(o,t){_classCallCheck(this,S);var e=_possibleConstructorReturn(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,S,o,t));(e.el.M_Datepicker=e).options=a.extend({},S.defaults,t),t&&t.hasOwnProperty("i18n")&&"object"==typeof t.i18n&&(e.options.i18n=a.extend({},S.defaults.i18n,t.i18n)),e.options.minDate&&e.options.minDate.setHours(0,0,0,0),e.options.maxDate&&e.options.maxDate.setHours(0,0,0,0),e.id=M.guid(),e._setupVariables(),e._insertHTMLIntoDOM(),e._setupModal(),e._setupEventHandlers(),e.options.defaultDate||(e.options.defaultDate=new Date(Date.parse(e.el.value)));var r=e.options.defaultDate;return S._isDate(r)?e.options.setDefaultDate?(e.setDate(r,!0),e.setInputValue()):e.gotoDate(r):e.gotoDate(new Date),e.isOpen=!1,e}return _inherits(S,Component),_createClass(S,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),a(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var n=this.calendarEl.querySelector(".orig-select-year");n&&M.FormSelect.getInstance(n).destroy();var t=this.calendarEl.querySelector(".orig-select-month");t&&M.FormSelect.getInstance(t).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(a(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){e.isOpen=!1}})}},{key:"toString",value:function(n){var a=this;return n=n||this.options.format,S._isDate(this.date)?n.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map(function(e){return a.formats[e]?a.formats[e]():e}).join(""):""}},{key:"setDate",value:function(a,o){if(!a)return this.date=null,this._renderDateDisplay(),this.draw();if("string"==typeof a&&(a=new Date(Date.parse(a))),S._isDate(a)){var e=this.options.minDate,r=this.options.maxDate;S._isDate(e)&&a<e?a=e:S._isDate(r)&&r<a&&(a=r),this.date=new Date(a.getTime()),this._renderDateDisplay(),S._setToStartOfDay(this.date),this.gotoDate(this.date),o||"function"!=typeof this.options.onSelect||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var a=S._isDate(this.date)?this.date:new Date,t=this.options.i18n,e=t.weekdaysShort[a.getDay()],o=t.monthsShort[a.getMonth()],n=a.getDate();this.yearTextEl.innerHTML=a.getFullYear(),this.dateTextEl.innerHTML=e+", "+o+" "+n}},{key:"gotoDate",value:function(a){var t=!0;if(S._isDate(a)){if(this.calendars){var o=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),n=a.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),t=n<o.getTime()||r.getTime()<n}t&&(this.calendars=[{month:a.getMonth(),year:a.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(e){return 0>e.month&&(e.year-=Math.ceil(n(e.month)/12),e.month+=12),11<e.month&&(e.year+=Math.floor(n(e.month)/12),e.month-=12),e}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(I,t,e){var i=this.options,n=new Date,s=S._getDaysInMonth(I,t),o=new Date(I,t,1).getDay(),D=[],r=[];S._setToStartOfDay(n),0<i.firstDay&&0>(o-=i.firstDay)&&(o+=7);for(var A=0===t?11:t-1,h=11===t?0:t+1,d=0===t?I-1:I,u=11===t?I+1:I,c=S._getDaysInMonth(d,A),p=s+o,N=p;7<N;)N-=7;p+=7-N;for(var R=!1,P=0,B=0;P<p;P++){var q=new Date(I,t,P-o+1),y=!!S._isDate(this.date)&&S._compareDates(q,this.date),k=S._compareDates(q,n),b=-1!==i.events.indexOf(q.toDateString()),w=P<o||s+o<=P,C=P-o+1,F=t,V=I,U=i.startRange&&S._compareDates(i.startRange,q),x=i.endRange&&S._compareDates(i.endRange,q),L=i.startRange&&i.endRange&&i.startRange<q&&q<i.endRange;w&&(P<o?(C=c+C,F=A,V=d):(C-=s,F=h,V=u));var T={day:C,month:F,year:V,hasEvent:b,isSelected:y,isToday:k,isDisabled:i.minDate&&q<i.minDate||i.maxDate&&q>i.maxDate||i.disableWeekends&&S._isWeekend(q)||i.disableDayFn&&i.disableDayFn(q),isEmpty:w,isStartRange:U,isEndRange:x,isInRange:L,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths};r.push(this.renderDay(T)),7==++B&&(D.push(this.renderRow(r,i.isRTL,R)),B=0,R=!(r=[]))}return this.renderTable(i,D,e)}},{key:"renderDay",value:function(n){var t=[],e="false";if(n.isEmpty){if(!n.showDaysInNextAndPreviousMonths)return"<td class=\"is-empty\"></td>";t.push("is-outside-current-month"),t.push("is-selection-disabled")}return n.isDisabled&&t.push("is-disabled"),n.isToday&&t.push("is-today"),n.isSelected&&(t.push("is-selected"),e="true"),n.hasEvent&&t.push("has-event"),n.isInRange&&t.push("is-inrange"),n.isStartRange&&t.push("is-startrange"),n.isEndRange&&t.push("is-endrange"),"<td data-day=\""+n.day+"\" class=\""+t.join(" ")+"\" aria-selected=\""+e+"\"><button class=\"datepicker-day-button\" type=\"button\" data-year=\""+n.year+"\" data-month=\""+n.month+"\" data-day=\""+n.day+"\">"+n.day+"</button></td>"}},{key:"renderRow",value:function(n,t,e){return"<tr class=\"datepicker-row"+(e?" is-selected":"")+"\">"+(t?n.reverse():n).join("")+"</tr>"}},{key:"renderTable",value:function(n,t,e){return"<div class=\"datepicker-table-wrapper\"><table cellpadding=\"0\" cellspacing=\"0\" class=\"datepicker-table\" role=\"grid\" aria-labelledby=\""+e+"\">"+this.renderHead(n)+this.renderBody(t)+"</table></div>"}},{key:"renderHead",value:function(n){var t=[],a;for(a=0;7>a;a++)t.push("<th scope=\"col\"><abbr title=\""+this.renderDayName(n,a)+"\">"+this.renderDayName(n,a,!0)+"</abbr></th>");return"<thead><tr>"+(n.isRTL?t.reverse():t).join("")+"</tr></thead>"}},{key:"renderBody",value:function(e){return"<tbody>"+e.join("")+"</tbody>"}},{key:"renderTitle",value:function(g,t,e,i,n,s){var o=this.options,u=e===o.minYear,c=e===o.maxYear,p="<div id=\""+s+"\" class=\"datepicker-controls\" role=\"heading\" aria-live=\"assertive\">",y=!0,b=!0,T,_,E,k,C;for(C=[],E=0;12>E;E++)C.push("<option value=\""+(e===n?E-t:12+E-t)+"\""+(E===i?" selected=\"selected\"":"")+(u&&E<o.minMonth||c&&E>o.maxMonth?"disabled=\"disabled\"":"")+">"+o.i18n.months[E]+"</option>");for(T="<select class=\"datepicker-select orig-select-month\" tabindex=\"-1\">"+C.join("")+"</select>",a.isArray(o.yearRange)?(E=o.yearRange[0],k=o.yearRange[1]+1):(E=e-o.yearRange,k=1+e+o.yearRange),C=[];E<k&&E<=o.maxYear;E++)E>=o.minYear&&C.push("<option value=\""+E+"\" "+(E===e?"selected=\"selected\"":"")+">"+E+"</option>");return _="<select class=\"datepicker-select orig-select-year\" tabindex=\"-1\">"+C.join("")+"</select>",p+="<button class=\"month-prev"+(y?"":" is-disabled")+"\" type=\"button\"><svg fill=\"#000000\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z\"/><path d=\"M0-.5h24v24H0z\" fill=\"none\"/></svg></button>",p+="<div class=\"selects-container\">",p+=o.showMonthAfterYear?_+T:T+_,p+="</div>",u&&(0===i||o.minMonth>=i)&&(y=!1),c&&(11===i||o.maxMonth<=i)&&(b=!1),(p+="<button class=\"month-next"+(b?"":" is-disabled")+"\" type=\"button\"><svg fill=\"#000000\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z\"/><path d=\"M0-.25h24v24H0z\" fill=\"none\"/></svg></button>")+"</div>"}},{key:"draw",value:function(p){if(this.isOpen||p){var t=this.options,i=t.minYear,n=t.maxYear,s=t.minMonth,o=t.maxMonth,a="",c;this._y<=i&&(this._y=i,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=n&&(this._y=n,!isNaN(o)&&this._m>o&&(this._m=o)),c="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var u=0;1>u;u++)this._renderDateDisplay(),a+=this.renderTitle(this,u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year,c)+this.render(this.calendars[u].year,this.calendars[u].month,c);this.destroySelects(),this.calendarEl.innerHTML=a;var m=this.calendarEl.querySelector(".orig-select-year"),h=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(m,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(h,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),m.addEventListener("change",this._handleYearChange.bind(this)),h.addEventListener("change",this._handleMonthChange.bind(this)),"function"==typeof this.options.onDraw&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var n=this;this.$modalEl=a(S._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return n.date.getDate()},dd:function(){var e=n.date.getDate();return(10>e?"0":"")+e},ddd:function(){return n.options.i18n.weekdaysShort[n.date.getDay()]},dddd:function(){return n.options.i18n.weekdays[n.date.getDay()]},m:function(){return n.date.getMonth()+1},mm:function(){var e=n.date.getMonth()+1;return(10>e?"0":"")+e},mmm:function(){return n.options.i18n.monthsShort[n.date.getMonth()]},mmmm:function(){return n.options.i18n.months[n.date.getMonth()]},yy:function(){return(""+n.date.getFullYear()).slice(2)},yyyy:function(){return n.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(n){if(this.isOpen){var t=a(n.target);t.hasClass("is-disabled")||(!t.hasClass("datepicker-day-button")||t.hasClass("is-empty")||t.parent().hasClass("is-disabled")?t.closest(".month-prev").length?this.prevMonth():t.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(n.target.getAttribute("data-year"),n.target.getAttribute("data-month"),n.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(e){this.gotoMonth(e.target.value)}},{key:"_handleYearChange",value:function(e){this.gotoYear(e.target.value)}},{key:"gotoMonth",value:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())}},{key:"gotoYear",value:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(n){var t;n.firedBy!==this&&(t=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),S._isDate(t)&&this.setDate(t))}},{key:"renderDayName",value:function(n,t,a){for(t+=n.firstDay;7<=t;)t-=7;return a?n.i18n.weekdaysAbbrev[t]:n.i18n.weekdays[t]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(n,t){return _get(S.__proto__||Object.getPrototypeOf(S),"init",this).call(this,this,n,t)}},{key:"_isDate",value:function(e){return /Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())}},{key:"_isWeekend",value:function(n){var t=n.getDay();return 0===t||6===t}},{key:"_setToStartOfDay",value:function(e){S._isDate(e)&&e.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(n,t){return[31,S._isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]}},{key:"_isLeapYear",value:function(e){return 0==e%4&&0!=e%100||0==e%400}},{key:"_compareDates",value:function(n,t){return n.getTime()===t.getTime()}},{key:"_setToStartOfDay",value:function(e){S._isDate(e)&&e.setHours(0,0,0,0)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Datepicker}},{key:"defaults",get:function(){return o}}]),S}();e._template="<div class= \"modal datepicker-modal\"><div class=\"modal-content datepicker-container\"><div class=\"datepicker-date-display\"><span class=\"year-text\"></span><span class=\"date-text\"></span></div><div class=\"datepicker-calendar-container\"><div class=\"datepicker-calendar\"></div><div class=\"datepicker-footer\"><button class=\"btn-flat datepicker-clear waves-effect\" style=\"visibility: hidden;\" type=\"button\"></button><div class=\"confirmation-btns\"><button class=\"btn-flat datepicker-cancel waves-effect\" type=\"button\"></button><button class=\"btn-flat datepicker-done waves-effect\" type=\"button\"></button></div></div></div></div></div>",M.Datepicker=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"datepicker","M_Datepicker")}(cash),function(d){"use strict";var m=Math.sin,g=Math.cos,y=Math.PI,f={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},e=function(){function b(n,t){_classCallCheck(this,b);var e=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,b,n,t));return(e.el.M_Timepicker=e).options=d.extend({},b.defaults,t),e.id=M.guid(),e._insertHTMLIntoDOM(),e._setupModal(),e._setupVariables(),e._setupEventHandlers(),e._clockSetup(),e._pickerSetup(),e}return _inherits(b,Component),_createClass(b,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),d(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),d(this.spanHours).on("click",this.showView.bind(this,"hours")),d(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(a){a.preventDefault();var t=this.plate.getBoundingClientRect(),e=t.left,o=t.top;this.x0=e+this.options.dialRadius,this.y0=o+this.options.dialRadius,this.moved=!1;var n=b._Pos(a);this.dx=n.x-this.x0,this.dy=n.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(a){a.preventDefault();var t=b._Pos(a),e=t.x-this.x0,o=t.y-this.y0;this.moved=!0,this.setHand(e,o,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(a){var t=this;a.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var e=b._Pos(a),o=e.x-this.x0,n=e.y-this.y0;this.moved&&o===this.dx&&n===this.dy&&this.setHand(o,n),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(d(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){t.done()},this.options.duration/2)),"function"==typeof this.options.onSelect&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=d(b._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var e=document.querySelector(this.options.container);this.options.container&&e?this.$modalEl.appendTo(e):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e),e.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var n=d("<button class=\"btn-flat timepicker-clear waves-effect\" style=\"visibility: hidden;\" type=\"button\" tabindex=\""+(this.options.twelveHour?"3":"1")+"\">"+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&n.css({visibility:""});var t=d("<div class=\"confirmation-btns\"></div>");d("<button class=\"btn-flat timepicker-close waves-effect\" type=\"button\" tabindex=\""+(this.options.twelveHour?"3":"1")+"\">"+this.options.i18n.cancel+"</button>").appendTo(t).on("click",this.close.bind(this)),d("<button class=\"btn-flat timepicker-close waves-effect\" type=\"button\" tabindex=\""+(this.options.twelveHour?"3":"1")+"\">"+this.options.i18n.done+"</button>").appendTo(t).on("click",this.done.bind(this)),t.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=d("<div class=\"am-btn\">AM</div>"),this.$pmBtn=d("<div class=\"pm-btn\">PM</div>"),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var d=this.options.dialRadius,t=this.options.tickRadius,e=2*d,i=b._createSVGEl("svg");i.setAttribute("class","timepicker-svg"),i.setAttribute("width",e),i.setAttribute("height",e);var n=b._createSVGEl("g");n.setAttribute("transform","translate("+d+","+d+")");var s=b._createSVGEl("circle");s.setAttribute("class","timepicker-canvas-bearing"),s.setAttribute("cx",0),s.setAttribute("cy",0),s.setAttribute("r",4);var o=b._createSVGEl("line");o.setAttribute("x1",0),o.setAttribute("y1",0);var a=b._createSVGEl("circle");a.setAttribute("class","timepicker-canvas-bg"),a.setAttribute("r",t),n.appendChild(o),n.appendChild(a),n.appendChild(s),i.appendChild(n),this._canvas.appendChild(i),this.hand=o,this.bg=a,this.bearing=s,this.g=n}},{key:"_buildHoursView",value:function(){var p=d("<div class=\"timepicker-tick\"></div>");if(this.options.twelveHour)for(var t=1;13>t;t+=1){var c=p.clone(),i=t/6*y,n=this.options.outerRadius;c.css({left:this.options.dialRadius+m(i)*n-this.options.tickRadius+"px",top:this.options.dialRadius-g(i)*n-this.options.tickRadius+"px"}),c.html(0==t?"00":t),this.hoursView.appendChild(c[0])}else for(var s=0;24>s;s+=1){var u=p.clone(),a=s/6*y,r=0<s&&13>s?this.options.innerRadius:this.options.outerRadius;u.css({left:this.options.dialRadius+m(a)*r-this.options.tickRadius+"px",top:this.options.dialRadius-g(a)*r-this.options.tickRadius+"px"}),u.html(0==s?"00":s),this.hoursView.appendChild(u[0])}}},{key:"_buildMinutesView",value:function(){for(var a=d("<div class=\"timepicker-tick\"></div>"),t=0;60>t;t+=5){var o=a.clone(),r=t/30*y;o.css({left:this.options.dialRadius+m(r)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-g(r)*this.options.outerRadius-this.options.tickRadius+"px"}),o.html(b._addLeadingZero(t)),this.minutesView.appendChild(o[0])}}},{key:"_handleAmPmClick",value:function(n){var t=d(n.target);this.amOrPm=t.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary","AM"===this.amOrPm),this.$pmBtn.toggleClass("text-primary","PM"===this.amOrPm))}},{key:"_updateTimeFromInput",value:function(){var n=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&void 0!==n[1]&&(this.amOrPm=0<n[1].toUpperCase().indexOf("AM")?"AM":"PM",n[1]=n[1].replace("AM","").replace("PM","")),"now"===n[0]){var a=new Date(+new Date+this.options.fromNow);n=[a.getHours(),a.getMinutes()],this.options.twelveHour&&(this.amOrPm=12<=n[0]&&24>n[0]?"PM":"AM")}this.hours=+n[0]||0,this.minutes=+n[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=b._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(a,t){"minutes"===a&&d(this.hoursView).css("visibility");var e="hours"===a,o=e?this.hoursView:this.minutesView,n=e?this.minutesView:this.hoursView;this.currentView=a,d(this.spanHours).toggleClass("text-primary",e),d(this.spanMinutes).toggleClass("text-primary",!e),n.classList.add("timepicker-dial-out"),d(o).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(t),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){d(n).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(p){var t=this.currentView,e=this[t],i="hours"===t,n=e*(y/(i?6:30)),s=i&&0<e&&13>e?this.options.innerRadius:this.options.outerRadius,o=m(n)*s,a=-g(n)*s,r=this;p?(d(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){d(r.canvas).removeClass("timepicker-canvas-out"),r.setHand(o,a)},p)):this.setHand(o,a)}},{key:"setHand",value:function(f,t,e){var i=this,n=Math.atan2(f,-t),T="hours"===this.currentView,o=y/(T||e?6:30),a=Math.sqrt(f*f+t*t),r=T&&a<(this.options.outerRadius+this.options.innerRadius)/2,l=r?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(l=this.options.outerRadius),0>n&&(n=2*y+n);var _=Math.round(n/o);n=_*o,this.options.twelveHour?T?0===_&&(_=12):(e&&(_*=5),60===_&&(_=0)):T?(12===_&&(_=0),_=r?0===_?12:_:0===_?0:_+12):(e&&(_*=5),60===_&&(_=0)),this[this.currentView]!==_&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){i.vibrateTimer=null},100))),this[this.currentView]=_,T?this.spanHours.innerHTML=_:this.spanMinutes.innerHTML=b._addLeadingZero(_);var E=m(n)*(l-this.options.tickRadius),u=-g(n)*(l-this.options.tickRadius),c=m(n)*l,p=-g(n)*l;this.hand.setAttribute("x2",E),this.hand.setAttribute("y2",u),this.bg.setAttribute("cx",c),this.bg.setAttribute("cy",p)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(a,t){var e=this.el.value,o=t?"":b._addLeadingZero(this.hours)+":"+b._addLeadingZero(this.minutes);this.time=o,!t&&this.options.twelveHour&&(o=o+" "+this.amOrPm),(this.el.value=o)!==e&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(n,t){return _get(b.__proto__||Object.getPrototypeOf(b),"init",this).call(this,this,n,t)}},{key:"_addLeadingZero",value:function(e){return(10>e?"0":"")+e}},{key:"_createSVGEl",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},{key:"_Pos",value:function(e){return e.targetTouches&&1<=e.targetTouches.length?{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}:{x:e.clientX,y:e.clientY}}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Timepicker}},{key:"defaults",get:function(){return f}}]),b}();e._template="<div class= \"modal timepicker-modal\"><div class=\"modal-content timepicker-container\"><div class=\"timepicker-digital-display\"><div class=\"timepicker-text-container\"><div class=\"timepicker-display-column\"><span class=\"timepicker-span-hours text-primary\"></span>:<span class=\"timepicker-span-minutes\"></span></div><div class=\"timepicker-display-column timepicker-display-am-pm\"><div class=\"timepicker-span-am-pm\"></div></div></div></div><div class=\"timepicker-analog-display\"><div class=\"timepicker-plate\"><div class=\"timepicker-canvas\"></div><div class=\"timepicker-dial timepicker-hours\"></div><div class=\"timepicker-dial timepicker-minutes timepicker-dial-out\"></div></div><div class=\"timepicker-footer\"></div></div></div></div>",M.Timepicker=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"timepicker","M_Timepicker")}(cash),function(a){"use strict";var n={},e=function(){function o(n,t){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,o,n,t));return(e.el.M_CharacterCounter=e).options=a.extend({},o.defaults,t),e.isInvalid=!1,e.isValidLength=!1,e._setupCounter(),e._setupEventHandlers(),e}return _inherits(o,Component),_createClass(o,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),a(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){a(this.counterEl).remove()}},{key:"updateCounter",value:function(){var n=+this.$el.attr("data-length"),t=this.el.value.length;this.isValidLength=t<=n;var e=t;n&&(e+="/"+n,this._validateInput()),a(this.counterEl).html(e)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(n,t){return _get(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_CharacterCounter}},{key:"defaults",get:function(){return n}}]),o}();M.CharacterCounter=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"characterCounter","M_CharacterCounter")}(cash),function(d){"use strict";var n=Math.round,a=Math.abs,o={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},e=function(){function r(a,t){_classCallCheck(this,r);var o=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,a,t));return(o.el.M_Carousel=o).options=d.extend({},r.defaults,t),o.hasMultipleSlides=1<o.$el.find(".carousel-item").length,o.showIndicators=o.options.indicators&&o.hasMultipleSlides,o.noWrap=o.options.noWrap||!o.hasMultipleSlides,o.pressed=!1,o.dragged=!1,o.offset=o.target=0,o.images=[],o.itemWidth=o.$el.find(".carousel-item").first().innerWidth(),o.itemHeight=o.$el.find(".carousel-item").first().innerHeight(),o.dim=2*o.itemWidth+o.options.padding||1,o._autoScrollBound=o._autoScroll.bind(o),o._trackBound=o._track.bind(o),o.options.fullWidth&&(o.options.dist=0,o._setCarouselHeight(),o.showIndicators&&o.$el.find(".carousel-fixed-item").addClass("with-indicators")),o.$indicators=d("<ul class=\"indicators\"></ul>"),o.$el.find(".carousel-item").each(function(n,t){if(o.images.push(n),o.showIndicators){var e=d("<li class=\"indicator-item\"></li>");0===t&&e[0].classList.add("active"),o.$indicators.append(e)}}),o.showIndicators&&o.$el.append(o.$indicators),o.count=o.images.length,o.options.numVisible=Math.min(o.count,o.options.numVisible),o.xform="transform",["webkit","Moz","O","ms"].every(function(n){var t=n+"Transform";return void 0===document.body.style[t]||(o.xform=t,!1)}),o._setupEventHandlers(),o._scroll(o.offset),o}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),void 0!==window.ontouchstart&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(n){n.addEventListener("click",e._handleIndicatorClickBound)}));var n=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=n.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var e=this;void 0!==window.ontouchstart&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(n){n.removeEventListener("click",e._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(e){"mousedown"===e.type&&d(e.target).is("img")&&e.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(e),this.referenceY=this._ypos(e),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(o){var t,r,s;if(this.pressed)if(t=this._xpos(o),r=this._ypos(o),s=this.reference-t,30>a(this.referenceY-r)&&!this.verticalDragged)(2<s||-2>s)&&(this.dragged=!0,this.reference=t,this._scroll(this.offset+s));else{if(this.dragged)return o.preventDefault(),o.stopPropagation(),!1;this.verticalDragged=!0}return this.dragged?(o.preventDefault(),o.stopPropagation(),!1):void 0}},{key:"_handleCarouselRelease",value:function(e){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(10<this.velocity||-10>this.velocity)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=n(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):0>this.target&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(n){if(this.dragged)return n.preventDefault(),n.stopPropagation(),!1;if(!this.options.fullWidth){var t=d(n.target).closest(".carousel-item").index();0!=this._wrap(this.center)-t&&(n.preventDefault(),n.stopPropagation()),this._cycleTo(t)}}},{key:"_handleIndicatorClick",value:function(n){n.stopPropagation();var t=d(n.target).closest(".indicator-item");t.length&&this._cycleTo(t.index())}},{key:"_handleResize",value:function(){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(d){var p=this,t=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),e=t.find("img").first();if(e.length){if(e[0].complete){var n=e.height();if(0<n)this.$el.css("height",n+"px");else{var i=e[0].naturalWidth,o=e[0].naturalHeight,a=this.$el.width()/i*o;this.$el.css("height",a+"px")}}else e.one("load",function(e){p.$el.css("height",e.offsetHeight+"px")});}else if(!d){var r=t.height();this.$el.css("height",r+"px")}}},{key:"_xpos",value:function(e){return e.targetTouches&&1<=e.targetTouches.length?e.targetTouches[0].clientX:e.clientX}},{key:"_ypos",value:function(e){return e.targetTouches&&1<=e.targetTouches.length?e.targetTouches[0].clientY:e.clientY}},{key:"_wrap",value:function(e){return e>=this.count?e%this.count:0>e?this._wrap(this.count+e%this.count):e}},{key:"_track",value:function(){var a,o,r,s;o=(a=Date.now())-this.timestamp,this.timestamp=a,r=this.offset-this.frame,this.frame=this.offset,s=1e3*r/(1+o),this.velocity=.8*s+.2*this.velocity}},{key:"_autoScroll",value:function(){var n,a;this.amplitude&&(n=Date.now()-this.timestamp,2<(a=this.amplitude*Math.exp(-n/this.options.duration))||-2>a?(this._scroll(this.target-a),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(b){var t=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),null!=this.scrollingTimeout&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){t.$el.removeClass("scrolling")},this.options.duration);var e=this.center,c=1/this.options.numVisible,p,T,E,C,S,I,w,D,A,x;if(this.offset="number"==typeof b?b:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),C=2*(-(E=0>(T=this.offset-this.center*this.dim)?1:-1)*T)/this.dim,p=this.count>>1,this.options.fullWidth?(w="translateX(0)",x=1):(w="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",w+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",x=1-c*C),this.showIndicators){var N=this.center%this.count,v=this.$indicators.find(".indicator-item.active");v.index()!==N&&(v.removeClass("active"),this.$indicators.find(".indicator-item").eq(N)[0].classList.add("active"))}if(!this.noWrap||0<=this.center&&this.center<this.count){I=this.images[this._wrap(this.center)],d(I).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),I.classList.add("active"));var f=w+" translateX("+-T/2+"px) translateX("+E*this.options.shift*C*S+"px) translateZ("+this.options.dist*C+"px)";this._updateItemStyle(I,x,0,f)}for(S=1;S<=p;++S){if(this.options.fullWidth?(D=this.options.dist,A=S===p&&0>T?1-C:1):(D=this.options.dist*(2*S+C*E),A=1-c*(2*S+C*E)),!this.noWrap||this.center+S<this.count){I=this.images[this._wrap(this.center+S)];var m=w+" translateX("+(this.options.shift+(this.dim*S-T)/2)+"px) translateZ("+D+"px)";this._updateItemStyle(I,A,-S,m)}if(this.options.fullWidth?(D=this.options.dist,A=S===p&&0<T?1-C:1):(D=this.options.dist*(2*S-C*E),A=1-c*(2*S-C*E)),!this.noWrap||0<=this.center-S){I=this.images[this._wrap(this.center-S)];var g=w+" translateX("+(-this.options.shift+(-this.dim*S-T)/2)+"px) translateZ("+D+"px)";this._updateItemStyle(I,A,-S,g)}}if(!this.noWrap||0<=this.center&&this.center<this.count){I=this.images[this._wrap(this.center)];var _=w+" translateX("+-T/2+"px) translateX("+E*this.options.shift*C+"px) translateZ("+this.options.dist*C+"px)";this._updateItemStyle(I,x,0,_)}var y=this.$el.find(".carousel-item").eq(this._wrap(this.center));e!==this.center&&"function"==typeof this.options.onCycleTo&&this.options.onCycleTo.call(this,y[0],this.dragged),"function"==typeof this.oneTimeCallback&&(this.oneTimeCallback.call(this,y[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(a,t,e,o){a.style[this.xform]=o,a.style.zIndex=e,a.style.opacity=t,a.style.visibility="visible"}},{key:"_cycleTo",value:function(o,t){var e=this.center%this.count-o;this.noWrap||(0>e?a(e+this.count)<a(e)&&(e+=this.count):0<e&&a(e-this.count)<e&&(e-=this.count)),this.target=this.dim*n(this.offset/this.dim),0>e?this.target+=this.dim*a(e):0<e&&(this.target-=this.dim*e),"function"==typeof t&&(this.oneTimeCallback=t),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(n){(void 0===n||isNaN(n))&&(n=1);var a=this.center+n;if(a>=this.count||0>a){if(this.noWrap)return;a=this._wrap(a)}this._cycleTo(a)}},{key:"prev",value:function(n){(void 0===n||isNaN(n))&&(n=1);var a=this.center-n;if(a>=this.count||0>a){if(this.noWrap)return;a=this._wrap(a)}this._cycleTo(a)}},{key:"set",value:function(n,a){if((void 0===n||isNaN(n))&&(n=0),n>this.count||0>n){if(this.noWrap)return;n=this._wrap(n)}this._cycleTo(n,a)}}],[{key:"init",value:function(n,t){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Carousel}},{key:"defaults",get:function(){return o}}]),r}();M.Carousel=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"carousel","M_Carousel")}(cash),function(c){"use strict";var n={onOpen:void 0,onClose:void 0},e=function(){function a(n,t){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,a,n,t));return(e.el.M_TapTarget=e).options=c.extend({},a.defaults,t),e.isOpen=!1,e.$origin=c("#"+e.$el.attr("data-target")),e._setup(),e._calculatePositioning(),e._setupEventHandlers(),e}return _inherits(a,Component),_createClass(a,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var e=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=e.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(){this.open()}},{key:"_handleOriginClick",value:function(){this.close()}},{key:"_handleResize",value:function(){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(e){c(e.target).closest(".tap-target-wrapper").length||(this.close(),e.preventDefault(),e.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=c(this.wrapper).find(".tap-target-wave")[0],this.originEl=c(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],c(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(c(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var S="fixed"===this.$origin.css("position");if(!S)for(var I=this.$origin.parents(),e=0;e<I.length&&!(S="fixed"==c(I[e]).css("position"));e++);var w=this.$origin.outerWidth(),n=this.$origin.outerHeight(),s=S?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,o=S?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,a=window.innerWidth,r=window.innerHeight,l=a/2,h=r/2,d=o<=l,u=s<=h,p=h<s,v=.25*a<=o&&o<=.75*a,f=this.$el.outerWidth(),m=this.$el.outerHeight(),g=s+n/2-m/2,_=o+w/2-f/2,y=S?"fixed":"absolute",k=v?f:f/2+w,b=u?m/2:0,C=d&&!v?f/2-w:0,E=p?"bottom":"top",A=2*w,x=A,T={};T.top=u?g+"px":"",T.right=l<o?a-_-f+"px":"",T.bottom=p?r-g-m+"px":"",T.left=d?_+"px":"",T.position=y,c(this.wrapper).css(T),c(this.contentEl).css({width:k+"px",height:m/2+"px",top:b+"px",right:"0px",bottom:"0px",left:C+"px",padding:w+"px",verticalAlign:E}),c(this.waveEl).css({top:m/2-x/2+"px",left:f/2-A/2+"px",width:A+"px",height:x+"px"})}},{key:"open",value:function(){this.isOpen||("function"==typeof this.options.onOpen&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&("function"==typeof this.options.onClose&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(n,t){return _get(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_TapTarget}},{key:"defaults",get:function(){return n}}]),a}();M.TapTarget=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"tapTarget","M_TapTarget")}(cash),function(p){"use strict";var n={classes:"",dropdownOptions:{}},e=function(){function a(n,t){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,a,n,t));return e.$el.hasClass("browser-default")?_possibleConstructorReturn(e):((e.el.M_FormSelect=e).options=p.extend({},a.defaults,t),e.isMultiple=e.$el.prop("multiple"),e.el.tabIndex=-1,e._keysSelected={},e._valueDict={},e._setupDropdown(),e._setupEventHandlers(),e)}return _inherits(a,Component),_createClass(a,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var n=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),p(this.dropdownOptions).find("li:not(.optgroup)").each(function(e){e.addEventListener("click",n._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var n=this;p(this.dropdownOptions).find("li:not(.optgroup)").each(function(e){e.removeEventListener("click",n._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(){this._setValueToInput()}},{key:"_handleOptionClick",value:function(a){a.preventDefault();var t=p(a.target).closest("li")[0],e=t.id;if(!p(t).hasClass("disabled")&&!p(t).hasClass("optgroup")&&e.length){var o=!0;if(this.isMultiple){var r=p(this.dropdownOptions).find("li.disabled.selected");r.length&&(r.removeClass("selected"),r.find("input[type=\"checkbox\"]").prop("checked",!1),this._toggleEntryFromArray(r[0].id)),o=this._toggleEntryFromArray(e)}else p(this.dropdownOptions).find("li").removeClass("selected"),p(t).toggleClass("selected",o);p(this._valueDict[e].el).prop("selected")!==o&&(p(this._valueDict[e].el).prop("selected",o),this.$el.trigger("change"))}a.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var a=this;this.wrapper=document.createElement("div"),p(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(p(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),p(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(n){if(p(n).is("option")){var t;t=a.isMultiple?a._appendOptionWithIcon(a.$el,n,"multiple"):a._appendOptionWithIcon(a.$el,n),a._addOptionToValueDict(n,t)}else if(p(n).is("optgroup")){var o=p(n).children("option");p(a.dropdownOptions).append(p("<li class=\"optgroup\"><span>"+n.getAttribute("label")+"</span></li>")[0]),o.each(function(n){var t=a._appendOptionWithIcon(a.$el,n,"optgroup-option");a._addOptionToValueDict(n,t)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),p(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&p(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var n=p("<svg class=\"caret\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7 10l5 5 5-5z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>");if(this.$el.before(n[0]),!this.el.disabled){var t=p.extend({},this.options.dropdownOptions);t.onOpenEnd=function(){var t=p(a.dropdownOptions).find(".selected").first();if(t.length&&(M.keyDown=!0,a.dropdown.focusedIndex=t.index(),a.dropdown._focusFocusedItem(),M.keyDown=!1,a.dropdown.isScrollable)){var e=t[0].getBoundingClientRect().top-a.dropdownOptions.getBoundingClientRect().top;e-=a.dropdownOptions.clientHeight/2,a.dropdownOptions.scrollTop=e}},this.isMultiple&&(t.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,t)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(a,t){var e=Object.keys(this._valueDict).length,o=this.dropdownOptions.id+e,n={};t.id=o,n.el=a,n.optionEl=t,this._valueDict[o]=n}},{key:"_removeDropdown",value:function(){p(this.wrapper).find(".caret").remove(),p(this.input).remove(),p(this.dropdownOptions).remove(),p(this.wrapper).before(this.$el),p(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(d,t,e){var i=t.disabled?"disabled ":"",n="optgroup-option"===e?"optgroup-option ":"",s=this.isMultiple?"<label><input type=\"checkbox\""+i+"\"/><span>"+t.innerHTML+"</span></label>":t.innerHTML,o=p("<li></li>"),a=p("<span></span>");a.html(s),o.addClass(i+" "+n),o.append(a);var r=t.getAttribute("data-icon");if(r){var l=p("<img alt=\"\" src=\""+r+"\">");o.prepend(l)}return p(this.dropdownOptions).append(o[0]),o[0]}},{key:"_toggleEntryFromArray",value:function(n){var t=!this._keysSelected.hasOwnProperty(n),e=p(this._valueDict[n].optionEl);return t?this._keysSelected[n]=!0:delete this._keysSelected[n],e.toggleClass("selected",t),e.find("input[type=\"checkbox\"]").prop("checked",t),e.prop("selected",t),t}},{key:"_setValueToInput",value:function(){var n=[];if(this.$el.find("option").each(function(a){if(p(a).prop("selected")){var t=p(a).text();n.push(t)}}),!n.length){var e=this.$el.find("option:disabled").eq(0);e.length&&""===e[0].value&&n.push(e.text())}this.input.value=n.join(", ")}},{key:"_setSelectedStates",value:function(){for(var n in this._keysSelected={},this._valueDict){var t=this._valueDict[n],e=p(t.el).prop("selected");p(t.optionEl).find("input[type=\"checkbox\"]").prop("checked",e),e?(this._activateOption(p(this.dropdownOptions),p(t.optionEl)),this._keysSelected[n]=!0):p(t.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(n,t){t&&(this.isMultiple||n.find("li.selected").removeClass("selected"),p(t).addClass("selected"))}},{key:"getSelectedValues",value:function(){var n=[];for(var t in this._keysSelected)n.push(this._valueDict[t].el.value);return n}}],[{key:"init",value:function(n,t){return _get(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FormSelect}},{key:"defaults",get:function(){return n}}]),a}();M.FormSelect=e,M.jQueryLoaded&&M.initializeJqueryWrapper(e,"formSelect","M_FormSelect")}(cash),function(a,n){"use strict";var e={},o=function(){function o(n,t){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,o,n,t));return(e.el.M_Range=e).options=a.extend({},o.defaults,t),e._mousedown=!1,e._setupThumb(),e._setupEventHandlers(),e}return _inherits(o,Component),_createClass(o,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){a(this.value).html(this.$el.val()),a(this.thumb).hasClass("active")||this._showRangeBubble();var e=this._calcRangeOffset();a(this.thumb).addClass("active").css("left",e+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(n){if(a(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),a(this.thumb).hasClass("active")||this._showRangeBubble(),"input"!==n.type){var t=this._calcRangeOffset();a(this.thumb).addClass("active").css("left",t+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){a(this.thumb).hasClass("active")||this._showRangeBubble();var e=this._calcRangeOffset();a(this.thumb).addClass("active").css("left",e+"px"),a(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var e=7+parseInt(this.$el.css("padding-left"))+"px";a(this.thumb).hasClass("active")&&(n.remove(this.thumb),n({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:e,duration:100})),a(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),a(this.thumb).addClass("thumb"),a(this.value).addClass("value"),a(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){a(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var e=-7+parseInt(a(this.thumb).parent().css("padding-left"))+"px";n.remove(this.thumb),n({targets:this.thumb,height:30,width:30,top:-30,marginLeft:e,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var n=this.$el.width()-15,t=parseFloat(this.$el.attr("max"))||100,e=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-e)/(t-e)*n}}],[{key:"init",value:function(n,t){return _get(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,this,n,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Range}},{key:"defaults",get:function(){return e}}]),o}();M.Range=o,M.jQueryLoaded&&M.initializeJqueryWrapper(o,"range","M_Range"),o.init(a("input[type=range]"))}(cash,M.anime);var Pagina={iniciar(){try{var e=JSON.parse(document.cookie);e.escuro&&this.temaEscuro.ativar()}catch(t){}M.AutoInit(),$(".dropdown-trigger").dropdown({hover:!1,constrainWidth:!1}),this.elementos.pesquisarTextField(),this.elementos.temaCheckBox(),this.elementos.logoAnimation(),this.telas.telaDeCarregamento(),GerenteDeAutenticacao.iniciar()},modals:{criar:{abrir(e){if(e&&"null"!=e){var t=GerenciadorDePoemas.obterPoema(e),n=t.titulo,a=t.linhas.join("\n");this.cor=t.cor,this.categoriaId=t.categoriaId}else{var n=null,a=null;this.cor="white",this.categoriaId=null}this.alterarCategoria(),$("#criar-modal #categoria-botao").attr("onclick",`Pagina.modals.categoria.abrir(null)`),$("#poema-modal").modal("close"),$("#criar-modal #editar-titulo-poema").val(n),$("#criar-modal #editar-conteudo-poema").val(a),$("#criar-modal #cor-botao span").attr("class",`right ${this.cor} transparent-text circle`),$("#criar-modal #cor-botao").attr("onclick",`Pagina.modals.cor.abrir('null')`),Pagina.elementos.atualizarTextField(),$("#criar-modal form").attr("action",`javascript:Pagina.modals.criar.salvarPoema('${e}')`),$("#criar-modal").modal("open")},paste(){try{var e=JSON.parse(document.cookie);e.paste||Pagina.modals.clean.openPost("area-de-transferencia"),e.paste=!0,document.cookie=JSON.stringify(e)}catch(t){var e={};e.paste=!0,Pagina.modals.clean.openPost("area-de-transferencia"),document.cookie=JSON.stringify(e)}navigator.clipboard.readText().then(e=>{const t=e.split("\n");var n=null,a=null;console.log(t),1==t.length?n=t[0]:""==t[1]&&""!=t[0]?(n=t[0],a=t.slice(2,t.lengh).join("\n")):a=t.join("\n"),n&&$("#criar-modal #editar-titulo-poema").val(n),a&&$("#criar-modal #editar-conteudo-poema").val(a),Pagina.elementos.atualizarTextField()}).catch(e=>{"Read permission denied."==e.message?Pagina.mensagem("Permis\u0101o da area de transfer\xEAncia bloqueada","Pagina.modals.clean.openPost('area-de-transferencia-bloqueada')"):Pagina.mensagem("Erro desconhecido")})},alterarCategoria(e){if(e?this.categoriaId=e:e=this.categoriaId,e){const t=GerenciadorDePoemas.categorias[e];$("#criar-modal #categoria-botao span")[0].innerHTML=t}else $("#criar-modal #categoria-botao span")[0].innerHTML=""},alterarCor(e){this.cor=e,$("#criar-modal #cor-botao span").attr("class",`right ${e} transparent-text circle`),$("#cor-modal").modal("close")},async salvarPoema(e){"null"==e&&(e=null);const t=$("#criar-modal #editar-titulo-poema").val(),n=$("#criar-modal #editar-conteudo-poema").val().split("\n"),a=this.cor;await GerenciadorDePoemas.salvarPoema(e,t,n,a,this.categoriaId),Pagina.telas.atualizarLista("lista-de-poemas"),Pagina.telas.pesquisar(),"#Tela_Categorias"==Pagina.telas.atual&&null!=Pagina.telas.atualCategoriaId&&Pagina.telas.categoriaItem(Pagina.telas.atualCategoriaId),$("#criar-modal").modal("close"),$("#qtd_poemas")[0].innerHTML=GerenciadorDePoemas.poemas.length}},cor:{abrir(e){e||(e=null),this.configurarQuadroDeCores(e),$("#cor-modal").modal("open")},configurarQuadroDeCores(e){$("#cor-modal a").map(t=>{const n=$("#cor-modal a")[t].classList[1];"null"==e?$($("#cor-modal a")[t]).attr("onclick",`Pagina.modals.criar.alterarCor("${n}")`):$($("#cor-modal a")[t]).attr("onclick",`Pagina.modals.cor.alterarCor("${e}","${n}")`)})},async alterarCor(e,t){const n=GerenciadorDePoemas.obterPoema(e);await GerenciadorDePoemas.salvarPoema(e,n.titulo,n.linhas,t,n.categoriaId),$("#cor-modal").modal("close"),Pagina.modals.poema.alterarCor(t),Pagina.telas.pesquisar(),Pagina.telas.atualizarLista("lista-de-poemas"),"#Tela_Categorias"==Pagina.telas.atual&&null!=Pagina.telas.atualCategoriaId&&Pagina.telas.categoriaItem(Pagina.telas.atualCategoriaId)}},categoria:{ativado:!1,abrir(e){this.atualizarLista(),this.id=e,!0!=this.ativado&&(this.ativado=!0,this.select()),$("#categoria-modal").modal("open")},select(){this.ativado=!0,$("select").on("change",Pagina.modals.categoria.alterarCategoria)},atualizarLista(){const e=Object.keys(GerenciadorDePoemas.categorias),t="<option value=\"\" disabled selected>Selecione um:</option>"+e.map(e=>`<option value="${e}">${GerenciadorDePoemas.categorias[e]}</option>`).join("");$("select")[0].innerHTML=t},async alterarCategoria(){var e=$("select").val();const t=Pagina.modals.categoria.id;if(t){const n=GerenciadorDePoemas.obterPoema(t);await GerenciadorDePoemas.salvarPoema(t,n.titulo,n.linhas,n.cor,e),Pagina.modals.poema.alterarCategoria(e)}else Pagina.modals.criar.alterarCategoria(e);"#Tela_Categorias"==Pagina.telas.atual&&null!=Pagina.telas.atualCategoriaId&&Pagina.telas.categoriaItem(Pagina.telas.atualCategoriaId),$("#categoria-modal").modal("close")},criar:{abrir(e){e?$("#criar-categoria-modal #nome-categoria").val(GerenciadorDePoemas.categorias[e]):$("#criar-categoria-modal #nome-categoria").val(null),Pagina.elementos.atualizarTextField(),$("#criar-categoria-modal form").attr("action",`javascript:Pagina.modals.categoria.criar.salvar('${e}')`),$("#criar-categoria-modal").modal("open")},async salvar(e){"null"==e&&(e=null);var t=$("#criar-categoria-modal #nome-categoria").val();await GerenciadorDePoemas.criarCategoria(e,t),Pagina.modals.categoria.atualizarLista(),"#Tela_Categorias"==Pagina.telas.atual&&null==Pagina.telas.atualCategoriaId&&Pagina.telas.categoriaLista(),$("#criar-categoria-modal").modal("close")}}},deletar:{abrir(e){$("#poema-modal").modal("close"),$("#deletar-modal #deletar").attr("onclick",`Pagina.modals.deletar.deletar('${e}')`),$("#deletar-modal").modal("open")},async deletar(e){await GerenciadorDePoemas.deletarPoema(e),Pagina.telas.atualizarLista("lista-de-poemas"),Pagina.telas.pesquisar(),"#Tela_Categorias"==Pagina.telas.atual&&null!=Pagina.telas.atualCategoriaId&&Pagina.telas.categoriaItem(Pagina.telas.atualCategoriaId),$("#deletar-modal").modal("close"),$("#qtd_poemas")[0].innerHTML=GerenciadorDePoemas.poemas.length}},poema:{abrir(e){const t=GerenciadorDePoemas.obterPoema(e);this.alterarCor(t.cor),this.alterarTituloEConteudo(t.titulo,t.linhas),this.alterarBotao(e),this.alterarCategoria(t.categoriaId),$("#poema-modal").modal("open")},alterarCategoria(e){if(e){const t=GerenciadorDePoemas.categorias[e];$("#poema-modal #categoria-botao span")[0].innerHTML=t}else $("#poema-modal #categoria-botao span")[0].innerHTML=""},copy(e){const t=GerenciadorDePoemas.obterPoema(e),n=t.titulo+"\n\n"+t.linhas.join("\n");navigator.clipboard.writeText(n).then(()=>{Pagina.mensagem("Copiado")}).catch(e=>{"Read permission denied."==e.message?Pagina.mensagem("Permis\u0101o da area de transfer\xEAncia bloqueada","Pagina.modals.clean.openPost('area-de-transferencia-bloqueada')"):Pagina.mensagem("Erro desconhecido")})},alterarCor(e){var t="white";e||(e="white"),("white"==e||"yellow"==e||"amber"==e)&&(t="black"),$("#poema-modal").attr("class",`modal ${e} ${t}-text`),$("#poema-modal ul").attr("class",`${e} dropdown-content`),$("#poema-modal ul li").attr("class",`${e}`),$("#poema-modal ul li a").attr("class",`${e} waves-effect`),$("#poema-modal .modal-footer").attr("class",`modal-footer right-align ${e}`),$("#poema-modal .modal-footer a").removeClass(`white-text`),$("#poema-modal .modal-footer a").removeClass(`black-text`),$("#poema-modal .modal-footer a").addClass(`${t}-text`)},alterarTituloEConteudo(e,t){$("#poema-modal h5")[0].innerHTML=e;const n=t.join("<br>");$("#poema-modal p")[0].innerHTML=n},alterarBotao(e){$("#poema-modal #copy").attr("onclick",`Pagina.modals.poema.copy('${e}')`),$("#poema-modal #cor-botao").attr("onclick",`Pagina.modals.cor.abrir('${e}')`),$("#poema-modal #categoria-botao").attr("onclick",`Pagina.modals.categoria.abrir('${e}')`),$("#poema-modal #delete-botao").attr("onclick",`Pagina.modals.deletar.abrir('${e}')`),$("#poema-modal #editar-botao").attr("onclick",`Pagina.modals.criar.abrir('${e}')`)}},clean:{abrir(e){(e.titulo||e.conteudo)&&this.definirContent(e.titulo,e.conteudo),this.definirFooter(e.footer),$("#clean-modal").modal("open")},async openPost(e){Pagina.mensagem("Arguarde um pouco");var t=await GerenciadorDePoemas.db.doc(`/posts/${e}`).get();if(t.exists){var n={titulo:t.data().titulo};if(!t.data().html){var a=new showdown.Converter;n.conteudo=a.makeHtml(t.data().markdown)}else n.conteudo=t.data().html;this.abrir(n)}else Pagina.mensagem("Post n\u0101o encontrado")},definirContent(e,t){$("#clean-modal .modal-content h5")[0].innerHTML=e,$("#clean-modal .modal-content #conteudo")[0].innerHTML=t},definirFooter(e){$("#clean-modal .modal-footer")[0].innerHTML=e?e:"<a class=\"btn waves-effect green modal-close\">Cancelar</a>"}}},login(e){e?(e.photoURL&&$(".card-img img").attr("src",`${e.photoURL}?type=large`),$("#user_name")[0].innerHTML=e.displayName,$(".logado").show(),Pagina.telas.trocar(null,"#Tela_Painel")):($(".card-img img").attr("src",""),$("#user_name")[0].innerHTML="Seja Bem-vindo",$(".logado").hide(),Pagina.telas.trocar(null,"#Tela_Home"))},mensagem(e,t){if(t)var n=`<span>${e}</span><button class=" red-text btn-flat" onclick="${t}">Ajuda</button>`;else var n=e;M.Toast.dismissAll(),M.toast({html:n,displayLength:1500})},temaEscuro:{elementosDeFundo:["body",".sidenav",".sidenav .card",".sidenav .collapsible .collapsible-header","#criar-modal","#criar-modal .modal-footer","#deletar-modal","#deletar-modal .modal-footer","#cor-modal","#more2","#categoria-modal","#Tela_Categorias ul","#Tela_Categorias ul li","select","#criar-categoria-modal","#criar-categoria-modal .modal-footer","#clean-modal","#clean-modal .modal-footer"],elementosDeTexto:[".sem-poemas","#Tela_Busca #apresentacao",".input-field input",".sidenav","#criar-modal","#deletar-modal","textarea","#cor-modal","#more2 a","#criar-modal .modal-footer .btn-flat","#categoria-modal h5","#Tela_Categorias ul li","select","#criar-categoria-modal","#clean-modal","#clean-modal .modal-content"],ativado:!1,async iniciar(){await this.lerConfiguracaoDoUsuario()},async lerConfiguracaoDoUsuario(){const e=await GerenciadorDePoemas.db.doc(`usuarios/${firebase.auth().currentUser.uid}`).get();e.exists?e.data().temaEscuro?this.ativar():this.desativar():firebase.firestore().doc(`usuarios/${firebase.auth().currentUser.uid}`).set({temaEscuro:this.ativado})},salvarConfiguracaoDoUsuario(){firebase.firestore().doc(`usuarios/${firebase.auth().currentUser.uid}`).get().then(e=>{e.exists?firebase.firestore().doc(`usuarios/${firebase.auth().currentUser.uid}`).update({temaEscuro:Pagina.temaEscuro.ativado}):firebase.firestore().doc(`usuarios/${firebase.auth().currentUser.uid}`).set({temaEscuro:Pagina.temaEscuro.ativado})})},ativar(){$("#tema").prop("checked",!0);try{var e=JSON.parse(document.cookie)}catch(t){var e={}}e.escuro=!0,document.cookie=JSON.stringify(e),this.ativado=!0,this.corDeTexto="white",$(this.elementosDeFundo.join(",")).addClass("grey darken-4"),$(this.elementosDeTexto.join(",")).addClass("white-text"),"#Tela_Categorias"==Pagina.telas.atual&&null==Pagina.telas.atualCategoriaId&&Pagina.telas.categoriaLista()},desativar(){$("#tema").prop("checked",!1);try{var e=JSON.parse(document.cookie)}catch(t){var e={}}e.escuro=!1,document.cookie=JSON.stringify(e),this.ativado=!1,this.corDeTexto="black",$(this.elementosDeFundo.join(",")).removeClass("grey darken-4"),$(this.elementosDeTexto.join(",")).removeClass("white-text"),"#Tela_Categorias"==Pagina.telas.atual&&null==Pagina.telas.atualCategoriaId&&Pagina.telas.categoriaLista()},alterarTema(e){Pagina.mensagem("Alterando Tema"),e?this.ativar():this.desativar(),this.salvarConfiguracaoDoUsuario()}},elementos:{atualizarTextField(){M.updateTextFields(),M.textareaAutoResize($("#editar-conteudo-poema"))},logoAnimation(){setTimeout(()=>{$("#autoHide").animate({opacity:0},{duration:200,complete:function(){$("#autoHide").hide({duration:1e3})}})},2e3)},pesquisarTextField(){$("#pesquisar").on("keyup",()=>{Pagina.telas.pesquisar()})},temaCheckBox(){$("#tema").click(()=>{Pagina.temaEscuro.alterarTema($("#tema").prop("checked"))}),$("#notification").click(async()=>{"undefined"==typeof Notification?(Notificacoes.checkBox(!1),Pagina.mensagem("Seu Navegador n\xE3o suporta notifica\xE7\xF5es")):await Notificacoes.checkBoxChange()})}},eventos:{onresize(e){window.addEventListener("resize",e,!1)}},telas:{atual:"#Tela_Carregando",trocar(e,t){e||(e=this.atual),this.atual=t,$(e).css("display","none"),$(t).css("display","block"),"#Tela_Carregando"==e?Pagina.eventos.onresize(null):"#Tela_Busca"==e?($("#Tela_Busca .sem-poemas").hide(),$("#resultados-de-busca")[0].innerHTML=`<div id="apresentacao" class="${Pagina.temaEscuro.corDeTexto}-text container center-align"><i class="material-icons large">search</i><h4>Faa uma busca</h4></div>`,$("#pesquisar-tela .material-icons")[0].innerHTML="search",$("#pesquisar-tela").attr("onclick","Pagina.telas.trocar(null,'#Tela_Busca')")):"#Tela_Categorias"==e&&($(".sidenav-trigger").show(),$(".voltarButton").hide()),"#Tela_Carregando"==t?($(".mdl-layout-title")[0].innerHTML="Carregando",this.telaDeCarregamento(),Pagina.eventos.onresize(this.telaDeCarregamento)):"#Tela_Busca"==t?($("#pesquisar-tela .material-icons")[0].innerHTML="close",$("#pesquisar-tela").attr("onclick","Pagina.telas.trocar(null,'#Tela_Painel')")):"#Tela_Categorias"==t&&this.categoriaLista()},pesquisar(){const e=$("#pesquisar").val();if(""!=e&&"#Tela_Busca"==this.atual){const t=GerenciadorDePoemas.pesquisarPoema(e);this.atualizarLista("resultados-de-busca",t)}},telaDeCarregamento(){const e=($(document).height()-$(".nav-wrapper").height()-$(".preloader-wrapper").height())/2;$(".preloader-wrapper").css("margin-top",e);const t=($("body").width()-$(".preloader-wrapper").width())/2;$(".preloader-wrapper").css("left",t),Pagina.eventos.onresize(this.telaDeCarregamento)},atualizarLista(e,t){var n=t;"lista-de-poemas"==e&&(n=GerenciadorDePoemas.poemas);var a="";n.map(e=>{if(2<=e.linhas.length)var t=e.linhas[0]+"<br>"+e.linhas[1];else var t=e.linhas[0];var n="white";"white"!=e.cor&&"yellow"!=e.cor&&"amber"!=e.cor&&e.cor||(n="black"),e.cor||(e.cor="white"),a+=`<div class="col s12 m6"><div class="card ${e.cor} ${n}-text"><div class="card-content"><span class="card-title">${e.titulo}</span><p>${t}</p></div><div class="card-action right-align"><a class="btn btn-flat ${e.cor} ${n}-text waves-effect" onclick="Pagina.modals.poema.abrir('${e.id}')">Abrir</a></div></div></div>`});var o=$(`#${e}`)[0].parentNode,r=$(o).find(".sem-poemas");""==a?r.show():r.hide(),$(`#${e}`)[0].innerHTML=a},categoriaLista(){var e="black-text";Pagina.temaEscuro.ativado&&(e="grey darken-4 white-text"),$(".sidenav-trigger").show(),$(".voltarButton").hide(),this.atualCategoriaId=null,$("#lista-de-poemas-categoria").hide(),$("#lista-de-categorias").show(),$("#Tela_Categorias .sem-poemas").hide(),$("#Tela_Categorias .sem-categorias").hide();var t=`<ul class="collection with-header"><li class="collection-header ${e}"><h5 class="valign-wrapper"><span class="material-icons">format_list_bulleted</span>&emsp;Categorias</h5></li>`;const n=Object.keys(GerenciadorDePoemas.categorias);t+=n.map(t=>`<li class="collection-item waves-effect w-100 ${e} row remove-1">  <div onclick="Pagina.telas.categoriaItem('${t}')"  class="valign-wrapper col s8 remove-2"> <span class="tiny material-icons">brightness_1</span> &emsp;${GerenciadorDePoemas.categorias[t]}</div><div class=" col s4 right-align"><a class="${e}" onclick="Pagina.modals.categoria.criar.abrir('${t}')" ><i class="material-icons">edit</i></a>&emsp;<a class="${e}" onclick="Pagina.telas.categoriaDelete('${t}')" ><i class="material-icons">delete</i></a></div></li>`).join(""),t+="</ul>",$("#lista-de-categorias")[0].innerHTML=t},categoriaItem(e){$(".voltarButton").show(),$(".sidenav-trigger").hide(),this.atualCategoriaId=e;var t=GerenciadorDePoemas.pesquisarPoema(e,["categoriaId"]);$("#lista-de-categorias").hide(),$("#lista-de-poemas-categoria").show(),this.atualizarLista("lista-de-poemas-categoria",t)},async categoriaDelete(e){Pagina.mensagem("Deletando Categoria"),Pagina.mensagem("Deletar uma categoria n\xE3o deleta poemas!");var t=GerenciadorDePoemas.pesquisarPoema(e,["categoriaId"]);t.map(async e=>{await GerenciadorDePoemas.salvarPoema(e.id,e.titulo,e.linhas,e.cor,null,!0)}),await GerenciadorDePoemas.deletarCategoria(e),Pagina.mensagem("Categoria Deletada"),Pagina.telas.categoriaLista()}},urlSystem(){var e=new URL(window.location.href),t=e.searchParams.get("mode");if("clean_modal"==t){var n=e.searchParams.get("post");n&&this.modals.clean.openPost(n)}else if("poema"==t){var a=e.searchParams.get("id");a&&Pagina.modals.poema.abrir(a)}else if("criar"==t){var a=e.searchParams.get("id");Pagina.modals.criar.abrir(a)}else if("pwa"==t);}};function atiUndefined(e){for(var t=Object.keys(e),n=0;n<t.length;n++)null==e[t[n]]&&(e[t[n]]=null);return e}var GerenciadorDePoemas={async iniciar(){await this.carregarFirestore(),await this.lerDadosDaDatabase(),Pagina.telas.atualizarLista("lista-de-poemas")},async carregarFirestore(){await firebase.firestore().enablePersistence({synchronizeTabs:!0}),this.db=firebase.firestore()},obterPoema(e){return this.poemas.find(t=>t.id==e)},pesquisarPoema(e,t){function n(e,t){if("string"==typeof e){const n=e.toLowerCase(),a=t.toLowerCase();return-1!=n.indexOf(a)}return!1}t||(t=["titulo"]);//,"conteudo"]}
var a=this.poemas.map((a,o)=>{const r=t.map(t=>{if("conteudo"!=t){const o=a[t];return n(o,e)}else{const t=a.linhas.map(t=>n(t,e));return!!t.includes(!0)}});if(r.includes(!0))return o}).filter(e=>null!=e);const o=a.map(e=>this.poemas[e]);return o},async salvarPoema(e,t,n,a,o,r){var i;i=r?()=>{}:e=>{Pagina.mensagem(e)},e?(i("Atualizando poema"),this.db.collection(`usuarios/${firebase.auth().currentUser.uid}/poemas`).doc(e).set({titulo:t,linhas:n,cor:a,categoriaId:o}).then(()=>{i("Poema atualizado")}).catch(()=>{i("Erro ao atualizar poema")})):(i("Criando poema"),this.db.collection(`usuarios/${firebase.auth().currentUser.uid}/poemas`).add({titulo:t,linhas:n,cor:a,categoriaId:o}).then(()=>{i("Poema criado")}).catch(()=>{i("Erro ao criar poema")})),await this.lerDadosDaDatabase()},async deletarPoema(e){Pagina.mensagem("Aguarde deletando poema"),this.db.doc(`usuarios/${firebase.auth().currentUser.uid}/poemas/${e}`).delete().then(()=>{Pagina.mensagem("Poema deletado")}).catch(()=>{Pagina.mensagem("Erro ao deletar poema")}),await this.lerDadosDaDatabase()},async lerDadosDaDatabase(){this.poemas=[],this.categorias={};var e=(await this.db.collection(`usuarios/${firebase.auth().currentUser.uid}/poemas`).get()).docs;e.map(e=>{var t={titulo:e.data().titulo,linhas:e.data().linhas,cor:e.data().cor,categoriaId:e.data().categoriaId,id:e.id};t=atiUndefined(t),this.poemas.push(t)}),e=(await this.db.collection(`usuarios/${firebase.auth().currentUser.uid}/categorias`).get()).docs,e.map(e=>{this.categorias[e.id]=e.data().nome})},async criarCategoria(e,t){e?this.db.collection(`usuarios/${firebase.auth().currentUser.uid}/categorias`).doc(e).set({nome:t}):this.db.collection(`usuarios/${firebase.auth().currentUser.uid}/categorias`).add({nome:t}),await this.lerDadosDaDatabase()},async deletarCategoria(e){this.db.doc(`usuarios/${firebase.auth().currentUser.uid}/categorias/${e}`).delete(),await this.lerDadosDaDatabase()}},GerenteDeAutenticacao={iniciar(){this.autenticacao.iniciar()},autenticacao:{iniciar(){firebase.auth().onAuthStateChanged(async e=>{if(e&&!0!=this.deleteProcess){Pagina.mensagem(`Seja Bem Vindo ${e.displayName} ${String.fromCodePoint(128515)}`),await GerenciadorDePoemas.iniciar(),$("#qtd_poemas")[0].innerHTML=GerenciadorDePoemas.poemas.length,await Pagina.temaEscuro.iniciar();try{await Notificacoes.iniciar()}catch(t){}}Pagina.login(e),Pagina.urlSystem()})}},deletar(){var e=String.fromCodePoint,t=firebase.auth().currentUser;t.delete().then(function(){$(".sidenav").sidenav("close"),Pagina.mensagem(`Volte Sempre... tchau ${e(128075)}${e(128075)}`),Pagina.temaEscuro.desativar(),document.cookie=""}).catch(function(t){if("auth/requires-recent-login"==t.code){this.deleteProcess=!0,Pagina.mensagem("Voce vai ter que entrar no face novamente");var n=new firebase.auth.FacebookAuthProvider;firebase.auth().signInWithPopup(n).then(function(t){var n=t.credential;firebase.auth().currentUser.reauthenticateWithCredential(n).then(function(){firebase.auth().currentUser.delete(),$(".sidenav").sidenav("close"),Pagina.mensagem(`Volte Sempre... tchau ${e(128075)}${e(128075)}`),Pagina.temaEscuro.desativar(),document.cookie=""})})}})},entrar(){var e=new firebase.auth.FacebookAuthProvider;firebase.auth().signInWithRedirect(e)},sair(){var e=String.fromCodePoint;$(".sidenav").sidenav("close"),Pagina.mensagem(`Saindo... tchau ${e(128075)}${e(128075)}`),Pagina.temaEscuro.desativar(),firebase.auth().signOut()}},Notificacoes={async iniciar(){switch(Notification.permission){case"default":this.checkBox(!1);break;case"denied":this.checkBox(!1);break;case"granted":var e=await this.obterToken();(await this.compararToken(e))?this.checkBox(!0):this.checkBox(!1);}},async obterToken(){return await firebase.messaging().getToken().then(e=>e)},async compararToken(e){var t=(await GerenciadorDePoemas.db.doc(`usuarios/${firebase.auth().currentUser.uid}`).get()).data().fcmToken;return"undefined"==typeof t&&(t=[]),-1!=t.indexOf(e)},checkBox(e){$("#notification").prop("checked",e)},async desativar(e){var t=(await GerenciadorDePoemas.db.doc(`usuarios/${firebase.auth().currentUser.uid}`).get()).data().fcmToken;t.splice(t.indexOf(e)),GerenciadorDePoemas.db.doc(`usuarios/${firebase.auth().currentUser.uid}`).update({fcmToken:t})},enviarToken(e){e!=null&&GerenciadorDePoemas.db.doc(`usuarios/${firebase.auth().currentUser.uid}`).get().then(t=>{if(t.exists){var n=t.data().fcmToken;n?-1==n.indexOf(e)&&n.push(e):n=[e],GerenciadorDePoemas.db.doc(`usuarios/${firebase.auth().currentUser.uid}`).update({fcmToken:n})}else GerenciadorDePoemas.db.doc(`usuarios/${firebase.auth().currentUser.uid}`).set({fcmToken:[e]})})},async checkBoxChange(){var e=$("#notification").prop("checked");if(e)switch(Notification.permission){case"default":try{await this.requestPermission();var t=await this.obterToken();await this.enviarToken(t),Pagina.mensagem("Notifica\xE7\xF5es ativadas")}catch(e){"messaging/permission-blocked"==e.message&&Pagina.mensagem("Voc\xEA negou as notifica\xE7\xF5es",()=>{Pagina.modals.clean.openPost("permission-bloqued")}),this.checkBox(!1)}break;case"denied":Pagina.mensagem("A permiss\xE3o de notifica\xE7\xF5es est\xE1 bloqueada","Pagina.modals.clean.openPost('permission-bloqued')"),this.checkBox(!1);break;case"granted":var t=await this.obterToken();await this.enviarToken(t),Pagina.mensagem("Notifica\xE7\xF5es ativadas");}else{var t=await this.obterToken();await this.desativar(t),Pagina.mensagem("Notifica\xE7\xF5es Desativadas")}},async requestPermission(){return await Notification.requestPermission().catch(e=>{throw Error(e.code)})}};"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js",{scope:""}).then(e=>{firebase.messaging().useServiceWorker(e)}),$(document).ready(()=>{"undefined"!=typeof firebug&&firebug.win.hide(),Pagina.iniciar();const e=firebase.performance();trace=e.trace("App Data"),trace.incrementMetric("App Version",5)});